{"version":3,"sources":["coffee/app.coffee","coffee/classes.coffee","coffee/utils.coffee","coffee/modules/controllerMixins.coffee","coffee/modules/admin.coffee","coffee/modules/auth.coffee","coffee/modules/backlog.coffee","coffee/modules/base.coffee","coffee/modules/common.coffee","coffee/modules/detail.coffee","coffee/modules/epics.coffee","coffee/modules/events.coffee","coffee/modules/feedback.coffee","coffee/modules/integrations.coffee","coffee/modules/issues.coffee","coffee/modules/kanban.coffee","coffee/modules/plugins.coffee","coffee/modules/projects.coffee","coffee/modules/related-tasks.coffee","coffee/modules/resources.coffee","coffee/modules/search.coffee","coffee/modules/taskboard.coffee","coffee/modules/tasks.coffee","coffee/modules/team.coffee","coffee/modules/user-settings.coffee","coffee/modules/userstories.coffee","coffee/modules/wiki.coffee","coffee/modules/common/analytics.coffee","coffee/modules/common/bind-scope.coffee","coffee/modules/common/compile-html.directive.coffee","coffee/modules/common/components.coffee","coffee/modules/common/confirm.coffee","coffee/modules/common/custom-field-values.coffee","coffee/modules/common/emojis.coffee","coffee/modules/common/estimation.coffee","coffee/modules/common/filters.coffee","coffee/modules/common/lightboxes.coffee","coffee/modules/common/loader.coffee","coffee/modules/common/loading.coffee","coffee/modules/common/popovers.coffee","coffee/modules/common/raven-logger.coffee","coffee/modules/common/sections.coffee","coffee/modules/common/tag-manager.coffee","coffee/modules/common/tags.coffee","coffee/modules/backlog/lightboxes.coffee","coffee/modules/backlog/main.coffee","coffee/modules/backlog/sortable.coffee","coffee/modules/backlog/sprints.coffee","coffee/modules/taskboard/charts.coffee","coffee/modules/taskboard/lightboxes.coffee","coffee/modules/taskboard/main.coffee","coffee/modules/taskboard/sortable.coffee","coffee/modules/taskboard/taskboard-issues.coffee","coffee/modules/taskboard/taskboard-tasks.coffee","coffee/modules/kanban/kanban-usertories.coffee","coffee/modules/kanban/main.coffee","coffee/modules/kanban/sortable.coffee","coffee/modules/epics/detail.coffee","coffee/modules/issues/detail.coffee","coffee/modules/issues/lightboxes.coffee","coffee/modules/issues/list.coffee","coffee/modules/userstories/detail.coffee","coffee/modules/tasks/detail.coffee","coffee/modules/team/main.coffee","coffee/modules/wiki/main.coffee","coffee/modules/wiki/nav.coffee","coffee/modules/wiki/pages-list.coffee","coffee/modules/admin/lightboxes.coffee","coffee/modules/admin/memberships.coffee","coffee/modules/admin/nav.coffee","coffee/modules/admin/project-profile.coffee","coffee/modules/admin/project-values.coffee","coffee/modules/admin/roles.coffee","coffee/modules/admin/third-parties.coffee","coffee/modules/projects/lightboxes.coffee","coffee/modules/base/bind.coffee","coffee/modules/base/conf.coffee","coffee/modules/base/contrib.coffee","coffee/modules/base/filters.coffee","coffee/modules/base/http.coffee","coffee/modules/base/location.coffee","coffee/modules/base/model.coffee","coffee/modules/base/navurls.coffee","coffee/modules/base/repository.coffee","coffee/modules/base/storage.coffee","coffee/modules/base/urls.coffee","coffee/modules/resources/custom-attributes-values.coffee","coffee/modules/resources/custom-attributes.coffee","coffee/modules/resources/epics.coffee","coffee/modules/resources/history.coffee","coffee/modules/resources/invitations.coffee","coffee/modules/resources/issues.coffee","coffee/modules/resources/kanban.coffee","coffee/modules/resources/locales.coffee","coffee/modules/resources/mdrender.coffee","coffee/modules/resources/memberships.coffee","coffee/modules/resources/modules.coffee","coffee/modules/resources/notify-policies.coffee","coffee/modules/resources/projects.coffee","coffee/modules/resources/roles.coffee","coffee/modules/resources/search.coffee","coffee/modules/resources/sprints.coffee","coffee/modules/resources/tasks.coffee","coffee/modules/resources/user-project-settings.coffee","coffee/modules/resources/user-settings.coffee","coffee/modules/resources/users.coffee","coffee/modules/resources/userstories.coffee","coffee/modules/resources/webhooklogs.coffee","coffee/modules/resources/webhooks.coffee","coffee/modules/resources/wiki.coffee","coffee/modules/user-settings/change-password.coffee","coffee/modules/user-settings/lightboxes.coffee","coffee/modules/user-settings/live-notifications.coffee","coffee/modules/user-settings/main.coffee","coffee/modules/user-settings/nav.coffee","coffee/modules/user-settings/notifications.coffee","coffee/modules/user-settings/user-project-settings.coffee","coffee/modules/user-settings/web-notifications.coffee","modules/components/components.module.coffee","modules/discover/discover.module.coffee","modules/external-apps/external-apps.module.coffee","modules/history/history.module.coffee","modules/home/home.module.coffee","modules/navigation-bar/navigation-bar.module.coffee","modules/notifications/notifications.module.coffee","modules/profile/profile.module.coffee","modules/projects/projects.module.coffee","modules/resources/resources.module.coffee","modules/user-timeline/user-timeline.module.coffee","modules/utils/utils.module.coffee","modules/wiki/history/wiki-history.module.coffee","modules/components/assigned-inline/assigned-to-inline.directive.coffee","modules/components/assigned-inline/assigned-users-inline.directive.coffee","modules/components/attachment-link/attachment-link.directive.coffee","modules/components/attachment/attachment-gallery.directive.coffee","modules/components/attachment/attachment.controller.coffee","modules/components/attachment/attachment.directive.coffee","modules/components/attachments-drop/attachments-drop.directive.coffee","modules/components/attachments-full/attachments-full.controller.coffee","modules/components/attachments-full/attachments-full.directive.coffee","modules/components/attachments-full/attachments-full.service.coffee","modules/components/attachments-preview/attachments-preview.controller.coffee","modules/components/attachments-preview/attachments-preview.directive.coffee","modules/components/attachments-preview/attachments-preview.service.coffee","modules/components/attachments-simple/attachments-simple.controller.coffee","modules/components/attachments-simple/attachments-simple.directive.coffee","modules/components/attachments-sortable/attachments-sortable.directive.coffee","modules/components/auto-select/auto-select.directive.coffee","modules/components/avatar/avatar.directive.coffee","modules/components/belong-to-epics/belong-to-epics.directive.coffee","modules/components/bind-code.directive.coffee","modules/components/board-zoom/board-zoom.directive.coffee","modules/components/card-slideshow/card-slideshow.controller.coffee","modules/components/card-slideshow/card-slideshow.directive.coffee","modules/components/card/card.controller.coffee","modules/components/card/card.directive.coffee","modules/components/click-input-file.directive.coffee","modules/components/color-selector/color-selector.controller.coffee","modules/components/color-selector/color-selector.directive.coffee","modules/components/detail/header/detail-header.controller.coffee","modules/components/detail/header/detail-header.directive.coffee","modules/components/detail/nav/detail-nav.controller.coffee","modules/components/detail/nav/detail-nav.directive.coffee","modules/components/due-date/due-date-controller.coffee","modules/components/due-date/due-date-popover.directive.coffee","modules/components/due-date/due-date.directive.coffee","modules/components/file-change/file-change.directive.coffee","modules/components/filter/filter-remote.service.coffee","modules/components/filter/filter-slide-down.directive.coffee","modules/components/filter/filter.controller.coffee","modules/components/filter/filter.directive.coffee","modules/components/joy-ride/joy-ride.directive.coffee","modules/components/joy-ride/joy-ride.service.coffee","modules/components/kanban-board-zoom/kanban-board-zoom.directive.coffee","modules/components/lb-select-user/lb-select-user.directive.coffee","modules/components/live-announcement/live-announcement.directive.coffee","modules/components/live-announcement/live-announcement.service.coffee","modules/components/move-to-sprint/move-to-sprint-lb/move-to-sprint-lb.controller.coffee","modules/components/move-to-sprint/move-to-sprint-lb/move-to-sprint-lb.directive.coffee","modules/components/move-to-sprint/move-to-sprint.controller.coffee","modules/components/move-to-sprint/move-to-sprint.directive.coffee","modules/components/project-logo-big-src/project-logo-big-src.directive.coffee","modules/components/project-logo-small-src/project-logo-small-src.directive.coffee","modules/components/project-menu/project-menu.controller.coffee","modules/components/project-menu/project-menu.directive.coffee","modules/components/promote-to-us/promote-to-us.directive.coffee","modules/components/search-list/search-list.directive.coffee","modules/components/tags/tag-dropdown/tag-dropdown.directive.coffee","modules/components/tags/tag-line-common/tag-line-common.controller.coffee","modules/components/tags/tag-line-common/tag-line-common.directive.coffee","modules/components/tags/tag-line-detail/tag-line-detail.controller.coffee","modules/components/tags/tag-line-detail/tag-line-detail.directive.coffee","modules/components/tags/tag-line.service.coffee","modules/components/tags/tag/tag.directive.coffee","modules/components/taskboard-zoom/taskboard-zoom.directive.coffee","modules/components/tasks-sortable/tasks-sortable.directive.coffee","modules/components/terms-announcement/terms-announcement.directive.coffee","modules/components/terms-announcement/terms-announcement.service.coffee","modules/components/terms-of-service-and-privacy-policy-notice/terms-of-service-and-privacy-policy-notice.directive.coffee","modules/components/ticket-assigned/assigned-to.directive.coffee","modules/components/ticket-assigned/assigned-users.directive.coffee","modules/components/ticket-watchers/ticket-watchers.controller.coffee","modules/components/ticket-watchers/ticket-watchers.directive.coffee","modules/components/tips/tips.directive.coffee","modules/components/tribe-button/tribe-button.directive.coffee","modules/components/tribe-button/tribe-linked.directive.coffee","modules/components/vote-button/vote-button.controller.coffee","modules/components/vote-button/vote-button.directive.coffee","modules/components/wysiwyg/comment-edit-wysiwyg.directive.coffee","modules/components/wysiwyg/comment-wysiwyg.directive.coffee","modules/components/wysiwyg/custom-field-edit-wysiwyg.directive.coffee","modules/components/wysiwyg/item-wysiwyg.directive.coffee","modules/components/wysiwyg/wysiwyg-code-hightlighter.service.coffee","modules/components/wysiwyg/wysiwyg-code-lightbox/wysiwyg-code-lightbox.directive.coffee","modules/components/wysiwyg/wysiwyg-mention.service.coffee","modules/components/wysiwyg/wysiwyg.directive.coffee","modules/components/wysiwyg/wysiwyg.service.coffee","modules/discover/components/discover-home-order-by/discover-home-order-by.controller.coffee","modules/discover/components/discover-home-order-by/discover-home-order-by.directive.coffee","modules/discover/components/discover-search-bar/discover-search-bar.controller.coffee","modules/discover/components/discover-search-bar/discover-search-bar.directive.coffee","modules/discover/components/discover-search-list-header/discover-search-list-header.controller.coffee","modules/discover/components/discover-search-list-header/discover-search-list-header.directive.coffee","modules/discover/components/featured-projects/featured-projects.controller.coffee","modules/discover/components/featured-projects/featured-projects.directive.coffee","modules/discover/components/highlighted/highlighted.directive.coffee","modules/discover/components/most-active/most-active.controller.coffee","modules/discover/components/most-active/most-active.directive.coffee","modules/discover/components/most-liked/most-liked.controller.coffee","modules/discover/components/most-liked/most-liked.directive.coffee","modules/discover/discover-home/discover-home.controller.coffee","modules/discover/discover-search/discover-search.controller.coffee","modules/discover/discover-search/discover-search.directive.coffee","modules/discover/services/discover-projects.service.coffee","modules/epics/create-epic/create-epic.controller.coffee","modules/epics/create-epic/create-epic.directive.coffee","modules/epics/dashboard/epic-row/epic-row.controller.coffee","modules/epics/dashboard/epic-row/epic-row.directive.coffee","modules/epics/dashboard/epics-dashboard.controller.coffee","modules/epics/dashboard/epics-sortable/epics-sortable.directive.coffee","modules/epics/dashboard/epics-table/epics-table.controller.coffee","modules/epics/dashboard/epics-table/epics-table.directive.coffee","modules/epics/dashboard/story-row/story-row.controller.coffee","modules/epics/dashboard/story-row/story-row.directive.coffee","modules/epics/epics.service.coffee","modules/epics/related-userstories/related-userstories-controller.coffee","modules/epics/related-userstories/related-userstories-create/related-userstories-create.controller.coffee","modules/epics/related-userstories/related-userstories-create/related-userstories-create.directive.coffee","modules/epics/related-userstories/related-userstories-sortable/related-userstories-sortable.directive.coffee","modules/epics/related-userstories/related-userstories.directive.coffee","modules/epics/related-userstories/related-userstory-row/related-userstory-row.controller.coffee","modules/epics/related-userstories/related-userstory-row/related-userstory-row.directive.coffee","modules/external-apps/external-app.controller.coffee","modules/external-apps/external-app.service.coffee","modules/feedback/feedback.service.coffee","modules/history/activity/activity.service.coffee","modules/history/comments/comment.controller.coffee","modules/history/comments/comment.directive.coffee","modules/history/comments/comments.controller.coffee","modules/history/comments/comments.directive.coffee","modules/history/history-lightbox/comment-history-lightbox.controller.coffee","modules/history/history-lightbox/comment-history-lightbox.directive.coffee","modules/history/history-lightbox/history-entry.directive.coffee","modules/history/history-tabs/history-tabs.directive.coffee","modules/history/history.controller.coffee","modules/history/history.directive.coffee","modules/history/history/history-diff.controller.coffee","modules/history/history/history-diff.directive.coffee","modules/history/history/history.directive.coffee","modules/home/duties/duty.directive.coffee","modules/home/home.controller.coffee","modules/home/home.service.coffee","modules/home/projects/home-project-list.directive.coffee","modules/home/working-on/working-on.controller.coffee","modules/home/working-on/working-on.directive.coffee","modules/invite-members/invite-members-form/invite-members-form.controller.coffee","modules/invite-members/invite-members-form/invite-members-form.directive.coffee","modules/invite-members/lightbox-add-members.controller.coffee","modules/invite-members/lightbox-add-members.directive.coffee","modules/invite-members/suggest-add-members/suggest-add-members.controller.coffee","modules/invite-members/suggest-add-members/suggest-add-members.directive.coffee","modules/navigation-bar/dropdown-notifications/dropdown-notifications.directive.coffee","modules/navigation-bar/dropdown-project-list/dropdown-project-list.directive.coffee","modules/navigation-bar/dropdown-user/dropdown-user.directive.coffee","modules/navigation-bar/navigation-bar.directive.coffee","modules/navigation-bar/navigation-bar.service.coffee","modules/notifications/notifications-list/notifications-list.directive.coffee","modules/notifications/notifications.controller.coffee","modules/notifications/notifications.service.coffee","modules/profile/profile-bar/profile-bar.controller.coffee","modules/profile/profile-bar/profile-bar.directive.coffee","modules/profile/profile-contacts/profile-contacts.controller.coffee","modules/profile/profile-contacts/profile-contacts.directive.coffee","modules/profile/profile-favs/items/items.directive.coffee","modules/profile/profile-favs/profile-favs.controller.coffee","modules/profile/profile-favs/profile-favs.directive.coffee","modules/profile/profile-hints/profile-hints.controller.coffee","modules/profile/profile-hints/profile-hints.directive.coffee","modules/profile/profile-projects/profile-projects.controller.coffee","modules/profile/profile-projects/profile-projects.directive.coffee","modules/profile/profile-tab/profile-tab.directive.coffee","modules/profile/profile-tabs/profile-tabs.controller.coffee","modules/profile/profile-tabs/profile-tabs.directive.coffee","modules/profile/profile.controller.coffee","modules/projects/components/blocked-project-explanation.directive.coffee","modules/projects/components/contact-project-button/contact-project-button.controller.coffee","modules/projects/components/contact-project-button/contact-project-button.directive.coffee","modules/projects/components/lb-contact-project/lb-contact-project.controller.coffee","modules/projects/components/lb-contact-project/lb-contact-project.directive.coffee","modules/projects/components/like-project-button/like-project-button.controller.coffee","modules/projects/components/like-project-button/like-project-button.directive.coffee","modules/projects/components/like-project-button/like-project-button.service.coffee","modules/projects/components/sort-projects.directive.coffee","modules/projects/components/watch-project-button/watch-project-button.controller.coffee","modules/projects/components/watch-project-button/watch-project-button.directive.coffee","modules/projects/components/watch-project-button/watch-project-button.service.coffee","modules/projects/create/asana-import/asana-import-project-form/asana-import-project-form.controller.coffee","modules/projects/create/asana-import/asana-import-project-form/asana-import-project-form.directive.coffee","modules/projects/create/asana-import/asana-import.controller.coffee","modules/projects/create/asana-import/asana-import.directive.coffee","modules/projects/create/asana-import/asana-import.service.coffee","modules/projects/create/create-project-form/create-project-form.controller.coffee","modules/projects/create/create-project-form/create-project-form.directive.coffee","modules/projects/create/create-project-members-restrictions/create-project-members-restrictions.directive.coffee","modules/projects/create/create-project-restrictions/create-project-restrictions.directive.coffee","modules/projects/create/create-project.controller.coffee","modules/projects/create/duplicate/duplicate-project.controller.coffee","modules/projects/create/duplicate/duplicate-project.directive.coffee","modules/projects/create/github-import/github-import-project-form/github-import-project-form.controller.coffee","modules/projects/create/github-import/github-import-project-form/github-import-project-form.directive.coffee","modules/projects/create/github-import/github-import.controller.coffee","modules/projects/create/github-import/github-import.directive.coffee","modules/projects/create/github-import/github-import.service.coffee","modules/projects/create/import-project-members/import-project-members.controller.coffee","modules/projects/create/import-project-members/import-project-members.directive.coffee","modules/projects/create/import-project-selector/import-project-selector.controller.coffee","modules/projects/create/import-project-selector/import-project-selector.directive.coffee","modules/projects/create/import-taiga/import-taiga.controller.coffee","modules/projects/create/import-taiga/import-taiga.directive.coffee","modules/projects/create/import/import-project-error-lb.directive.coffee","modules/projects/create/import/import-project.controller.coffee","modules/projects/create/import/import-project.directive.coffee","modules/projects/create/import/import-project.service.coffee","modules/projects/create/invite-members/invite-members.controller.coffee","modules/projects/create/invite-members/invite-members.directive.coffee","modules/projects/create/invite-members/single-member/single-member.directive.coffee","modules/projects/create/jira-import/jira-import-project-form/jira-import-project-form.controller.coffee","modules/projects/create/jira-import/jira-import-project-form/jira-import-project-form.directive.coffee","modules/projects/create/jira-import/jira-import.controller.coffee","modules/projects/create/jira-import/jira-import.directive.coffee","modules/projects/create/jira-import/jira-import.service.coffee","modules/projects/create/select-import-user-lightbox/select-import-user-lightbox.controller.coffee","modules/projects/create/select-import-user-lightbox/select-import-user-lightbox.directive.coffee","modules/projects/create/trello-import/trello-import-project-form/trello-import-project-form.controller.coffee","modules/projects/create/trello-import/trello-import-project-form/trello-import-project-form.directive.coffee","modules/projects/create/trello-import/trello-import.controller.coffee","modules/projects/create/trello-import/trello-import.directive.coffee","modules/projects/create/trello-import/trello-import.service.coffee","modules/projects/create/warning-user-import-lightbox/warning-user-import-lightbox.directive.coffee","modules/projects/listing/projects-listing.controller.coffee","modules/projects/project/project-router.controller.coffee","modules/projects/project/project.controller.coffee","modules/projects/projects.service.coffee","modules/projects/transfer/cant-own-project-explanation.directive.coffee","modules/projects/transfer/transfer-project.controller.coffee","modules/projects/transfer/transfer-project.directive.coffee","modules/resources/attachments-resource.service.coffee","modules/resources/epics-resource.service.coffee","modules/resources/external-apps-resource.service.coffee","modules/resources/history-resource.service.coffee","modules/resources/importers-resource.service.coffee","modules/resources/issues-resource.service.coffee","modules/resources/projects-resource.service.coffee","modules/resources/resources.coffee","modules/resources/stats-resource.service.coffee","modules/resources/tasks-resource.service.coffee","modules/resources/user-resource.service.coffee","modules/resources/users-resource.service.coffee","modules/resources/userstories-resource.service.coffee","modules/services/app-meta.service.coffee","modules/services/attachments.service.coffee","modules/services/avatar.service.coffee","modules/services/check-permissions.service.coffee","modules/services/current-user.service.coffee","modules/services/error-handling.service.coffee","modules/services/lightbox-factory.service.coffee","modules/services/paginate-response.service.coffee","modules/services/project-logo.service.coffee","modules/services/project.service.coffee","modules/services/theme.service.coffee","modules/services/user-activity.service.coffee","modules/services/user-list.service.coffee","modules/services/user.service.coffee","modules/services/xhrError.service.coffee","modules/user-timeline/user-timeline-attachment/user-timeline-attachment.directive.coffee","modules/user-timeline/user-timeline-item/user-timeline-item-title.service.coffee","modules/user-timeline/user-timeline-item/user-timeline-item-type.service.coffee","modules/user-timeline/user-timeline-item/user-timeline-item.directive.coffee","modules/user-timeline/user-timeline-pagination-sequence/user-timeline-pagination-sequence.service.coffee","modules/user-timeline/user-timeline/user-timeline.controller.coffee","modules/user-timeline/user-timeline/user-timeline.directive.coffee","modules/user-timeline/user-timeline/user-timeline.service.coffee","modules/utils/isolate-click.directive.coffee","modules/wiki/history/wiki-history-diff.directive.coffee","modules/wiki/history/wiki-history-entry.directive.coffee","modules/wiki/history/wiki-history.controller.coffee","modules/wiki/history/wiki-history.directive.coffee"],"names":[],"mappings":"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","file":"../app.js","sourcesContent":["###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: app.coffee\n###\n\n@taiga = taiga = {}\ntaiga.emojis = window.emojis\n@.taigaContribPlugins = @.taigaContribPlugins or window.taigaContribPlugins or []\n\n# Generic function for generate hash from a arbitrary length\n# collection of parameters.\ntaiga.generateHash = (components=[]) ->\n    components = _.map(components, (x) -> JSON.stringify(x))\n    return hex_sha1(components.join(\":\"))\n\n\ntaiga.generateUniqueSessionIdentifier = ->\n    date = (new Date()).getTime()\n    randomNumber = Math.floor(Math.random() * 0x9000000)\n    return taiga.generateHash([date, randomNumber])\n\n\ntaiga.sessionId = taiga.generateUniqueSessionIdentifier()\n\n\nconfigure = ($routeProvider, $locationProvider, $httpProvider, $provide, $tgEventsProvider,\n             $compileProvider, $translateProvider, $translatePartialLoaderProvider, $animateProvider) ->\n\n    $animateProvider.classNameFilter(/^(?:(?!ng-animate-disabled).)*$/)\n\n    # wait until the translation is ready to resolve the page\n    originalWhen = $routeProvider.when\n\n    $routeProvider.when = (path, route) ->\n        route.resolve || (route.resolve = {})\n        angular.extend(route.resolve, {\n            languageLoad: [\"$q\", \"$translate\", ($q, $translate) ->\n                deferred = $q.defer()\n\n                $translate().then () -> deferred.resolve()\n\n                return deferred.promise\n            ],\n            projectLoaded: [\"$q\", \"tgProjectService\", \"$route\", ($q, projectService, $route) ->\n                deferred = $q.defer()\n\n                projectService.setSection($route.current.$$route?.section)\n\n                if $route.current.params.pslug\n                    projectService.setProjectBySlug($route.current.params.pslug).then(deferred.resolve)\n                else\n                    projectService.cleanProject()\n                    deferred.resolve()\n\n                return deferred.promise\n            ]\n        })\n\n        return originalWhen.call($routeProvider, path, route)\n\n    # Home\n    $routeProvider.when(\"/\",\n        {\n            templateUrl: \"home/home.html\",\n            controller: \"Home\",\n            controllerAs: \"vm\"\n            loader: true,\n            title: \"HOME.PAGE_TITLE\",\n            loader: true,\n            description: \"HOME.PAGE_DESCRIPTION\",\n            joyride: \"dashboard\"\n        }\n    )\n\n    # Discover\n    $routeProvider.when(\"/discover\",\n        {\n            templateUrl: \"discover/discover-home/discover-home.html\",\n            controller: \"DiscoverHome\",\n            controllerAs: \"vm\",\n            title: \"PROJECT.NAVIGATION.DISCOVER\",\n            loader: true\n        }\n    )\n\n    $routeProvider.when(\"/discover/search\",\n        {\n            templateUrl: \"discover/discover-search/discover-search.html\",\n            title: \"PROJECT.NAVIGATION.DISCOVER\",\n            loader: true,\n            controller: \"DiscoverSearch\",\n            controllerAs: \"vm\",\n            reloadOnSearch: false\n        }\n    )\n\n    # My Projects\n    $routeProvider.when(\"/projects/\",\n        {\n            templateUrl: \"projects/listing/projects-listing.html\",\n            access: {\n                requiresLogin: true\n            },\n            title: \"PROJECTS.PAGE_TITLE\",\n            description: \"PROJECTS.PAGE_DESCRIPTION\",\n            loader: true,\n            controller: \"ProjectsListing\",\n            controllerAs: \"vm\"\n        }\n    )\n\n    # Project\n    $routeProvider.when(\"/project/new\",\n        {\n            title: \"PROJECT.CREATE.TITLE\",\n            templateUrl: \"projects/create/create-project.html\",\n            loader: true,\n            controller: \"CreateProjectCtrl\",\n            controllerAs: \"vm\"\n        }\n    )\n\n    # Project - scrum\n    $routeProvider.when(\"/project/new/scrum\",\n        {\n            title: \"PROJECT.CREATE.TITLE\",\n            template: \"<tg-create-project-form type=\\\"scrum\\\"></tg-create-project-form>\",\n            loader: true\n        }\n    )\n\n    # Project - kanban\n    $routeProvider.when(\"/project/new/kanban\",\n        {\n            title: \"PROJECT.CREATE.TITLE\",\n            template: \"<tg-create-project-form type=\\\"kanban\\\"></tg-create-project-form>\",\n            loader: true\n        }\n    )\n\n    # Project - duplicate\n    $routeProvider.when(\"/project/new/duplicate\",\n        {\n            title: \"PROJECT.CREATE.TITLE\",\n            template: \"<tg-duplicate-project></tg-duplicate-project>\",\n            loader: true\n        }\n    )\n\n    # Project - import\n    $routeProvider.when(\"/project/new/import/:platform?\",\n        {\n            title: \"PROJECT.CREATE.TITLE\",\n            template: \"<tg-import-project></tg-import-project>\",\n            loader: true\n        }\n    )\n\n    # Project\n    $routeProvider.when(\"/project/:pslug/\",\n        {\n            template: \"\",\n            loader: true,\n            controller: \"ProjectRouter\"\n        }\n    )\n\n    # Project\n    $routeProvider.when(\"/project/:pslug/timeline\",\n        {\n            templateUrl: \"projects/project/project.html\",\n            loader: true,\n            controller: \"Project\",\n            controllerAs: \"vm\"\n            section: \"project-timeline\"\n        }\n    )\n\n    # Project ref detail\n    $routeProvider.when(\"/project/:pslug/t/:ref\",\n        {\n            loader: true,\n            controller: \"DetailController\",\n            template: \"\"\n        }\n    )\n\n    $routeProvider.when(\"/project/:pslug/search\",\n        {\n            templateUrl: \"search/search.html\",\n            reloadOnSearch: false,\n            section: \"search\",\n            loader: true\n        }\n    )\n\n    # Epics\n    $routeProvider.when(\"/project/:pslug/epics\",\n    {\n            section: \"epics\",\n            templateUrl: \"epics/dashboard/epics-dashboard.html\",\n            loader: true,\n            controller: \"EpicsDashboardCtrl\",\n            controllerAs: \"vm\"\n        }\n    )\n\n    $routeProvider.when(\"/project/:pslug/epic/:epicref\",\n        {\n            templateUrl: \"epic/epic-detail.html\",\n            loader: true,\n            section: \"epics\"\n        }\n    )\n\n    $routeProvider.when(\"/project/:pslug/backlog\",\n        {\n            templateUrl: \"backlog/backlog.html\",\n            loader: true,\n            section: \"backlog\",\n            joyride: \"backlog\"\n        }\n    )\n\n    $routeProvider.when(\"/project/:pslug/kanban\",\n        {\n            templateUrl: \"kanban/kanban.html\",\n            loader: true,\n            section: \"kanban\",\n            joyride: \"kanban\"\n        }\n    )\n\n    # Milestone\n    $routeProvider.when(\"/project/:pslug/taskboard/:sslug\",\n        {\n            templateUrl: \"taskboard/taskboard.html\",\n            loader: true,\n            section: \"backlog\"\n        }\n    )\n\n    # User stories\n    $routeProvider.when(\"/project/:pslug/us/:usref\",\n        {\n            templateUrl: \"us/us-detail.html\",\n            loader: true,\n            section: \"backlog-kanban\"\n        }\n    )\n\n    # Tasks\n    $routeProvider.when(\"/project/:pslug/task/:taskref\",\n        {\n            templateUrl: \"task/task-detail.html\",\n            loader: true,\n            section: \"backlog-kanban\"\n        }\n    )\n\n    # Wiki\n    $routeProvider.when(\"/project/:pslug/wiki\",\n        {redirectTo: (params) -> \"/project/#{params.pslug}/wiki/home\"}, )\n    $routeProvider.when(\"/project/:pslug/wiki-list\",\n        {\n            templateUrl: \"wiki/wiki-list.html\",\n            loader: true,\n            section: \"wiki\"\n        }\n    )\n    $routeProvider.when(\"/project/:pslug/wiki/:slug\",\n        {\n            templateUrl: \"wiki/wiki.html\",\n            loader: true,\n            section: \"wiki\"\n        }\n    )\n\n    # Team\n    $routeProvider.when(\"/project/:pslug/team\",\n        {\n            templateUrl: \"team/team.html\",\n            loader: true,\n            section: \"team\"\n        }\n    )\n\n    # Issues\n    $routeProvider.when(\"/project/:pslug/issues\",\n        {\n            templateUrl: \"issue/issues.html\",\n            loader: true,\n            section: \"issues\"\n        }\n    )\n    $routeProvider.when(\"/project/:pslug/issue/:issueref\",\n        {\n            templateUrl: \"issue/issues-detail.html\",\n            loader: true,\n            section: \"issues\"\n        }\n    )\n\n    # Admin - Project Profile\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/details\",\n        {\n            templateUrl: \"admin/admin-project-profile.html\",\n            section: \"admin\"\n        }\n    )\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/default-values\",\n        {\n            templateUrl: \"admin/admin-project-default-values.html\",\n            section: \"admin\"\n        }\n    )\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/modules\",\n        {\n            templateUrl: \"admin/admin-project-modules.html\",\n            section: \"admin\"\n        }\n    )\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/export\",\n        {\n            templateUrl: \"admin/admin-project-export.html\",\n            section: \"admin\"\n        }\n    )\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/reports\",\n        {\n            templateUrl: \"admin/admin-project-reports.html\",\n            section: \"admin\"\n        }\n    )\n\n    $routeProvider.when(\"/project/:pslug/admin/project-values/status\",\n        {\n            templateUrl: \"admin/admin-project-values-status.html\",\n            section: \"admin\"\n        }\n    )\n    $routeProvider.when(\"/project/:pslug/admin/project-values/points\",\n        {\n            templateUrl: \"admin/admin-project-values-points.html\",\n            section: \"admin\"\n        }\n    )\n    $routeProvider.when(\"/project/:pslug/admin/project-values/priorities\",\n        {\n            templateUrl: \"admin/admin-project-values-priorities.html\",\n            section: \"admin\"\n        }\n    )\n    $routeProvider.when(\"/project/:pslug/admin/project-values/severities\",\n        {\n            templateUrl: \"admin/admin-project-values-severities.html\",\n            section: \"admin\"\n        }\n    )\n    $routeProvider.when(\"/project/:pslug/admin/project-values/types\",\n        {\n            templateUrl: \"admin/admin-project-values-types.html\",\n            section: \"admin\"\n        }\n    )\n    $routeProvider.when(\"/project/:pslug/admin/project-values/custom-fields\",\n        {\n            templateUrl: \"admin/admin-project-values-custom-fields.html\",\n            section: \"admin\"\n        }\n    )\n    $routeProvider.when(\"/project/:pslug/admin/project-values/tags\",\n        {\n            templateUrl: \"admin/admin-project-values-tags.html\",\n            section: \"admin\"\n        }\n    )\n    $routeProvider.when(\"/project/:pslug/admin/project-values/due-dates\",\n        {\n            templateUrl: \"admin/admin-project-values-due-dates.html\",\n            section: \"admin\"\n        }\n    )\n    $routeProvider.when(\"/project/:pslug/admin/memberships\",\n        {\n            templateUrl: \"admin/admin-memberships.html\",\n            section: \"admin\"\n        }\n    )\n    # Admin - Roles\n    $routeProvider.when(\"/project/:pslug/admin/roles\",\n        {\n            templateUrl: \"admin/admin-roles.html\",\n            section: \"admin\"\n        }\n    )\n\n    # Admin - Third Parties\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/webhooks\",\n        {\n            templateUrl: \"admin/admin-third-parties-webhooks.html\",\n            section: \"admin\"\n        }\n    )\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/github\",\n        {\n            templateUrl: \"admin/admin-third-parties-github.html\",\n            section: \"admin\"\n        }\n    )\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/gitlab\",\n        {\n            templateUrl: \"admin/admin-third-parties-gitlab.html\",\n            section: \"admin\"\n        }\n    )\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/bitbucket\",\n        {\n            templateUrl: \"admin/admin-third-parties-bitbucket.html\",\n            section: \"admin\"\n        }\n    )\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/gogs\",\n        {\n            templateUrl: \"admin/admin-third-parties-gogs.html\",\n            section: \"admin\"\n        }\n    )\n    # Admin - Contrib Plugins\n    $routeProvider.when(\"/project/:pslug/admin/contrib/:plugin\",\n        {templateUrl: \"contrib/main.html\"})\n\n    # Transfer project\n    $routeProvider.when(\"/project/:pslug/transfer/:token\",\n        {\n            templateUrl: \"projects/transfer/transfer-page.html\",\n            loader: true,\n            controller: \"Project\",\n            controllerAs: \"vm\"\n        }\n    )\n\n    # User settings\n    $routeProvider.when(\"/user-settings/user-profile\",\n        {templateUrl: \"user/user-profile.html\"})\n    $routeProvider.when(\"/user-settings/user-change-password\",\n        {templateUrl: \"user/user-change-password.html\"})\n    $routeProvider.when(\"/user-settings/user-project-settings\",\n        {templateUrl: \"user/user-project-settings.html\"})\n    $routeProvider.when(\"/user-settings/mail-notifications\",\n        {templateUrl: \"user/mail-notifications.html\"})\n    $routeProvider.when(\"/user-settings/live-notifications\",\n        {templateUrl: \"user/live-notifications.html\"})\n    $routeProvider.when(\"/user-settings/web-notifications\",\n        {templateUrl: \"user/web-notifications.html\"})\n    $routeProvider.when(\"/change-email/:email_token\",\n        {templateUrl: \"user/change-email.html\"})\n    $routeProvider.when(\"/cancel-account/:cancel_token\",\n        {templateUrl: \"user/cancel-account.html\"})\n\n    # UserSettings - Contrib Plugins\n    $routeProvider.when(\"/user-settings/contrib/:plugin\",\n        {templateUrl: \"contrib/user-settings.html\"})\n\n    # User profile\n    $routeProvider.when(\"/profile\",\n        {\n            templateUrl: \"profile/profile.html\",\n            loader: true,\n            access: {\n                requiresLogin: true\n            },\n            controller: \"Profile\",\n            controllerAs: \"vm\"\n        }\n    )\n\n    # Notifications\n    $routeProvider.when(\"/notifications\",\n        {\n            templateUrl: \"notifications/notifications.html\",\n            loader: true,\n            access: {\n                requiresLogin: true\n            },\n            controller: \"Notifications\",\n            controllerAs: \"vm\"\n        }\n    )\n\n    $routeProvider.when(\"/profile/:slug\",\n        {\n            templateUrl: \"profile/profile.html\",\n            loader: true,\n            controller: \"Profile\",\n            controllerAs: \"vm\"\n        }\n    )\n\n    # Auth\n    $routeProvider.when(\"/login\",\n        {\n            templateUrl: \"auth/login.html\",\n            title: \"LOGIN.PAGE_TITLE\",\n            description: \"LOGIN.PAGE_DESCRIPTION\",\n            disableHeader: true,\n            controller: \"LoginPage\",\n        }\n    )\n    $routeProvider.when(\"/register\",\n        {\n            templateUrl: \"auth/register.html\",\n            title: \"REGISTER.PAGE_TITLE\",\n            description: \"REGISTER.PAGE_DESCRIPTION\",\n            disableHeader: true\n        }\n    )\n    $routeProvider.when(\"/forgot-password\",\n        {\n            templateUrl: \"auth/forgot-password.html\",\n            title: \"FORGOT_PASSWORD.PAGE_TITLE\",\n            description: \"FORGOT_PASSWORD.PAGE_DESCRIPTION\",\n            disableHeader: true\n        }\n    )\n    $routeProvider.when(\"/change-password/:token\",\n        {\n            templateUrl: \"auth/change-password-from-recovery.html\",\n            title: \"CHANGE_PASSWORD.PAGE_TITLE\",\n            description: \"CHANGE_PASSWORD.PAGE_TITLE\",\n            disableHeader: true\n        }\n    )\n    $routeProvider.when(\"/invitation/:token\",\n        {\n            templateUrl: \"auth/invitation.html\",\n            title: \"INVITATION.PAGE_TITLE\",\n            description: \"INVITATION.PAGE_DESCRIPTION\",\n            disableHeader: true\n        }\n    )\n    $routeProvider.when(\"/external-apps\",\n        {\n            templateUrl: \"external-apps/external-app.html\",\n            title: \"EXTERNAL_APP.PAGE_TITLE\",\n            description: \"EXTERNAL_APP.PAGE_DESCRIPTION\",\n            controller: \"ExternalApp\",\n            controllerAs: \"vm\",\n            disableHeader: true,\n            mobileViewport: true\n        }\n    )\n\n    # Errors/Exceptions\n    $routeProvider.when(\"/blocked-project/:pslug/\",\n        {\n            templateUrl: \"projects/project/blocked-project.html\",\n            loader: true,\n        }\n    )\n    $routeProvider.when(\"/error\",\n        {templateUrl: \"error/error.html\"})\n    $routeProvider.when(\"/not-found\",\n        {templateUrl: \"error/not-found.html\"})\n    $routeProvider.when(\"/permission-denied\",\n        {templateUrl: \"error/permission-denied.html\"})\n\n    $routeProvider.otherwise({templateUrl: \"error/not-found.html\"})\n    $locationProvider.html5Mode({enabled: true, requireBase: false})\n\n    defaultHeaders = {\n        \"Content-Type\": \"application/json\"\n        \"Accept-Language\": window.taigaConfig.defaultLanguage || \"en\"\n        \"X-Session-Id\": taiga.sessionId\n    }\n\n    $httpProvider.defaults.headers.delete = defaultHeaders\n    $httpProvider.defaults.headers.patch = defaultHeaders\n    $httpProvider.defaults.headers.post = defaultHeaders\n    $httpProvider.defaults.headers.put = defaultHeaders\n    $httpProvider.defaults.headers.get = {\n        \"X-Session-Id\": taiga.sessionId\n    }\n\n    $httpProvider.useApplyAsync(true)\n\n    $tgEventsProvider.setSessionId(taiga.sessionId)\n\n    # Add next param when user try to access to a secction need auth permissions.\n    authHttpIntercept = ($q, $location, $navUrls, $lightboxService, errorHandlingService) ->\n        httpResponseError = (response) ->\n            if response.status == 0 || (response.status == -1 && !response.config.cancelable)\n                $lightboxService.closeAll()\n\n                errorHandlingService.error()\n            else if response.status == 401 and $location.url().indexOf('/login') == -1\n                nextUrl = $location.url()\n                search = $location.search()\n\n                if search.force_next\n                    $location.url($navUrls.resolve(\"login\"))\n                        .search(\"force_next\", search.force_next)\n                else\n                    $location.url($navUrls.resolve(\"login\"))\n                        .search({\n                            \"unauthorized\": true\n                            \"next\": nextUrl\n                        })\n\n            return $q.reject(response)\n\n        return {\n            responseError: httpResponseError\n        }\n\n    $provide.factory(\"authHttpIntercept\", [\"$q\", \"$location\", \"$tgNavUrls\", \"lightboxService\",\n                                           \"tgErrorHandlingService\", authHttpIntercept])\n\n    $httpProvider.interceptors.push(\"authHttpIntercept\")\n\n\n    loaderIntercept = ($q, loaderService) ->\n        return {\n            request: (config) ->\n                loaderService.logRequest()\n\n                return config\n\n            requestError: (rejection) ->\n                loaderService.logResponse()\n\n                return $q.reject(rejection)\n\n            responseError: (rejection) ->\n                loaderService.logResponse()\n\n                return $q.reject(rejection)\n\n            response: (response) ->\n                loaderService.logResponse()\n\n                return response\n        }\n\n\n    $provide.factory(\"loaderIntercept\", [\"$q\", \"tgLoader\", loaderIntercept])\n\n    $httpProvider.interceptors.push(\"loaderIntercept\")\n\n    # If there is an error in the version throw a notify error.\n    # IMPROVEiMENT: Move this version error handler to USs, issues and tasks repository\n    versionCheckHttpIntercept = ($q) ->\n        httpResponseError = (response) ->\n            if response.status == 400 && response.data.version\n                # HACK: to prevent circular dependencies with [$tgConfirm, $translate]\n                $injector = angular.element(\"body\").injector()\n                $injector.invoke([\"$tgConfirm\", \"$translate\", ($confirm, $translate) =>\n                    versionErrorMsg = $translate.instant(\"ERROR.VERSION_ERROR\")\n                    $confirm.notify(\"error\", versionErrorMsg, null, 10000)\n                ])\n\n            return $q.reject(response)\n\n        return {responseError: httpResponseError}\n\n    $provide.factory(\"versionCheckHttpIntercept\", [\"$q\", versionCheckHttpIntercept])\n\n    $httpProvider.interceptors.push(\"versionCheckHttpIntercept\")\n\n\n    blockingIntercept = ($q, errorHandlingService) ->\n        # API calls can return blocked elements and in that situation the user will be redirected\n        # to the blocked project page\n        # This can happens in two scenarios\n        # - An ok response containing a blocked_code in the data\n        # - An error reponse when updating/creating/deleting including a 451 error code\n        redirectToBlockedPage = ->\n            errorHandlingService.block()\n\n        responseOk = (response) ->\n            if response.data.blocked_code\n                redirectToBlockedPage()\n\n            return response\n\n        responseError = (response) ->\n            if response.status == 451\n                redirectToBlockedPage()\n\n            return $q.reject(response)\n\n        return {\n            response: responseOk\n            responseError: responseError\n        }\n\n    $provide.factory(\"blockingIntercept\", [\"$q\", \"tgErrorHandlingService\", blockingIntercept])\n\n    $httpProvider.interceptors.push(\"blockingIntercept\")\n\n\n    $compileProvider.debugInfoEnabled(window.taigaConfig.debugInfo || false)\n\n    if localStorage.userInfo\n        userInfo = JSON.parse(localStorage.userInfo)\n\n    # i18n\n    preferedLangCode = userInfo?.lang || window.taigaConfig.defaultLanguage || \"en\"\n\n    $translatePartialLoaderProvider.addPart('taiga')\n    $translateProvider\n        .useLoader('$translatePartialLoader', {\n            urlTemplate: '/' + window._version + '/locales/{part}/locale-{lang}.json'\n        })\n        .useSanitizeValueStrategy('escapeParameters')\n        .addInterpolation('$translateMessageFormatInterpolation')\n        .preferredLanguage(preferedLangCode)\n\n    $translateProvider.fallbackLanguage(preferedLangCode)\n\n    # decoratos plugins\n    decorators = window.getDecorators()\n\n    _.each decorators, (decorator) ->\n        $provide.decorator decorator.provider, decorator.decorator\n\n\ni18nInit = (lang, $translate) ->\n    # i18n - moment.js\n    moment.locale(lang)\n\n    if (lang != 'en') # en is the default, the file doesn't exist\n        ljs.load \"/#{window._version}/locales/moment-locales/\" + lang + \".js\"\n\n    # i18n - checksley.js\n    messages = {\n        defaultMessage: $translate.instant(\"COMMON.FORM_ERRORS.DEFAULT_MESSAGE\")\n        type: {\n            email: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_EMAIL\")\n            url: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_URL\")\n            urlstrict: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_URLSTRICT\")\n            number: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_NUMBER\")\n            digits: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_DIGITS\")\n            dateIso: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_DATEISO\")\n            alphanum: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_ALPHANUM\")\n            phone: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_PHONE\")\n        }\n        notnull: $translate.instant(\"COMMON.FORM_ERRORS.NOTNULL\")\n        notblank: $translate.instant(\"COMMON.FORM_ERRORS.NOT_BLANK\")\n        required: $translate.instant(\"COMMON.FORM_ERRORS.REQUIRED\")\n        regexp: $translate.instant(\"COMMON.FORM_ERRORS.REGEXP\")\n        min: $translate.instant(\"COMMON.FORM_ERRORS.MIN\")\n        max: $translate.instant(\"COMMON.FORM_ERRORS.MAX\")\n        range: $translate.instant(\"COMMON.FORM_ERRORS.RANGE\")\n        minlength: $translate.instant(\"COMMON.FORM_ERRORS.MIN_LENGTH\")\n        maxlength: $translate.instant(\"COMMON.FORM_ERRORS.MAX_LENGTH\")\n        rangelength: $translate.instant(\"COMMON.FORM_ERRORS.RANGE_LENGTH\")\n        mincheck: $translate.instant(\"COMMON.FORM_ERRORS.MIN_CHECK\")\n        maxcheck: $translate.instant(\"COMMON.FORM_ERRORS.MAX_CHECK\")\n        rangecheck: $translate.instant(\"COMMON.FORM_ERRORS.RANGE_CHECK\")\n        equalto: $translate.instant(\"COMMON.FORM_ERRORS.EQUAL_TO\")\n        linewidth: $translate.instant(\"COMMON.FORM_ERRORS.LINEWIDTH\") # Extra validator\n        pikaday: $translate.instant(\"COMMON.FORM_ERRORS.PIKADAY\") # Extra validator\n    }\n    checksley.updateMessages('default', messages)\n\n\ninit = ($log, $rootscope, $auth, $events, $analytics, $tagManager, $translate, $location, $navUrls, appMetaService,\n        loaderService, navigationBarService, errorHandlingService, lightboxService, $tgConfig,\n        projectService) ->\n    $log.debug(\"Initialize application\")\n\n    $rootscope.$on '$translatePartialLoaderStructureChanged', () ->\n        $translate.refresh()\n\n    # Checksley - Extra validators\n    validators = {\n        linewidth: (val, width) ->\n            lines = taiga.nl2br(val).split(\"<br />\")\n\n            valid = _.every lines, (line) ->\n                line.length < width\n\n            return valid\n        pikaday: (val) ->\n            prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\")\n            return moment(val, prettyDate).isValid()\n        url: (val) ->\n            re_weburl = new RegExp(\n                \"^\" +\n                    # protocol identifier\n                    \"(?:(?:https?|ftp)://)\" +\n                    # user:pass authentication\n                    \"(?:\\\\S+(?::\\\\S*)?@)?\" +\n                    \"(?:\" +\n                    # IP address exclusion\n                    # private & local networks\n                    \"(?!(?:10|127)(?:\\\\.\\\\d{1,3}){3})\" +\n                    \"(?!(?:169\\\\.254|192\\\\.168)(?:\\\\.\\\\d{1,3}){2})\" +\n                    \"(?!172\\\\.(?:1[6-9]|2\\\\d|3[0-1])(?:\\\\.\\\\d{1,3}){2})\" +\n                    # IP address dotted notation octets\n                    # excludes loopback network 0.0.0.0\n                    # excludes reserved space >= 224.0.0.0\n                    # excludes network & broacast addresses\n                    # (first & last IP address of each class)\n                    \"(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])\" +\n                    \"(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}\" +\n                    \"(?:\\\\.(?:[1-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))\" +\n                \"|\" +\n                    # host name\n                    \"(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)\" +\n                    # domain name\n                    \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*\" +\n                    # TLD identifier\n                    \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,}))\" +\n                    # TLD may end with dot\n                    \"\\\\.?\" +\n                    \")\" +\n                    # port number\n                    \"(?::\\\\d{2,5})?\" +\n                    # resource path\n                    \"(?:[/?#]\\\\S*)?\" +\n                \"$\", \"i\"\n            )\n            return re_weburl.test(val)\n\n    }\n    checksley.updateValidators(validators)\n\n    # Taiga Plugins\n    $rootscope.contribPlugins = @.taigaContribPlugins\n    $rootscope.adminPlugins = _.filter(@.taigaContribPlugins, {\"type\": \"admin\"})\n    $rootscope.userSettingsPlugins = _.filter(@.taigaContribPlugins, {\"type\": \"userSettings\"})\n\n    $rootscope.$on \"$translateChangeEnd\", (e, ctx) ->\n        lang = ctx.language\n        i18nInit(lang, $translate)\n        # RTL\n        rtlLanguages = $tgConfig.get(\"rtlLanguages\", [])\n        $rootscope.isRTL = rtlLanguages.indexOf(lang) > -1\n\n    # bluebird\n    Promise.setScheduler (cb) ->\n        $rootscope.$evalAsync(cb)\n\n    $events.setupConnection()\n\n    # Load user\n    if $auth.isAuthenticated()\n        user = $auth.getUser()\n        $auth.showTerms()\n\n    # Analytics\n    $analytics.initialize()\n\n    # Tag Manager\n    $tagManager.initialize()\n\n    # Initialize error handling service when location change start\n    $rootscope.$on '$locationChangeStart',  (event) ->\n        errorHandlingService.init()\n\n        if lightboxService.getLightboxOpen().length\n            event.preventDefault();\n\n            lightboxService.closeAll()\n\n    # On the first page load the loader is painted in `$routeChangeSuccess`\n    # because we need to hide the tg-navigation-bar.\n    # In the other cases the loader is in `$routeChangeSuccess`\n    # because `location.noreload` prevent to execute this event.\n    un = $rootscope.$on '$routeChangeStart',  (event, next) ->\n        if next.loader\n            loaderService.start(true)\n\n        un()\n\n    $rootscope.$on '$routeChangeSuccess', (event, next) ->\n        if projectService.project?.get('blocked_code')\n            errorHandlingService.block()\n\n        if next.loader\n            loaderService.start(true)\n\n        if next.access && next.access.requiresLogin\n            if !$auth.isAuthenticated()\n                $location.path($navUrls.resolve(\"login\"))\n\n        if next.title or next.description\n            title = $translate.instant(next.title or \"\")\n            description = $translate.instant(next.description or \"\")\n            appMetaService.setAll(title, description)\n\n        if next.mobileViewport\n            appMetaService.addMobileViewport()\n        else\n            appMetaService.removeMobileViewport()\n\n        if next.disableHeader\n            navigationBarService.disableHeader()\n        else\n            navigationBarService.enableHeader()\n\n# Config for infinite scroll\nangular.module('infinite-scroll').value('THROTTLE_MILLISECONDS', 500)\n\n# Load modules\npluginsWithModule = _.filter(@.taigaContribPlugins, (plugin) -> plugin.module)\npluginsModules = _.map(pluginsWithModule, (plugin) -> plugin.module)\n\nmodules = [\n    # Main Global Modules\n    \"taigaBase\",\n    \"taigaCommon\",\n    \"taigaResources\",\n    \"taigaResources2\",\n    \"taigaAuth\",\n    \"taigaEvents\",\n\n    # Specific Modules\n    \"taigaHome\",\n    \"taigaNavigationBar\",\n    \"taigaProjects\",\n    \"taigaRelatedTasks\",\n    \"taigaBacklog\",\n    \"taigaTaskboard\",\n    \"taigaKanban\",\n    \"taigaIssues\",\n    \"taigaUserStories\",\n    \"taigaTasks\",\n    \"taigaTeam\",\n    \"taigaWiki\",\n    \"taigaSearch\",\n    \"taigaAdmin\",\n    \"taigaProject\",\n    \"taigaUserSettings\",\n    \"taigaFeedback\",\n    \"taigaPlugins\",\n    \"taigaIntegrations\",\n    \"taigaComponents\",\n\n    # new modules\n    \"taigaProfile\",\n    \"taigaHome\",\n    \"taigaUserTimeline\",\n    \"taigaExternalApps\",\n    \"taigaDiscover\",\n    \"taigaHistory\",\n    \"taigaNotifications\",\n    \"taigaWikiHistory\",\n    \"taigaEpics\",\n    \"taigaUtils\"\n\n    # template cache\n    \"templates\",\n\n    # Vendor modules\n    \"ngSanitize\",\n    \"ngRoute\",\n    \"ngAnimate\",\n    \"ngAria\",\n    \"pascalprecht.translate\",\n    \"infinite-scroll\",\n    \"tgRepeat\"\n].concat(pluginsModules)\n\n# Main module definition\nmodule = angular.module(\"taiga\", modules)\n\nmodule.config([\n    \"$routeProvider\",\n    \"$locationProvider\",\n    \"$httpProvider\",\n    \"$provide\",\n    \"$tgEventsProvider\",\n    \"$compileProvider\",\n    \"$translateProvider\",\n    \"$translatePartialLoaderProvider\",\n    \"$animateProvider\",\n    configure\n])\n\nmodule.run([\n    \"$log\",\n    \"$rootScope\",\n    \"$tgAuth\",\n    \"$tgEvents\",\n    \"$tgAnalytics\",\n    \"$tgTagManager\",\n    \"$translate\",\n    \"$tgLocation\",\n    \"$tgNavUrls\",\n    \"tgAppMetaService\",\n    \"tgLoader\",\n    \"tgNavigationBarService\",\n    \"tgErrorHandlingService\",\n    \"lightboxService\",\n    \"$tgConfig\",\n    \"tgProjectService\",\n    init\n])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: classes.coffee\n###\n\nclass TaigaBase\nclass TaigaService extends TaigaBase\nclass TaigaController extends TaigaBase\n    onInitialDataError: (xhr) =>\n        if xhr\n            if xhr.status == 404\n                @errorHandlingService.notfound()\n            else if xhr.status == 403\n                @errorHandlingService.permissionDenied()\n\n        return @q.reject(xhr)\n\n@.taiga.Base = TaigaBase\n@.taiga.Service = TaigaService\n@.taiga.Controller = TaigaController\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: utils.coffee\n###\n\naddClass = (el, className) ->\n    if (el.classList)\n        el.classList.add(className)\n    else\n        el.className += ' ' + className\n\n\nnl2br = (str) =>\n    breakTag = '<br />'\n    return (str + '').replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, '$1' + breakTag + '$2')\n\n\nbindMethods = (object) =>\n    dependencies = _.keys(object)\n\n    methods = []\n\n    _.forIn object, (value, key) =>\n        if key not in dependencies && _.isFunction(value)\n            methods.push(key)\n\n    _.bindAll(object, methods)\n\n\nbindOnce = (scope, attr, continuation) =>\n    val = scope.$eval(attr)\n    if val != undefined\n        return continuation(val)\n\n    delBind = null\n    delBind = scope.$watch attr, (val) ->\n        return if val is undefined\n        continuation(val)\n        delBind() if delBind\n\n\nmixOf = (base, mixins...) ->\n    class Mixed extends base\n\n    for mixin in mixins by -1 #earlier mixins override later ones\n        for name, method of mixin::\n            Mixed::[name] = method\n    Mixed\n\n\ntrim = (data, char) ->\n    return _.trim(data, char)\n\n\nslugify = (data) ->\n    return data.toString().toLowerCase().trim()\n        .replace(/\\s+/g, '-')\n        .replace(/&/g, '-and-')\n        .replace(/[^\\w\\-]+/g, '')\n        .replace(/\\-\\-+/g, '-')\n\n\nunslugify = (data) ->\n    if data\n        return _.capitalize(data.replace(/-/g, ' '))\n    return data\n\n\ntoggleText = (element, texts) ->\n    nextTextPosition = element.data('nextTextPosition')\n    nextTextPosition = 0 if not nextTextPosition? or nextTextPosition >= texts.length\n    text = texts[nextTextPosition]\n    element.data('nextTextPosition', nextTextPosition + 1)\n    element.text(text)\n\n\ngroupBy = (coll, pred) ->\n    result = {}\n    for item in coll\n        result[pred(item)] = item\n\n    return result\n\n\ntimeout = (wait, continuation) ->\n    return window.setTimeout(continuation, wait)\n\n\ncancelTimeout = (timeoutVar) ->\n    window.clearTimeout(timeoutVar)\n\n\nscopeDefer = (scope, func) ->\n    _.defer =>\n        scope.$apply(func)\n\n\ntoString = (value) ->\n    if _.isNumber(value)\n        return value + \"\"\n    else if _.isString(value)\n        return value\n    else if _.isPlainObject(value)\n        return JSON.stringify(value)\n    else if _.isUndefined(value)\n        return \"\"\n    return value.toString()\n\n\njoinStr = (str, coll) ->\n    return coll.join(str)\n\n\ndebounce = (wait, func) ->\n    return _.debounce(func, wait, {leading: true, trailing: false})\n\n\ndebounceLeading = (wait, func) ->\n    return _.debounce(func, wait, {leading: false, trailing: true})\n\n\nstartswith = (str1, str2) ->\n    return _.startsWith(str1, str2)\n\n\ntruncate = (str, maxLength, suffix=\"...\") ->\n    return str if (typeof str != \"string\") and not (str instanceof String)\n\n    out = str.slice(0)\n\n    if out.length > maxLength\n        out = out.substring(0, maxLength + 1)\n        out = out.substring(0, Math.min(out.length, out.lastIndexOf(\" \")))\n        out = out + suffix\n\n    return out\n\n\nsizeFormat = (input, precision=1) ->\n    if isNaN(parseFloat(input)) or not isFinite(input)\n        return \"-\"\n\n    if input == 0\n        return \"0 bytes\"\n\n    units = [\"bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\"]\n    number = Math.floor(Math.log(input) / Math.log(1024))\n    if number > 5\n        number = 5\n    size = (input / Math.pow(1024, number)).toFixed(precision)\n    return  \"#{size} #{units[number]}\"\n\n\nstripTags = (str, exception) ->\n    if exception\n        pattern = new RegExp('<(?!' + exception + '\\s*\\/?)[^>]+>', 'gi')\n        return String(str).replace(pattern, '')\n    else\n        return String(str).replace(/<\\/?[^>]+>/g, '')\n\n\nreplaceTags = (str, tags, replace) ->\n    # open tag\n    pattern = new RegExp('<(' + tags + ')>', 'gi')\n    str = str.replace(pattern, '<' + replace + '>')\n\n    # close tag\n    pattern = new RegExp('<\\/(' + tags + ')>', 'gi')\n    str = str.replace(pattern, '</' + replace + '>')\n\n    return str\n\n\ndefineImmutableProperty = (obj, name, fn) =>\n    Object.defineProperty obj, name, {\n        get: () =>\n            if !_.isFunction(fn)\n                throw \"defineImmutableProperty third param must be a function\"\n\n            fn_result = fn()\n            if fn_result && _.isObject(fn_result)\n                if fn_result.size == undefined\n                    throw \"defineImmutableProperty must return immutable data\"\n\n            return fn_result\n    }\n\n\n_.mixin\n    removeKeys: (obj, keys) ->\n        _.chain([keys]).flatten().reduce(\n            (obj, key) ->\n                delete obj[key]; obj\n            , obj).value()\n\n    cartesianProduct: ->\n        _.reduceRight(\n            arguments, (a,b) ->\n                _.flatten(_.map(a, (x) -> _.map b, (y) -> [y].concat(x)), true)\n            , [ [] ])\n\n\nisImage = (name) ->\n    return name.match(/\\.(jpe?g|png|gif|gifv|webm|svg|psd)/i) != null\n\nisEmail = (name) ->\n    return name? and name.match(/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/) != null\n\nisPdf = (name) ->\n    return name.match(/\\.(pdf)/i) != null\n\n\npatch = (oldImmutable, newImmutable) ->\n    pathObj = {}\n\n    newImmutable.forEach (newValue, key) ->\n        if newValue != oldImmutable.get(key)\n            if newValue.toJS\n                pathObj[key] = newValue.toJS()\n            else\n                pathObj[key] = newValue\n\n    return pathObj\n\nDEFAULT_COLOR_LIST = [\n    '#fce94f', '#edd400', '#c4a000', '#8ae234', '#73d216', '#4e9a06', '#d3d7cf',\n    '#fcaf3e', '#f57900', '#ce5c00', '#729fcf', '#3465a4', '#204a87', '#888a85',\n    '#ad7fa8', '#75507b', '#5c3566', '#ef2929', '#cc0000', '#a40000', '#222222'\n]\n\ngetRandomDefaultColor = () ->\n    return _.sample(DEFAULT_COLOR_LIST)\n\ngetDefaulColorList = () ->\n    return _.clone(DEFAULT_COLOR_LIST)\n\ngetMatches = (string, regex, index) ->\n    index || (index = 1)\n    matches = []\n    match = null\n\n    while match = regex.exec(string)\n        if index == -1\n            matches.push(match)\n        else\n            matches.push(match[index])\n\n    return matches\n\nrandomInt = (start, end) ->\n    interval = end - start\n    return start + Math.floor(Math.random()*(interval+1))\n\nnormalizeString = (string) ->\n    normalizedString = string\n    normalizedString = normalizedString.replace(\"Á\", \"A\").replace(\"Ä\", \"A\").replace(\"À\", \"A\")\n    normalizedString = normalizedString.replace(\"É\", \"E\").replace(\"Ë\", \"E\").replace(\"È\", \"E\")\n    normalizedString = normalizedString.replace(\"Í\", \"I\").replace(\"Ï\", \"I\").replace(\"Ì\", \"I\")\n    normalizedString = normalizedString.replace(\"Ó\", \"O\").replace(\"Ö\", \"O\").replace(\"Ò\", \"O\")\n    normalizedString = normalizedString.replace(\"Ú\", \"U\").replace(\"Ü\", \"U\").replace(\"Ù\", \"U\")\n    return normalizedString\n\ntaiga = @.taiga\ntaiga.addClass = addClass\ntaiga.nl2br = nl2br\ntaiga.bindMethods = bindMethods\ntaiga.bindOnce = bindOnce\ntaiga.mixOf = mixOf\ntaiga.trim = trim\ntaiga.slugify = slugify\ntaiga.unslugify = unslugify\ntaiga.toggleText = toggleText\ntaiga.groupBy = groupBy\ntaiga.timeout = timeout\ntaiga.cancelTimeout = cancelTimeout\ntaiga.scopeDefer = scopeDefer\ntaiga.toString = toString\ntaiga.joinStr = joinStr\ntaiga.truncate = truncate\ntaiga.debounce = debounce\ntaiga.debounceLeading = debounceLeading\ntaiga.startswith = startswith\ntaiga.sizeFormat = sizeFormat\ntaiga.stripTags = stripTags\ntaiga.replaceTags = replaceTags\ntaiga.defineImmutableProperty = defineImmutableProperty\ntaiga.isImage = isImage\ntaiga.isEmail = isEmail\ntaiga.isPdf = isPdf\ntaiga.patch = patch\ntaiga.getRandomDefaultColor = getRandomDefaultColor\ntaiga.getDefaulColorList = getDefaulColorList\ntaiga.getMatches = getMatches\ntaiga.randomInt = randomInt\ntaiga.normalizeString = normalizeString\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/controllerMixins.coffee\n###\n\ntaiga = @.taiga\n\ngroupBy = @.taiga.groupBy\njoinStr = @.taiga.joinStr\ntrim = @.taiga.trim\ntoString = @.taiga.toString\n\n\n#############################################################################\n## Page Mixin\n#############################################################################\n\nclass PageMixin\n    fillUsersAndRoles: (users, roles) ->\n        activeUsers = _.filter(users, (user) => user.is_active)\n        @scope.activeUsers = _.sortBy(activeUsers, \"full_name_display\")\n        @scope.activeUsersById = groupBy(@scope.activeUsers, (e) -> e.id)\n\n        @scope.users = _.sortBy(users, \"full_name_display\")\n        @scope.usersById = groupBy(users, (e) -> e.id)\n\n        @scope.roles = _.sortBy(roles, \"order\")\n        computableRoles = _(@scope.project.members).map(\"role\").uniq().value()\n        @scope.computableRoles = _(roles).filter(\"computable\")\n                                         .filter((x) -> _.includes(computableRoles, x.id))\n                                         .value()\n    loadUsersAndRoles: ->\n        promise = @q.all([\n            @rs.projects.usersList(@scope.projectId),\n            @rs.projects.rolesList(@scope.projectId)\n        ])\n\n        return promise.then (results) =>\n            [users, roles] = results\n            @.fillUsersAndRoles(users, roles)\n            return results\n\ntaiga.PageMixin = PageMixin\n\n\n#############################################################################\n## Filters Mixin\n#############################################################################\n# This mixin requires @location ($tgLocation), and @scope\n\nclass FiltersMixin\n    excludePrefix: \"exclude_\"\n\n    selectFilter: (name, value, load=false, mode=\"include\") ->\n        params = @location.search()\n\n        if mode == \"exclude\"\n            name = @.excludePrefix.concat(name)\n\n        if params[name] != undefined and name != \"page\"\n            existing = _.map(taiga.toString(params[name]).split(\",\"), (x) -> trim(x))\n            existing.push(taiga.toString(value))\n            existing = _.compact(existing)\n            value = joinStr(\",\", _.uniq(existing))\n\n        if !@location.isInCurrentRouteParams(name, value)\n            location = if load then @location else @location.noreload(@scope)\n            location.search(name, value)\n\n    replaceFilter: (name, value, load=false) ->\n        if !@location.isInCurrentRouteParams(name, value)\n            location = if load then @location else @location.noreload(@scope)\n            location.search(name, value)\n\n    replaceAllFilters: (filters, load=false) ->\n        location = if load then @location else @location.noreload(@scope)\n        location.search(filters)\n\n    unselectFilter: (name, value, load=false, mode='include') ->\n        params = @location.search()\n\n        if mode == \"exclude\"\n            name = @.excludePrefix.concat(name)\n\n        if params[name] is undefined\n            return\n\n        if value is undefined or value is null\n            delete params[name]\n\n        parsedValues = _.map(taiga.toString(params[name]).split(\",\"), (x) -> trim(x))\n        newValues = _.reject(parsedValues, (x) -> x == taiga.toString(value))\n        newValues = _.compact(newValues)\n\n        if _.isEmpty(newValues)\n            value = null\n        else\n            value = joinStr(\",\", _.uniq(newValues))\n\n        location = if load then @location else @location.noreload(@scope)\n        location.search(name, value)\n\n    applyStoredFilters: (projectSlug, key) ->\n        if _.isEmpty(@location.search())\n            filters = @.getFilters(projectSlug, key)\n            if Object.keys(filters).length\n                @location.search(filters)\n                @location.replace()\n\n                return true\n\n        return false\n\n    storeFilters: (projectSlug, params, filtersHashSuffix) ->\n        ns = \"#{projectSlug}:#{filtersHashSuffix}\"\n        hash = taiga.generateHash([projectSlug, ns])\n        @storage.set(hash, params)\n\n    getFilters: (projectSlug, filtersHashSuffix) ->\n        ns = \"#{projectSlug}:#{filtersHashSuffix}\"\n        hash = taiga.generateHash([projectSlug, ns])\n\n        return @storage.get(hash) or {}\n\n    formatSelectedFilters: (type, list, urlIds, mode=\"include\") ->\n        selectedIds = urlIds.split(',')\n        selectedFilters = _.filter list, (it) ->\n            selectedIds.indexOf(_.toString(it.id)) != -1\n\n        invalidTags = _.filter selectedIds, (it) ->\n            return !_.find selectedFilters, (sit) -> _.toString(sit.id) == it\n\n        invalidAppliedTags =  _.map invalidTags, (it) ->\n            return {\n                id: it\n                key: type + \":\" + it\n                dataType: type,\n                name: it\n                mode: mode\n            }\n\n        validAppliedTags = _.map selectedFilters, (it) ->\n            return {\n                id: it.id\n                key: type + \":\" + it.id\n                dataType: type,\n                name: it.name\n                color: it.color\n                mode: mode\n            }\n\n        return invalidAppliedTags.concat(validAppliedTags)\n\ntaiga.FiltersMixin = FiltersMixin\n\n#############################################################################\n## Us Filters Mixin\n#############################################################################\n\nclass UsFiltersMixin\n    excludePrefix: \"exclude_\"\n    filterCategories: [\n        \"tags\",\n        \"status\",\n        \"assigned_users\",\n        \"assigned_to\",\n        \"owner\",\n        \"epic\",\n        \"role\",\n    ]\n\n    changeQ: (q) ->\n        @.replaceFilter(\"q\", q)\n        @.filtersReloadContent()\n        @.generateFilters()\n\n    removeFilter: (filter) ->\n        @.unselectFilter(filter.dataType, filter.id, false, filter.mode)\n        @.filtersReloadContent()\n        @.generateFilters()\n\n    addFilter: (newFilter) ->\n        @.selectFilter(newFilter.category.dataType, newFilter.filter.id, false, newFilter.mode)\n        @.filtersReloadContent()\n        @.generateFilters()\n\n    selectCustomFilter: (customFilter) ->\n        @.replaceAllFilters(customFilter.filter)\n        @.filtersReloadContent()\n        @.generateFilters()\n\n    saveCustomFilter: (name) ->\n        filters = {}\n        urlfilters = @location.search()\n\n        for key in @.filterCategories\n            excludeKey = @.excludePrefix.concat(key)\n            filters[key] = urlfilters[key]\n            filters[excludeKey] = urlfilters[excludeKey]\n\n        @filterRemoteStorageService.getFilters(@scope.projectId, @.storeCustomFiltersName).then (userFilters) =>\n            userFilters[name] = filters\n\n            @filterRemoteStorageService.storeFilters(@scope.projectId, userFilters, @.storeCustomFiltersName).then(@.generateFilters)\n\n    removeCustomFilter: (customFilter) ->\n        @filterRemoteStorageService.getFilters(@scope.projectId, @.storeCustomFiltersName).then (userFilters) =>\n            delete userFilters[customFilter.id]\n\n            @filterRemoteStorageService.storeFilters(@scope.projectId, userFilters, @.storeCustomFiltersName).then(@.generateFilters)\n            @.generateFilters()\n\n    isFilterDataTypeSelected: (filterDataType) ->\n        for filter in @.selectedFilters\n            if (filter['dataType'] == filterDataType)\n                return true\n        return false\n\n    generateFilters: (milestone) ->\n        @.storeFilters(@params.pslug, @location.search(), @.storeFiltersName)\n\n        urlfilters = @location.search()\n\n        loadFilters = {}\n        loadFilters.project = @scope.projectId\n        loadFilters.q = urlfilters.q\n\n        for key in @.filterCategories\n            excludeKey = @.excludePrefix.concat(key)\n            loadFilters[key] = urlfilters[key]\n            loadFilters[excludeKey] = urlfilters[excludeKey]\n\n        if milestone\n            loadFilters.milestone = milestone\n\n        return @q.all([\n            @rs.userstories.filtersData(loadFilters),\n            @filterRemoteStorageService.getFilters(@scope.projectId, @.storeCustomFiltersName)\n        ]).then (result) =>\n            data = result[0]\n            customFiltersRaw = result[1]\n            dataCollection = {}\n\n            dataCollection.status = _.map data.statuses, (it) ->\n                it.id = it.id.toString()\n\n                return it\n            dataCollection.tags = _.map data.tags, (it) ->\n                it.id = it.name\n\n                return it\n            tagsWithAtLeastOneElement = _.filter dataCollection.tags, (tag) ->\n                return tag.count > 0\n            dataCollection.assigned_users = _.map data.assigned_users, (it) ->\n                if it.id\n                    it.id = it.id.toString()\n                else\n                    it.id = \"null\"\n\n                it.name = it.full_name || \"Unassigned\"\n\n                return it\n            dataCollection.assigned_to = _.map data.assigned_to, (it) ->\n                if it.id\n                    it.id = it.id.toString()\n                else\n                    it.id = \"null\"\n\n                it.name = it.full_name || \"Unassigned\"\n\n                return it\n            dataCollection.role = _.map data.roles, (it) ->\n                if it.id\n                    it.id = it.id.toString()\n                else\n                    it.id = \"null\"\n\n                it.name = it.name || \"Unassigned\"\n\n                return it\n            dataCollection.owner = _.map data.owners, (it) ->\n                it.id = it.id.toString()\n                it.name = it.full_name\n\n                return it\n            dataCollection.epic = _.map data.epics, (it) ->\n                if it.id\n                    it.id = it.id.toString()\n                    it.name = \"##{it.ref} #{it.subject}\"\n                else\n                    it.id = \"null\"\n                    it.name = \"Not in an epic\"\n\n                return it\n\n            @.selectedFilters = []\n\n            for key in @.filterCategories\n                excludeKey = @.excludePrefix.concat(key)\n                if loadFilters[key]\n                    selected = @.formatSelectedFilters(key, dataCollection[key], loadFilters[key])\n                    @.selectedFilters = @.selectedFilters.concat(selected)\n                if loadFilters[excludeKey]\n                    selected = @.formatSelectedFilters(key, dataCollection[key], loadFilters[excludeKey], \"exclude\")\n                    @.selectedFilters = @.selectedFilters.concat(selected)\n\n            @.filterQ = loadFilters.q\n\n            @.filters = [\n                {\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.STATUS\"),\n                    dataType: \"status\",\n                    content: dataCollection.status\n                },\n                {\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.TAGS\"),\n                    dataType: \"tags\",\n                    content: dataCollection.tags,\n                    hideEmpty: true,\n                    totalTaggedElements: tagsWithAtLeastOneElement.length\n                },\n                {\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.ASSIGNED_USERS\"),\n                    dataType: \"assigned_users\",\n                    content: dataCollection.assigned_users\n                },\n                {\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.ROLE\"),\n                    dataType: \"role\",\n                    content: dataCollection.role\n                },\n                {\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.CREATED_BY\"),\n                    dataType: \"owner\",\n                    content: dataCollection.owner\n                },\n                {\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.EPIC\"),\n                    dataType: \"epic\",\n                    content: dataCollection.epic\n                }\n            ]\n\n            @.customFilters = []\n            _.forOwn customFiltersRaw, (value, key) =>\n                @.customFilters.push({id: key, name: key, filter: value})\n\n\ntaiga.UsFiltersMixin = UsFiltersMixin\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/admin.coffee\n###\n\nmodule = angular.module(\"taigaAdmin\", [])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/auth.coffee\n###\n\ntaiga = @.taiga\ndebounce = @.taiga.debounce\n\nmodule = angular.module(\"taigaAuth\", [\"taigaResources\"])\n\nclass LoginPage\n    @.$inject = [\n        'tgCurrentUserService',\n        '$location',\n        '$tgNavUrls',\n        '$routeParams',\n        '$tgAuth'\n    ]\n\n    constructor: (currentUserService, $location, $navUrls, $routeParams, $auth) ->\n        if currentUserService.isAuthenticated()\n            if not $routeParams['force_login']\n                url = $navUrls.resolve(\"home\")\n                if $routeParams['next']\n                    url = decodeURIComponent($routeParams['next'])\n                    $location.search('next', null)\n\n                if $routeParams['unauthorized']\n                    $auth.clear()\n                    $auth.removeToken()\n                else\n                    $location.url(url)\n\n\nmodule.controller('LoginPage', LoginPage)\n\n#############################################################################\n## Authentication Service\n#############################################################################\n\nclass AuthService extends taiga.Service\n    @.$inject = [\"$rootScope\",\n                 \"$tgStorage\",\n                 \"$tgModel\",\n                 \"$tgResources\",\n                 \"$tgHttp\",\n                 \"$tgUrls\",\n                 \"$tgConfig\",\n                 \"$translate\",\n                 \"tgCurrentUserService\",\n                 \"tgThemeService\",\n                 \"$tgAnalytics\",\n                 \"tgTermsAnnouncementService\"]\n\n    constructor: (@rootscope, @storage, @model, @rs, @http, @urls, @config, @translate, @currentUserService,\n                  @themeService, @analytics, @termsAnnouncementService) ->\n        super()\n\n        userModel = @.getUser()\n        @._currentTheme = @._getUserTheme()\n\n        @.setUserdata(userModel)\n\n    setUserdata: (userModel) ->\n        if userModel\n            @.userData = Immutable.fromJS(userModel.getAttrs())\n            @currentUserService.setUser(@.userData)\n        else\n            @.userData = null\n        @analytics.setUserId()\n\n    _getUserTheme: ->\n        defaultTheme = @config.get(\"defaultTheme\") || \"taiga\"\n\n        if !_.includes(@config.get(\"themes\"), @rootscope.user?.theme)\n            return defaultTheme\n\n        return @rootscope.user?.theme\n\n    _setTheme: ->\n        newTheme = @._getUserTheme()\n\n        if @._currentTheme != newTheme\n            @._currentTheme = newTheme\n            @themeService.use(@._currentTheme)\n\n    _setLocales: ->\n        lang = @rootscope.user?.lang || @config.get(\"defaultLanguage\") || \"en\"\n        @translate.preferredLanguage(lang)  # Needed for calls to the api in the correct language\n        @translate.use(lang)                # Needed for change the interface in runtime\n\n    getUser: ->\n        if @rootscope.user\n            return @rootscope.user\n\n        userData = @storage.get(\"userInfo\")\n\n        if userData\n            user = @model.make_model(\"users\", userData)\n            @rootscope.user = user\n            @._setLocales()\n\n            @._setTheme()\n\n            return user\n        else\n            @._setTheme()\n\n        return null\n\n    setUser: (user) ->\n        @rootscope.auth = user\n        @storage.set(\"userInfo\", user.getAttrs())\n        @rootscope.user = user\n\n        @.setUserdata(user)\n\n        @._setLocales()\n        @._setTheme()\n\n    clear: ->\n        @rootscope.auth = null\n        @rootscope.user = null\n        @storage.remove(\"userInfo\")\n\n    setToken: (token) ->\n        @storage.set(\"token\", token)\n\n    getToken: ->\n        return @storage.get(\"token\")\n\n    removeToken: ->\n        @storage.remove(\"token\")\n\n    isAuthenticated: ->\n        if @.getUser() != null\n            return true\n        return false\n\n    ## Http interface\n    refresh: () ->\n        url = @urls.resolve(\"user-me\")\n\n        return @http.get(url).then (data, status) =>\n            user = data.data\n            user.token = @.getUser().auth_token\n\n            user = @model.make_model(\"users\", user)\n\n            @.setUser(user)\n            @rootscope.$broadcast(\"auth:refresh\", user)\n            return user\n\n    login: (data, type) ->\n        url = @urls.resolve(\"auth\")\n\n        data = _.clone(data, false)\n        data.type = if type then type else \"normal\"\n\n        @.removeToken()\n\n        return @http.post(url, data).then (data, status) =>\n            user = @model.make_model(\"users\", data.data)\n            @.setToken(user.auth_token)\n            @.setUser(user)\n            @rootscope.$broadcast(\"auth:login\", user)\n            return user\n\n    logout: ->\n        @.removeToken()\n        @.clear()\n        @currentUserService.removeUser()\n\n        @._setTheme()\n        @._setLocales()\n        @rootscope.$broadcast(\"auth:logout\")\n        @analytics.setUserId()\n\n    register: (data, type, existing) ->\n        url = @urls.resolve(\"auth-register\")\n\n        data = _.clone(data, false)\n        data.type = if type then type else \"public\"\n        if type == \"private\"\n            data.existing = if existing then existing else false\n\n        @.removeToken()\n\n        return @http.post(url, data).then (response) =>\n            user = @model.make_model(\"users\", response.data)\n            @.setToken(user.auth_token)\n            @.setUser(user)\n            @rootscope.$broadcast(\"auth:register\", user)\n            return user\n\n    getInvitation: (token) ->\n        return @rs.invitations.get(token)\n\n    acceptInvitiationWithNewUser: (data) ->\n        return @.register(data, \"private\", false)\n\n    forgotPassword: (data) ->\n        url = @urls.resolve(\"users-password-recovery\")\n        data = _.clone(data, false)\n        @.removeToken()\n        return @http.post(url, data)\n\n    changePasswordFromRecovery: (data) ->\n        url = @urls.resolve(\"users-change-password-from-recovery\")\n        data = _.clone(data, false)\n        @.removeToken()\n        return @http.post(url, data)\n\n    changeEmail: (data) ->\n        url = @urls.resolve(\"users-change-email\")\n        data = _.clone(data, false)\n        return @http.post(url, data)\n\n    cancelAccount: (data) ->\n        url = @urls.resolve(\"users-cancel-account\")\n        data = _.clone(data, false)\n        return @http.post(url, data)\n\n    exportProfile: () ->\n        url = @urls.resolve(\"users-export\")\n        return @http.post(url)\n\n    showTerms: (data) ->\n        user = @.getUser()\n        if not user or user.read_new_terms\n            return\n        @termsAnnouncementService.show()\n\nmodule.service(\"$tgAuth\", AuthService)\n\n\n#############################################################################\n## Login Directive\n#############################################################################\n\n# Directive that manages the visualization of public register\n# message/link on login page.\n\nPublicRegisterMessageDirective = ($config, $navUrls, $routeParams, templates) ->\n    template = templates.get(\"auth/login-text.html\", true)\n\n    templateFn = ->\n        publicRegisterEnabled = $config.get(\"publicRegisterEnabled\")\n        if not publicRegisterEnabled\n            return \"\"\n\n        url = $navUrls.resolve(\"register\")\n\n        if $routeParams['force_next']\n            nextUrl = encodeURIComponent($routeParams['force_next'])\n            url += \"?next=#{nextUrl}\"\n\n        return template({url:url})\n\n    return {\n        restrict: \"AE\"\n        scope: {}\n        template: templateFn\n    }\n\nmodule.directive(\"tgPublicRegisterMessage\", [\"$tgConfig\", \"$tgNavUrls\", \"$routeParams\",\n                                             \"$tgTemplate\", PublicRegisterMessageDirective])\n\n\nLoginDirective = ($auth, $confirm, $location, $config, $routeParams, $navUrls, $events, $translate, $window, $analytics) ->\n    link = ($scope, $el, $attrs) ->\n        form = new checksley.Form($el.find(\"form.login-form\"))\n        $scope.defaultLoginEnabled = $config.get(\"defaultLoginEnabled\", true)\n\n        if $routeParams['next'] and $routeParams['next'] != $navUrls.resolve(\"login\")\n            $scope.nextUrl = decodeURIComponent($routeParams['next'])\n        else\n            $scope.nextUrl = $navUrls.resolve(\"home\")\n\n        if $routeParams['force_next']\n            $scope.nextUrl = decodeURIComponent($routeParams['force_next'])\n\n        onSuccess = (response) ->\n            $events.setupConnection()\n            $analytics.trackEvent(\"auth\", \"login\", \"user login\", 1)\n\n            $auth.showTerms()\n\n            if $scope.nextUrl.indexOf('http') == 0\n                $window.location.href = $scope.nextUrl\n            else\n                $location.url($scope.nextUrl)\n\n        onError = (response) ->\n            $confirm.notify(\"light-error\", $translate.instant(\"LOGIN_FORM.ERROR_AUTH_INCORRECT\"))\n\n        $scope.onKeyUp = (event) ->\n            target = angular.element(event.currentTarget)\n            value = target.val()\n            $scope.iscapsLockActivated = false\n            if value != value.toLowerCase()\n                $scope.iscapsLockActivated = true\n\n        submit = debounce 2000, (event) =>\n            event.preventDefault()\n\n            if not form.validate()\n                return\n\n            data = {\n                \"username\": $el.find(\"form.login-form input[name=username]\").val(),\n                \"password\": $el.find(\"form.login-form input[name=password]\").val()\n            }\n\n            loginFormType = $config.get(\"loginFormType\", \"normal\")\n\n            promise = $auth.login(data, loginFormType)\n            return promise.then(onSuccess, onError)\n\n        $el.on \"submit\", \"form\", submit\n\n        window.prerenderReady = true\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link:link}\n\nmodule.directive(\"tgLogin\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$tgConfig\", \"$routeParams\",\n                             \"$tgNavUrls\", \"$tgEvents\", \"$translate\", \"$window\", \"$tgAnalytics\", LoginDirective])\n\n\n#############################################################################\n## Register Directive\n#############################################################################\n\nRegisterDirective = ($auth, $confirm, $location, $navUrls, $config, $routeParams, $analytics, $translate, $window) ->\n    link = ($scope, $el, $attrs) ->\n        if not $config.get(\"publicRegisterEnabled\")\n            $location.path($navUrls.resolve(\"not-found\"))\n            $location.replace()\n\n        $scope.data = {}\n        form = $el.find(\"form\").checksley({onlyOneErrorElement: true})\n\n        if $routeParams['next'] and $routeParams['next'] != $navUrls.resolve(\"login\")\n            $scope.nextUrl = decodeURIComponent($routeParams['next'])\n        else\n            $scope.nextUrl = $navUrls.resolve(\"home\")\n\n        onSuccessSubmit = (response) ->\n            $analytics.trackEvent(\"auth\", \"register\", \"user registration\", 1)\n\n            if $scope.nextUrl.indexOf('http') == 0\n                $window.location.href = $scope.nextUrl\n            else\n                $location.url($scope.nextUrl)\n\n        onErrorSubmit = (response) ->\n            if response.data._error_message\n                text = $translate.instant(\"COMMON.GENERIC_ERROR\", {error: response.data._error_message})\n                $confirm.notify(\"light-error\", text)\n\n            form.setErrors(response.data)\n\n        submit = debounce 2000, (event) =>\n            event.preventDefault()\n\n            if not form.validate()\n                return\n\n            promise = $auth.register($scope.data)\n            promise.then(onSuccessSubmit, onErrorSubmit)\n\n        $el.on \"submit\", \"form\", submit\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n        window.prerenderReady = true\n\n    return {link:link}\n\nmodule.directive(\"tgRegister\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$tgNavUrls\", \"$tgConfig\",\n                                \"$routeParams\", \"$tgAnalytics\", \"$translate\", \"$window\", RegisterDirective])\n\n\n#############################################################################\n## Forgot Password Directive\n#############################################################################\n\nForgotPasswordDirective = ($auth, $confirm, $location, $navUrls, $translate) ->\n    link = ($scope, $el, $attrs) ->\n        $scope.data = {}\n        form = $el.find(\"form\").checksley()\n\n        onSuccessSubmit = (response) ->\n            $location.path($navUrls.resolve(\"login\"))\n\n            title = $translate.instant(\"FORGOT_PASSWORD_FORM.SUCCESS_TITLE\")\n            message = $translate.instant(\"FORGOT_PASSWORD_FORM.SUCCESS_TEXT\")\n\n            $confirm.success(title, message)\n\n        onErrorSubmit = (response) ->\n            text = $translate.instant(\"FORGOT_PASSWORD_FORM.ERROR\")\n\n            $confirm.notify(\"light-error\", text)\n\n        submit = debounce 2000, (event) =>\n            event.preventDefault()\n\n            if not form.validate()\n                return\n\n            promise = $auth.forgotPassword($scope.data)\n            promise.then(onSuccessSubmit, onErrorSubmit)\n\n        $el.on \"submit\", \"form\", submit\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n        window.prerenderReady = true\n\n    return {link:link}\n\nmodule.directive(\"tgForgotPassword\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$tgNavUrls\", \"$translate\",\n                                      ForgotPasswordDirective])\n\n\n#############################################################################\n## Change Password from Recovery Directive\n#############################################################################\n\nChangePasswordFromRecoveryDirective = ($auth, $confirm, $location, $params, $navUrls, $translate) ->\n    link = ($scope, $el, $attrs) ->\n        $scope.data = {}\n\n        if $params.token?\n            $scope.tokenInParams = true\n            $scope.data.token = $params.token\n        else\n            $location.path($navUrls.resolve(\"login\"))\n\n            text = $translate.instant(\"CHANGE_PASSWORD_RECOVERY_FORM.ERROR\")\n            $confirm.notify(\"light-error\",text)\n\n        form = $el.find(\"form\").checksley()\n\n        onSuccessSubmit = (response) ->\n            $location.path($navUrls.resolve(\"login\"))\n\n            text = $translate.instant(\"CHANGE_PASSWORD_RECOVERY_FORM.SUCCESS\")\n            $confirm.success(text)\n\n        onErrorSubmit = (response) ->\n            text = $translate.instant(\"CHANGE_PASSWORD_RECOVERY_FORM.ERROR\")\n            $confirm.notify(\"light-error\", text)\n\n        submit = debounce 2000, (event) =>\n            event.preventDefault()\n\n            if not form.validate()\n                return\n\n            promise = $auth.changePasswordFromRecovery($scope.data)\n            promise.then(onSuccessSubmit, onErrorSubmit)\n\n        $el.on \"submit\", \"form\", submit\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link:link}\n\nmodule.directive(\"tgChangePasswordFromRecovery\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$routeParams\",\n                                                  \"$tgNavUrls\", \"$translate\",\n                                                  ChangePasswordFromRecoveryDirective])\n\n\n#############################################################################\n## Invitation\n#############################################################################\n\nInvitationDirective = ($auth, $confirm, $location, $config, $params, $navUrls, $analytics, $translate, config) ->\n    link = ($scope, $el, $attrs) ->\n        token = $params.token\n\n        promise = $auth.getInvitation(token)\n        promise.then (invitation) ->\n            $scope.invitation = invitation\n            $scope.publicRegisterEnabled = config.get(\"publicRegisterEnabled\")\n\n        promise.then null, (response) ->\n            $location.path($navUrls.resolve(\"login\"))\n\n            text = $translate.instant(\"INVITATION_LOGIN_FORM.NOT_FOUND\")\n            $confirm.notify(\"light-error\", text)\n\n        # Login form\n        $scope.dataLogin = {token: token}\n        loginForm = $el.find(\"form.login-form\").checksley({onlyOneErrorElement: true})\n\n        onSuccessSubmitLogin = (response) ->\n            $analytics.trackEvent(\"auth\", \"invitationAccept\", \"invitation accept with existing user\", 1)\n            $location.path($navUrls.resolve(\"project\", {project: $scope.invitation.project_slug}))\n            text = $translate.instant(\"INVITATION_LOGIN_FORM.SUCCESS\", {\n                \"project_name\": $scope.invitation.project_name\n            })\n\n            $confirm.notify(\"success\", text)\n\n        onErrorSubmitLogin = (response) ->\n            $confirm.notify(\"light-error\", response.data._error_message)\n\n        submitLogin = debounce 2000, (event) =>\n            event.preventDefault()\n\n            if not loginForm.validate()\n                return\n\n            loginFormType = $config.get(\"loginFormType\", \"normal\")\n            data = $scope.dataLogin\n\n            promise = $auth.login({\n                username: data.username,\n                password: data.password,\n                invitation_token: data.token\n            }, loginFormType)\n            promise.then(onSuccessSubmitLogin, onErrorSubmitLogin)\n\n        $el.on \"submit\", \"form.login-form\", submitLogin\n        $el.on \"click\", \".button-login\", submitLogin\n\n        # Register form\n        $scope.dataRegister = {token: token}\n        registerForm = $el.find(\"form.register-form\").checksley({onlyOneErrorElement: true})\n\n        onSuccessSubmitRegister = (response) ->\n            $analytics.trackEvent(\"auth\", \"invitationAccept\", \"invitation accept with new user\", 1)\n\n            $location.path($navUrls.resolve(\"project\", {project: $scope.invitation.project_slug}))\n            text = $translate.instant(\"INVITATION_LOGIN_FORM.SUCCESS\", {\n                \"project_name\": $scope.invitation.project_name\n            })\n            $confirm.notify(\"success\", text)\n\n        onErrorSubmitRegister = (response) ->\n            if response.data._error_message\n                text = $translate.instant(\"COMMON.GENERIC_ERROR\", {error: response.data._error_message})\n                $confirm.notify(\"light-error\", text)\n\n            registerForm.setErrors(response.data)\n\n        submitRegister = debounce 2000, (event) =>\n            event.preventDefault()\n\n            if not registerForm.validate()\n                return\n\n            promise = $auth.acceptInvitiationWithNewUser($scope.dataRegister)\n            promise.then(onSuccessSubmitRegister, onErrorSubmitRegister)\n\n        $el.on \"submit\", \"form.register-form\", submitRegister\n        $el.on \"click\", \".button-register\", submitRegister\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link:link}\n\nmodule.directive(\"tgInvitation\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$tgConfig\", \"$routeParams\",\n                                  \"$tgNavUrls\", \"$tgAnalytics\", \"$translate\", \"$tgConfig\", InvitationDirective])\n\n\n#############################################################################\n## Change Email\n#############################################################################\n\nChangeEmailDirective = ($repo, $model, $auth, $confirm, $location, $params, $navUrls, $translate) ->\n    link = ($scope, $el, $attrs) ->\n        $scope.data = {}\n        $scope.data.email_token = $params.email_token\n        form = $el.find(\"form\").checksley()\n\n        onSuccessSubmit = (response) ->\n            if $auth.isAuthenticated()\n                $repo.queryOne(\"users\", $auth.getUser().id).then (data) =>\n                    $auth.setUser(data)\n                    $location.path($navUrls.resolve(\"home\"))\n                    $location.replace()\n            else\n                $location.path($navUrls.resolve(\"login\"))\n                $location.replace()\n\n            text = $translate.instant(\"CHANGE_EMAIL_FORM.SUCCESS\")\n            $confirm.success(text)\n\n        onErrorSubmit = (response) ->\n            text = $translate.instant(\"COMMON.GENERIC_ERROR\", {error: response.data._error_message})\n\n            $confirm.notify(\"light-error\", text)\n\n        submit = ->\n            if not form.validate()\n                return\n\n            promise = $auth.changeEmail($scope.data)\n            promise.then(onSuccessSubmit, onErrorSubmit)\n\n        $el.on \"submit\", (event) ->\n            event.preventDefault()\n            submit()\n\n        $el.on \"click\", \"a.button-change-email\", (event) ->\n            event.preventDefault()\n            submit()\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link:link}\n\nmodule.directive(\"tgChangeEmail\", [\"$tgRepo\", \"$tgModel\", \"$tgAuth\", \"$tgConfirm\", \"$tgLocation\",\n                                   \"$routeParams\", \"$tgNavUrls\", \"$translate\", ChangeEmailDirective])\n\n\n#############################################################################\n## Cancel account\n#############################################################################\n\nCancelAccountDirective = ($repo, $model, $auth, $confirm, $location, $params, $navUrls) ->\n    link = ($scope, $el, $attrs) ->\n        $scope.data = {}\n        $scope.data.cancel_token = $params.cancel_token\n        form = $el.find(\"form\").checksley()\n\n        onSuccessSubmit = (response) ->\n            $auth.logout()\n            $location.path($navUrls.resolve(\"home\"))\n\n            text = $translate.instant(\"CANCEL_ACCOUNT.SUCCESS\")\n\n            $confirm.success(text)\n\n        onErrorSubmit = (response) ->\n            text = $translate.instant(\"COMMON.GENERIC_ERROR\", {error: response.data._error_message})\n\n            $confirm.notify(\"error\", text)\n\n        submit = debounce 2000, (event) =>\n            event.preventDefault()\n\n            if not form.validate()\n                return\n\n            promise = $auth.cancelAccount($scope.data)\n            promise.then(onSuccessSubmit, onErrorSubmit)\n\n        $el.on \"submit\", \"form\", submit\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link:link}\n\nmodule.directive(\"tgCancelAccount\", [\"$tgRepo\", \"$tgModel\", \"$tgAuth\", \"$tgConfirm\", \"$tgLocation\",\n                                     \"$routeParams\",\"$tgNavUrls\", CancelAccountDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/backlog.coffee\n###\n\nmodule = angular.module(\"taigaBacklog\", [])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/base.coffee\n###\n\ntaiga = @.taiga\ngroupBy = @.taiga.groupBy\nbindOnce = @.taiga.bindOnce\n\nmodule = angular.module(\"taigaBase\", [])\n\n#############################################################################\n## Main Directive\n#############################################################################\n\nTaigaMainDirective = ($rootscope, $window) ->\n    link = ($scope, $el, $attrs) ->\n        $window.onresize = () ->\n            $rootscope.$broadcast(\"resize\")\n\n    return {link:link}\n\nmodule.directive(\"tgMain\", [\"$rootScope\", \"$window\", TaigaMainDirective])\n\n#############################################################################\n## Navigation\n#############################################################################\n\nurls = {\n    \"home\": \"/\"\n    \"projects\": \"/projects\"\n    \"error\": \"/error\"\n    \"not-found\": \"/not-found\"\n    \"permission-denied\": \"/permission-denied\"\n\n    \"discover\": \"/discover\"\n    \"discover-search\": \"/discover/search\"\n\n    \"login\": \"/login\"\n    \"forgot-password\": \"/forgot-password\"\n    \"change-password\": \"/change-password/:token\"\n    \"change-email\": \"/change-email/:token\"\n    \"cancel-account\": \"/cancel-account/:token\"\n    \"register\": \"/register\"\n    \"invitation\": \"/invitation/:token\"\n    \"create-project\": \"/project/new\"\n    \"create-project-scrum\": \"/project/new/scrum\"\n    \"create-project-kanban\": \"/project/new/kanban\"\n    \"create-project-duplicate\": \"/project/new/duplicate\"\n    \"create-project-import\": \"/project/new/import\"\n    \"create-project-import-platform\": \"/project/new/import/:platform\"\n\n    \"profile\": \"/profile\"\n    \"user-profile\": \"/profile/:username\"\n\n    \"blocked-project\": \"/blocked-project/:project\"\n    \"project\": \"/project/:project\"\n    \"project-detail-ref\": \"/project/:project/t/:ref\"\n    \"project-backlog\": \"/project/:project/backlog\"\n    \"project-taskboard\": \"/project/:project/taskboard/:sprint\"\n    \"project-kanban\": \"/project/:project/kanban\"\n    \"project-issues\": \"/project/:project/issues\"\n    \"project-epics\": \"/project/:project/epics\"\n    \"project-search\": \"/project/:project/search\"\n    \"project-timeline\": \"/project/:project/timeline\"\n\n    \"project-epics-detail\": \"/project/:project/epic/:ref\"\n    \"project-userstories-detail\": \"/project/:project/us/:ref\"\n    \"project-tasks-detail\": \"/project/:project/task/:ref\"\n    \"project-issues-detail\": \"/project/:project/issue/:ref\"\n\n    \"project-wiki\": \"/project/:project/wiki\"\n    \"project-wiki-list\": \"/project/:project/wiki-list\"\n    \"project-wiki-page\": \"/project/:project/wiki/:slug\"\n\n    # Team\n    \"project-team\": \"/project/:project/team\"\n\n    # Admin\n    \"project-admin-home\": \"/project/:project/admin/project-profile/details\"\n    \"project-admin-project-profile-details\": \"/project/:project/admin/project-profile/details\"\n    \"project-admin-project-profile-default-values\": \"/project/:project/admin/project-profile/default-values\"\n    \"project-admin-project-profile-modules\": \"/project/:project/admin/project-profile/modules\"\n    \"project-admin-project-profile-export\": \"/project/:project/admin/project-profile/export\"\n    \"project-admin-project-profile-reports\": \"/project/:project/admin/project-profile/reports\"\n\n    \"project-admin-project-values-status\": \"/project/:project/admin/project-values/status\"\n    \"project-admin-project-values-points\": \"/project/:project/admin/project-values/points\"\n    \"project-admin-project-values-priorities\": \"/project/:project/admin/project-values/priorities\"\n    \"project-admin-project-values-severities\": \"/project/:project/admin/project-values/severities\"\n    \"project-admin-project-values-types\": \"/project/:project/admin/project-values/types\"\n    \"project-admin-project-values-custom-fields\": \"/project/:project/admin/project-values/custom-fields\"\n    \"project-admin-project-values-tags\": \"/project/:project/admin/project-values/tags\"\n    \"project-admin-project-values-due-dates\": \"/project/:project/admin/project-values/due-dates\"\n\n    \"project-admin-memberships\": \"/project/:project/admin/memberships\"\n    \"project-admin-roles\": \"/project/:project/admin/roles\"\n    \"project-admin-third-parties-webhooks\": \"/project/:project/admin/third-parties/webhooks\"\n    \"project-admin-third-parties-github\": \"/project/:project/admin/third-parties/github\"\n    \"project-admin-third-parties-gitlab\": \"/project/:project/admin/third-parties/gitlab\"\n    \"project-admin-third-parties-bitbucket\": \"/project/:project/admin/third-parties/bitbucket\"\n    \"project-admin-third-parties-gogs\": \"/project/:project/admin/third-parties/gogs\"\n    \"project-admin-contrib\": \"/project/:project/admin/contrib/:plugin\"\n\n    # User settings\n    \"user-settings-user-profile\": \"/user-settings/user-profile\"\n    \"user-settings-user-change-password\": \"/user-settings/user-change-password\"\n    \"user-settings-user-avatar\": \"/user-settings/user-avatar\"\n    \"user-settings-user-project-settings\": \"/user-settings/user-project-settings\"\n    \"user-settings-mail-notifications\": \"/user-settings/mail-notifications\"\n    \"user-settings-live-notifications\": \"/user-settings/live-notifications\"\n    \"user-settings-web-notifications\": \"/user-settings/web-notifications\"\n    \"user-settings-contrib\": \"/user-settings/contrib/:plugin\"\n\n    \"notifications\": \"/notifications\"\n}\n\ninit = ($log, $navurls) ->\n    $log.debug \"Initialize navigation urls\"\n    $navurls.update(urls)\n\nmodule.run([\"$log\", \"$tgNavUrls\", init])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/common.coffee\n###\n\ntaiga = @.taiga\n\nmodule = angular.module(\"taigaCommon\", [])\n\n#############################################################################\n## Default datepicker config\n#############################################################################\nDataPickerConfig = ($translate, $config, $auth) ->\n    return {\n        get: () ->\n            user = $auth.getUser()\n            lang = user?.lang || $translate.preferredLanguage()\n            rtlLanguages = $config.get(\"rtlLanguages\", [])\n            isRTL = rtlLanguages.indexOf(lang) > -1\n            return {\n                i18n: {\n                    previousMonth: $translate.instant(\"COMMON.PICKERDATE.PREV_MONTH\"),\n                    nextMonth:  $translate.instant(\"COMMON.PICKERDATE.NEXT_MONTH\"),\n                    months: [\n                        $translate.instant(\"COMMON.PICKERDATE.MONTHS.JAN\"),\n                        $translate.instant(\"COMMON.PICKERDATE.MONTHS.FEB\"),\n                        $translate.instant(\"COMMON.PICKERDATE.MONTHS.MAR\"),\n                        $translate.instant(\"COMMON.PICKERDATE.MONTHS.APR\"),\n                        $translate.instant(\"COMMON.PICKERDATE.MONTHS.MAY\"),\n                        $translate.instant(\"COMMON.PICKERDATE.MONTHS.JUN\"),\n                        $translate.instant(\"COMMON.PICKERDATE.MONTHS.JUL\"),\n                        $translate.instant(\"COMMON.PICKERDATE.MONTHS.AUG\"),\n                        $translate.instant(\"COMMON.PICKERDATE.MONTHS.SEP\"),\n                        $translate.instant(\"COMMON.PICKERDATE.MONTHS.OCT\"),\n                        $translate.instant(\"COMMON.PICKERDATE.MONTHS.NOV\"),\n                        $translate.instant(\"COMMON.PICKERDATE.MONTHS.DEC\")\n                    ],\n                    weekdays: [\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.SUN\"),\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.MON\"),\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.TUE\"),\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.WED\"),\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.THU\"),\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.FRI\"),\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.SAT\")\n                    ],\n                    weekdaysShort: [\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.SUN\"),\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.MON\"),\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.TUE\"),\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.WED\"),\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.THU\"),\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.FRI\"),\n                        $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.SAT\")\n                    ]\n                },\n                isRTL: isRTL,\n                firstDay: parseInt($translate.instant(\"COMMON.PICKERDATE.FIRST_DAY_OF_WEEK\"), 10),\n                format: $translate.instant(\"COMMON.PICKERDATE.FORMAT\")\n            }\n    }\n\nmodule.factory(\"tgDatePickerConfigService\", [\"$translate\", \"$tgConfig\", \"$tgAuth\", DataPickerConfig])\n\n#############################################################################\n## Get the selected text\n#############################################################################\nSelectedText = ($window, $document) ->\n    get = () ->\n        if $window.getSelection\n            return $window.getSelection().toString()\n        else if $document.selection\n            return $document.selection.createRange().text\n        return \"\"\n\n    return {get: get}\n\nmodule.factory(\"$selectedText\", [\"$window\", \"$document\", SelectedText])\n\n#############################################################################\n## Permission directive, hide elements when necessary\n#############################################################################\n\nCheckPermissionDirective = (projectService) ->\n    render = ($el, project, permission) ->\n        if project && permission\n            $el.removeClass('hidden') if project.get('my_permissions').indexOf(permission) > -1\n\n    link = ($scope, $el, $attrs) ->\n        $el.addClass('hidden')\n        permission = $attrs.tgCheckPermission\n\n        unwatch = $scope.$watch () ->\n            return projectService.project\n        , () ->\n            return if !projectService.project\n\n            render($el, projectService.project, permission)\n            unwatch()\n\n        unObserve = $attrs.$observe \"tgCheckPermission\", (permission) ->\n            return if !permission\n\n            render($el, projectService.project, permission)\n            unObserve()\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link:link}\n\nCheckPermissionDirective.$inject = [\n    \"tgProjectService\"\n]\n\nmodule.directive(\"tgCheckPermission\", CheckPermissionDirective)\n\n#############################################################################\n## Add class based on permissions\n#############################################################################\n\nClassPermissionDirective = ->\n    name = \"tgClassPermission\"\n\n    link = ($scope, $el, $attrs) ->\n        checkPermissions = (project, className, permission) ->\n            negation = permission[0] == \"!\"\n\n            permission = permission.slice(1) if negation\n\n            if negation && project.my_permissions.indexOf(permission) == -1\n                $el.addClass(className)\n            else if !negation && project.my_permissions.indexOf(permission) != -1\n                $el.addClass(className)\n            else\n                $el.removeClass(className)\n\n        tgClassPermissionWatchAction = (project) ->\n            if project\n                unbindWatcher()\n\n                classes = $scope.$eval($attrs[name])\n\n                for className, permission of classes\n                    checkPermissions(project, className, permission)\n\n\n        unbindWatcher = $scope.$watch \"project\", tgClassPermissionWatchAction\n\n    return {link:link}\n\nmodule.directive(\"tgClassPermission\", ClassPermissionDirective)\n\n#############################################################################\n## Animation frame service, apply css changes in the next render frame\n#############################################################################\nAnimationFrame = () ->\n    animationFrame =\n        window.requestAnimationFrame       ||\n        window.webkitRequestAnimationFrame ||\n        window.mozRequestAnimationFrame\n\n    performAnimation = (time) =>\n        fn = tail.shift()\n        fn()\n\n        if (tail.length)\n            animationFrame(performAnimation)\n\n    tail = []\n\n    add = () ->\n        for fn in arguments\n            tail.push(fn)\n\n            if tail.length == 1\n                animationFrame(performAnimation)\n\n    return {add: add}\n\nmodule.factory(\"animationFrame\", AnimationFrame)\n\n#############################################################################\n## Open/close comment\n#############################################################################\n\nToggleCommentDirective = () ->\n    link = ($scope, $el, $attrs) ->\n        $el.find(\"textarea\").on \"focus\", () ->\n            $el.addClass(\"active\")\n\n    return {link:link}\n\nmodule.directive(\"tgToggleComment\", ToggleCommentDirective)\n\n\n#############################################################################\n## Get the appropiate section url for a project\n## according to his enabled modules and user permisions\n#############################################################################\n\nProjectUrl = ($navurls) ->\n    get = (project) ->\n        if project.toJS\n            project = project.toJS()\n\n        ctx = {project: project.slug}\n\n        if project.is_backlog_activated and project.my_permissions.indexOf(\"view_us\") > -1\n            return $navurls.resolve(\"project-backlog\", ctx)\n        if project.is_kanban_activated and project.my_permissions.indexOf(\"view_us\") > -1\n            return $navurls.resolve(\"project-kanban\", ctx)\n        if project.is_wiki_activated and project.my_permissions.indexOf(\"view_wiki_pages\") > -1\n            return $navurls.resolve(\"project-wiki\", ctx)\n        if project.is_issues_activated and project.my_permissions.indexOf(\"view_issues\") > -1\n            return $navurls.resolve(\"project-issues\", ctx)\n\n        return $navurls.resolve(\"project\", ctx)\n\n    return {get: get}\n\nmodule.factory(\"$projectUrl\", [\"$tgNavUrls\", ProjectUrl])\n\n\n#############################################################################\n## Queue Q promises\n#############################################################################\n\nQqueue = ($q) ->\n    deferred = $q.defer()\n    deferred.resolve()\n\n    lastPromise = deferred.promise\n\n    qqueue = {\n        bindAdd: (fn) =>\n            return (args...) =>\n                lastPromise = lastPromise.then () => fn.apply(@, args)\n        add: (fn) =>\n            if !lastPromise\n                lastPromise = fn()\n            else\n                lastPromise = lastPromise.then(fn)\n\n            return qqueue\n    }\n\n    return qqueue\n\nmodule.factory(\"$tgQqueue\", [\"$q\", Qqueue])\n\n\n#############################################################################\n## Queue model transformation\n#############################################################################\n\nclass QueueModelTransformation extends taiga.Service\n    @.$inject = [\n        \"$tgQqueue\",\n        \"$tgRepo\",\n        \"$q\",\n        \"$tgModel\"\n    ]\n\n    constructor: (@qqueue, @repo, @q, @model) ->\n\n    setObject: (@scope, @prop) ->\n\n    clone: () ->\n        attrs = _.cloneDeep(@.scope[@.prop]._attrs)\n        model = @model.make_model(@.scope[@.prop]._name, attrs)\n\n        return model\n\n    getObj: () ->\n        return @.scope[@.prop]\n\n    save: (transformation) ->\n        defered = @q.defer()\n        @qqueue.add () =>\n            obj = @.getObj()\n            comment = obj.comment\n\n            obj.comment = ''\n\n            clone = @.clone()\n\n            modified = _.omit(obj._modifiedAttrs, ['version'])\n            clone = _.assign(clone, modified)\n\n            transformation(clone)\n\n            if comment.length\n                clone.comment = comment\n\n            success = () =>\n                @.scope[@.prop] = clone\n\n                defered.resolve.apply(null, arguments)\n\n            @repo.save(clone).then(success, defered.reject)\n\n        return defered.promise\n\nmodule.service(\"$tgQueueModelTransformation\", QueueModelTransformation)\n\n#############################################################################\n## Templates\n#############################################################################\n\nTemplate = ($templateCache) ->\n    return {\n        get: (name, lodash = false) =>\n            tmp = $templateCache.get(name)\n\n            if lodash\n                tmp = _.template(tmp)\n\n            return tmp\n    }\n\nmodule.factory(\"$tgTemplate\", [\"$templateCache\", Template])\n\n#############################################################################\n## Permission directive, hide elements when necessary\n#############################################################################\n\nCapslock = () ->\n    template = \"\"\"\n        <tg-svg class=\"capslock\" ng-if=\"capslockIcon && iscapsLockActivated\" svg-icon='icon-capslock' svg-title='COMMON.CAPSLOCK_WARNING'></tg-svg>\n    \"\"\"\n\n    return {\n        template: template\n    }\n\nmodule.directive(\"tgCapslock\", [Capslock])\n\nLightboxClose = () ->\n    template = \"\"\"\n        <a class=\"close\" ng-click=\"onClose()\" href=\"\" title=\"{{'COMMON.CLOSE' | translate}}\">\n            <tg-svg svg-icon=\"icon-close\"></tg-svg>\n        </a>\n    \"\"\"\n\n    link = (scope, elm, attrs) ->\n\n    return {\n        scope: {\n            onClose: '&'\n        },\n        link: link,\n        template: template\n    }\n\nmodule.directive(\"tgLightboxClose\", [LightboxClose])\n\nSvg = () ->\n    template = \"\"\"\n    <svg class=\"{{ 'icon ' + svgIcon }}\" style=\"fill: {{ svgFill }}\">\n        <use xlink:href=\"\" ng-attr-xlink:href=\"{{ '#' + svgIcon }}\" ng-attr-href=\"{{ '#' + svgIcon }}\">\n            <title ng-if=\"svgTitle\">{{svgTitle}}</title>\n            <title ng-if=\"svgTitleTranslate\">{{svgTitleTranslate | translate: svgTitleTranslateValues}}</title>\n        </use>\n    </svg>\n    \"\"\"\n\n    return {\n        scope: {\n            svgIcon: \"@\",\n            svgTitle: \"@\",\n            svgTitleTranslate: \"@\",\n            svgTitleTranslateValues: \"=\",\n            svgFill: \"=\"\n        },\n        template: template\n    }\n\nmodule.directive(\"tgSvg\", [Svg])\n\nAutofocus = ($timeout, $parse, animationFrame) ->\n  return {\n    restrict: 'A',\n    link : ($scope, $element, attrs) ->\n        if attrs.ngShow\n            model = $parse(attrs.ngShow)\n\n            $scope.$watch model, (value) ->\n                if value == true\n                    $timeout () -> $element[0].focus()\n\n        else\n            $timeout () -> $element[0].focus()\n  }\n\nmodule.directive('tgAutofocus', ['$timeout', '$parse', \"animationFrame\", Autofocus])\n\nmodule.directive 'tgPreloadImage', () ->\n    spinner = \"<img class='loading-spinner' src='/\" + window._version + \"/svg/spinner-circle.svg' alt='loading...' />\"\n\n    template = \"\"\"\n        <div>\n            <ng-transclude></ng-transclude>\n        </div>\n    \"\"\"\n\n    preload = (src, onLoad) ->\n        image = new Image()\n        image.onload = onLoad\n        image.src = src\n\n        return image\n\n    return {\n        template: template,\n        transclude: true,\n        replace: true,\n        link: (scope, el, attrs) ->\n            image = el.find('img:last')\n            timeout = null\n\n            onLoad = () ->\n                el.find('.loading-spinner').remove()\n                image.show()\n\n                if timeout\n                    clearTimeout(timeout)\n                    timeout = null\n\n            attrs.$observe 'preloadSrc', (src) ->\n                if timeout\n                    clearTimeout(timeout)\n\n                el.find('.loading-spinner').remove()\n\n                timeout = setTimeout () ->\n                    el.prepend(spinner)\n                , 200\n\n                image.hide()\n\n                preload(src, onLoad)\n    }\n\n\n#############################################################################\n## Disable link href when Ctrl Key is pressed\n#############################################################################\n\nCtrlClickDisable = () ->\n    link = ($scope, $el, $attrs) ->\n        $el.on \"click\", ($event) ->\n            if ($event.ctrlKey || $event.metaKey)\n                $event.preventDefault()\n    return {link: link}\n\nmodule.directive(\"tgCtrlClickDisable\", CtrlClickDisable)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/detail.coffee\n###\n\ntaiga = @.taiga\n\nmixOf = @.taiga.mixOf\ntoString = @.taiga.toString\njoinStr = @.taiga.joinStr\ngroupBy = @.taiga.groupBy\nbindOnce = @.taiga.bindOnce\nbindMethods = @.taiga.bindMethods\n\nmodule = angular.module(\"taigaCommon\")\n\nclass DetailController\n    @.$inject = [\n        '$routeParams',\n        '$tgRepo',\n        \"tgProjectService\",\n        \"$tgNavUrls\",\n        \"$location\"\n    ]\n\n    constructor: (@params, @repo, @projectService, @navurls, @location) ->\n        @repo.resolve({\n            pslug: @params.pslug,\n            ref: @params.ref\n        })\n        .then (result) =>\n            if result.issue\n                url = @navurls.resolve('project-issues-detail', {\n                    project: @projectService.project.get('slug'),\n                    ref: @params.ref\n                })\n            else if result.task\n                url = @navurls.resolve('project-tasks-detail', {\n                    project: @projectService.project.get('slug'),\n                    ref: @params.ref\n                })\n            else if result.us\n                url = @navurls.resolve('project-userstories-detail', {\n                    project: @projectService.project.get('slug'),\n                    ref: @params.ref\n                })\n            else if result.epic\n                url = @navurls.resolve('project-epics-detail', {\n                    project: @projectService.project.get('slug'),\n                    ref: @params.ref\n                })\n            else if result.wikipage\n                url = @navurls.resolve('project-wiki-page', {\n                    project: @projectService.project.get('slug'),\n                    slug: @params.ref\n                })\n\n            @location.path(url)\n\nmodule.controller(\"DetailController\", DetailController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/epics.coffee\n###\n\nmodule = angular.module(\"taigaEpics\", [])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/events.coffee\n###\n\ntaiga = @.taiga\nstartswith = @.taiga.startswith\nbindMethods = @.taiga.bindMethods\n\nmodule = angular.module(\"taigaEvents\", [])\n\n\nclass EventsService\n    constructor: (@win, @log, @config, @auth, @liveAnnouncementService, @rootScope) ->\n        bindMethods(@)\n\n    initialize: (sessionId) ->\n        @.sessionId = sessionId\n        @.subscriptions = {}\n        @.connected = false\n        @.error = false\n        @.pendingMessages = []\n\n        @.missedHeartbeats = 0\n        @.heartbeatInterval = null\n\n        if @win.WebSocket is undefined\n            @log.info \"WebSockets not supported on your browser\"\n\n    setupConnection: ->\n        @.stopExistingConnection()\n\n        url = @config.get(\"eventsUrl\")\n\n        # This allows disable events in case\n        # url is not found on the configuration.\n        return if not url\n\n        # This allows relative urls in configuration.\n        if not startswith(url, \"ws:\") and not startswith(url, \"wss:\")\n            loc = @win.location\n            scheme = if loc.protocol == \"https:\" then \"wss:\" else \"ws:\"\n            path = _.trimStart(url, \"/\")\n            url = \"#{scheme}//#{loc.host}/#{path}\"\n\n        @.error = false\n        @.ws = new @win.WebSocket(url)\n        @.ws.addEventListener(\"open\", @.onOpen)\n        @.ws.addEventListener(\"message\", @.onMessage)\n        @.ws.addEventListener(\"error\", @.onError)\n        @.ws.addEventListener(\"close\", @.onClose)\n\n    stopExistingConnection: ->\n        if @.ws is undefined\n            return\n\n        @.ws.removeEventListener(\"open\", @.onOpen)\n        @.ws.removeEventListener(\"close\", @.onClose)\n        @.ws.removeEventListener(\"error\", @.onError)\n        @.ws.removeEventListener(\"message\", @.onMessage)\n        @.stopHeartBeatMessages()\n        @.ws.close()\n\n        delete @.ws\n\n    notifications: ->\n        @.subscribe null, 'notifications', (data) =>\n            @liveAnnouncementService.show(data.title, data.desc)\n            @rootScope.$digest()\n\n    liveNotifications: ->\n        if not @.auth.userData?\n            return\n        userId = @.auth.userData.get('id')\n\n        subscribe = () =>\n            @.subscribe null, \"live_notifications.#{userId}\", (data) =>\n                notification = new Notification(data.title, {\n                    icon: \"/#{window._version}/images/favicon.png\",\n                    body: data.body,\n                    tag: data.id\n                })\n                notification.onshow = () =>\n                    if data.timeout and data.timeout > 0\n                        setTimeout =>\n                            notification.close()\n                        ,\n                            data.timeout\n\n                if data.url\n                    notification.onclick = () =>\n                        window.open data.url\n        if !('Notification' in window)\n            console.log(\"This browser does not support desktop notification\")\n        else if Notification.permission == \"granted\"\n            subscribe()\n        else if Notification.permission != 'denied'\n            Notification.requestPermission (permission) =>\n              if (permission == \"granted\")\n                  subscribe()\n\n    webNotifications: ->\n        if not @.auth.userData?\n            return\n        userId = @.auth.userData.get('id')\n\n        routingKey = \"web_notifications.#{userId}\"\n        randomTimeout = taiga.randomInt(700, 1000)\n        @.subscribe null, routingKey, (data) =>\n            @rootScope.$broadcast \"notifications:new\"\n\n    ###########################################\n    # Heartbeat (Ping - Pong)\n    ###########################################\n    # See  RFC https://tools.ietf.org/html/rfc6455#section-5.5.2\n    #      RFC https://tools.ietf.org/html/rfc6455#section-5.5.3\n    startHeartBeatMessages: ->\n        return if @.heartbeatInterval\n\n        maxMissedHeartbeats =  @config.get(\"eventsMaxMissedHeartbeats\", 5)\n        heartbeatIntervalTime = @config.get(\"eventsHeartbeatIntervalTime\", 60000)\n        reconnectTryInterval = @config.get(\"eventsReconnectTryInterval\", 10000)\n\n        @.missedHeartbeats = 0\n        @.heartbeatInterval = setInterval(() =>\n            try\n                if @.missedHeartbeats >= maxMissedHeartbeats\n                    throw new Error(\"Too many missed heartbeats PINGs.\")\n\n                @.missedHeartbeats++\n                @.sendMessage({cmd: \"ping\"})\n                @log.debug(\"HeartBeat send PING\")\n            catch e\n                @log.error(\"HeartBeat error: \" + e.message)\n                @.setupConnection()\n        , heartbeatIntervalTime)\n\n        @log.debug(\"HeartBeat enabled\")\n\n    stopHeartBeatMessages: ->\n        return if not @.heartbeatInterval\n\n        clearInterval(@.heartbeatInterval)\n        @.heartbeatInterval = null\n\n        @log.debug(\"HeartBeat disabled\")\n\n    processHeartBeatPongMessage: (data) ->\n        @.missedHeartbeats = 0\n        @log.debug(\"HeartBeat recived PONG\")\n\n    ###########################################\n    # Messages\n    ###########################################\n    serialize: (message) ->\n        if _.isObject(message)\n            return JSON.stringify(message)\n        return message\n\n    sendMessage: (message) ->\n        @.pendingMessages.push(message)\n\n        if not @.connected\n            return\n\n        messages = _.map(@.pendingMessages, @.serialize)\n        @.pendingMessages = []\n\n        for msg in messages\n            @.ws.send(msg)\n\n    processMessage: (data) =>\n        routingKey = data.routing_key\n\n        if not @.subscriptions[routingKey]?\n            return\n\n        subscription = @.subscriptions[routingKey]\n\n        if subscription.scope\n            subscription.scope.$apply ->\n                subscription.callback(data.data)\n\n        else\n            subscription.callback(data.data)\n\n    ###########################################\n    # Subscribe and Unsubscribe\n    ###########################################\n    subscribe: (scope, routingKey, callback) ->\n        if @.error\n            return\n\n        @log.debug(\"Subscribe to: #{routingKey}\")\n        subscription = {\n            scope: scope,\n            routingKey: routingKey,\n            callback: callback\n        }\n\n        message = {\n            \"cmd\": \"subscribe\",\n            \"routing_key\": routingKey\n        }\n\n        @.subscriptions[routingKey] = subscription\n        @.sendMessage(message)\n\n        scope.$on(\"$destroy\", => @.unsubscribe(routingKey)) if scope\n\n    unsubscribe: (routingKey) ->\n        if @.error\n            return\n\n        @log.debug(\"Unsubscribe from: #{routingKey}\")\n\n        message = {\n            \"cmd\": \"unsubscribe\",\n            \"routing_key\": routingKey\n        }\n\n        @.sendMessage(message)\n\n    ###########################################\n    # Event listeners\n    ###########################################\n    onOpen: ->\n        @.connected = true\n\n        @log.debug(\"WebSocket connection opened\")\n        token = @auth.getToken()\n\n        message = {\n            cmd: \"auth\"\n            data: {token: token, sessionId: @.sessionId}\n        }\n\n        @.sendMessage(message)\n        @.startHeartBeatMessages()\n        @.notifications()\n        @.liveNotifications()\n        @.webNotifications()\n\n    onMessage: (event) ->\n        @.log.debug \"WebSocket message received: #{event.data}\"\n\n        data = JSON.parse(event.data)\n\n        if data.cmd == \"pong\"\n            @.processHeartBeatPongMessage(data)\n        else\n            @.processMessage(data)\n\n    onError: (error) ->\n        @log.error(\"WebSocket error: #{error}\")\n        @.error = true\n        setTimeout(@.setupConnection, @.reconnectTryInterval)\n\n    onClose: ->\n        @log.debug(\"WebSocket closed.\")\n        @.connected = false\n        @.stopHeartBeatMessages()\n        setTimeout(@.setupConnection, @.reconnectTryInterval)\n\n\nclass EventsProvider\n    setSessionId: (sessionId) ->\n        @.sessionId = sessionId\n\n    $get: ($win, $log, $conf, $auth, liveAnnouncementService, $rootScope) ->\n        service = new EventsService($win, $log, $conf, $auth, liveAnnouncementService, $rootScope)\n        service.initialize(@.sessionId)\n        return service\n\n    @.prototype.$get.$inject = [\n        \"$window\",\n        \"$log\",\n        \"$tgConfig\",\n        \"$tgAuth\",\n        \"tgLiveAnnouncementService\",\n        \"$rootScope\"\n    ]\n\nmodule.provider(\"$tgEvents\", EventsProvider)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/feedback.coffee\n###\n\ntaiga = @.taiga\n\ngroupBy = @.taiga.groupBy\nbindOnce = @.taiga.bindOnce\nmixOf = @.taiga.mixOf\ndebounce = @.taiga.debounce\ntrim = @.taiga.trim\n\nmodule = angular.module(\"taigaFeedback\", [])\n\nFeedbackDirective = ($lightboxService, $repo, $confirm, $loading, feedbackService)->\n    link = ($scope, $el, $attrs) ->\n        form = $el.find(\"form\").checksley()\n\n        submit = debounce 2000, (event) =>\n            event.preventDefault()\n\n            if not form.validate()\n                return\n\n            currentLoading = $loading()\n                .target(submitButton)\n                .start()\n\n            promise = $repo.create(\"feedback\", $scope.feedback)\n\n            promise.then (data) ->\n                currentLoading.finish()\n                $lightboxService.close($el)\n                $confirm.notify(\"success\", \"\\\\o/ we'll be happy to read your\")\n\n            promise.then null, ->\n                currentLoading.finish()\n                $confirm.notify(\"error\")\n\n        submitButton = $el.find(\".submit-button\")\n\n        $el.on \"submit\", \"form\", submit\n\n        openLightbox = ->\n            $scope.feedback = {}\n            $lightboxService.open($el)\n            $el.find(\"textarea\").focus()\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n        openLightbox()\n\n    directive = {\n        link: link,\n        templateUrl: \"common/lightbox-feedback.html\"\n        scope: {}\n    }\n\n    return directive\n\nmodule.directive(\"tgLbFeedback\", [\"lightboxService\", \"$tgRepo\", \"$tgConfirm\",\n    \"$tgLoading\", \"tgFeedbackService\", FeedbackDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/integrations.coffee\n###\n\nmodule = angular.module(\"taigaIntegrations\", [])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/issues.coffee\n###\n\nmodule = angular.module(\"taigaIssues\", [])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/kanban.coffee\n###\n\nmodule = angular.module(\"taigaKanban\", [])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/plugins.coffee\n###\n\nmodule = angular.module(\"taigaPlugins\", [\"ngRoute\"])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/projects.coffee\n###\n\nmodule = angular.module(\"taigaProject\", [])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/related-tasks.coffee\n###\n\ntaiga = @.taiga\ntrim = @.taiga.trim\ndebounce = @.taiga.debounce\n\nmodule = angular.module(\"taigaRelatedTasks\", [])\n\n\nRelatedTaskRowDirective = ($repo, $compile, $confirm, $rootscope, $loading, $template, $translate, $emojis) ->\n    templateView = $template.get(\"task/related-task-row.html\", true)\n    templateEdit = $template.get(\"task/related-task-row-edit.html\", true)\n\n    link = ($scope, $el, $attrs, $model) ->\n        saveTask = debounce 2000, (task) ->\n            task.subject = $el.find('input').val()\n\n            currentLoading = $loading()\n                .target($el.find('.task-name'))\n                .start()\n\n            promise = $repo.save(task)\n            promise.then =>\n                currentLoading.finish()\n                $rootscope.$broadcast(\"related-tasks:update\")\n\n            promise.then null, =>\n                currentLoading.finish()\n                $el.find('input').val(task.subject)\n                $confirm.notify(\"error\")\n            return promise\n\n        renderEdit = (task) ->\n            if (@childScope)\n                @childScope.$destroy()\n            @childScope = $scope.$new()\n            $el.off()\n            $el.html($compile(templateEdit({task: task}))(childScope))\n\n            $el.find(\".task-name input\").val(task.subject)\n\n            $el.on \"keyup\", \"input\", (event) ->\n                if event.keyCode == 13\n                    saveTask($model.$modelValue).then ->\n                        renderView($model.$modelValue)\n                else if event.keyCode == 27\n                    renderView($model.$modelValue)\n\n            $el.on \"click\", \".save-task\", (event) ->\n                saveTask($model.$modelValue).then ->\n                    renderView($model.$modelValue)\n\n            $el.on \"click\", \".cancel-edit\", (event) ->\n                renderView($model.$modelValue)\n\n        renderView = (task) ->\n            perms = {\n                modify_task: $scope.project.my_permissions.indexOf(\"modify_task\") != -1\n                delete_task: $scope.project.my_permissions.indexOf(\"delete_task\") != -1\n            }\n\n            $el.html($compile(templateView({\n                task: task,\n                perms: perms,\n                emojify: (text) -> $emojis.replaceEmojiNameByHtmlImgs(_.escape(text))\n            }))($scope))\n\n            $el.on \"click\", \".edit-task\", ->\n                renderEdit($model.$modelValue)\n                $el.find('input').focus().select()\n\n            $el.on \"click\", \".delete-task\", (event) ->\n                title = $translate.instant(\"TASK.TITLE_DELETE_ACTION\")\n                task = $model.$modelValue\n                message = task.subject\n\n                $confirm.askOnDelete(title, message).then (askResponse) ->\n                    promise = $repo.remove(task)\n                    promise.then ->\n                        askResponse.finish()\n                        $scope.$emit(\"related-tasks:delete\")\n\n                    promise.then null, ->\n                        askResponse.finish(false)\n                        $confirm.notify(\"error\")\n\n        $scope.$watch $attrs.ngModel, (val) ->\n            return if not val\n            renderView(val)\n\n        $scope.$on \"related-tasks:assigned-to-changed\", ->\n            $rootscope.$broadcast(\"related-tasks:update\")\n\n        $scope.$on \"related-tasks:status-changed\", ->\n            $rootscope.$broadcast(\"related-tasks:update\")\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link:link, require:\"ngModel\"}\n\nmodule.directive(\"tgRelatedTaskRow\", [\"$tgRepo\", \"$compile\", \"$tgConfirm\", \"$rootScope\", \"$tgLoading\",\n                                      \"$tgTemplate\", \"$translate\", \"$tgEmojis\", RelatedTaskRowDirective])\n\n\nRelatedTaskCreateFormDirective = ($repo, $compile, $confirm, $tgmodel, $loading, $analytics) ->\n    newTask = {\n        subject: \"\"\n        assigned_to: null\n    }\n\n    link = ($scope, $el, $attrs) ->\n        createTask = (task) ->\n            task.subject = $el.find('input').val()\n            task.assigned_to = $scope.newTask.assigned_to\n            task.status = $scope.newTask.status\n            $scope.newTask.status = $scope.project.default_task_status\n            $scope.newTask.assigned_to = null\n\n            currentLoading = $loading()\n                .target($el.find('.task-name'))\n                .start()\n\n            promise = $repo.create(\"tasks\", task)\n            promise.then ->\n                $analytics.trackEvent(\"task\", \"create\", \"create task on userstory\", 1)\n                currentLoading.finish()\n                $scope.$emit(\"related-tasks:add\")\n\n            promise.then null, ->\n                $el.find('input').val(task.subject)\n                currentLoading.finish()\n                $confirm.notify(\"error\")\n\n            return promise\n\n        close = () ->\n            $el.off()\n\n            $scope.openNewRelatedTask = false\n\n        reset = () ->\n            newTask = {\n                subject: \"\"\n                assigned_to: null\n            }\n\n            newTask[\"status\"] = $scope.project.default_task_status\n            newTask[\"project\"] = $scope.project.id\n            newTask[\"user_story\"] = $scope.us.id\n\n            $scope.newTask = $tgmodel.make_model(\"tasks\", newTask)\n\n        render = ->\n            return if $scope.openNewRelatedTask\n\n            $scope.openNewRelatedTask = true\n\n            $el.on \"keyup\", \"input\", (event)->\n                if event.keyCode == 13\n                    createTask(newTask).then ->\n                        reset()\n                        $el.find('input').focus()\n\n                else if event.keyCode == 27\n                    $scope.$apply () -> close()\n\n        $scope.save = () ->\n            createTask(newTask).then ->\n                close()\n\n        taiga.bindOnce $scope, \"us\", reset\n\n        $scope.$on \"related-tasks:show-form\", ->\n            $scope.$apply(render)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        scope: true,\n        link: link,\n        templateUrl: 'task/related-task-create-form.html'\n    }\n\nmodule.directive(\"tgRelatedTaskCreateForm\", [\"$tgRepo\", \"$compile\", \"$tgConfirm\", \"$tgModel\", \"$tgLoading\",\n                                             \"$tgAnalytics\", RelatedTaskCreateFormDirective])\n\n\nRelatedTaskCreateButtonDirective = ($repo, $compile, $confirm, $tgmodel, $template) ->\n    template = $template.get(\"common/components/add-button.html\", true)\n\n    link = ($scope, $el, $attrs) ->\n        $scope.$watch \"project\", (val) ->\n            return if not val\n            $el.off()\n            if $scope.project.my_permissions.indexOf(\"add_task\") != -1\n                $el.html($compile(template())($scope))\n            else\n                $el.html(\"\")\n\n            $el.on \"click\", \".add-button\", (event)->\n                $scope.$emit(\"related-tasks:add-new-clicked\")\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link: link}\n\nmodule.directive(\"tgRelatedTaskCreateButton\", [\"$tgRepo\", \"$compile\", \"$tgConfirm\", \"$tgModel\",\n                                               \"$tgTemplate\", RelatedTaskCreateButtonDirective])\n\n\nRelatedTasksDirective = ($repo, $rs, $rootscope) ->\n    link = ($scope, $el, $attrs) ->\n        loadTasks = ->\n            return $rs.tasks.list($scope.projectId, null, $scope.usId).then (result) ->\n                Immutable.fromJS(result.data)\n\n        _isVisible = ->\n            if $scope.project\n                return $scope.project.my_permissions.indexOf(\"view_tasks\") != -1\n            return false\n\n        _isEditable = ->\n            if $scope.project\n                return $scope.project.my_permissions.indexOf(\"modify_task\") != -1\n            return false\n\n        $scope.reorderTask = (task, newIndex) ->\n            $rootscope.$broadcast('task:reorder', task, newIndex)\n\n        $scope.showRelatedTasks = ->\n            return _isVisible() && ( _isEditable() ||  $scope.tasks?.length )\n\n        $scope.$on \"related-tasks:add\", ->\n            loadTasks().then ->\n                $rootscope.$broadcast(\"related-tasks:update\")\n\n        $scope.$on \"related-tasks:reordered\", ->\n            loadTasks()\n\n        $scope.$on \"related-tasks:delete\", ->\n            loadTasks().then ->\n                $rootscope.$broadcast(\"related-tasks:update\")\n\n        $scope.$on \"related-tasks:add-new-clicked\", ->\n            $scope.$broadcast(\"related-tasks:show-form\")\n\n        taiga.bindOnce $scope, \"us\", (val) ->\n            loadTasks()\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link: link}\n\nmodule.directive(\"tgRelatedTasks\", [\"$tgRepo\", \"$tgResources\", \"$rootScope\", RelatedTasksDirective])\n\n\nRelatedTaskAssignedToInlineEditionDirective = ($repo, $rootscope, $translate, avatarService, $lightboxFactory) ->\n    template = _.template(\"\"\"\n    <img style=\"background-color: <%- bg %>\" src=\"<%- imgurl %>\" alt=\"<%- name %>\"/>\n    <figcaption><%- name %></figcaption>\n    \"\"\")\n\n    link = ($scope, $el, $attrs) ->\n        updateRelatedTask = (task) ->\n            ctx = {\n                name: $translate.instant(\"COMMON.ASSIGNED_TO.NOT_ASSIGNED\"),\n            }\n\n            member = $scope.usersById[task.assigned_to]\n\n            avatar = avatarService.getAvatar(member)\n            ctx.imgurl = avatar.url\n            ctx.bg = avatar.bg\n\n            if member\n                ctx.name = member.full_name_display\n\n            $el.find(\".avatar\").html(template(ctx))\n            $el.find(\".task-assignedto\").attr('title', ctx.name)\n\n        $ctrl = $el.controller()\n        task = $scope.$eval($attrs.tgRelatedTaskAssignedToInlineEdition)\n        notAutoSave = $scope.$eval($attrs.notAutoSave)\n        autoSave = !notAutoSave\n\n        $scope.$watch $attrs.tgRelatedTaskAssignedToInlineEdition, () ->\n            task = $scope.$eval($attrs.tgRelatedTaskAssignedToInlineEdition)\n            updateRelatedTask(task)\n\n        updateRelatedTask(task)\n\n        $el.on \"click\", \".task-assignedto\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n\n            onClose = (assignedUsers) =>\n                task.assigned_to = assignedUsers.pop() || null\n                if autoSave\n                    $repo.save(task).then ->\n                        $scope.$emit(\"related-tasks:assigned-to-changed\")\n                        updateRelatedTask(task)\n\n            $lightboxFactory.create(\n                'tg-lb-select-user',\n                {\n                    \"class\": \"lightbox lightbox-select-user\",\n                },\n                {\n                    \"currentUsers\": [task.assigned_to],\n                    \"activeUsers\": $scope.activeUsers,\n                    \"onClose\": onClose,\n                    \"single\": true,\n                    \"lbTitle\": $translate.instant(\"COMMON.ASSIGNED_USERS.ADD\"),\n                }\n            )\n\n        taiga.bindOnce $scope, \"project\", (project) ->\n            # If the user has not enough permissions the click events are unbinded\n            if project.my_permissions.indexOf(\"modify_task\") == -1\n                $el.unbind(\"click\")\n                $el.find(\"a\").addClass(\"not-clickable\")\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link: link}\n\nmodule.directive(\"tgRelatedTaskAssignedToInlineEdition\", [\"$tgRepo\", \"$rootScope\", \"$translate\", \"tgAvatarService\",\n                                                          \"tgLightboxFactory\", RelatedTaskAssignedToInlineEditionDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/resources.coffee\n###\n\ntaiga = @.taiga\n\nclass ResourcesService extends taiga.Service\n\nurls = {\n    # Auth\n    \"auth\": \"/auth\"\n    \"auth-register\": \"/auth/register\"\n    \"invitations\": \"/invitations\"\n\n    # User\n    \"users\": \"/users\"\n    \"by_username\": \"/users/by_username\"\n    \"users-password-recovery\": \"/users/password_recovery\"\n    \"users-change-password-from-recovery\": \"/users/change_password_from_recovery\"\n    \"users-change-password\": \"/users/change_password\"\n    \"users-change-email\": \"/users/change_email\"\n    \"users-cancel-account\": \"/users/cancel\"\n    \"users-export\": \"/users/export\"\n    \"user-stats\": \"/users/%s/stats\"\n    \"user-liked\": \"/users/%s/liked\"\n    \"user-voted\": \"/users/%s/voted\"\n    \"user-watched\": \"/users/%s/watched\"\n    \"user-contacts\": \"/users/%s/contacts\"\n    \"user-me\": \"/users/me\"\n\n    # User - Notification\n    \"permissions\": \"/permissions\"\n    \"notify-policies\": \"/notify-policies\"\n    \"notifications\": \"/web-notifications\"\n\n    # User Project Settings\n    \"user-project-settings\": \"/user-project-settings\"\n\n    # User - Storage\n    \"user-storage\": \"/user-storage\"\n\n    # Memberships\n    \"memberships\": \"/memberships\"\n    \"bulk-create-memberships\": \"/memberships/bulk_create\"\n\n    # Roles & Permissions\n    \"roles\": \"/roles\"\n    \"permissions\": \"/permissions\"\n\n    # Resolver\n    \"resolver\": \"/resolver\"\n\n    # Project\n    \"projects\": \"/projects\"\n    \"project-templates\": \"/project-templates\"\n    \"project-modules\": \"/projects/%s/modules\"\n    \"bulk-update-projects-order\": \"/projects/bulk_update_order\"\n    \"project-like\": \"/projects/%s/like\"\n    \"project-unlike\": \"/projects/%s/unlike\"\n    \"project-watch\": \"/projects/%s/watch\"\n    \"project-unwatch\": \"/projects/%s/unwatch\"\n    \"project-contact\": \"contact\"\n    \"project-transfer-validate-token\": \"/projects/%s/transfer_validate_token\"\n    \"project-transfer-accept\": \"/projects/%s/transfer_accept\"\n    \"project-transfer-reject\": \"/projects/%s/transfer_reject\"\n    \"project-transfer-request\": \"/projects/%s/transfer_request\"\n    \"project-transfer-start\": \"/projects/%s/transfer_start\"\n\n    # Project Values - Attributes\n    \"epic-statuses\": \"/epic-statuses\"\n    \"userstory-statuses\": \"/userstory-statuses\"\n    \"userstory-due-dates\": \"/userstory-due-dates\"\n    \"userstory-due-dates-create-default\": \"/userstory-due-dates/create_default\"\n    \"points\": \"/points\"\n    \"task-statuses\": \"/task-statuses\"\n    \"task-due-dates\": \"/task-due-dates\"\n    \"task-due-dates-create-default\": \"/task-due-dates/create_default\"\n    \"issue-statuses\": \"/issue-statuses\"\n    \"issue-due-dates\": \"/issue-due-dates\"\n    \"issue-due-dates-create-default\": \"/issue-due-dates/create_default\"\n    \"issue-types\": \"/issue-types\"\n    \"priorities\": \"/priorities\"\n    \"severities\": \"/severities\"\n\n    # Milestones/Sprints\n    \"milestones\": \"/milestones\"\n    \"move-userstories-to-milestone\": \"/milestones/%s/move_userstories_to_sprint\"\n    \"move-tasks-to-milestone\": \"/milestones/%s/move_tasks_to_sprint\"\n    \"move-issues-to-milestone\": \"/milestones/%s/move_issues_to_sprint\"\n\n    # Epics\n    \"epics\": \"/epics\"\n    \"epic-upvote\": \"/epics/%s/upvote\"\n    \"epic-downvote\": \"/epics/%s/downvote\"\n    \"epic-watch\": \"/epics/%s/watch\"\n    \"epic-unwatch\": \"/epics/%s/unwatch\"\n    \"epic-related-userstories\": \"/epics/%s/related_userstories\"\n    \"epic-related-userstories-bulk-create\": \"/epics/%s/related_userstories/bulk_create\"\n\n    # User stories\n    \"userstories\": \"/userstories\"\n    \"bulk-create-us\": \"/userstories/bulk_create\"\n    \"bulk-update-us-backlog-order\": \"/userstories/bulk_update_backlog_order\"\n    \"bulk-update-us-milestone\": \"/userstories/bulk_update_milestone\"\n    \"bulk-update-us-miles-order\": \"/userstories/bulk_update_sprint_order\"\n    \"bulk-update-us-kanban-order\": \"/userstories/bulk_update_kanban_order\"\n    \"userstories-filters\": \"/userstories/filters_data\"\n    \"userstory-upvote\": \"/userstories/%s/upvote\"\n    \"userstory-downvote\": \"/userstories/%s/downvote\"\n    \"userstory-watch\": \"/userstories/%s/watch\"\n    \"userstory-unwatch\": \"/userstories/%s/unwatch\"\n\n    # Tasks\n    \"tasks\": \"/tasks\"\n    \"bulk-create-tasks\": \"/tasks/bulk_create\"\n    \"bulk-update-task-taskboard-order\": \"/tasks/bulk_update_taskboard_order\"\n    \"bulk-update-task-milestone\": \"/tasks/bulk_update_milestone\"\n    \"task-upvote\": \"/tasks/%s/upvote\"\n    \"task-downvote\": \"/tasks/%s/downvote\"\n    \"task-watch\": \"/tasks/%s/watch\"\n    \"task-unwatch\": \"/tasks/%s/unwatch\"\n    \"task-filters\": \"/tasks/filters_data\"\n    \"promote-task-to-us\": \"/tasks/%s/promote_to_user_story\"\n\n    # Issues\n    \"issues\": \"/issues\"\n    \"bulk-create-issues\": \"/issues/bulk_create\"\n    \"bulk-update-issue-milestone\": \"/issues/bulk_update_milestone\"\n    \"issues-filters\": \"/issues/filters_data\"\n    \"issue-upvote\": \"/issues/%s/upvote\"\n    \"issue-downvote\": \"/issues/%s/downvote\"\n    \"issue-watch\": \"/issues/%s/watch\"\n    \"issue-unwatch\": \"/issues/%s/unwatch\"\n    \"promote-issue-to-us\": \"/issues/%s/promote_to_user_story\"\n\n    # Wiki pages\n    \"wiki\": \"/wiki\"\n    \"wiki-restore\": \"/wiki/%s/restore\"\n    \"wiki-links\": \"/wiki-links\"\n\n    # History\n    \"history/epic\": \"/history/epic\"\n    \"history/us\": \"/history/userstory\"\n    \"history/issue\": \"/history/issue\"\n    \"history/task\": \"/history/task\"\n    \"history/wiki\": \"/history/wiki\"\n\n    # Attachments\n    \"attachments/epic\": \"/epics/attachments\"\n    \"attachments/us\": \"/userstories/attachments\"\n    \"attachments/issue\": \"/issues/attachments\"\n    \"attachments/task\": \"/tasks/attachments\"\n    \"attachments/wiki_page\": \"/wiki/attachments\"\n\n    # Custom Attributess\n    \"custom-attributes/epic\": \"/epic-custom-attributes\"\n    \"custom-attributes/userstory\": \"/userstory-custom-attributes\"\n    \"custom-attributes/task\": \"/task-custom-attributes\"\n    \"custom-attributes/issue\": \"/issue-custom-attributes\"\n\n    # Custom Attributess - Values\n    \"custom-attributes-values/epic\": \"/epics/custom-attributes-values\"\n    \"custom-attributes-values/userstory\": \"/userstories/custom-attributes-values\"\n    \"custom-attributes-values/task\": \"/tasks/custom-attributes-values\"\n    \"custom-attributes-values/issue\": \"/issues/custom-attributes-values\"\n\n    # Webhooks\n    \"webhooks\": \"/webhooks\"\n    \"webhooks-test\": \"/webhooks/%s/test\"\n    \"webhooklogs\": \"/webhooklogs\"\n    \"webhooklogs-resend\": \"/webhooklogs/%s/resend\"\n\n    # Reports - CSV\n    \"epics-csv\": \"/epics/csv?uuid=%s\"\n    \"userstories-csv\": \"/userstories/csv?uuid=%s\"\n    \"tasks-csv\": \"/tasks/csv?uuid=%s\"\n    \"issues-csv\": \"/issues/csv?uuid=%s\"\n\n    # Timeline\n    \"timeline-profile\": \"/timeline/profile\"\n    \"timeline-user\": \"/timeline/user\"\n    \"timeline-project\": \"/timeline/project\"\n\n    # Search\n    \"search\": \"/search\"\n\n    # Export/Import\n    \"exporter\": \"/exporter\"\n    \"importer\": \"/importer/load_dump\"\n\n    # Feedback\n    \"feedback\": \"/feedback\"\n\n    # locales\n    \"locales\": \"/locales\"\n\n    # Application tokens\n    \"applications\": \"/applications\"\n    \"application-tokens\": \"/application-tokens\"\n\n    # Stats\n    \"stats-discover\": \"/stats/discover\"\n\n    # Importers\n    \"importers-trello-auth-url\": \"/importers/trello/auth_url\"\n    \"importers-trello-authorize\": \"/importers/trello/authorize\"\n    \"importers-trello-list-projects\": \"/importers/trello/list_projects\"\n    \"importers-trello-list-users\": \"/importers/trello/list_users\"\n    \"importers-trello-import-project\": \"/importers/trello/import_project\"\n\n    \"importers-jira-auth-url\": \"/importers/jira/auth_url\"\n    \"importers-jira-authorize\": \"/importers/jira/authorize\"\n    \"importers-jira-list-projects\": \"/importers/jira/list_projects\"\n    \"importers-jira-list-users\": \"/importers/jira/list_users\"\n    \"importers-jira-import-project\": \"/importers/jira/import_project\"\n\n    \"importers-github-auth-url\": \"/importers/github/auth_url\"\n    \"importers-github-authorize\": \"/importers/github/authorize\"\n    \"importers-github-list-projects\": \"/importers/github/list_projects\"\n    \"importers-github-list-users\": \"/importers/github/list_users\"\n    \"importers-github-import-project\": \"/importers/github/import_project\"\n\n    \"importers-asana-auth-url\": \"/importers/asana/auth_url\"\n    \"importers-asana-authorize\": \"/importers/asana/authorize\"\n    \"importers-asana-list-projects\": \"/importers/asana/list_projects\"\n    \"importers-asana-list-users\": \"/importers/asana/list_users\"\n    \"importers-asana-import-project\": \"/importers/asana/import_project\"\n}\n\n# Initialize api urls service\ninitUrls = ($log, $urls) ->\n    $log.debug \"Initialize api urls\"\n    $urls.update(urls)\n\n# Initialize resources service populating it with methods\n# defined in separated files.\ninitResources = ($log, $rs) ->\n    $log.debug \"Initialize resources\"\n    providers = _.toArray(arguments).slice(2)\n\n    for provider in providers\n        provider($rs)\n\nmodule = angular.module(\"taigaResources\", [\"taigaBase\"])\nmodule.service(\"$tgResources\", ResourcesService)\n\n# Module entry point\nmodule.run([\"$log\", \"$tgUrls\", initUrls])\nmodule.run([\n    \"$log\",\n    \"$tgResources\",\n    \"$tgProjectsResourcesProvider\",\n    \"$tgCustomAttributesResourcesProvider\",\n    \"$tgCustomAttributesValuesResourcesProvider\",\n    \"$tgMembershipsResourcesProvider\",\n    \"$tgNotifyPoliciesResourcesProvider\",\n    \"$tgInvitationsResourcesProvider\",\n    \"$tgRolesResourcesProvider\",\n    \"$tgUserProjectSettingsResourcesProvider\",\n    \"$tgUserSettingsResourcesProvider\",\n    \"$tgSprintsResourcesProvider\",\n    \"$tgEpicsResourcesProvider\",\n    \"$tgUserstoriesResourcesProvider\",\n    \"$tgTasksResourcesProvider\",\n    \"$tgIssuesResourcesProvider\",\n    \"$tgWikiResourcesProvider\",\n    \"$tgSearchResourcesProvider\",\n    \"$tgMdRenderResourcesProvider\",\n    \"$tgHistoryResourcesProvider\",\n    \"$tgKanbanResourcesProvider\",\n    \"$tgModulesResourcesProvider\",\n    \"$tgWebhooksResourcesProvider\",\n    \"$tgWebhookLogsResourcesProvider\",\n    \"$tgLocalesResourcesProvider\",\n    \"$tgUsersResourcesProvider\",\n    initResources\n])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/search.coffee\n###\n\ntaiga = @.taiga\n\ngroupBy = @.taiga.groupBy\nbindOnce = @.taiga.bindOnce\nmixOf = @.taiga.mixOf\ndebounceLeading = @.taiga.debounceLeading\ntrim = @.taiga.trim\ndebounce = @.taiga.debounce\n\nmodule = angular.module(\"taigaSearch\", [])\n\n\n#############################################################################\n## Search Controller\n#############################################################################\n\nclass SearchController extends mixOf(taiga.Controller, taiga.PageMixin)\n    @.$inject = [\n        \"$scope\",\n        \"$tgRepo\",\n        \"$tgResources\",\n        \"$routeParams\",\n        \"$q\",\n        \"$tgLocation\",\n        \"tgAppMetaService\",\n        \"$tgNavUrls\",\n        \"$translate\",\n        \"tgErrorHandlingService\",\n        \"tgProjectService\"\n    ]\n\n    constructor: (@scope, @repo, @rs, @params, @q, @location, @appMetaService, @navUrls, @translate, @errorHandlingService, @projectService) ->\n        @scope.sectionName = \"Search\"\n\n        @.loadInitialData()\n\n        title = @translate.instant(\"SEARCH.PAGE_TITLE\", {projectName: @scope.project.name})\n        description = @translate.instant(\"SEARCH.PAGE_DESCRIPTION\", {\n            projectName: @scope.project.name,\n            projectDescription: @scope.project.description\n        })\n\n        @appMetaService.setAll(title, description)\n\n        # Search input watcher\n        @scope.searchTerm = null\n        loadSearchData = debounceLeading(100, (t) => @.loadSearchData(t))\n\n        bindOnce @scope, \"projectId\", (projectId) =>\n            if !@scope.searchResults && @scope.searchTerm\n                @.loadSearchData()\n\n        @scope.$watch \"searchTerm\", (term) =>\n            if term != undefined && @scope.projectId\n                @.loadSearchData(term)\n\n    loadFilters: ->\n        defered = @q.defer()\n        defered.resolve()\n        return defered.promise\n\n    loadProject: ->\n        project = @projectService.project.toJS()\n\n        @scope.project = project\n        @scope.$emit('project:loaded', project)\n\n        @scope.epicStatusById = groupBy(project.epic_statuses, (x) -> x.id)\n        @scope.issueStatusById = groupBy(project.issue_statuses, (x) -> x.id)\n        @scope.taskStatusById = groupBy(project.task_statuses, (x) -> x.id)\n        @scope.severityById = groupBy(project.severities, (x) -> x.id)\n        @scope.priorityById = groupBy(project.priorities, (x) -> x.id)\n        @scope.usStatusById = groupBy(project.us_statuses, (x) -> x.id)\n        return project\n\n    loadSearchData: (term = \"\") ->\n        @scope.loading = true\n\n        @._loadSearchData(term).then (data) =>\n            @scope.searchResults = data\n            @scope.loading = false\n\n    _loadSearchData: (term = \"\") ->\n        @._promise.abort() if @._promise\n\n        @._promise = @rs.search.do(@scope.projectId, term)\n\n        return @._promise\n\n    loadInitialData: ->\n        project = @.loadProject()\n\n        @scope.projectId = project.id\n        @.fillUsersAndRoles(project.members, project.roles)\n\nmodule.controller(\"SearchController\", SearchController)\n\n\n#############################################################################\n## Search box directive\n#############################################################################\n\nSearchBoxDirective = (projectService, $lightboxService, $navurls, $location, $route)->\n    link = ($scope, $el, $attrs) ->\n        project = null\n\n        submit = debounce 2000, (event) =>\n            event.preventDefault()\n\n            form = $el.find(\"form\").checksley()\n            if not form.validate()\n                return\n\n            text = $el.find(\"#search-text\").val()\n\n            url = $navurls.resolve(\"project-search\", {project: project.get(\"slug\")})\n\n            $scope.$apply ->\n                $lightboxService.close($el)\n\n                $location.path(url)\n                $location.search(\"text\", text).path(url)\n                $route.reload()\n\n\n        openLightbox = () ->\n            project = projectService.project\n\n            $lightboxService.open($el).then () ->\n                $el.find(\"#search-text\").focus()\n\n        $el.on \"submit\", \"form\", submit\n\n        openLightbox()\n\n    return {\n        templateUrl: \"search/lightbox-search.html\",\n        link:link\n    }\n\nSearchBoxDirective.$inject = [\n    \"tgProjectService\",\n    \"lightboxService\",\n    \"$tgNavUrls\",\n    \"$tgLocation\",\n    \"$route\"\n]\n\nmodule.directive(\"tgSearchBox\", SearchBoxDirective)\n\n\n#############################################################################\n## Search Directive\n#############################################################################\n\nSearchDirective = ($log, $compile, $templatecache, $routeparams, $location, $analytics) ->\n    linkTable = ($scope, $el, $attrs, $ctrl) ->\n        applyAutoTab = true\n        activeSectionName = \"userstories\"\n        tabsDom = $el.find(\".search-filter\")\n        currentSearchResults = null\n\n        getActiveSection = (data) ->\n            maxVal = 0\n            selectedSection = {}\n            selectedSection.name = \"userstories\"\n            selectedSection.value = []\n\n            if !applyAutoTab\n                selectedSection.name = activeSectionName\n                selectedSection.value = data[activeSectionName]\n\n                return selectedSection\n\n            if data\n                for name in [\"userstories\", \"epics\", \"issues\", \"tasks\", \"wikipages\"]\n                    value = data[name]\n\n                    if value.length > maxVal\n                        maxVal = value.length\n                        selectedSection.name = name\n                        selectedSection.value = value\n                        break\n\n            if maxVal == 0\n                return selectedSection\n\n            return selectedSection\n\n        renderFilterTabs = (data) ->\n            for name, value of data\n                tabsDom.find(\"li.#{name}\").show()\n                tabsDom.find(\"li.#{name} .num\").html(value.length)\n\n        markSectionTabActive = (section) ->\n            # Mark as active the item with max amount of results\n            tabsDom.find(\"a.active\").removeClass(\"active\")\n            tabsDom.find(\"li.#{section.name} a\").addClass(\"active\")\n\n            applyAutoTab = false\n            activeSectionName = section.name\n\n        templates = {\n            epics: $templatecache.get(\"search-epics\")\n            issues: $templatecache.get(\"search-issues\")\n            tasks: $templatecache.get(\"search-tasks\")\n            userstories: $templatecache.get(\"search-userstories\")\n            wikipages: $templatecache.get(\"search-wikipages\")\n        }\n\n        renderTableContent = (section) ->\n            oldElements = $el.find(\".search-result-table\").children()\n            oldScope = oldElements.scope()\n\n            if oldScope\n                oldScope.$destroy()\n                oldElements.remove()\n\n            scope = $scope.$new()\n            scope[section.name] = section.value\n\n            template = angular.element.parseHTML(trim(templates[section.name]))\n            element = $compile(template)(scope)\n            $el.find(\".search-result-table\").html(element)\n\n        $scope.$watch \"searchResults\", (data) ->\n            currentSearchResults = data\n\n            return if !currentSearchResults\n\n            activeSection = getActiveSection(data)\n\n            renderFilterTabs(data)\n\n            renderTableContent(activeSection)\n            markSectionTabActive(activeSection)\n\n        $scope.$watch \"searchTerm\", (searchTerm) ->\n            $location.search(\"text\", searchTerm) if searchTerm != undefined\n            $analytics.trackPage($location.url(), \"Search\")\n\n        $el.on \"click\", \".search-filter li > a\", (event) ->\n            event.preventDefault()\n            target = angular.element(event.currentTarget)\n\n            sectionName = target.parent().data(\"name\")\n            sectionData = if !currentSearchResults then [] else currentSearchResults[sectionName]\n\n            section = {\n                name: sectionName,\n                value: sectionData\n            }\n\n            $scope.$apply ->\n                renderTableContent(section)\n                markSectionTabActive(section)\n\n    link = ($scope, $el, $attrs) ->\n        $ctrl = $el.controller()\n        linkTable($scope, $el, $attrs, $ctrl)\n\n        searchText = $routeparams.text\n        $scope.$watch \"projectId\", (projectId) ->\n            $scope.searchTerm =  searchText if projectId?\n\n    return {link:link}\n\nmodule.directive(\"tgSearch\", [\"$log\", \"$compile\", \"$templateCache\", \"$routeParams\", \"$tgLocation\", \"$tgAnalytics\",\n                              SearchDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/taskboard.coffee\n###\n\nmodule = angular.module(\"taigaTaskboard\", [])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/tasks.coffee\n###\n\nmodule = angular.module(\"taigaTasks\", [])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/team.coffee\n###\n\nmodule = angular.module(\"taigaTeam\", [])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/user-settings.coffee\n###\n\nmodule = angular.module(\"taigaUserSettings\", [])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/userstories.coffee\n###\n\nmodule = angular.module(\"taigaUserStories\", [])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/wiki.coffee\n###\n\nmodule = angular.module(\"taigaWiki\", [])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/common/analytics.coffee\n###\n\ntaiga = @.taiga\nmodule = angular.module(\"taigaCommon\")\n\n\nclass AnalyticsService extends taiga.Service\n    @.$inject = [\"$rootScope\", \"$log\", \"$tgConfig\", \"$window\", \"$document\", \"$location\"]\n\n    constructor: (@rootscope, @log, @config, @win, @doc, @location) ->\n        @.initialized = false\n\n        conf = @config.get(\"analytics\", {})\n\n        @.accountId = conf.accountId\n        @.pageEvent = conf.pageEvent or \"$routeChangeSuccess\"\n        @.trackRoutes = conf.trackRoutes or true\n        @.ignoreFirstPageLoad = conf.ignoreFirstPageLoad or false\n\n    initialize: ->\n        if not @.accountId\n            @log.debug \"Analytics: no acount id provided. Disabling.\"\n            return\n\n        @.injectAnalytics()\n\n        @win.ga(\"create\", @.accountId, \"auto\")\n        @win.ga(\"require\", \"ec\")\n        @win.ga(\"require\", \"displayfeatures\")\n\n        if @.trackRoutes and (not @.ignoreFirstPageLoad)\n            @win.ga(\"send\", \"pageview\", @.getUrl())\n\n        # activates page tracking\n        if @.trackRoutes\n            @rootscope.$on @.pageEvent, =>\n                @.trackPage(@.getUrl(), \"Taiga\")\n\n        @.initialized = true\n        @.setUserId()\n\n    setUserId: ->\n        return if not @.initialized\n        return if not @win.ga\n        @win.ga('set', 'userId', @rootscope?.user?.uuid)\n\n    getUrl: ->\n        return @location.path()\n\n    injectAnalytics: ->\n        fn = `(function(i,s,o,g,r,a,m){i[\"GoogleAnalyticsObject\"]=r;i[r]=i[r]||function(){\n              (i[r].q=i[r].q||[]).push(arguments);},i[r].l=1*new Date();a=s.createElement(o),\n              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m);})`\n        fn(window, document, \"script\", \"//www.google-analytics.com/analytics.js\", \"ga\")\n\n    trackPage: (url, title) ->\n        return if not @.initialized\n        return if not @win.ga\n\n        title = title or @doc[0].title\n        @win.ga(\"send\", \"pageview\", {\n            \"page\": url,\n            \"title\": title\n        })\n\n    trackEvent: (category, action, label, value) ->\n        return if not @.initialized\n        return if not @win.ga\n\n        @win.ga(\"send\", \"event\", category, action, label, value)\n\n    ecViewPlan: (plan) ->\n        return if not @.initialized\n        return if not @win.ga\n\n        @win.ga('ec:addProduct', {\n            'id': plan.plan_id,\n            'name': plan.name,\n            'category': \"plans\",\n            'quantity': 1,\n            'position': 1,\n        })\n        @win.ga('ec:setAction','detail')\n        @.trackEvent(\"ecommerce\", \"view-product-detail\", plan.name, plan.plan_id)\n\n    ecClickPlan: (plan) ->\n        return if not @.initialized\n        return if not @win.ga\n\n        @win.ga('ec:addProduct', {\n            'id': plan.plan_id,\n            'name': plan.name,\n            'category': \"plans\",\n            'quantity': 1,\n            'position': 1,\n        })\n        @win.ga('ec:setAction','click')\n        @.trackEvent(\"ecommerce\", \"click-product\", plan.name, plan.plan_id)\n\n    ecListPlans: ([plans], page) ->\n        return if not @.initialized\n        return if not @win.ga\n\n        position = 1\n        for plan in plans\n            @win.ga('ec:addImpression', {\n               'id': plan.plan_id,\n               'name': plan.name,\n               'list': page,\n               'position': position,\n            })\n            position++\n        @.trackEvent(\"ecommerce\", \"list-plans\")\n\n    ecAddToCart: (plan_id, plan_name, plan_price) ->\n        return if not @.initialized\n        return if not @win.ga\n\n        @win.ga('ec:addProduct', {\n            'id': plan_id,\n            'name': plan_name,\n            'price': plan_price,\n            'category': \"plans\",\n            'quantity': 1,\n            'position': 1,\n        })\n        @win.ga('ec:setAction','add')\n        @.trackEvent('ecommerce', 'add-to-cart', 'Collect Payment Info', null)\n\n    ecConfirmChange: (plan_id, plan_name, plan_price) ->\n        return if not @.initialized\n        return if not @win.ga\n\n        @win.ga('ec:addProduct', {\n            'id': plan_id,\n            'name': plan_name,\n            'price': plan_price,\n            'category': \"plans\",\n            'quantity': 1,\n            'position': 1,\n        })\n        @win.ga('ec:setAction','checkout', {'step': 1,})\n        @.trackEvent(\"ecommerce\", \"start-checkout\", \"start\", 1)\n\n    ecPurchase: (plan_id, plan_name, plan_price) ->\n        return if not @.initialized\n        return if not @win.ga\n\n        @win.ga('ec:addProduct', {\n            'id': plan_id,\n            'name': plan_name,\n            'price': plan_price,\n            'category': \"plans\",\n            'quantity': 1,\n            'position': 1,\n        })\n\n        @win.ga('ec:setAction','checkout', {'step': 2,})\n        @.trackEvent(\"ecommerce\", \"end-checkout\", \"end\", 2)\n\n        @win.ga('ec:addProduct', {\n            'id': plan_id,\n            'name': plan_name,\n            'price': plan_price,\n            'category': \"plans\",\n            'quantity': 1,\n            'position': 1,\n        })\n        @win.ga('ec:setAction','purchase', {\n            'id': plan_id,\n            'revenue': plan_price,\n        })\n        @.trackEvent('ecommerce', 'checkout', 'Plan checkout', null)\n\nmodule.service(\"$tgAnalytics\", AnalyticsService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/common/bind-scope.coffee\n###\n\nmodule = angular.module(\"taigaCommon\")\n\nBindScope = (config) ->\n    if !config.debugInfo\n        jQuery.fn.scope = () -> this.data('scope')\n\n    link = ($scope, $el) ->\n        if !config.debugInfo\n            $el\n                .data('scope', $scope)\n                .addClass('tg-scope')\n\n    return {link: link}\n\nmodule.directive(\"tgBindScope\", [\"$tgConfig\", BindScope])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/common/compile-html.directive.coffee\n###\n\nCompileHtmlDirective = ($compile) ->\n    link = (scope, element, attrs) ->\n        scope.$watch attrs.tgCompileHtml, (newValue, oldValue) ->\n            element.html(newValue)\n            $compile(element.contents())(scope)\n\n    return {\n        link: link\n    }\n\nCompileHtmlDirective.$inject = [\"$compile\"]\n\nangular.module(\"taigaCommon\").directive(\"tgCompileHtml\", CompileHtmlDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/common/components.coffee\n###\n\ntaiga = @.taiga\nbindOnce = @.taiga.bindOnce\n\nmodule = angular.module(\"taigaCommon\")\n\n\n#############################################################################\n## Date Range Directive (used mainly for sprint date range)\n#############################################################################\n\nDateRangeDirective = ($translate) ->\n    renderRange = ($el, first, second) ->\n        prettyDate = $translate.instant(\"BACKLOG.SPRINTS.DATE\")\n        initDate = moment(first).format(prettyDate)\n        endDate = moment(second).format(prettyDate)\n        $el.html(\"#{initDate}-#{endDate}\")\n\n    link = ($scope, $el, $attrs) ->\n        [first, second] = $attrs.tgDateRange.split(\",\")\n\n        bindOnce $scope, first, (valFirst) ->\n            bindOnce $scope, second, (valSecond) ->\n                renderRange($el, valFirst, valSecond)\n\n    return {link:link}\n\nmodule.directive(\"tgDateRange\", [\"$translate\", DateRangeDirective])\n\n\n#############################################################################\n## Date Selector Directive (using pikaday)\n#############################################################################\n\nDateSelectorDirective = ($rootscope, datePickerConfigService) ->\n    link = ($scope, $el, $attrs, $model) ->\n        selectedDate = null\n\n        initialize = () ->\n            datePickerConfig = datePickerConfigService.get()\n\n            _.merge(datePickerConfig, {\n                field: $el[0]\n            })\n\n            $el.picker = new Pikaday(datePickerConfig)\n\n        unbind = $rootscope.$on \"$translateChangeEnd\", (ctx) =>\n            $el.picker.destroy() if $el.picker\n            initialize()\n\n        $attrs.$observe \"pickerValue\", (val) ->\n            $el.val(val)\n\n            if val?\n                $el.picker.destroy() if $el.picker\n                initialize()\n\n            $el.picker.setDate(val)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n            unbind()\n            $el.picker.destroy()\n\n    return {\n        link: link\n    }\n\nmodule.directive(\"tgDateSelector\", [\"$rootScope\", \"tgDatePickerConfigService\", DateSelectorDirective])\n\n\n#############################################################################\n## Sprint Progress Bar Directive\n#############################################################################\n\nSprintProgressBarDirective = ->\n    renderProgress = ($el, percentage, visual_percentage) ->\n        if $el.hasClass(\".current-progress\")\n            $el.css(\"width\", \"#{percentage}%\")\n        else\n            $el.find(\".current-progress\").css(\"width\", \"#{visual_percentage}%\")\n            $el.find(\".number\").html(\"#{percentage} %\")\n\n    link = ($scope, $el, $attrs) ->\n        bindOnce $scope, $attrs.tgSprintProgressbar, (sprint) ->\n            closedPoints = sprint.closed_points\n            totalPoints = sprint.total_points\n            percentage = 0\n            percentage = Math.round(100 * (closedPoints/totalPoints)) if totalPoints != 0\n            visual_percentage = 0\n            #Visual hack for .current-progress bar\n            visual_percentage = Math.round(98 * (closedPoints/totalPoints)) if totalPoints != 0\n\n            renderProgress($el, percentage, visual_percentage)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link: link}\n\nmodule.directive(\"tgSprintProgressbar\", SprintProgressBarDirective)\n\n\n#############################################################################\n## Created-by display directive\n#############################################################################\n\nCreatedByDisplayDirective = ($template, $compile, $translate, $navUrls, avatarService)->\n    # Display the owner information (full name and photo) and the date of\n    # creation of an object (like USs, tasks and issues).\n    #\n    # Example:\n    #     div.us-created-by(tg-created-by-display, ng-model=\"us\")\n    #\n    # Requirements:\n    #   - model object must have the attributes 'created_date' and\n    #     'owner'(ng-model)\n    #   - scope.usersById object is required.\n\n    link = ($scope, $el, $attrs) ->\n        bindOnce $scope, $attrs.ngModel, (model) ->\n            if model?\n\n                avatar = avatarService.getAvatar(model.owner_extra_info)\n                $scope.owner = model.owner_extra_info or {\n                    full_name_display: $translate.instant(\"COMMON.EXTERNAL_USER\")\n                }\n\n                $scope.owner.avatar = avatar.url\n                $scope.owner.bg = avatar.bg\n\n                $scope.url = if $scope.owner?.is_active then $navUrls.resolve(\"user-profile\", {username: $scope.owner.username}) else \"\"\n\n\n                $scope.date =  moment(model.created_date).format($translate.instant(\"COMMON.DATETIME\"))\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link: link\n        restrict: \"EA\"\n        require: \"ngModel\",\n        scope: true,\n        templateUrl: \"common/components/created-by.html\"\n    }\n\nmodule.directive(\"tgCreatedByDisplay\", [\"$tgTemplate\", \"$compile\", \"$translate\", \"$tgNavUrls\", \"tgAvatarService\",\n                                        CreatedByDisplayDirective])\n\n\nUserDisplayDirective = ($template, $compile, $translate, $navUrls, avatarService)->\n    # Display the user information (full name and photo).\n    #\n    # Example:\n    #     div.creator(tg-user-display, tg-user-id=\"{{ user.id }}\")\n    #\n    # Requirements:\n    #   - scope.usersById object is required.\n\n    link = ($scope, $el, $attrs) ->\n        id = $attrs.tgUserId\n        $scope.user = $scope.usersById[id] or {\n            full_name_display: $translate.instant(\"COMMON.EXTERNAL_USER\")\n        }\n\n        avatar = avatarService.getAvatar($scope.usersById[id] or null)\n\n        $scope.user.avatar = avatar.url\n        $scope.user.bg = avatar.bg\n\n        $scope.url = if $scope.user.is_active then $navUrls.resolve(\"user-profile\", {username: $scope.user.username}) else \"\"\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link: link\n        restrict: \"EA\"\n        scope: true,\n        templateUrl: \"common/components/user-display.html\"\n    }\n\nmodule.directive(\"tgUserDisplay\", [\"$tgTemplate\", \"$compile\", \"$translate\", \"$tgNavUrls\", \"tgAvatarService\",\n                                   UserDisplayDirective])\n\n\n#############################################################################\n## Block Button directive\n#############################################################################\n\nBlockButtonDirective = ($rootscope, $loading, $template) ->\n    template = $template.get(\"common/components/block-button.html\")\n\n    link = ($scope, $el, $attrs, $model) ->\n        isEditable = ->\n            return $scope.project.my_permissions.indexOf(\"modify_us\") != -1\n\n        $scope.$watch $attrs.ngModel, (item) ->\n            return if not item\n\n            if isEditable()\n                $el.find('.item-block').addClass('editable')\n\n            if item.is_blocked\n                $el.find('.item-block').removeClass('is-active')\n                $el.find('.item-unblock').addClass('is-active')\n            else\n                $el.find('.item-block').addClass('is-active')\n                $el.find('.item-unblock').removeClass('is-active')\n\n        $el.on \"click\", \".item-block\", (event) ->\n            event.preventDefault()\n            $rootscope.$broadcast(\"block\", $model.$modelValue)\n\n        $el.on \"click\", \".item-unblock\", (event) ->\n            event.preventDefault()\n            currentLoading = $loading()\n                .target($el.find(\".item-unblock\"))\n                .start()\n\n            finish = ->\n                currentLoading.finish()\n\n            $rootscope.$broadcast(\"unblock\", $model.$modelValue, finish)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link: link\n        restrict: \"EA\"\n        require: \"ngModel\"\n        template: template\n    }\n\nmodule.directive(\"tgBlockButton\", [\"$rootScope\", \"$tgLoading\", \"$tgTemplate\", BlockButtonDirective])\n\n\n#############################################################################\n## Delete Button directive\n#############################################################################\n\nDeleteButtonDirective = ($log, $repo, $confirm, $location, $template) ->\n    template = $template.get(\"common/components/delete-button.html\")\n\n    link = ($scope, $el, $attrs, $model) ->\n        if not $attrs.onDeleteGoToUrl\n            return $log.error \"DeleteButtonDirective requires on-delete-go-to-url set in scope.\"\n        if not $attrs.onDeleteTitle\n            return $log.error \"DeleteButtonDirective requires on-delete-title set in scope.\"\n\n        $el.on \"click\", \".button-delete\", (event) ->\n            title = $attrs.onDeleteTitle\n            subtitle = $model.$modelValue.subject\n\n            $confirm.askOnDelete(title, subtitle).then (askResponse) =>\n                promise = $repo.remove($model.$modelValue)\n                promise.then =>\n                    askResponse.finish()\n                    url = $scope.$eval($attrs.onDeleteGoToUrl)\n                    $location.path(url)\n                promise.then null, =>\n                    askResponse.finish(false)\n                    $confirm.notify(\"error\")\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link: link\n        restrict: \"EA\"\n        require: \"ngModel\"\n        template: template\n    }\n\nmodule.directive(\"tgDeleteButton\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"$tgTemplate\", DeleteButtonDirective])\n\n#############################################################################\n## Common list directives\n#############################################################################\n## NOTE: These directives are used in issues and search and are\n##       completely bindonce, they only serves for visualization of data.\n#############################################################################\n\nListItemEpicStatusDirective = ->\n    link = ($scope, $el, $attrs) ->\n        epic = $scope.$eval($attrs.tgListitemEpicStatus)\n        bindOnce $scope, \"epicStatusById\", (epicStatusById) ->\n            $el.html(epicStatusById[epic.status].name)\n\n    return {link:link}\n\nmodule.directive(\"tgListitemEpicStatus\", ListItemEpicStatusDirective)\n\nListItemUsStatusDirective = ->\n    link = ($scope, $el, $attrs) ->\n        us = $scope.$eval($attrs.tgListitemUsStatus)\n        bindOnce $scope, \"usStatusById\", (usStatusById) ->\n            $el.html(usStatusById[us.status].name)\n\n    return {link:link}\n\nmodule.directive(\"tgListitemUsStatus\", ListItemUsStatusDirective)\n\n\nListItemTaskStatusDirective = ->\n    link = ($scope, $el, $attrs) ->\n        task = $scope.$eval($attrs.tgListitemTaskStatus)\n        bindOnce $scope, \"taskStatusById\", (taskStatusById) ->\n            $el.html(taskStatusById[task.status].name)\n\n    return {link:link}\n\nmodule.directive(\"tgListitemTaskStatus\", ListItemTaskStatusDirective)\n\n\nListItemAssignedtoDirective = ($template, $translate, avatarService) ->\n    template = $template.get(\"common/components/list-item-assigned-to-avatar.html\", true)\n\n    link = ($scope, $el, $attrs) ->\n        bindOnce $scope, \"usersById\", (usersById) ->\n            item = $scope.$eval($attrs.tgListitemAssignedto)\n            ctx = {\n                name: $translate.instant(\"COMMON.ASSIGNED_TO.NOT_ASSIGNED\"),\n            }\n\n            member = usersById[item.assigned_to]\n            avatar = avatarService.getAvatar(member)\n\n            ctx.imgurl = avatar.url\n            ctx.bg = avatar.bg\n\n            if member\n                ctx.name = member.full_name_display\n\n            $el.html(template(ctx))\n\n    return {link:link}\n\nmodule.directive(\"tgListitemAssignedto\", [\"$tgTemplate\", \"$translate\", \"tgAvatarService\", ListItemAssignedtoDirective])\n\n\nListItemIssueStatusDirective = ->\n    link = ($scope, $el, $attrs) ->\n        issue = $scope.$eval($attrs.tgListitemIssueStatus)\n        bindOnce $scope, \"issueStatusById\", (issueStatusById) ->\n            $el.html(issueStatusById[issue.status].name)\n\n    return {link:link}\n\nmodule.directive(\"tgListitemIssueStatus\", ListItemIssueStatusDirective)\n\n\nListItemTypeDirective = ->\n    link = ($scope, $el, $attrs) ->\n        render = (issueTypeById, issue) ->\n            type = issueTypeById[issue.type]\n            domNode = $el.find(\".level\")\n            domNode.css(\"background-color\", type.color)\n            domNode.attr(\"title\", type.name)\n\n        bindOnce $scope, \"issueTypeById\", (issueTypeById) ->\n            issue = $scope.$eval($attrs.tgListitemType)\n            render(issueTypeById, issue)\n\n        $scope.$watch $attrs.tgListitemType, (issue) ->\n            render($scope.issueTypeById, issue)\n\n    return {\n        link: link\n        templateUrl: \"common/components/level.html\"\n    }\n\nmodule.directive(\"tgListitemType\", ListItemTypeDirective)\n\n\nListItemPriorityDirective = ->\n    link = ($scope, $el, $attrs) ->\n        render = (priorityById, issue) ->\n            priority = priorityById[issue.priority]\n            domNode = $el.find(\".level\")\n            domNode.css(\"background-color\", priority.color)\n            domNode.attr(\"title\", priority.name)\n\n        bindOnce $scope, \"priorityById\", (priorityById) ->\n            issue = $scope.$eval($attrs.tgListitemPriority)\n            render(priorityById, issue)\n\n        $scope.$watch $attrs.tgListitemPriority, (issue) ->\n            render($scope.priorityById, issue)\n\n    return {\n        link: link\n        templateUrl: \"common/components/level.html\"\n    }\n\nmodule.directive(\"tgListitemPriority\", ListItemPriorityDirective)\n\n\nListItemSeverityDirective = ->\n    link = ($scope, $el, $attrs) ->\n        render = (severityById, issue) ->\n            severity = severityById[issue.severity]\n            domNode = $el.find(\".level\")\n            domNode.css(\"background-color\", severity.color)\n            domNode.attr(\"title\", severity.name)\n\n        bindOnce $scope, \"severityById\", (severityById) ->\n            issue = $scope.$eval($attrs.tgListitemSeverity)\n            render(severityById, issue)\n\n        $scope.$watch $attrs.tgListitemSeverity, (issue) ->\n            render($scope.severityById, issue)\n\n    return {\n        link: link\n        templateUrl: \"common/components/level.html\"\n    }\n\nmodule.directive(\"tgListitemSeverity\", ListItemSeverityDirective)\n\n\n#############################################################################\n## Progress bar directive\n#############################################################################\n\nTgProgressBarDirective = ($template) ->\n    template = $template.get(\"common/components/progress-bar.html\", true)\n\n    render = (el, percentage) ->\n        el.html(template({percentage: percentage}))\n\n    link = ($scope, $el, $attrs) ->\n        element = angular.element($el)\n\n        $scope.$watch $attrs.tgProgressBar, (percentage) ->\n            percentage = _.max([0 , percentage])\n            percentage = _.min([100, percentage])\n            render($el, percentage)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link: link}\n\nmodule.directive(\"tgProgressBar\", [\"$tgTemplate\", TgProgressBarDirective])\n\n\n#############################################################################\n## Main title directive\n#############################################################################\n\nTgMainTitleDirective = ($translate) ->\n    link = ($scope, $el, $attrs) ->\n        $attrs.$observe \"i18nSectionName\", (i18nSectionName) ->\n            $scope.sectionName = i18nSectionName\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link: link\n        templateUrl: \"common/components/main-title.html\"\n        scope: {\n            projectName : \"=projectName\"\n        }\n    }\n\nmodule.directive(\"tgMainTitle\", [\"$translate\",  TgMainTitleDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/common/confirm.coffee\n###\n\ntaiga = @.taiga\ntimeout = @.taiga.timeout\ncancelTimeout = @.taiga.cancelTimeout\ndebounce = @.taiga.debounce\nbindMethods = @.taiga.bindMethods\n\nNOTIFICATION_MSG = {\n    \"success\":\n        title: \"NOTIFICATION.OK\"\n        message: \"NOTIFICATION.SAVED\"\n    \"error\":\n        title: \"NOTIFICATION.WARNING\"\n        message: \"NOTIFICATION.WARNING_TEXT\"\n    \"light-error\":\n        title: \"NOTIFICATION.WARNING\"\n        message: \"NOTIFICATION.WARNING_TEXT\"\n}\n\n\nclass ConfirmService extends taiga.Service\n    @.$inject = [\"$q\", \"lightboxService\", \"$tgLoading\", \"$translate\", \"$filter\"]\n\n    constructor: (@q, @lightboxService, @loading, @translate, @filter) ->\n        bindMethods(@)\n\n    hide: (el)->\n        if el\n            @lightboxService.close(el)\n\n            el.off(\".confirm-dialog\")\n\n    ask: (title, subtitle, message, lightboxSelector=\".lightbox-generic-ask\") ->\n        defered = @q.defer()\n\n        el = angular.element(lightboxSelector)\n\n        # Render content\n        el.find(\".title\").text(title || '')\n        el.find(\".subtitle\").text(subtitle || '')\n        if message\n            message = @filter('textToHTML')(message)\n        el.find(\".message\").html(message || '')\n\n        # Assign event handlers\n        el.on \"click.confirm-dialog\", \".button-green\", debounce 2000, (event) =>\n            event.preventDefault()\n            target = angular.element(event.currentTarget)\n            currentLoading = @loading()\n                .target(target)\n                .start()\n            defered.resolve {\n                finish: (ok=true) =>\n                    currentLoading.finish()\n                    if ok\n                        @.hide(el)\n            }\n\n        el.on \"click.confirm-dialog\", \".button-red\", (event) =>\n            event.preventDefault()\n            defered.reject()\n            @.hide(el)\n\n        onEsc = () =>\n            @.hide(el)\n\n        @lightboxService.open(el, null, onEsc)\n\n        return defered.promise\n\n    askOnDelete: (title, message, subtitle) ->\n        if not subtitle?\n            subtitle = @translate.instant(\"NOTIFICATION.ASK_DELETE\")\n        return @.ask(title, subtitle, message)\n\n    askChoice: (title, subtitle, choices, replacement, warning, lightboxSelector=\".lightbox-ask-choice\") ->\n        defered = @q.defer()\n\n        el = angular.element(lightboxSelector)\n\n        # Render content\n        el.find(\".title\").text(title)\n        el.find(\".subtitle\").text(subtitle)\n\n        if replacement\n            el.find(\".replacement\").text(replacement)\n        else\n            el.find(\".replacement\").remove()\n\n        if warning\n            el.find(\".warning\").text(warning)\n        else\n            el.find(\".warning\").remove()\n\n        choicesField = el.find(\".choices\")\n        choicesField.html('')\n        _.each choices, (value, key) ->\n            value = _.escape(value)\n            choicesField.append(angular.element(\"<option value='#{key}'>#{value}</option>\"))\n\n        # Assign event handlers\n        el.on \"click.confirm-dialog\", \"a.button-green\", debounce 2000, (event) =>\n            event.preventDefault()\n            target = angular.element(event.currentTarget)\n            currentLoading = @loading()\n                .target(target)\n                .start()\n            defered.resolve {\n                selected: choicesField.val()\n                finish: (ok=true) =>\n                    currentLoading.finish()\n                    if ok\n                        @.hide(el)\n            }\n\n        el.on \"click.confirm-dialog\", \".button-red\", (event) =>\n            event.preventDefault()\n            defered.reject()\n            @.hide(el)\n\n        @lightboxService.open(el)\n\n        return defered.promise\n\n    error: (message) ->\n        defered = @q.defer()\n\n        el = angular.element(\".lightbox-generic-error\")\n\n        # Render content\n        el.find(\".title\").html(message)\n\n        # Assign event handlers\n        el.on \"click.confirm-dialog\", \".button-green\", (event) =>\n            event.preventDefault()\n            defered.resolve()\n            @.hide(el)\n\n        el.on \"click.confirm-dialog\", \".close\", (event) =>\n            event.preventDefault()\n            defered.resolve()\n            @.hide(el)\n\n        @lightboxService.open(el)\n\n        return defered.promise\n\n    success: (title, message, icon, action) ->\n        defered = @q.defer()\n\n        el = angular.element(\".lightbox-generic-success\")\n\n        el.find(\"img\").remove()\n        el.find(\"svg\").remove()\n\n        if icon\n            if icon.type == \"img\"\n                detailImage = $('<img>').addClass('lb-icon').attr('src', icon.name)\n            else if icon.type == \"svg\"\n                detailImage = document.createElement(\"div\")\n                taiga.addClass(detailImage, \"icon\")\n                taiga.addClass(detailImage, icon.name)\n                taiga.addClass(detailImage, \"lb-icon\")\n\n                svgContainer = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\")\n\n                useSVG = document.createElementNS('http://www.w3.org/2000/svg', 'use')\n                useSVG.setAttributeNS('http://www.w3.org/1999/xlink','href', '#' + icon.name)\n\n                detailImage.appendChild(svgContainer).appendChild(useSVG)\n\n            if detailImage\n                el.find('section').prepend(detailImage)\n\n        # Render content\n        el.find(\".title\").html(title) if title\n        el.find(\".message\").html(message) if message\n        if action\n            el.find(\".button-green\").html(action)\n            el.find(\".button-green\").attr('title', action)\n\n        # Assign event handlers\n        el.on \"click.confirm-dialog\", \".button-green\", (event) =>\n            event.preventDefault()\n            defered.resolve()\n            @.hide(el)\n\n        el.on \"click.confirm-dialog\", \".close\", (event) =>\n            event.preventDefault()\n            defered.resolve()\n            @.hide(el)\n\n        @lightboxService.open(el)\n\n        return defered.promise\n\n    loader: (title, message, spin=false) ->\n        el = angular.element(\".lightbox-generic-loading\")\n\n        # Render content\n        el.find(\".title\").html(title) if title\n        el.find(\".message\").html(message) if message\n\n        if spin\n            el.find(\".spin\").removeClass(\"hidden\")\n\n        return {\n            start: => @lightboxService.open(el)\n            stop: => @lightboxService.close(el)\n            update: (status, title, message, percent) =>\n                el.find(\".title\").html(title) if title\n                el.find(\".message\").html(message) if message\n\n                if percent\n                    el.find(\".spin\").addClass(\"hidden\")\n                    el.find(\".progress-bar-wrapper\").removeClass(\"hidden\")\n                    el.find(\".progress-bar-wrapper > .bar\").width(percent + '%')\n                    el.find(\".progress-bar-wrapper > span\").html(percent + '%').css('left', (percent - 9) + '%' )\n                else\n                    el.find(\".spin\").removeClass(\"hidden\")\n                    el.find(\".progress-bar-wrapper\").addClass(\"hidden\")\n        }\n\n    notify: (type, message, title, time) ->\n        # NOTE: Typesi are: error, success, light-error\n        #       See partials/components/notification-message.jade)\n        #       Add default texts to NOTIFICATION_MSG for new notification types\n\n        selector = \".notification-message-#{type}\"\n        el = angular.element(selector)\n\n        return if el.hasClass(\"active\")\n\n        if title\n            el.find(\"h4\").html(title)\n        else\n            el.find(\"h4\").html(@translate.instant(NOTIFICATION_MSG[type].title))\n\n        if message\n            el.find(\"p\").html(message)\n        else\n            el.find(\"p\").html(@translate.instant(NOTIFICATION_MSG[type].message))\n\n        body = angular.element(\"body\")\n        body.find(\".notification-message .notification-light\")\n            .removeClass('active')\n            .addClass('inactive')\n\n        body.find(selector)\n            .removeClass('inactive')\n            .addClass('active')\n\n        if @.tsem\n            cancelTimeout(@.tsem)\n\n        if !time\n            time = if type == 'error' or type == 'light-error' then 3500 else 1500\n\n        @.tsem = timeout time, =>\n            body.find(selector)\n                .removeClass('active')\n                .addClass('inactive')\n                .one 'animationend', () -> $(this).removeClass('inactive')\n\n            delete @.tsem\n\n        el.on \"click\", \".icon-close, .close\", (event) =>\n            body.find(selector)\n                .removeClass('active')\n                .addClass('inactive')\n\n\nmodule = angular.module(\"taigaCommon\")\nmodule.service(\"$tgConfirm\", ConfirmService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/common/custom-field-values.coffee\n###\n\ntaiga = @.taiga\nbindMethods = @.taiga.bindMethods\nbindOnce = @.taiga.bindOnce\ndebounce = @.taiga.debounce\ngenerateHash = taiga.generateHash\n\nmodule = angular.module(\"taigaCommon\")\n\n# Custom attributes types (see taiga-back/taiga/projects/custom_attributes/choices.py)\nTEXT_TYPE = \"text\"\nRICHTEXT_TYPE = \"url\"\nMULTILINE_TYPE = \"multiline\"\nDATE_TYPE = \"date\"\nURL_TYPE = \"url\"\nDROPDOWN_TYPE = \"dropdown\"\nCHECKBOX_TYPE = \"checkbox\"\nNUMBER_TYPE = \"number\"\n\n\nTYPE_CHOICES = [\n    {\n        key: TEXT_TYPE,\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_TEXT\"\n    },\n    {\n        key: MULTILINE_TYPE,\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_MULTI\"\n    },\n    {\n        key: DATE_TYPE,\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_DATE\"\n    },\n    {\n        key: URL_TYPE,\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_URL\"\n    },\n    {\n        key: RICHTEXT_TYPE,\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_RICHTEXT\"\n    },\n    {\n        key: DROPDOWN_TYPE,\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_DROPDOWN\"\n    },\n    {\n        key: CHECKBOX_TYPE,\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_CHECKBOX\"\n    },\n    {\n        key: NUMBER_TYPE,\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_NUMBER\"\n    }\n]\n\n\n\nclass CustomAttributesValuesController extends taiga.Controller\n    @.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgResources\", \"$tgConfirm\", \"$q\"]\n\n    constructor: (@scope, @rootscope, @repo, @rs, @confirm, @q) ->\n        bindMethods(@)\n        @.type = null\n        @.objectId = null\n        @.projectId = null\n        @.customAttributes = []\n        @.customAttributesValues = null\n\n    initialize: (type, objectId) ->\n        @.project = @scope.project\n        @.type = type\n        @.objectId = objectId\n        @.projectId = @scope.projectId\n\n    loadCustomAttributesValues: ->\n        return @.customAttributesValues if not @.objectId\n        return @rs.customAttributesValues[@.type].get(@.objectId).then (customAttributesValues) =>\n            @.customAttributes = @.project[\"#{@.type}_custom_attributes\"]\n            @.customAttributesValues = customAttributesValues\n            return customAttributesValues\n\n    getAttributeValue: (attribute) ->\n        attributeValue = _.clone(attribute, false)\n        attributeValue.value = @.customAttributesValues.attributes_values[attribute.id]\n        return attributeValue\n\n    updateAttributeValue: (attributeValue) ->\n        onSuccess = =>\n            @rootscope.$broadcast(\"custom-attributes-values:edit\")\n\n        onError = (response) =>\n            @confirm.notify(\"error\")\n            return @q.reject()\n\n        # We need to update the full array so angular understand the model is modified\n        attributesValues = _.clone(@.customAttributesValues.attributes_values, true)\n        attributesValues[attributeValue.id] = attributeValue.value\n        @.customAttributesValues.attributes_values = attributesValues\n        @.customAttributesValues.id = @.objectId\n        return @repo.save(@.customAttributesValues).then(onSuccess, onError)\n\n\nCustomAttributesValuesDirective = ($templates, $storage) ->\n    template = $templates.get(\"custom-attributes/custom-attributes-values.html\", true)\n\n    collapsedHash = (type) ->\n        return generateHash([\"custom-attributes-collapsed\", type])\n\n    link = ($scope, $el, $attrs, $ctrls) ->\n        $ctrl = $ctrls[0]\n        $model = $ctrls[1]\n        hash = collapsedHash($attrs.type)\n        $scope.collapsed = $storage.get(hash) or false\n\n        bindOnce $scope, $attrs.ngModel, (value) ->\n            $ctrl.initialize($attrs.type, value.id)\n            $ctrl.loadCustomAttributesValues()\n\n        $scope.toggleCollapse = () ->\n            $scope.collapsed = !$scope.collapsed\n            $storage.set(hash, $scope.collapsed)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    templateFn = ($el, $attrs) ->\n        return template({\n            requiredEditionPerm: $attrs.requiredEditionPerm\n        })\n\n    return {\n        require: [\"tgCustomAttributesValues\", \"ngModel\"]\n        controller: CustomAttributesValuesController\n        controllerAs: \"ctrl\"\n        restrict: \"AE\"\n        scope: true\n        link: link\n        template: templateFn\n    }\n\nmodule.directive(\"tgCustomAttributesValues\", [\"$tgTemplate\", \"$tgStorage\", \"$translate\",\n                                              CustomAttributesValuesDirective])\n\n\nCustomAttributeValueDirective = ($template, $selectedText, $compile, $translate, datePickerConfigService, wysiwygService) ->\n    template = $template.get(\"custom-attributes/custom-attribute-value.html\", true)\n    templateEdit = $template.get(\"custom-attributes/custom-attribute-value-edit.html\", true)\n\n    link = ($scope, $el, $attrs, $ctrl) ->\n        prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\")\n\n        render = (attributeValue, edit=false) ->\n            if attributeValue.type is DATE_TYPE and attributeValue.value\n                value = moment(attributeValue.value, \"YYYY-MM-DD\").format(prettyDate)\n            if attributeValue.type is NUMBER_TYPE and attributeValue.value\n                value = parseFloat(attributeValue.value)\n            else\n                value = attributeValue.value\n\n            editable = isEditable()\n\n            ctx = {\n                id: attributeValue.id\n                name: attributeValue.name\n                description: attributeValue.description\n                value: value\n                type: attributeValue.type\n                isEditable: editable\n            }\n\n            scope = $scope.$new()\n            scope.attributeHtml = wysiwygService.getHTML(value)\n            scope.extra = attributeValue.extra\n            scope.model = value\n\n            if editable and (edit or not value)\n                html = templateEdit(ctx)\n\n                html = $compile(html)(scope)\n                $el.html(html)\n\n                if attributeValue.type == DATE_TYPE\n                    datePickerConfig = datePickerConfigService.get()\n                    _.merge(datePickerConfig, {\n                        field: $el.find(\"input[name=value]\")[0]\n                        onSelect: (date) =>\n                            selectedDate = date\n                        onOpen: =>\n                            $el.picker.setDate(selectedDate) if selectedDate?\n                    })\n                    $el.picker = new Pikaday(datePickerConfig)\n            else\n                html = template(ctx)\n                html = $compile(html)(scope)\n                $el.html(html)\n\n        isEditable = ->\n            permissions = $scope.project.my_permissions\n            requiredEditionPerm = $attrs.requiredEditionPerm\n            return permissions.indexOf(requiredEditionPerm) > -1\n\n        $scope.saveCustomRichText = (markdown, callback) =>\n            attributeValue.value = markdown\n            $ctrl.updateAttributeValue(attributeValue).then ->\n                callback()\n                render(attributeValue, false)\n\n        $scope.cancelCustomRichText= () =>\n            render(attributeValue, false)\n\n            return null\n\n        submit = debounce 2000, (event) =>\n            event.preventDefault()\n\n            form = $el.find(\"form\").checksley()\n            return if not form.validate()\n\n            if attributeValue.type is DROPDOWN_TYPE\n                formControl = $el.find(\"select[name='value']\")\n                attributeValue.value = formControl.val()\n            else if attributeValue.type is CHECKBOX_TYPE\n                formControl = $el.find(\"input[name=value]\")\n                attributeValue.value = formControl[0].checked\n            else\n                formControl = $el.find(\"input[name=value], textarea[name='value']\")\n                attributeValue.value = formControl.val()\n                if attributeValue.type is DATE_TYPE and moment(attributeValue.value, prettyDate).isValid()\n                    attributeValue.value = moment(attributeValue.value, prettyDate).format(\"YYYY-MM-DD\")\n                if attributeValue.type is NUMBER_TYPE\n                    attributeValue.value = parseFloat(attributeValue.value)\n\n            $scope.$apply ->\n                $ctrl.updateAttributeValue(attributeValue).then ->\n                    render(attributeValue, false)\n\n        setFocusAndSelectOnInputField = ->\n            $el.find(\"input[name='value'], textarea[name='value']\").focus().select()\n\n        # Bootstrap\n        attributeValue = $scope.$eval($attrs.tgCustomAttributeValue)\n        if attributeValue.value == null or attributeValue.value == undefined\n            attributeValue.value = \"\"\n        $scope.customAttributeValue = attributeValue\n        render(attributeValue)\n\n        ## Actions (on view mode)\n\n        $el.on \"click\", \".js-value-view-mode span a\", (event) ->\n            event.stopPropagation()\n\n        $el.on \"click\", \".js-value-view-mode\", ->\n            return if not isEditable()\n            return if $selectedText.get().length\n            render(attributeValue, true)\n            setFocusAndSelectOnInputField()\n\n        $el.on \"click\", \".js-edit-description\", (event) ->\n            event.preventDefault()\n            render(attributeValue, true)\n            setFocusAndSelectOnInputField()\n\n        ## Actions (on edit mode)\n        $el.on \"keyup\", \"input[name=value], textarea[name='value']\", (event) ->\n            if event.keyCode is 13 and event.currentTarget.type isnt \"textarea\"\n                submit(event)\n            else if event.keyCode == 27\n                render(attributeValue, false)\n\n        $el.on \"submit\", \"form\", submit\n\n        $el.on \"click\", \".js-save-description\", submit\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link: link\n        require: \"^tgCustomAttributesValues\"\n        restrict: \"AE\"\n    }\n\nmodule.directive(\"tgCustomAttributeValue\", [\"$tgTemplate\", \"$selectedText\", \"$compile\", \"$translate\",\n                                            \"tgDatePickerConfigService\", \"tgWysiwygService\", CustomAttributeValueDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/common/emojis.coffee\n###\n\ntaiga = @.taiga\nmodule = angular.module(\"taigaCommon\")\n\n\nclass EmojisService extends taiga.Service\n    @.$inject = []\n\n    constructor: () ->\n        @.emojis = _.map taiga.emojis, (it) ->\n            it.image = \"/#{window._version}/emojis/\" + it.image\n\n            return it\n        @.emojisById = _.keyBy(@.emojis, 'id')\n        @.emojisByName = _.keyBy(@.emojis, 'name')\n\n\n    searchByName: (name) =>\n        return _.filter @.emojis, (it) -> it.name.indexOf(name) != -1\n\n    getEmojiById: (id) =>\n        return @.emojisById[id]\n\n    getEmojiByName: (name) =>\n        return @.emojisByName[name]\n\n    replaceImgsByEmojiName: (html) =>\n        emojiIds = taiga.getMatches(html, /emojis\\/([^\"]+).png\"/gi)\n\n        for emojiId in emojiIds\n            regexImgs = new RegExp('<img(.*)' + emojiId + '[^>]+\\>', 'g')\n            emoji = @.getEmojiById(emojiId)\n            html = html.replace(regexImgs, ':' + emoji.name + ':')\n\n        return html\n\n    replaceEmojiNameByImgs: (text) =>\n        emojiIds = taiga.getMatches(text, /:([\\w +-]*):/g)\n\n        for emojiId in emojiIds\n            regexImgs = new RegExp(':' + emojiId + ':', 'g')\n            emoji = @.getEmojiByName(emojiId)\n\n            if emoji\n                text = text.replace(regexImgs, '![alt](' + emoji.image + ')')\n\n        return text\n\n    replaceEmojiNameByHtmlImgs: (text) =>\n        emojiIds = taiga.getMatches(text, /:([\\w +-]*):/g)\n\n        for emojiId in emojiIds\n            regexImgs = new RegExp(':' + _.escapeRegExp(emojiId) + ':', 'g')\n            emoji = @.getEmojiByName(emojiId)\n\n            if emoji\n                text = text.replace(regexImgs, '<img src=\"' + emoji.image + '\" />')\n\n        return text\n\nmodule.service(\"$tgEmojis\", EmojisService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/common/estimation.coffee\n###\n\ntaiga = @.taiga\ngroupBy = @.taiga.groupBy\n\nmodule = angular.module(\"taigaCommon\")\n\n#############################################################################\n## User story estimation directive (for Lightboxes)\n#############################################################################\n\nLbUsEstimationDirective = ($tgEstimationsService, $rootScope, $repo, $template, $compile) ->\n    # Display the points of a US and you can edit it.\n    #\n    # Example:\n    #     tg-lb-us-estimation-progress-bar(ng-model=\"us\")\n    #\n    # Requirements:\n    #   - Us object (ng-model)\n    #   - scope.project object\n\n    link = ($scope, $el, $attrs, $model) ->\n        $scope.$watch $attrs.ngModel, (us) ->\n            if us\n                estimationProcess = $tgEstimationsService.create($el, us, $scope.project)\n                estimationProcess.onSelectedPointForRole = (roleId, pointId, points) ->\n                    us.points = points\n                    estimationProcess.render()\n\n                    $scope.$apply ->\n                        $model.$setViewValue(us)\n\n                estimationProcess.render = () ->\n                    ctx = {\n                        totalPoints: @calculateTotalPoints()\n                        roles: @calculateRoles()\n                        editable: @isEditable\n                        loading: false\n                    }\n                    mainTemplate = \"common/estimation/us-estimation-points-per-role.html\"\n                    template = $template.get(mainTemplate, true)\n                    html = template(ctx)\n                    html = $compile(html)($scope)\n                    @$el.html(html)\n\n                estimationProcess.render()\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link: link\n        restrict: \"EA\"\n        require: \"ngModel\"\n    }\n\nmodule.directive(\"tgLbUsEstimation\", [\"$tgEstimationsService\", \"$rootScope\", \"$tgRepo\", \"$tgTemplate\",\n                                      \"$compile\", LbUsEstimationDirective])\n\n\n#############################################################################\n## User story estimation directive\n#############################################################################\n\nUsEstimationDirective = ($tgEstimationsService, $rootScope, $repo, $template, $compile, $modelTransform, $confirm) ->\n    # Display the points of a US and you can edit it.\n    #\n    # Example:\n    #     tg-us-estimation-progress-bar(ng-model=\"us\")\n    #\n    # Requirements:\n    #   - Us object (ng-model)\n    #   - scope.project object\n\n    link = ($scope, $el, $attrs, $model) ->\n        save = (points) ->\n            transform = $modelTransform.save (us) =>\n                us.points = points\n\n                return us\n\n            onError = =>\n                $confirm.notify(\"error\")\n\n            return transform.then(null, onError)\n\n        $scope.$watchCollection () ->\n            return $model.$modelValue && $model.$modelValue.points\n        , () ->\n            us = $model.$modelValue\n            if us\n                estimationProcess = $tgEstimationsService.create($el, us, $scope.project)\n                estimationProcess.onSelectedPointForRole = (roleId, pointId, points) ->\n                    estimationProcess.loading = roleId\n                    estimationProcess.render()\n                    save(points).then () ->\n                        estimationProcess.loading = false\n                        $rootScope.$broadcast(\"object:updated\")\n                        estimationProcess.render()\n\n                estimationProcess.render = () ->\n                    ctx = {\n                        totalPoints: @calculateTotalPoints()\n                        roles: @calculateRoles()\n                        editable: @isEditable\n                        loading: estimationProcess.loading\n                    }\n                    mainTemplate = \"common/estimation/us-estimation-points-per-role.html\"\n                    template = $template.get(mainTemplate, true)\n                    html = template(ctx)\n                    html = $compile(html)($scope)\n                    @$el.html(html)\n\n                estimationProcess.render()\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link: link\n        restrict: \"EA\"\n        require: \"ngModel\"\n    }\n\nmodule.directive(\"tgUsEstimation\", [\"$tgEstimationsService\", \"$rootScope\", \"$tgRepo\",\n                                    \"$tgTemplate\", \"$compile\", \"$tgQueueModelTransformation\",\n                                    \"$tgConfirm\", UsEstimationDirective])\n\n\n#############################################################################\n## Estimations service\n#############################################################################\n\nEstimationsService = ($template, $repo, $confirm, $q, $qqueue) ->\n    pointsTemplate = $template.get(\"common/estimation/us-estimation-points.html\", true)\n\n    class EstimationProcess\n        constructor: (@$el, @us, @project) ->\n            @isEditable = @project.my_permissions.indexOf(\"modify_us\") != -1\n            @roles = @project.roles\n            @points = @project.points\n            @loading = false\n            @pointsById = groupBy(@points, (x) -> x.id)\n            @onSelectedPointForRole =  (roleId, pointId) ->\n            @render = () ->\n\n        save: (roleId, pointId) ->\n            deferred = $q.defer()\n            $qqueue.add () =>\n                onSuccess = =>\n                    deferred.resolve()\n                    @render()\n\n                onError = =>\n                    $confirm.notify(\"error\")\n                    @us.revert()\n                    @render()\n                    deferred.reject()\n\n                $repo.save(@us).then(onSuccess, onError)\n\n            return deferred.promise\n\n        calculateTotalPoints: () ->\n            values = _.map(@us.points, (v, k) => @pointsById[v]?.value)\n\n            if values.length == 0\n                return \"?\"\n\n            notNullValues = _.filter(values, (v) -> v?)\n            if notNullValues.length == 0\n                return \"?\"\n\n            return _.reduce(notNullValues, (acc, num) -> acc + num)\n\n        calculateRoles: () ->\n            computableRoles = _.filter(@project.roles, \"computable\")\n            roles = _.map computableRoles, (role) =>\n                pointId = @us.points[role.id]\n                pointObj = @pointsById[pointId]\n                role = _.clone(role, true)\n                role.points = if pointObj? and pointObj.name? then pointObj.name else \"?\"\n                return role\n\n            return roles\n\n        bindClickEvents: =>\n            @$el.on \"click\", \".total.clickable\", (event) =>\n                event.preventDefault()\n                event.stopPropagation()\n                target = angular.element(event.currentTarget)\n                roleId = target.data(\"role-id\")\n                @renderPointsSelector(roleId, target)\n                target.siblings().removeClass('active')\n                target.addClass('active')\n\n            @$el.on \"click\", \".point\", (event) =>\n                event.preventDefault()\n                event.stopPropagation()\n                target = angular.element(event.currentTarget)\n                roleId = target.data(\"role-id\")\n                pointId = target.data(\"point-id\")\n                @$el.find(\".popover\").popover().close()\n\n                points = _.clone(@us.points, true)\n                points[roleId] = pointId\n\n                @onSelectedPointForRole(roleId, pointId, points)\n\n        renderPointsSelector: (roleId, target) ->\n            points = _.map @points, (point) =>\n                point = _.clone(point, true)\n                point.selected = if @us.points[roleId] == point.id then false else true\n                return point\n\n            maxPointLength = 5\n            horizontalList =  _.some points, (point) => point.name.length > maxPointLength\n\n            html = pointsTemplate({\"points\": points, roleId: roleId, horizontal: horizontalList})\n            # Remove any previous state\n            @$el.find(\".popover\").popover().close()\n            @$el.find(\".pop-points-open\").remove()\n            # Render into DOM and show the new created element\n            if target?\n                @$el.find(target).append(html)\n            else\n                @$el.append(html)\n\n            @$el.find(\".pop-points-open\").popover().open ->\n                $(this)\n                    .removeClass(\"active\")\n                    .closest(\"li\").removeClass(\"active\")\n\n            @$el.find(\".pop-points-open\").show()\n\n            pop = @$el.find(\".pop-points-open\")\n            if pop.offset().top + pop.height() > document.body.clientHeight\n                pop.addClass('pop-bottom')\n\n    create = ($el, us, project) ->\n        $el.unbind(\"click\")\n\n        estimationProcess = new EstimationProcess($el, us, project)\n\n        if estimationProcess.isEditable\n            estimationProcess.bindClickEvents()\n\n        return estimationProcess\n\n    return {\n        create: create\n    }\n\nmodule.factory(\"$tgEstimationsService\", [\"$tgTemplate\", \"$tgRepo\", \"$tgConfirm\",\n                                         \"$q\", \"$tgQqueue\", EstimationsService])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/common/filters.coffee\n###\n\ntaiga = @.taiga\n\nmodule = angular.module(\"taigaCommon\")\n\n\ndefaultFilter = ->\n    return (value, defaultValue) ->\n        if value is [null, undefined]\n            return defaultValue\n        return value\n\nmodule.filter(\"default\", defaultFilter)\n\n\nyesNoFilter = ($translate) ->\n    return (value) ->\n        if value\n            return $translate.instant(\"COMMON.YES\")\n\n        return $translate.instant(\"COMMON.NO\")\n\nmodule.filter(\"yesNo\", [\"$translate\", yesNoFilter])\n\n\nunslugify = ->\n    return taiga.unslugify\n\nmodule.filter(\"unslugify\", unslugify)\n\n\nmomentFormat = ->\n    return (input, format) ->\n        if input\n            return moment(input).format(format)\n        return \"\"\n\nmodule.filter(\"momentFormat\", momentFormat)\n\n\nmomentFromNow = ->\n    return (input, without_suffix) ->\n        if input\n            return moment(input).fromNow(without_suffix or false)\n        return \"\"\n\nmodule.filter(\"momentFromNow\", momentFromNow)\n\n\nsizeFormat = =>\n    return @.taiga.sizeFormat\n\nmodule.filter(\"sizeFormat\", sizeFormat)\n\ntoMutableFilter =  ->\n    toMutable = (js) ->\n      return js.toJS()\n\n    memoizedMutable = _.memoize(toMutable)\n\n    return (input) ->\n      if input instanceof Immutable.List\n        return memoizedMutable(input)\n\n      return input\n\nmodule.filter(\"toMutable\", toMutableFilter)\n\n\nbyRefFilter = ($filterFilter)->\n    return (userstories, filter) ->\n        if filter?.startsWith(\"#\")\n            cleanRef= filter.substr(1)\n            return _.filter(userstories, (us) => String(us.ref).startsWith(cleanRef))\n\n        return $filterFilter(userstories, filter)\n\nmodule.filter(\"byRef\", [\"filterFilter\", byRefFilter])\n\n\ndarkerFilter = ->\n    return (color, luminosity) ->\n        # validate hex string\n        color = new String(color).replace(/[^0-9a-f]/gi, '')\n        if color.length < 6\n            color = color[0]+ color[0]+ color[1]+ color[1]+ color[2]+ color[2];\n\n        luminosity = luminosity || 0\n\n        # convert to decimal and change luminosity\n        newColor = \"#\"\n        c = 0\n        i = 0\n        black = 0\n        white = 255\n        # for (i = 0; i < 3; i++)\n        for i in [0, 1, 2]\n            c = parseInt(color.substr(i*2,2), 16)\n            c = Math.round(Math.min(Math.max(black, c + (luminosity * white)), white)).toString(16)\n            newColor += (\"00\"+c).substr(c.length)\n\n        return newColor\n\n\nmodule.filter(\"darker\", darkerFilter)\n\nmarkdownToHTML = (wysiwigService) ->\n    return (input) ->\n        if input\n            return wysiwigService.getHTML(input)\n\n        return \"\"\n\nmodule.filter(\"markdownToHTML\", [\"tgWysiwygService\", markdownToHTML])\n\ninArray = ($filter) ->\n    return (list, arrayFilter, element) ->\n        if arrayFilter\n            filter = $filter(\"filter\")\n            return filter list, (listItem) ->\n                return arrayFilter.indexOf(listItem[element]) != -1\nmodule.filter(\"inArray\", [\"$filter\", inArray])\n\nemojify = ($emojis) ->\n    return (input) ->\n        if input\n            return $emojis.replaceEmojiNameByHtmlImgs(_.escape(input))\n\n        return \"\"\n\nmodule.filter(\"emojify\", [\"$tgEmojis\", emojify])\n\ntextToHTML = ($filter) ->\n    return (input) ->\n        if input\n            return input.replace(/\\<(?!(\\/?)(strong|br)(\\/?)).*?\\>/g, \"\")\n\n        return \"\"\n\nmodule.filter(\"textToHTML\", [\"$filter\", textToHTML])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/common/lightboxes.coffee\n###\n\nmodule = angular.module(\"taigaCommon\")\n\nbindOnce = @.taiga.bindOnce\ntimeout = @.taiga.timeout\ndebounce = @.taiga.debounce\nsizeFormat = @.taiga.sizeFormat\ntrim = @.taiga.trim\nnormalizeString = @.taiga.normalizeString\n\n#############################################################################\n## Common Lightbox Services\n#############################################################################\n\n# the lightboxContent hide/show doesn't have sense because is an IE hack\nclass LightboxService extends taiga.Service\n    constructor: (@animationFrame, @q, @rootScope) ->\n\n    open: ($el, onClose, onEsc, ignoreEsc) ->\n        @.onClose = onClose\n\n        if _.isString($el)\n            $el = $($el)\n        defered = @q.defer()\n\n        lightboxContent = $el.children().not(\".close\")\n        lightboxContent.hide()\n\n        @animationFrame.add ->\n            $el.css('display', 'flex')\n\n        @animationFrame.add ->\n            $el.addClass(\"open\")\n            $el.one \"transitionend\", =>\n                firstField = $el.find('input:not(.no-focus),textarea:not(.no-focus)').first()\n\n                if firstField.length\n                    firstField.focus()\n                else if document.activeElement\n                    $(document.activeElement).blur()\n\n        @animationFrame.add =>\n            lightboxContent.show()\n            defered.resolve()\n\n        if !ignoreEsc\n            docEl = angular.element(document)\n            docEl.on \"keydown.lightbox\", (e) =>\n                code = if e.keyCode then e.keyCode else e.which\n                if code == 27\n                    if onEsc\n                        @rootScope.$applyAsync(onEsc)\n                    else\n                        @.close($el)\n\n\n        return defered.promise\n\n    close: ($el) ->\n        return new Promise (resolve) =>\n            if _.isString($el)\n                $el = $($el)\n            docEl = angular.element(document)\n            docEl.off(\".lightbox\")\n            docEl.off(\".keyboard-navigation\") # Hack: to fix problems in the WYSIWYG textareas when press ENTER\n\n            $el.addClass('close-started') # don't attach animations\n\n            @animationFrame.add =>\n                $el.addClass('close')\n\n                $el.one \"transitionend\", =>\n                    $el.removeAttr('style')\n                    $el\n                        .removeClass(\"open\")\n                        .removeClass('close')\n                        .removeClass('close-started')\n\n                    if @.onClose\n                        @rootScope.$apply(@.onClose)\n\n                    resolve()\n\n            if $el.hasClass(\"remove-on-close\")\n                scope = $el.data(\"scope\")\n                scope.$destroy() if scope\n                $el.remove()\n\n\n    getLightboxOpen: ->\n        return $(\".lightbox.open:not(.close-started)\")\n\n    closeAll: ->\n        docEl = angular.element(document)\n        for lightboxEl in docEl.find(\".lightbox.open\")\n            @.close($(lightboxEl))\n\n\nmodule.service(\"lightboxService\", [\"animationFrame\", \"$q\", \"$rootScope\", LightboxService])\n\n\nclass LightboxKeyboardNavigationService extends taiga.Service\n    stop: ->\n        docEl = angular.element(document)\n        docEl.off(\".keyboard-navigation\")\n\n    dispatch: ($el, code) ->\n        activeElement = $el.find(\".selected\")\n\n        # Key: enter\n        if code == 13\n            if $el.find(\".user-list-single\").length == 1\n                $el.find('.user-list-single:first').trigger(\"click\")\n            else\n                activeElement.trigger(\"click\")\n\n        # Key: down\n        else if code == 40\n            if not activeElement.length\n                $el.find('.user-list-single:not(\".is-active\"):first').addClass('selected')\n            else\n                next = activeElement.next('.user-list-single')\n                if next.length\n                    activeElement.removeClass('selected')\n                    next.addClass('selected')\n        # Key: up\n        else if code == 38\n            if not activeElement.length\n                $el.find('.user-list-single:last').addClass('selected')\n            else\n                prev = activeElement.prev('.user-list-single:not(\".is-active\")')\n\n                if prev.length\n                    activeElement.removeClass('selected')\n                    prev.addClass('selected')\n\n    init: ($el) ->\n        @stop()\n        docEl = angular.element(document)\n        docEl.on \"keydown.keyboard-navigation\", (event) =>\n            code = if event.keyCode then event.keyCode else event.which\n            if code == 40 || code == 38 || code == 13\n                event.preventDefault()\n                @.dispatch($el, code)\n\nmodule.service(\"lightboxKeyboardNavigationService\", LightboxKeyboardNavigationService)\n\n\n#############################################################################\n## Generic Lighthbox Directive\n#############################################################################\n\n# This adds generic behavior to all blocks with lightbox class like\n# close button event handlers.\n\nLightboxDirective = (lightboxService) ->\n    link = ($scope, $el, $attrs) ->\n\n        if !$attrs.$attr.visible\n            $el.on \"click\", \".close\", (event) ->\n                event.preventDefault()\n                lightboxService.close($el)\n\n    return {restrict: \"C\", link: link}\n\nmodule.directive(\"lightbox\", [\"lightboxService\", LightboxDirective])\n\n#############################################################################\n## Block Lightbox Directive\n#############################################################################\n\n# Issue/Userstory blocking message lightbox directive.\n\nBlockLightboxDirective = ($rootscope, $tgrepo, $confirm, lightboxService, $loading, $modelTransform, $translate) ->\n    link = ($scope, $el, $attrs, $model) ->\n        title = $translate.instant($attrs.title)\n        $el.find(\"h2.title\").text(title)\n\n        unblock = (finishCallback) =>\n            transform = $modelTransform.save (item) ->\n                item.is_blocked = false\n                item.blocked_note = \"\"\n\n                return item\n\n            transform.then ->\n                $confirm.notify(\"success\")\n                $rootscope.$broadcast(\"object:updated\")\n                finishCallback()\n\n            transform.then null, ->\n                $confirm.notify(\"error\")\n                item.revert()\n\n            transform.finally ->\n                finishCallback()\n\n            return transform\n\n        block = () ->\n            currentLoading = $loading()\n                .target($el.find(\".button-green\"))\n                .start()\n\n            transform = $modelTransform.save (item) ->\n                item.is_blocked = true\n                item.blocked_note = $el.find(\".reason\").val()\n\n                return item\n\n            transform.then ->\n                $confirm.notify(\"success\")\n                $rootscope.$broadcast(\"object:updated\")\n\n            transform.then null, ->\n                $confirm.notify(\"error\")\n\n            transform.finally ->\n                currentLoading.finish()\n                lightboxService.close($el)\n\n        $scope.$on \"block\", ->\n            $el.find(\".reason\").val($model.$modelValue.blocked_note)\n            lightboxService.open($el)\n\n        $scope.$on \"unblock\", (event, model, finishCallback) =>\n            unblock(finishCallback)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n        $el.on \"click\", \".button-green\", (event) ->\n            event.preventDefault()\n\n            block()\n\n    return {\n        templateUrl: \"common/lightbox/lightbox-block.html\"\n        link: link\n        require: \"ngModel\"\n    }\n\nmodule.directive(\"tgLbBlock\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"lightboxService\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$translate\", BlockLightboxDirective])\n\n\n#############################################################################\n## Generic Lightbox Blocking-Message Input Directive\n#############################################################################\n\nBlockingMessageInputDirective = ($log, $template, $compile) ->\n    template = $template.get(\"common/lightbox/lightbox-blocking-message-input.html\", true)\n\n    link = ($scope, $el, $attrs, $model) ->\n        if not $attrs.watch\n            return $log.error \"No watch attribute on tg-blocking-message-input directive\"\n\n        $scope.$watch $attrs.watch, (value) ->\n            if value is not undefined and value == true\n                $el.find(\".blocked-note\").removeClass(\"hidden\")\n            else\n                $el.find(\".blocked-note\").addClass(\"hidden\")\n\n    templateFn = ($el, $attrs) ->\n        return template({ngmodel: $attrs.ngModel})\n\n    return {\n        template: templateFn\n        link: link\n        require: \"ngModel\"\n        restrict: \"EA\"\n    }\n\nmodule.directive(\"tgBlockingMessageInput\", [\"$log\", \"$tgTemplate\", \"$compile\", BlockingMessageInputDirective])\n\n\n#############################################################################\n## Creare Bulk Userstories Lightbox Directive\n#############################################################################\n\nCreateBulkUserstoriesDirective = ($repo, $rs, $rootscope, lightboxService, $loading, $model) ->\n    link = ($scope, $el, attrs) ->\n        form = null\n\n        $scope.$on \"usform:bulk\", (ctx, projectId, status) ->\n            form.reset() if form\n\n            $scope.new = {\n                projectId: projectId\n                statusId: status\n                bulk: \"\"\n            }\n            lightboxService.open($el)\n\n        submit = debounce 2000, (event) =>\n            event.preventDefault()\n\n            form = $el.find(\"form\").checksley({onlyOneErrorElement: true})\n            if not form.validate()\n                return\n\n            currentLoading = $loading()\n                .target(submitButton)\n                .start()\n\n            promise = $rs.userstories.bulkCreate($scope.new.projectId, $scope.new.statusId, $scope.new.bulk)\n            promise.then (result) ->\n                result =  _.map(result.data, (x) => $model.make_model('userstories', x))\n                currentLoading.finish()\n                $rootscope.$broadcast(\"usform:bulk:success\", result)\n                lightboxService.close($el)\n\n            promise.then null, (data) ->\n                currentLoading.finish()\n                form.setErrors(data)\n                if data._error_message\n                    $confirm.notify(\"error\", data._error_message)\n\n        submitButton = $el.find(\".submit-button\")\n\n        $el.on \"submit\", \"form\", submit\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link: link}\n\nmodule.directive(\"tgLbCreateBulkUserstories\", [\n    \"$tgRepo\",\n    \"$tgResources\",\n    \"$rootScope\",\n    \"lightboxService\",\n    \"$tgLoading\",\n    \"$tgModel\",\n    CreateBulkUserstoriesDirective\n])\n\n\nLightboxLeaveProjectWarningDirective = (lightboxService, $template, $compile) ->\n    link = ($scope, $el, attrs) ->\n        lightboxService.open($el)\n\n    return {\n        templateUrl: 'common/lightbox/lightbox-leave-project-warning.html',\n        link: link,\n        scope: true\n    }\n\nmodule.directive(\"tgLightboxLeaveProjectWarning\", [\"lightboxService\", LightboxLeaveProjectWarningDirective])\n\n\n#############################################################################\n## Set Due Date Lightbox Directive\n#############################################################################\n\nSetDueDateDirective = ($rootscope, lightboxService, $loading, $translate, $confirm, $modelTransform) ->\n    link = ($scope, $el, attrs) ->\n        prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\")\n        lightboxService.open($el)\n\n        if ($scope.object.due_date)\n            $scope.new_due_date = moment($scope.object.due_date).format(prettyDate)\n\n        $el.on \"click\", \".suggestion\", (event) ->\n            target = angular.element(event.currentTarget)\n            quantity = target.data('quantity')\n            unit = target.data('unit')\n            value = moment().add(quantity, unit).format(prettyDate)\n            $el.find(\".due-date\").val(value)\n\n        save = ->\n            currentLoading = $loading()\n                .target($el.find(\".submit-button\"))\n                .start()\n\n            if $scope.notAutoSave\n                new_due_date = $('.due-date').val()\n                $scope.object.due_date = if (new_due_date) \\\n                    then moment(new_due_date, prettyDate).format(\"YYYY-MM-DD\") \\\n                    else null\n\n                $scope.$apply()\n                currentLoading.finish()\n                lightboxService.close($el)\n                return\n\n            transform = $modelTransform.save (object) ->\n                new_due_date = $('.due-date').val()\n                object.due_date = if (new_due_date) \\\n                    then moment(new_due_date, prettyDate).format(\"YYYY-MM-DD\") \\\n                    else null\n                return object\n\n            transform.then ->\n                $confirm.notify(\"success\")\n\n            transform.then null, ->\n                $confirm.notify(\"error\")\n\n            transform.finally ->\n                currentLoading.finish()\n                lightboxService.close($el)\n                $rootscope.$broadcast(\"object:updated\")\n\n        $el.on \"click\", \".submit-button\", (event) ->\n            event.preventDefault()\n            save()\n\n        remove = ->\n            title = $translate.instant(\"LIGHTBOX.DELETE_DUE_DATE.TITLE\")\n            subtitle = $translate.instant(\"LIGHTBOX.DELETE_DUE_DATE.SUBTITLE\")\n            message = moment($scope.object.due_date).format(prettyDate)\n\n            $confirm.askOnDelete(title, message, subtitle).then (askResponse) ->\n                askResponse.finish()\n                $('.due-date').val(null)\n                $scope.object.due_date_reason = null\n                if $scope.notAutoSave\n                    $scope.object.due_date = null\n                    lightboxService.close($el)\n                else\n                    save()\n\n        $el.on \"click\", \".delete-due-date\", (event) ->\n            event.preventDefault()\n            remove()\n\n    return {\n        templateUrl: 'common/lightbox/lightbox-due-date.html',\n        link: link,\n        scope: true\n    }\n\nmodule.directive(\"tgLbSetDueDate\", [\"$rootScope\", \"lightboxService\", \"$tgLoading\", \"$translate\", \"$tgConfirm\"\n                                    \"$tgQueueModelTransformation\", SetDueDateDirective])\n\n\n\n#############################################################################\n## Create/Edit Lightbox Directive\n#############################################################################\n\ngroupBy = @.taiga.groupBy\n\nCreateEditDirective = (\n$log, $repo, $model, $rs, $rootScope, lightboxService, $loading, $translate,\n$confirm, $q, attachmentsService, $template, $compile) ->\n    link = ($scope, $el, attrs) ->\n        schema = null\n        objType = null\n        form = null\n\n        attachmentsToAdd = Immutable.List()\n        attachmentsToDelete = Immutable.List()\n\n        schemas = {\n            us: {\n                objName: 'User Story',\n                model: 'userstories',\n                params: { include_attachments: true, include_tasks: true },\n                data: (project) ->\n                    return {\n                        translationID: 'US'\n                        translationIDPlural: 'US'\n                        statusList: _.sortBy(project.us_statuses, \"order\")\n                    }\n                initialData: (data) ->\n                    return {\n                        project: data.project.id\n                        subject: \"\"\n                        description: \"\"\n                        tags: []\n                        points : {}\n                        status: if data.statusId then data.statusId else data.project.default_us_status\n                        is_archived: false\n                    }\n            }\n            task: {\n                objName: 'Task',\n                model: 'tasks',\n                params: { include_attachments: true },\n                data: (project) ->\n                    return {\n                        translationID: 'TASK'\n                        translationIDPlural: 'TASKS'\n                        statusList: _.sortBy(project.task_statuses, \"order\")\n                    }\n                initialData: (data) ->\n                    return {\n                        project: data.project.id\n                        subject: \"\"\n                        description: \"\"\n                        assigned_to: null\n                        tags: []\n                        milestone: data.sprintId\n                        status: data.project.default_task_status\n                        user_story: data.usId\n                        is_archived: false\n                    }\n            },\n            issue: {\n                objName: 'Issue',\n                model: 'issues',\n                params: { include_attachments: true },\n                data: (project) ->\n                    return {\n                        translationID: 'ISSUE'\n                        translationIDPlural: 'ISSUES'\n                        project: project\n                        statusList: _.sortBy(project.issue_statuses, \"order\")\n                        typeById: groupBy(project.issue_types, (x) -> x.id)\n                        typeList: _.sortBy(project.issue_types, \"order\")\n                        severityById: groupBy(project.severities, (x) -> x.id)\n                        severityList: _.sortBy(project.severities, \"order\")\n                        priorityById: groupBy(project.priorities, (x) -> x.id)\n                        priorityList: _.sortBy(project.priorities, \"order\")\n                        milestonesById: groupBy(project.milestones, (x) -> x.id)\n                    }\n                initialData: (data) ->\n                    return {\n                        assigned_to: null\n                        milestone: data.sprintId\n                        priority: data.project.default_priority\n                        project: data.project.id\n                        severity: data.project.default_severity\n                        status: data.project.default_issue_status\n                        subject: \"\"\n                        tags: []\n                        type: data.project.default_issue_type\n                    }\n            }\n        }\n\n        $scope.setMode = (value) ->\n            $scope.mode = value\n\n        $scope.$on \"genericform:new\", (ctx, params) ->\n            getSchema(params)\n            $scope.mode = 'new'\n            $scope.getOrCreate = false\n            mount(params)\n\n        $scope.$on \"genericform:new-or-existing\", (ctx, params) ->\n            getSchema(params)\n            $scope.mode = 'add-existing'\n            $scope.getOrCreate = true\n            $scope.existingFilterText = ''\n\n            $rs[schema.model].listInAllProjects({ project: $scope.project.id }, true).then (data) ->\n                $scope.existingItems = angular.copy(data)\n            mount(params)\n\n        $scope.$on \"genericform:edit\", (ctx, params) ->\n            getSchema(params)\n            $scope.mode = 'edit'\n            $scope.getOrCreate = false\n            mount(params)\n\n        getSchema = (params) ->\n            _.map params, (value, key) ->\n                $scope[key] = value\n\n            if !$scope.objType || !schemas[$scope.objType]\n                return $log.error(\"Invalid objType `#{$scope.objType}` for `genericform` event\")\n            schema = schemas[$scope.objType]\n\n        mount = (params) ->\n            $scope.objName = schema.objName\n            if $scope.mode == 'edit'\n                $scope.obj = params.obj\n                $scope.attachments = Immutable.fromJS(params.attachments)\n            else\n                $scope.obj = $model.make_model(schema.model, schema.initialData(params))\n                $scope.attachments = Immutable.List()\n\n            _.map schema.data($scope.project), (value, key) ->\n                $scope[key] = value\n\n            form.reset() if form\n            resetAttachments()\n            setStatus($scope.obj.status)\n            render()\n            $scope.lightboxOpen = true\n            lightboxService.open($el, null, null, true)\n\n        resetAttachments = () ->\n            attachmentsToAdd = Immutable.List()\n            attachmentsToDelete = Immutable.List()\n\n        $scope.addAttachment = (attachment) ->\n            attachmentsToAdd = attachmentsToAdd.push(attachment)\n\n        $scope.deleteAttachment = (attachment) ->\n            attachmentsToAdd = attachmentsToAdd.filter (it) ->\n                return it.get('name') != attachment.get('name')\n\n            if attachment.get(\"id\")\n                attachmentsToDelete = attachmentsToDelete.push(attachment)\n\n        $scope.addTag = (tag, color) ->\n            value = trim(tag.toLowerCase())\n            tags = $scope.project.tags\n            projectTags = $scope.project.tags_colors\n\n            tags = [] if not tags?\n            projectTags = {} if not projectTags?\n\n            if value not in tags\n                tags.push(value)\n\n            projectTags[tag] = color || null\n            $scope.project.tags = tags\n\n            itemtags = _.clone($scope.obj.tags)\n            inserted = _.find itemtags, (it) -> it[0] == value\n\n            if !inserted\n                itemtags.push([value , color])\n                $scope.obj.tags = itemtags\n\n        $scope.deleteTag = (tag) ->\n            value = trim(tag[0].toLowerCase())\n            tags = $scope.project.tags\n            itemtags = _.clone($scope.obj.tags)\n\n            _.remove itemtags, (tag) -> tag[0] == value\n            $scope.obj.tags = itemtags\n            _.pull($scope.obj.tags, value)\n\n        createAttachments = (obj) ->\n            promises = _.map attachmentsToAdd.toJS(), (attachment) ->\n                attachmentsService.upload(attachment.file, obj.id, $scope.obj.project, $scope.objType)\n            return $q.all(promises)\n\n        deleteAttachments = (obj) ->\n            promises = _.map attachmentsToDelete.toJS(), (attachment) ->\n                return attachmentsService.delete($scope.objType, attachment.id)\n            return $q.all(promises)\n\n        addExistingToSprint = (item) ->\n            currentLoading = $loading().target($el.find(\".add-existing-button\")).start()\n\n            if item.milestone\n                sprintChangeConfirmAndSave(item)\n            else\n                onSuccess = ->\n                    close()\n                    $rootScope.$broadcast(\"#{$scope.objType}form:add:success\", item)\n                onError = ->\n                    close()\n                saveItem(item, onSuccess, onError)\n\n        sprintChangeConfirmAndSave = (item) ->\n            oldSprintName = $scope.milestonesById[item.milestone].name\n            newSprintName = $scope.milestonesById[$scope.relatedObjectId].name\n            title = $translate.instant(\"ISSUES.CONFIRM_CHANGE_FROM_SPRINT.TITLE\")\n            message = $translate.instant(\"ISSUES.CONFIRM_CHANGE_FROM_SPRINT.MESSAGE\",\n                {issue: item.subject, oldSprintName: oldSprintName, newSprintName: newSprintName})\n\n            $confirm.ask(title, null, message).then (askResponse) ->\n                onSuccess = ->\n                    askResponse.finish()\n                    lightboxService.closeAll()\n                    $scope.lightboxOpen = false\n                    $rootScope.$broadcast(\"#{$scope.objType}form:add:success\", item)\n\n                onError = ->\n                    askResponse.finish(false)\n                    $confirm.notify(\"error\")\n                saveItem(item, onSuccess, onError)\n\n        saveItem = (item, onSuccess, onError) ->\n            item.setAttr($scope.relatedField, $scope.relatedObjectId)\n            $repo.save(item, true).then(onSuccess, onError)\n\n\n        isDisabledExisting = (item) ->\n            return item && item[$scope.relatedField] == $scope.relatedObjectId\n\n        $scope.isDisabledExisting = (selectedItem) ->\n            isDisabledExisting(selectedItem)\n\n        $scope.addExistingToSprint = (selectedItem) ->\n            addExistingToSprint(selectedItem)\n\n        submit = debounce 2000, (event) ->\n            form = $el.find(\"form\").checksley()\n            if not form.validate()\n                return\n\n            currentLoading = $loading().target($el.find(\"#submitButton\")).start()\n\n            if $scope.mode == 'new'\n                promise = $repo.create(schema.model, $scope.obj)\n                broadcastEvent = \"#{$scope.objType}form:new:success\"\n            else\n                if ($scope.obj.due_date instanceof moment)\n                    prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\")\n                    $scope.obj.due_date = $scope.obj.due_date.format(\"YYYY-MM-DD\")\n\n                promise = $repo.save($scope.obj, true)\n                broadcastEvent = \"#{$scope.objType}form:edit:success\"\n\n            promise.then (data) ->\n                deleteAttachments(data).then () ->\n                    createAttachments(data).then () ->\n                        currentLoading.finish()\n                        $confirm.notify(\"success\")\n                        close()\n                        if data.ref\n                            $rs[schema.model].getByRef(data.project, data.ref, schema.params).then (obj) ->\n                                $rootScope.$broadcast(broadcastEvent, obj)\n            promise.then null, (data) ->\n                currentLoading.finish()\n                form.setErrors(data)\n                if data._error_message\n                    $confirm.notify(\"error\", data._error_message)\n\n        checkClose = () ->\n            if !$scope.obj.isModified()\n                close()\n                $scope.$apply ->\n                    $scope.obj.revert()\n            else\n                $confirm.ask(\n                    $translate.instant(\"LIGHTBOX.CREATE_EDIT.CONFIRM_CLOSE\"))\n                    .then (result) ->\n                        result.finish()\n                        close()\n\n        close = () ->\n            lightboxService.closeAll()\n            $scope.lightboxOpen = false\n\n        docEl = angular.element(document)\n        docEl.on \"keydown.lightbox-create-edit\", (event) ->\n            if $scope.lightboxOpen\n                event.stopPropagation()\n                code = if event.keyCode then event.keyCode else event.which\n                if code == 27\n                    checkClose()\n\n        $el.on \"submit\", \"form\", submit\n\n        $el.find('.close').on \"click\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            checkClose()\n\n        $el.on \"click\", \".status-dropdown\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            $el.find(\".pop-status\").popover().open()\n\n        $el.on \"click\", \".status\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            setStatus(angular.element(event.currentTarget).data(\"status-id\"))\n            $scope.$apply()\n            $scope.$broadcast(\"status:changed\", $scope.obj.status)\n            $el.find(\".pop-status\").popover().close()\n\n        $el.on \"click\", \".team-requirement\", (event) ->\n            $scope.obj.team_requirement = not $scope.obj.team_requirement\n            $scope.$apply()\n\n        $el.on \"click\", \".client-requirement\", (event) ->\n            $scope.obj.client_requirement = not $scope.obj.client_requirement\n            $scope.$apply()\n\n        $el.on \"click\", \".is-blocked\", (event) ->\n            $scope.obj.is_blocked = not $scope.obj.is_blocked\n            $scope.$apply()\n\n        $el.on \"click\", \".iocaine\", (event) ->\n            $scope.obj.is_iocaine = not $scope.obj.is_iocaine\n            $scope.$broadcast(\"isiocaine:changed\", $scope.obj)\n\n        $scope.isTeamRequirement = () ->\n            return $scope.obj?.team_requirement\n\n        $scope.isClientRequirement = () ->\n            return $scope.obj?.client_requirement\n\n        setStatus = (id) ->\n            $scope.obj.status = id\n            $scope.selectedStatus = _.find $scope.statusList, (item) -> item.id == id\n            $scope.obj.is_closed = $scope.selectedStatus.is_closed\n\n        render = (sprint) ->\n            template = $template.get(\"common/lightbox/lightbox-create-edit/lb-create-edit.html\")\n            templateScope = $scope.$new()\n            compiledTemplate = $compile(template)(templateScope)\n            $el.html(compiledTemplate)\n\n    return {\n        link: link\n    }\n\nmodule.directive(\"tgLbCreateEdit\", [\n    \"$log\",\n    \"$tgRepo\",\n    \"$tgModel\",\n    \"$tgResources\",\n    \"$rootScope\",\n    \"lightboxService\",\n    \"$tgLoading\",\n    \"$translate\",\n    \"$tgConfirm\",\n    \"$q\",\n    \"tgAttachmentsService\",\n    \"$tgTemplate\",\n    \"$compile\",\n    CreateEditDirective\n])\n\n\n#############################################################################\n## RelateToEpic Lightbox Directive\n#############################################################################\n\ndebounceLeading = @.taiga.debounceLeading\n\nRelateToEpicLightboxDirective = ($rootScope, $confirm, lightboxService, $tgCurrentUserService\ntgResources, $tgResources, $epicsService, tgAnalytics) ->\n    link = ($scope, $el, $attrs) ->\n        us = null\n\n        $scope.projects = null\n        $scope.projectEpics = Immutable.List()\n        $scope.loading = false\n        $scope.selectedProject = $scope.project.id\n\n        newEpicForm = $el.find(\".new-epic-form\").checksley()\n        existingEpicForm = $el.find(\".existing-epic-form\").checksley()\n\n        loadProjects = ->\n            if $scope.projects == null\n                $scope.projects = $tgCurrentUserService.projects.get(\"unblocked\")\n\n        filterEpics = (selectedProjectId, filterText) ->\n            tgResources.epics.listInAllProjects(\n                {\n                    is_epics_activated: true,\n                    project__blocked_code: 'null',\n                    project: selectedProjectId,\n                    q: filterText\n                }, true).then (data) ->\n                    excludeIds = []\n                    if (us.epics)\n                        excludeIds = us.epics.map((epic) -> epic.id)\n                    filteredData = data.filter((epic) -> excludeIds.indexOf(epic.get('id')) == -1)\n                    $scope.projectEpics = filteredData\n\n        selectProject = (selectedProjectId) ->\n            $scope.selectedEpic = null\n            $scope.searchEpic = \"\"\n            filterEpics(selectedProjectId, $scope.searchEpic)\n\n        $el.on \"click\", \".close\", (event) ->\n            event.preventDefault()\n            lightboxService.close($el)\n\n        $scope.$on \"relate-to-epic:add\", (ctx, item) ->\n            us = item\n            $scope.selectedEpic = null\n            $scope.searchEpic = \"\"\n            loadProjects()\n            filterEpics($scope.selectedProject, $scope.searchEpic).then () ->\n                lightboxService.open($el).then ->\n                    $el.find('input').focus\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n        $scope.selectProject = (selectedProjectId) ->\n            selectProject(selectedProjectId)\n\n        $scope.onUpdateSearchEpic = debounceLeading 300, () ->\n            $scope.selectedEpic = null\n            filterEpics($scope.selectedProject, $scope.searchEpic)\n\n        $scope.saveRelatedEpic = (selectedEpicId, onSavedRelatedEpic) ->\n            return if not existingEpicForm.validate()\n\n            $scope.loading = true\n\n            onError = (data) ->\n                $scope.loading = false\n                $confirm.notify(\"error\")\n                existingEpicForm.setErrors(data)\n\n            onSuccess = (data) ->\n                tgAnalytics.trackEvent(\n                    \"user story related epic\", \"create\", \"create related epic on user story\", 1)\n                $scope.loading = false\n                $rootScope.$broadcast(\"related-epics:changed\", us)\n                lightboxService.close($el)\n\n            usId = us.id\n            tgResources.epics.addRelatedUserstory(selectedEpicId, usId).then(\n                onSuccess, onError)\n\n        $scope.createEpic = (selectedProjectId, epicSubject) ->\n            return if not newEpicForm.validate()\n\n            @.loading = true\n\n            onError = (data)->\n                $scope.loading = false\n                $confirm.notify(\"error\")\n                newEpicForm.setErrors(errors)\n\n            onSuccess = () ->\n                tgAnalytics.trackEvent(\n                    \"user story related epic\", \"create\", \"create related epic on user story\", 1)\n                $scope.loading = false\n                $rootScope.$broadcast(\"related-epics:changed\", us)\n                lightboxService.close($el)\n\n            onCreateEpic = (epic) ->\n                epicId = epic.get('id')\n                usId = us.id\n                tgResources.epics.addRelatedUserstory(epicId, usId).then(onSuccess, onError)\n\n            $epicsService.createEpic(\n                {subject: epicSubject}, null, selectedProjectId).then(onCreateEpic, onError)\n\n    return {\n        templateUrl: \"common/lightbox/lightbox-relate-to-epic.html\"\n        link:link\n    }\n\nmodule.directive(\"tgLbRelatetoepic\", [\n    \"$rootScope\", \"$tgConfirm\", \"lightboxService\", \"tgCurrentUserService\", \"tgResources\",\n    \"$tgResources\", \"tgEpicsService\", \"$tgAnalytics\", RelateToEpicLightboxDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/common/loader.coffee\n###\n\n# FIXME: this code not follows any style and any good practices on coffeescript\n# and it should be rewritten in coffeescript style classes.\n\ntaiga = @.taiga\nsizeFormat = @.taiga.sizeFormat\ntimeout = @.taiga.timeout\n\nmodule = angular.module(\"taigaCommon\")\n\nLoaderDirective = (tgLoader, $rootscope) ->\n    link = ($scope, $el, $attrs) ->\n        tgLoader.onStart () ->\n            $(document.body).addClass(\"loader-active\")\n            $el.addClass(\"active\")\n\n        tgLoader.onEnd () ->\n            $(document.body).removeClass(\"loader-active\")\n            $el.removeClass(\"active\")\n\n    return {\n        link: link\n    }\n\nmodule.directive(\"tgLoader\", [\"tgLoader\", \"$rootScope\", LoaderDirective])\n\nLoader = ($rootscope) ->\n    config = {\n        minTime: 300\n    }\n\n    open = false\n    startLoadTime = 0\n    requestCount = 0\n    lastResponseDate = 0\n\n    pageLoaded = (force = false) ->\n        if startLoadTime\n            timeoutValue = 0\n\n            if !force\n                endTime = new Date().getTime()\n                diff = endTime - startLoadTime\n\n                if diff < config.minTime\n                    timeoutValue = config.minTime - diff\n\n            timeout timeoutValue, ->\n                $rootscope.$broadcast(\"loader:end\")\n                open = false\n                window.prerenderReady = true # Needed by Prerender Server\n\n        startLoadTime = 0\n        requestCount = 0\n        lastResponseDate = 0\n\n    autoClose = () ->\n        intervalAuto = setInterval (() ->\n            if lastResponseDate && requestCount == 0\n                pageLoaded()\n\n                clearInterval(intervalAuto)\n        ), 50\n\n    start = () ->\n        startLoadTime = new Date().getTime()\n        $rootscope.$broadcast(\"loader:start\")\n        open = true\n\n    return {\n        pageLoaded: pageLoaded\n        open: () -> open\n        start: (auto=false) ->\n            if !open\n                start()\n                autoClose() if auto\n        onStart: (fn) ->\n            return $rootscope.$on(\"loader:start\", fn)\n\n        onEnd: (fn) ->\n            return $rootscope.$on(\"loader:end\", fn)\n\n        logRequest: () ->\n            requestCount++\n\n        logResponse: () ->\n            if requestCount > 0\n                requestCount--\n            lastResponseDate = new Date().getTime()\n    }\n\n\nLoader.$inject = [\"$rootScope\"]\n\nmodule.factory(\"tgLoader\", Loader)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/common/loading.coffee\n###\n\nmodule = angular.module(\"taigaCommon\")\n\nTgLoadingService = ($compile) ->\n    spinner = \"<img class='loading-spinner' src='/\" + window._version + \"/svg/spinner-circle.svg' alt='loading...' />\"\n\n    return () ->\n        service = {\n            settings: {\n                target: null,\n                scope: null,\n                classes: []\n                timeout: 0,\n                template: null\n            },\n            target: (target) ->\n                service.settings.target = target\n\n                return service\n            scope: (scope) ->\n                service.settings.scope = scope\n\n                return service\n            template: (template) ->\n                service.settings.template = template\n\n                return service\n            removeClasses: (classess...) ->\n                service.settings.classes = classess\n\n                return service\n            timeout: (timeout) ->\n                service.settings.timeout = timeout\n\n                return service\n\n            start: ->\n                target = service.settings.target\n\n                service.settings.classes.map (className) -> target.removeClass(className)\n\n                if not target.hasClass('loading') && !service.settings.template\n                    service.settings.template = target.html()\n\n                # The loader is shown after that quantity of milliseconds\n                timeoutId = setTimeout (->\n                    if not target.hasClass('loading')\n                        target.addClass('loading')\n\n                        target.html(spinner)\n                    ), service.settings.timeout\n\n                service.settings.timeoutId = timeoutId\n\n                return service\n\n            finish: ->\n                target = service.settings.target\n                timeoutId = service.settings.timeoutId\n\n                if timeoutId\n                    clearTimeout(timeoutId)\n\n                    removeClasses = service.settings.classes\n                    removeClasses.map (className) -> service.settings.target.addClass(className)\n\n                    target.html(service.settings.template)\n                    target.removeClass('loading')\n\n                    if service.settings.scope\n                        $compile(target.contents())(service.settings.scope)\n\n                return service\n        }\n\n        return service\n\nTgLoadingService.$inject = [\n    \"$compile\"\n]\n\nmodule.factory(\"$tgLoading\", TgLoadingService)\n\nLoadingDirective = ($loading) ->\n    link = ($scope, $el, attr) ->\n        currentLoading = null\n        template = $el.html()\n\n        $scope.$watch attr.tgLoading, (showLoading) =>\n\n            if showLoading\n                currentLoading = $loading()\n                    .target($el)\n                    .timeout(100)\n                    .template(template)\n                    .scope($scope)\n                    .start()\n             else if currentLoading\n                 currentLoading.finish()\n\n    return {\n        priority: 99999,\n        link:link\n    }\n\nmodule.directive(\"tgLoading\", [\"$tgLoading\", LoadingDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/common/popovers.coffee\n###\n\ntaiga = @.taiga\nbindOnce = @.taiga.bindOnce\ndebounce = @.taiga.debounce\n\nmodule = angular.module(\"taigaCommon\")\n\n#############################################################################\n## UserStory status Directive (popover for change status)\n#############################################################################\n\nUsStatusDirective = ($repo, $template) ->\n    ###\n    Print the status of a US and a popover to change it.\n    - tg-us-status: The user story\n    - on-update: Method call after US is updated\n\n    Example:\n\n      div.status(tg-us-status=\"us\" on-update=\"ctrl.loadSprintState()\")\n        a.us-status(href=\"\", title=\"Status Name\")\n\n    NOTE: This directive need 'usStatusById' and 'project'.\n    ###\n    template = $template.get(\"common/popover/popover-us-status.html\", true)\n\n    link = ($scope, $el, $attrs) ->\n        $ctrl = $el.controller()\n\n        render = (us) ->\n            usStatusDomParent = $el.find(\".us-status\")\n            usStatusDom = $el.find(\".us-status .us-status-bind\")\n            usStatusById = $scope.usStatusById\n\n            if usStatusById[us.status]\n                usStatusDom.text(usStatusById[us.status].name)\n                usStatusDomParent.css(\"color\", usStatusById[us.status].color)\n\n        $el.on \"click\", \".us-status\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            $el.find(\".pop-status\").popover().open()\n\n        $el.on \"click\", \".status\", debounce 2000, (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n\n            target = angular.element(event.currentTarget)\n\n            us = $scope.$eval($attrs.tgUsStatus)\n            us.status = target.data(\"status-id\")\n            render(us)\n\n            $el.find(\".pop-status\").popover().close()\n\n            $scope.$apply () ->\n                $repo.save(us).then ->\n                    $scope.$eval($attrs.onUpdate)\n\n\n        $scope.$on(\"userstories:loaded\", -> render($scope.$eval($attrs.tgUsStatus)))\n        $scope.$on(\"$destroy\", -> $el.off())\n\n        # Bootstrap\n        us = $scope.$eval($attrs.tgUsStatus)\n        render(us)\n\n        bindOnce $scope, \"project\", (project) ->\n            html = template({\"statuses\": project.us_statuses})\n            $el.append(html)\n\n            # If the user has not enough permissions the click events are unbinded\n            if $scope.project.my_permissions.indexOf(\"modify_us\") == -1\n                $el.unbind(\"click\")\n                $el.find(\"a\").addClass(\"not-clickable\")\n\n\n    return {link: link}\n\nmodule.directive(\"tgUsStatus\", [\"$tgRepo\", \"$tgTemplate\", UsStatusDirective])\n\n#############################################################################\n## Related Task Status Directive\n#############################################################################\n\nRelatedTaskStatusDirective = ($repo, $template) ->\n    ###\n    Print the status of a related task and a popover to change it.\n    - tg-related-task-status: The related task\n    - on-update: Method call after US is updated\n\n    Example:\n\n      div.status(tg-related-task-status=\"task\" on-update=\"ctrl.loadSprintState()\")\n        a.task-status(href=\"\", title=\"Status Name\")\n\n    NOTE: This directive need 'taskStatusById' and 'project'.\n    ###\n    selectionTemplate = $template.get(\"common/popover/popover-related-task-status.html\", true)\n\n    updateTaskStatus = ($el, task, taskStatusById) ->\n        taskStatusDomParent = $el.find(\".us-status\")\n        taskStatusDom = $el.find(\".task-status .task-status-bind\")\n\n        if taskStatusById[task.status]\n            taskStatusDom.text(taskStatusById[task.status].name)\n            taskStatusDomParent.css('color', taskStatusById[task.status].color)\n\n    link = ($scope, $el, $attrs) ->\n        $ctrl = $el.controller()\n        task = $scope.$eval($attrs.tgRelatedTaskStatus)\n        notAutoSave = $scope.$eval($attrs.notAutoSave)\n        autoSave = !notAutoSave\n\n        $el.on \"click\", \".task-status\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n\n            $el.find(\".pop-status\").popover().open()\n\n            # pop = $el.find(\".pop-status\")\n            # popoverService.open(pop)\n\n        $el.on \"click\", \".status\", debounce 2000, (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            target = angular.element(event.currentTarget)\n            task.status = target.data(\"status-id\")\n            $el.find(\".pop-status\").popover().close()\n            updateTaskStatus($el, task, $scope.taskStatusById)\n\n            if autoSave\n                $scope.$apply () ->\n                    $repo.save(task).then ->\n                        $scope.$eval($attrs.onUpdate)\n                        $scope.$emit(\"related-tasks:status-changed\")\n\n        $scope.$watch $attrs.tgRelatedTaskStatus, () ->\n            task = $scope.$eval($attrs.tgRelatedTaskStatus)\n            updateTaskStatus($el, task, $scope.taskStatusById)\n\n        taiga.bindOnce $scope, \"project\", (project) ->\n            $el.append(selectionTemplate({ 'statuses':  project.task_statuses }))\n            updateTaskStatus($el, task, $scope.taskStatusById)\n\n            # If the user has not enough permissions the click events are unbinded\n            if project.my_permissions.indexOf(\"modify_task\") == -1\n                $el.unbind(\"click\")\n                $el.find(\"a\").addClass(\"not-clickable\")\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link: link}\n\nmodule.directive(\"tgRelatedTaskStatus\", [\"$tgRepo\", \"$tgTemplate\", RelatedTaskStatusDirective])\n\n#############################################################################\n## jQuery plugin for Popover\n#############################################################################\n\n$.fn.popover = () ->\n    $el = @\n\n    isVisible = () =>\n        $el.css({\n            \"display\": \"block\",\n            \"visibility\": \"hidden\"\n        })\n\n        docViewTop = $(window).scrollTop()\n        docViewBottom = docViewTop + $(window).height()\n\n        docViewWidth = $(window).width()\n        docViewRight = docViewWidth\n        docViewLeft = 0\n\n        elemTop = $el.offset().top\n        elemBottom = elemTop + $el.height()\n\n        elemWidth = $el.width()\n        elemLeft = $el.offset().left\n        elemRight = $el.offset().left + elemWidth\n\n        $el.css({\n            \"display\": \"none\",\n            \"visibility\": \"visible\"\n        })\n\n        return ((elemBottom <= docViewBottom) && (elemTop >= docViewTop) && (elemLeft >= docViewLeft) && (elemRight <= docViewRight))\n\n    closePopover = (onClose) =>\n        if onClose then onClose.call($el)\n\n        $el.fadeOut () =>\n            $el\n                .removeClass(\"active\")\n                .removeClass(\"fix\")\n\n        $el.off(\"popup:close\")\n\n\n    closeAll = () =>\n        $(\".popover.active\").each () ->\n            $(this).trigger(\"popup:close\")\n\n    open = (onClose) =>\n        if $el.hasClass(\"active\")\n            close()\n        else\n            closeAll()\n\n            if !isVisible()\n                $el.addClass(\"fix\")\n\n            $el.fadeIn () =>\n                $el.addClass(\"active\")\n                $(document.body).off(\"popover\")\n\n                $(document.body).one \"click.popover\", () =>\n                    closeAll()\n\n            $el.on \"popup:close\", (e) => closePopover(onClose)\n\n    close = () =>\n        $el.trigger(\"popup:close\")\n\n    return {open: open, close: close, closeAll: closeAll}\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/common/raven-logger.coffee\n###\n\n\ntaiga = @.taiga\n\nmodule = angular.module(\"taigaCommon\")\n\nExceptionHandlerFactory = ($log, @config) ->\n    ravenConfig = @config.get(\"ravenConfig\", null)\n    if ravenConfig\n      $log.debug \"Using the RavenJS exception handler.\"\n      Raven.config(ravenConfig).install()\n      return (exception, cause) ->\n        $log.error.apply($log, arguments)\n        Raven.captureException(exception)\n\n    else\n      $log.debug \"Using the default logging exception handler.\"\n      return (exception, cause) ->\n          $log.error.apply($log, arguments)\n\nmodule.factory(\"$exceptionHandler\", [\"$log\", \"$tgConfig\", ExceptionHandlerFactory])\n","###\n# Copyright (C) 2014-2017 Andrey Antukh <niwi@niwi.nz>\n# Copyright (C) 2014-2017 Jesús Espino Garcia <jespinog@gmail.com>\n# Copyright (C) 2014-2017 David Barragán Merino <bameda@dbarragan.com>\n# Copyright (C) 2014-2017 Alejandro Alonso <alejandro.alonso@kaleidos.net>\n# Copyright (C) 2014-2017 Juan Francisco Alcántara <juanfran.alcantara@kaleidos.net>\n# Copyright (C) 2014-2017 Xavi Julian <xavier.julian@kaleidos.net>\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/common/sections.coffee\n###\n\nmodule = angular.module(\"taigaCommon\")\n\nclass SectionsService extends taiga.Service\n    @.$inject = [\"$translate\", \"tgCurrentUserService\"]\n\n    SECTIONS = {\n        1: {id: 1, title: 'TIMELINE', path:'timeline', enabled: ''}\n        2: {id: 2, title: 'EPICS', path:'epics', enabled: 'is_epics_activated'}\n        3: {id: 3, title: 'BACKLOG', path:'backlog', enabled: 'is_backlog_activated'}\n        4: {id: 4, title: 'KANBAN', path:'kanban', enabled: 'is_kanban_activated'}\n        5: {id: 5, title: 'ISSUES', path:'issues', enabled: 'is_issues_activated'}\n        6: {id: 6, title: 'WIKI', path:'wiki', enabled: 'is_wiki_activated'}\n    }\n\n    constructor: (@translate, @currentUserService) ->\n        super()\n        _.map(SECTIONS, (x) => x.title = @translate.instant(\"PROJECT.SECTION.#{x.title}\"))\n    list: () ->\n        return SECTIONS\n    getPath: (projectSlug, sectionId) ->\n        defaultHomePage = \"timeline\"\n\n        projects = @currentUserService.projects?.get(\"all\")\n        if not projects\n            return defaultHomePage\n\n        project = projects.find (p) -> return p.get('slug') == projectSlug\n        if not project\n            return defaultHomePage\n\n        if not sectionId\n            sectionId = project.get('my_homepage')\n\n        section = _.find(SECTIONS, {\"id\": sectionId})\n        if !section or project?.get(section.enabled) is not true\n            return defaultHomePage\n\n        return section.path\n\nmodule.service(\"$tgSections\", SectionsService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/common/analytics.coffee\n###\n\ntaiga = @.taiga\nmodule = angular.module(\"taigaCommon\")\n\n\nclass TagManagerService extends taiga.Service\n    @.$inject = [\"$rootScope\", \"$log\", \"$tgConfig\", \"$window\", \"$document\", \"$location\"]\n\n    constructor: (@rootscope, @log, @config, @win, @doc, @location) ->\n        @.initialized = false\n\n        conf = @config.get(\"tagManager\", {})\n\n        @.accountId = conf.accountId\n\n\n    initialize: ->\n        if not @.accountId\n            @log.debug \"Tag Manager: no acount id provided. Disabling.\"\n            return\n\n        @.injectTagManager()\n        @.initialized = true\n\n    injectTagManager: ->\n        fn = `(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n              new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n              j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;\n              j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;\n              f.parentNode.insertBefore(j,f);})`\n        fn(window, document, \"script\", \"dataLayer\", @.accountId)\n\n\nmodule.service(\"$tgTagManager\", TagManagerService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/common/tags.coffee\n###\n\ntaiga = @.taiga\ntrim = @.taiga.trim\nbindOnce = @.taiga.bindOnce\n\n\nmodule = angular.module(\"taigaCommon\")\n\n# Directive that parses/format tags inputfield.\n\nTagsDirective = ->\n    formatter = (v) ->\n        if _.isArray(v)\n            return v.join(\", \")\n        return \"\"\n\n    parser = (v) ->\n        return [] if not v\n        result = _(v.split(\",\")).map((x) -> _.trim(x))\n\n        return result.value()\n\n    link = ($scope, $el, $attrs, $ctrl) ->\n        $ctrl.$formatters.push(formatter)\n        $ctrl.$parsers.push(parser)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        require: \"ngModel\"\n        link: link\n    }\n\nmodule.directive(\"tgTags\", TagsDirective)\n\n\nColorizeTagsBacklogDirective = ($emojis) ->\n    template = _.template(\"\"\"\n        <% _.each(tags, function(tag) { %>\n            <% if (tag[1] !== null) { %>\n            <span class=\"tag\"\n                  style=\"border-left: 5px solid <%- tag[1] %>\"\n                  title=\"<%- tag[0] %>\">\n                  <%= emojify(tag[0]) %>\n            </span>\n            <% } %>\n        <% }) %>\n        <% _.each(tags, function(tag) { %>\n            <% if (tag[1] === null) { %>\n            <span class=\"tag\"\n                  title=\"<%- tag[0] %>\">\n                  <%= emojify(tag[0]) %>\n            </span>\n            <% } %>\n        <% }) %>\n    \"\"\")\n\n    link = ($scope, $el, $attrs, $ctrl) ->\n        render = (tags) ->\n            html = template({tags: tags, emojify: (text) -> $emojis.replaceEmojiNameByHtmlImgs(_.escape(text))})\n            $el.html(html)\n\n        $scope.$watch $attrs.tgColorizeBacklogTags, (tags) ->\n            render(tags) if tags?\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link: link}\n\nmodule.directive(\"tgColorizeBacklogTags\", [\"$tgEmojis\", ColorizeTagsBacklogDirective])\n\n\n#############################################################################\n## TagLine  Directive (for Lightboxes)\n#############################################################################\n\nLbTagLineDirective = ($rs, $template, $compile) ->\n    ENTER_KEY = 13\n    COMMA_KEY = 188\n\n    templateTags = $template.get(\"common/tag/lb-tag-line-tags.html\", true)\n\n    autocomplete = null\n\n    link = ($scope, $el, $attrs, $model) ->\n        withoutColors = _.has($attrs, \"withoutColors\")\n\n        ## Render\n        renderTags = (tags, tagsColors = []) ->\n            color = if not withoutColors then tagsColors[t] else null\n\n            ctx = {\n                tags: _.map(tags, (t) -> {\n                    name: t,\n                    style: if color then \"border-left: 5px solid #{color}\" else \"\"\n                })\n            }\n\n            html = $compile(templateTags(ctx))($scope)\n            $el.find(\".tags-container\").html(html)\n\n        showSaveButton = ->\n            $el.find(\".save\").removeClass(\"hidden\")\n\n        hideSaveButton = ->\n            $el.find(\".save\").addClass(\"hidden\")\n\n        resetInput = ->\n            $el.find(\"input\").val(\"\")\n            autocomplete.close()\n\n        ## Aux methods\n        addValue = (value) ->\n            value = trim(value.toLowerCase())\n            return if value.length == 0\n\n            tags = _.clone($model.$modelValue, false)\n            tags = [] if not tags?\n            tags.push(value) if value not in tags\n\n            $scope.$apply ->\n                $model.$setViewValue(tags)\n\n            hideSaveButton()\n\n        deleteValue = (value) ->\n            value = trim(value.toLowerCase())\n            return if value.length == 0\n\n            tags = _.clone($model.$modelValue, false)\n            tags = _.pull(tags, value)\n\n            $scope.$apply ->\n                $model.$setViewValue(tags)\n\n        saveInputTag = () ->\n            value = $el.find(\"input\").val()\n\n            addValue(value)\n            resetInput()\n\n        ## Events\n        $el.on \"keypress\", \"input\", (event) ->\n            target = angular.element(event.currentTarget)\n\n            if event.keyCode == ENTER_KEY\n                event.preventDefault()\n                saveInputTag()\n            else if String.fromCharCode(event.keyCode) == ','\n                event.preventDefault()\n                saveInputTag()\n            else\n                if target.val().length\n                    showSaveButton()\n                else\n                    hideSaveButton()\n\n        $el.on \"click\", \".save\", (event) ->\n            event.preventDefault()\n            saveInputTag()\n\n        $el.on \"click\", \".remove-tag\", (event) ->\n            event.preventDefault()\n            target = angular.element(event.currentTarget)\n\n            value = target.siblings(\".tag-name\").text()\n            deleteValue(value)\n\n        bindOnce $scope, \"project\", (project) ->\n            input = $el.find(\"input\")\n\n            autocomplete = new Awesomplete(input[0], {\n                list: _.keys(project.tags_colors)\n            })\n\n            input.on \"awesomplete-selectcomplete\", () ->\n                addValue(input.val())\n                input.val(\"\")\n\n        $scope.$watch $attrs.ngModel, (tags) ->\n            tagsColors = $scope.project?.tags_colors or []\n            renderTags(tags, tagsColors)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link:link,\n        require:\"ngModel\"\n        templateUrl: \"common/tag/lb-tag-line.html\"\n    }\n\nmodule.directive(\"tgLbTagLine\", [\"$tgResources\", \"$tgTemplate\", \"$compile\", LbTagLineDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/backlog/lightboxes.coffee\n###\n\ntaiga = @.taiga\nbindOnce = @.taiga.bindOnce\ndebounce = @.taiga.debounce\n\nmodule = angular.module(\"taigaBacklog\")\n\n#############################################################################\n## Creare/Edit Sprint Lightbox Directive\n#############################################################################\n\nCreateEditSprint = ($repo, $confirm, $rs, $rootscope, lightboxService, $loading, $translate) ->\n    link = ($scope, $el, attrs) ->\n        hasErrors = false\n        createSprint = true\n        form = null\n        $scope.newSprint = {}\n        ussToAdd = null\n\n        resetSprint = () ->\n            form.reset() if form\n\n            $scope.newSprint = {\n                project: null\n                name: null\n                estimated_start: null\n                estimated_finish: null\n            }\n\n        submit = debounce 2000, (event) =>\n            event.preventDefault()\n            target = angular.element(event.currentTarget)\n            prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\")\n\n            submitButton = $el.find(\".submit-button\")\n            form = $el.find(\"form\").checksley()\n\n            if not form.validate()\n                hasErrors = true\n                $el.find(\".last-sprint-name\").addClass(\"disappear\")\n                return\n\n            hasErrors = false\n            broadcastEvent = null\n\n            estimated_start = $('.date-start').val()\n            estimated_end = $('.date-end').val()\n\n            if createSprint\n                newSprint = angular.copy($scope.newSprint)\n                newSprint.estimated_start = moment(estimated_start, prettyDate).format(\"YYYY-MM-DD\")\n                newSprint.estimated_finish = moment(estimated_end, prettyDate).format(\"YYYY-MM-DD\")\n\n                promise = $repo.create(\"milestones\", newSprint)\n                broadcastEvent = \"sprintform:create:success\"\n            else\n                newSprint = $scope.newSprint.realClone()\n                newSprint.estimated_start =  moment(estimated_start, prettyDate).format(\"YYYY-MM-DD\")\n                newSprint.estimated_finish = moment(estimated_end, prettyDate).format(\"YYYY-MM-DD\")\n\n                promise = $repo.save(newSprint)\n                broadcastEvent = \"sprintform:edit:success\"\n\n            currentLoading = $loading()\n                .target(submitButton)\n                .start()\n\n            promise.then (data) ->\n                currentLoading.finish()\n                $scope.sprintsCounter += 1 if createSprint\n\n                $scope.sprints = _.map $scope.sprints, (it) ->\n                    if it.id == data.id\n                        return data\n                    else\n                        return it\n\n                if broadcastEvent == \"sprintform:create:success\" && ussToAdd\n                    $rootscope.$broadcast(broadcastEvent, data, ussToAdd)\n                else\n                    $rootscope.$broadcast(broadcastEvent, data)\n\n                lightboxService.close($el)\n\n            promise.then null, (data) ->\n                currentLoading.finish()\n\n                form.setErrors(data)\n                if data._error_message\n                    $confirm.notify(\"light-error\", data._error_message)\n                else if data.__all__\n                    $confirm.notify(\"light-error\", data.__all__[0])\n\n        remove = ->\n            title = $translate.instant(\"LIGHTBOX.DELETE_SPRINT.TITLE\")\n            message = $scope.newSprint.name\n\n            $confirm.askOnDelete(title, message).then (askResponse) =>\n                onSuccess = ->\n                    askResponse.finish()\n                    $scope.milestonesCounter -= 1\n                    lightboxService.close($el)\n                    $rootscope.$broadcast(\"sprintform:remove:success\", $scope.newSprint)\n\n                onError = ->\n                    askResponse.finish(false)\n                    $confirm.notify(\"error\")\n                $repo.remove($scope.newSprint).then(onSuccess, onError)\n\n        getLastSprint = ->\n            openSprints = _.filter $scope.sprints, (sprint) ->\n                return !sprint.closed\n\n            sortedSprints = _.sortBy openSprints, (sprint) ->\n                return moment(sprint.estimated_finish, 'YYYY-MM-DD').format('X')\n\n            return sortedSprints[sortedSprints.length - 1]\n\n         $scope.$on \"sprintform:create\", (event, projectId, uss) ->\n            ussToAdd = uss\n            resetSprint()\n\n            form = $el.find(\"form\").checksley()\n            form.reset()\n\n            createSprint = true\n            prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\")\n            $scope.newSprint.project = projectId\n            $scope.newSprint.name = null\n            $scope.newSprint.slug = null\n\n            lastSprint = getLastSprint()\n\n            estimatedStart = moment()\n\n            if lastSprint\n                estimatedStart = moment(lastSprint.estimated_finish)\n            else if $scope.newSprint.estimated_start\n                estimatedStart = moment($scope.newSprint.estimated_start)\n\n            $scope.newSprint.estimated_start = estimatedStart.format(prettyDate)\n\n            estimatedFinish = moment().add(2, \"weeks\")\n\n            if lastSprint\n                estimatedFinish = moment(lastSprint.estimated_finish).add(2, \"weeks\")\n            else if $scope.newSprint.estimated_finish\n                estimatedFinish = moment($scope.newSprint.estimated_finish)\n\n            $scope.newSprint.estimated_finish = estimatedFinish.format(prettyDate)\n\n            lastSprintNameDom = $el.find(\".last-sprint-name\")\n            if lastSprint?.name?\n                text = $translate.instant(\"LIGHTBOX.ADD_EDIT_SPRINT.LAST_SPRINT_NAME\", {\n                            lastSprint: lastSprint.name})\n                lastSprintNameDom.html(text)\n\n            $el.find(\".delete-sprint\").addClass(\"hidden\")\n\n            text = $translate.instant(\"LIGHTBOX.ADD_EDIT_SPRINT.TITLE\")\n            $el.find(\".title\").text(text)\n\n            text = $translate.instant(\"COMMON.CREATE\")\n            $el.find(\".button-green\").text(text)\n\n            lightboxService.open($el)\n            $el.find(\".sprint-name\").focus()\n            $el.find(\".last-sprint-name\").removeClass(\"disappear\")\n\n        $scope.$on \"sprintform:edit\", (ctx, sprint) ->\n            resetSprint()\n\n            createSprint = false\n            prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\")\n\n            $scope.$apply () ->\n                $scope.newSprint = sprint.realClone()\n                $scope.newSprint.estimated_start = moment($scope.newSprint.estimated_start).format(prettyDate)\n                $scope.newSprint.estimated_finish = moment($scope.newSprint.estimated_finish).format(prettyDate)\n\n            $el.find(\".delete-sprint\").removeClass(\"hidden\")\n\n            editSprint = $translate.instant(\"BACKLOG.EDIT_SPRINT\")\n            $el.find(\".title\").text(editSprint)\n\n            save = $translate.instant(\"COMMON.SAVE\")\n            $el.find(\".button-green\").text(save)\n\n            lightboxService.open($el)\n            $el.find(\".sprint-name\").focus().select()\n            $el.find(\".last-sprint-name\").addClass(\"disappear\")\n\n        $el.on \"keyup\", \".sprint-name\", (event) ->\n            if $el.find(\".sprint-name\").val().length > 0 or hasErrors\n                $el.find(\".last-sprint-name\").addClass(\"disappear\")\n            else\n                $el.find(\".last-sprint-name\").removeClass(\"disappear\")\n\n        $el.on \"submit\", \"form\", submit\n\n        $el.on \"click\", \".delete-sprint\", (event) ->\n            event.preventDefault()\n            remove()\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n        resetSprint()\n\n    return {link: link}\n\n\nmodule.directive(\"tgLbCreateEditSprint\", [\n    \"$tgRepo\",\n    \"$tgConfirm\",\n    \"$tgResources\",\n    \"$rootScope\",\n    \"lightboxService\"\n    \"$tgLoading\",\n    \"$translate\",\n    CreateEditSprint\n])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/backlog/main.coffee\n###\n\ntaiga = @.taiga\n\nmixOf = @.taiga.mixOf\ntoggleText = @.taiga.toggleText\nscopeDefer = @.taiga.scopeDefer\nbindOnce = @.taiga.bindOnce\ngroupBy = @.taiga.groupBy\ntimeout = @.taiga.timeout\nbindMethods = @.taiga.bindMethods\ngenerateHash = @.taiga.generateHash\n\nmodule = angular.module(\"taigaBacklog\")\n\n#############################################################################\n## Backlog Controller\n#############################################################################\n\nclass BacklogController extends mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin, taiga.UsFiltersMixin)\n    @.$inject = [\n        \"$scope\",\n        \"$rootScope\",\n        \"$tgRepo\",\n        \"$tgConfirm\",\n        \"$tgResources\",\n        \"$routeParams\",\n        \"$q\",\n        \"$tgLocation\",\n        \"tgAppMetaService\",\n        \"$tgNavUrls\",\n        \"$tgEvents\",\n        \"$tgAnalytics\",\n        \"$translate\",\n        \"$tgLoading\",\n        \"tgResources\",\n        \"$tgQueueModelTransformation\",\n        \"tgErrorHandlingService\",\n        \"$tgStorage\",\n        \"tgFilterRemoteStorageService\",\n        \"tgProjectService\",\n        \"tgLoader\"\n    ]\n\n    storeCustomFiltersName: 'backlog-custom-filters'\n    storeFiltersName: 'backlog-filters'\n    backlogOrder: {}\n    milestonesOrder: {}\n\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @params, @q, @location, @appMetaService, @navUrls,\n                  @events, @analytics, @translate, @loading, @rs2, @modelTransform, @errorHandlingService,\n                  @storage, @filterRemoteStorageService, @projectService, @tgLoader) ->\n        bindMethods(@)\n\n        @.backlogOrder = {}\n        @.milestonesOrder = {}\n\n        @.page = 1\n        @.disablePagination = false\n        @.firstLoadComplete = false\n        @scope.userstories = []\n\n        return if @.applyStoredFilters(@params.pslug, \"backlog-filters\")\n\n        @scope.sectionName = @translate.instant(\"BACKLOG.SECTION_NAME\")\n        @showTags = false\n        @activeFilters = false\n        @scope.showGraphPlaceholder = null\n        @displayVelocity = false\n\n        @.initializeEventHandlers()\n\n        promise = @.loadInitialData()\n\n        # On Success\n        promise.then =>\n            @.firstLoadComplete = true\n\n            title = @translate.instant(\"BACKLOG.PAGE_TITLE\", {projectName: @scope.project.name})\n            description = @translate.instant(\"BACKLOG.PAGE_DESCRIPTION\", {\n                projectName: @scope.project.name,\n                projectDescription: @scope.project.description\n            })\n            @appMetaService.setAll(title, description)\n\n            if @rs.userstories.getShowTags(@scope.projectId)\n                @showTags = true\n\n                @scope.$broadcast(\"showTags\", @showTags)\n\n        # On Error\n        promise.then null, @.onInitialDataError.bind(@)\n\n    filtersReloadContent: () ->\n        @.loadUserstories(true)\n\n    initializeEventHandlers: ->\n        @scope.$on \"usform:bulk:success\", =>\n            @.loadUserstories(true)\n            @.loadProjectStats()\n            @confirm.notify(\"success\")\n            @analytics.trackEvent(\"userstory\", \"create\", \"bulk create userstory on backlog\", 1)\n\n        @scope.$on \"sprintform:create:success\", (e, data, ussToMove) =>\n            @.loadSprints().then () =>\n                @scope.$broadcast(\"sprintform:create:success:callback\", ussToMove)\n\n            @.loadProjectStats()\n            @confirm.notify(\"success\")\n            @analytics.trackEvent(\"sprint\", \"create\", \"create sprint on backlog\", 1)\n\n        @scope.$on \"usform:new:success\", =>\n            @.loadUserstories(true)\n            @.loadProjectStats()\n\n            @rootscope.$broadcast(\"filters:update\")\n            @analytics.trackEvent(\"userstory\", \"create\", \"create userstory on backlog\", 1)\n\n        @scope.$on \"sprintform:edit:success\", =>\n            @.loadProjectStats()\n\n        @scope.$on \"sprintform:remove:success\", (event, sprint) =>\n            @.loadSprints()\n            @.loadProjectStats()\n            @.loadUserstories(true)\n\n            if sprint.closed\n                @.loadClosedSprints()\n\n            @rootscope.$broadcast(\"filters:update\")\n\n        @scope.$on \"usform:edit:success\", (event, data) =>\n            index = _.findIndex @scope.userstories, (us) ->\n                return us.id == data.id\n\n            @scope.userstories[index] = data\n\n            @rootscope.$broadcast(\"filters:update\")\n\n        @scope.$on \"filters:update\", () => @.generateFilters(milestone = \"null\")\n\n        @scope.$on(\"sprint:us:move\", @.moveUs)\n        @scope.$on \"sprint:us:moved\", () =>\n            @.loadSprints()\n            @.loadProjectStats()\n            @rootscope.$broadcast(\"filters:update\")\n\n        @scope.$on(\"backlog:load-closed-sprints\", @.loadClosedSprints)\n        @scope.$on(\"backlog:unload-closed-sprints\", @.unloadClosedSprints)\n\n    initializeSubscription: ->\n        routingKey1 = \"changes.project.#{@scope.projectId}.userstories\"\n        @events.subscribe @scope, routingKey1, (message) =>\n            @.loadAllPaginatedUserstories()\n            @.loadSprints()\n\n        routingKey2 = \"changes.project.#{@scope.projectId}.milestones\"\n        @events.subscribe @scope, routingKey2, (message) =>\n            @.loadSprints()\n\n    toggleShowTags: ->\n        @scope.$apply =>\n            @showTags = !@showTags\n            @rs.userstories.storeShowTags(@scope.projectId, @showTags)\n\n    toggleActiveFilters: ->\n        @activeFilters = !@activeFilters\n\n    toggleVelocityForecasting: ->\n        @displayVelocity = !@displayVelocity\n        if !@displayVelocity\n            @scope.visibleUserStories = _.map @scope.userstories, (it) ->\n                return it.ref\n        else\n            @scope.visibleUserStories = _.map @.forecastedStories, (it) ->\n                return it.ref\n        scopeDefer @scope, =>\n            @scope.$broadcast(\"userstories:loaded\")\n\n    loadProjectStats: ->\n        return @rs.projects.stats(@scope.projectId).then (stats) =>\n            @scope.stats = stats\n            totalPoints = if stats.total_points then stats.total_points else stats.defined_points\n\n            if totalPoints\n                @scope.stats.completedPercentage = Math.round(100 * stats.closed_points / totalPoints)\n            else\n                @scope.stats.completedPercentage = 0\n\n            @scope.showGraphPlaceholder = !(stats.total_points? && stats.total_milestones?)\n            @.calculateForecasting()\n            return stats\n\n    setMilestonesOrder: (sprints) ->\n        for sprint in sprints\n            @.milestonesOrder[sprint.id] = {}\n            for it in sprint.user_stories\n                @.milestonesOrder[sprint.id][it.id] = it.sprint_order\n\n    unloadClosedSprints: ->\n        @scope.$apply =>\n            @scope.closedSprints =  []\n            @rootscope.$broadcast(\"closed-sprints:reloaded\", [])\n\n    loadClosedSprints: ->\n        params = {closed: true}\n        return @rs.sprints.list(@scope.projectId, params).then (result) =>\n            sprints = result.milestones\n\n            @.setMilestonesOrder(sprints)\n\n            @scope.totalClosedMilestones = result.closed\n\n            # NOTE: Fix order of USs because the filter orderBy does not work propertly in partials files\n            for sprint in sprints\n                sprint.user_stories = _.sortBy(sprint.user_stories, \"sprint_order\")\n            @scope.closedSprints =  sprints\n            @scope.closedSprintsById = groupBy(sprints, (x) -> x.id)\n            @rootscope.$broadcast(\"closed-sprints:reloaded\", sprints)\n            return sprints\n\n    loadSprints: ->\n        params = {closed: false}\n        return @rs.sprints.list(@scope.projectId, params).then (result) =>\n            sprints = result.milestones\n\n            @.setMilestonesOrder(sprints)\n\n            @scope.totalMilestones = sprints\n            @scope.totalClosedMilestones = result.closed\n            @scope.totalOpenMilestones = result.open\n            @scope.totalMilestones = @scope.totalOpenMilestones + @scope.totalClosedMilestones\n\n            # NOTE: Fix order of USs because the filter orderBy does not work propertly in partials files\n            for sprint in sprints\n                sprint.user_stories = _.sortBy(sprint.user_stories, \"sprint_order\")\n\n            @scope.sprints = sprints\n\n            @scope.closedSprints =  [] if !@scope.closedSprints\n\n            @scope.sprintsCounter = sprints.length\n            @scope.sprintsById = groupBy(sprints, (x) -> x.id)\n            @rootscope.$broadcast(\"sprints:loaded\", sprints)\n\n            @scope.currentSprint = @.findCurrentSprint()\n\n            return sprints\n\n    openSprints: ->\n        return _.filter(@scope.sprints, (sprint) => not sprint.closed).reverse()\n\n    loadAllPaginatedUserstories: () ->\n        page = @.page\n\n        @.loadUserstories(true, @scope.userstories.length).then () =>\n          @.page = page\n\n    loadUserstories: (resetPagination = false, pageSize) ->\n        return null if !@scope.projectId\n\n        @.loadingUserstories = true\n        @.disablePagination = true\n        params = _.clone(@location.search())\n        @rs.userstories.storeQueryParams(@scope.projectId, params)\n\n        if resetPagination\n            @.page = 1\n\n        params.page = @.page\n\n        promise = @rs.userstories.listUnassigned(@scope.projectId, params, pageSize)\n\n        return promise.then (result) =>\n\n            userstories = result[0]\n            header = result[1]\n\n            if resetPagination\n                @scope.userstories = []\n\n            # NOTE: Fix order of USs because the filter orderBy does not work propertly in the partials files\n            @scope.userstories = @scope.userstories.concat(_.sortBy(userstories, \"backlog_order\"))\n            @scope.visibleUserStories = _.map @scope.userstories, (it) ->\n                return it.ref\n\n            for it in @scope.userstories\n                @.backlogOrder[it.id] = it.backlog_order\n\n            @.loadingUserstories = false\n\n            if header('x-pagination-next')\n                @.disablePagination = false\n                @.page++\n\n            @rootscope.$broadcast(\"backlog:userstories:loaded\")\n\n            # The broadcast must be executed when the DOM has been fully reloaded.\n            # We can't assure when this exactly happens so we need a defer\n            scopeDefer @scope, =>\n                @scope.$broadcast(\"userstories:loaded\")\n                @tgLoader.pageLoaded()\n\n            return userstories\n\n    loadBacklog: ->\n        return @q.all([\n            @.loadProjectStats(),\n            @.loadSprints(),\n            @.loadUserstories()\n        ]).then(@.calculateForecasting)\n\n    calculateForecasting: ->\n        stats = @scope.stats\n        total_points = stats.total_points\n        current_sum = stats.assigned_points\n        backlog_points_sum = 0\n        @forecastedStories = []\n\n        for us in @scope.userstories\n            current_sum += us.total_points\n            backlog_points_sum += us.total_points\n            @forecastedStories.push(us)\n\n            if stats.speed > 0 && backlog_points_sum > stats.speed\n                break\n\n    loadProject: ->\n        project = @projectService.project.toJS()\n\n        if not project.is_backlog_activated\n            @errorHandlingService.permissionDenied()\n\n        @scope.projectId = project.id\n        @scope.project = project\n        @scope.closedMilestones = !!project.total_closed_milestones\n        @scope.$emit('project:loaded', project)\n        @scope.points = _.sortBy(project.points, \"order\")\n        @scope.pointsById = groupBy(project.points, (x) -> x.id)\n        @scope.usStatusById = groupBy(project.us_statuses, (x) -> x.id)\n        @scope.usStatusList = _.sortBy(project.us_statuses, \"id\")\n\n        return project\n\n    loadInitialData: ->\n        project = @.loadProject()\n\n        @.fillUsersAndRoles(project.members, project.roles)\n        @.initializeSubscription()\n\n        return @.loadBacklog()\n            .then(=> @.generateFilters(milestone = \"null\"))\n            .then(=> @scope.$emit(\"backlog:loaded\"))\n\n    prepareBulkUpdateData: (uses, field=\"backlog_order\") ->\n         return _.map(uses, (x) -> {\"us_id\": x.id, \"order\": x[field]})\n\n    # --move us api behavior--\n    # If your are moving multiples USs you must use the bulk api\n    # If there is only one US you must use patch (repo.save)\n    #\n    # The new US position is the position of the previous US + 1.\n    # If the previous US has a position value that it is equal to\n    # other USs, you must send all the USs with that position value\n    # only if they are before of the target position with this USs\n    # if it's a patch you must add them to the header, if is a bulk\n    # you must send them with the other USs\n    moveUs: (ctx, usList, newUsIndex, newSprintId) ->\n        oldSprintId = usList[0].milestone\n        project = usList[0].project\n\n        if oldSprintId\n            sprint = @scope.sprintsById[oldSprintId] || @scope.closedSprintsById[oldSprintId]\n\n        if newSprintId\n            newSprint = @scope.sprintsById[newSprintId] || @scope.closedSprintsById[newSprintId]\n\n        currentSprintId = if newSprintId != oldSprintId then newSprintId else oldSprintId\n\n        orderList = null\n        orderField = \"\"\n\n        if newSprintId != oldSprintId\n            if newSprintId == null # From sprint to backlog\n                for us, key in usList # delete from sprint userstories\n                    _.remove sprint.user_stories, (it) -> it.id == us.id\n\n                orderField = \"backlog_order\"\n                orderList = @.backlogOrder\n\n                beforeDestination = _.slice(@scope.userstories, 0, newUsIndex)\n                afterDestination = _.slice(@scope.userstories, newUsIndex)\n\n                @scope.userstories = @scope.userstories.concat(usList)\n            else # From backlog to sprint\n                for us in usList # delete from sprint userstories\n                    _.remove @scope.userstories, (it) -> it.id == us.id\n\n                orderField = \"sprint_order\"\n                orderList = @.milestonesOrder[newSprint.id]\n\n                beforeDestination = _.slice(newSprint.user_stories, 0, newUsIndex)\n                afterDestination = _.slice(newSprint.user_stories, newUsIndex)\n\n                newSprint.user_stories = newSprint.user_stories.concat(usList)\n        else\n            if oldSprintId == null # backlog\n                orderField = \"backlog_order\"\n                orderList = @.backlogOrder\n\n                list = _.filter @scope.userstories, (listIt) -> # Remove moved US from list\n                    return !_.find usList, (moveIt) -> return listIt.id == moveIt.id\n\n                beforeDestination = _.slice(list, 0, newUsIndex)\n                afterDestination = _.slice(list, newUsIndex)\n            else # sprint\n                orderField = \"sprint_order\"\n                orderList = @.milestonesOrder[sprint.id]\n\n                list = _.filter newSprint.user_stories, (listIt) -> # Remove moved US from list\n                    return !_.find usList, (moveIt) -> return listIt.id == moveIt.id\n\n                beforeDestination = _.slice(list, 0, newUsIndex)\n                afterDestination = _.slice(list, newUsIndex)\n\n        # previous us\n        previous = beforeDestination[beforeDestination.length - 1]\n\n        # this will store the previous us with the same position\n        setPreviousOrders = []\n\n        if !previous\n            startIndex = 0\n        else if previous\n            startIndex = orderList[previous.id] + 1\n\n            previousWithTheSameOrder = _.filter(beforeDestination, (it) ->\n                it[orderField] == orderList[previous.id]\n            )\n\n            # we must send the USs previous to the dropped USs to tell the backend\n            # which USs are before the dropped USs, if they have the same value to\n            # order, the backend doens't know after which one do you want to drop\n            # the USs\n            if previousWithTheSameOrder.length > 1\n                setPreviousOrders = _.map(previousWithTheSameOrder, (it) ->\n                    {us_id: it.id, order: orderList[it.id]}\n                )\n\n        modifiedUs = []\n\n        for us, key in usList # update sprint and new position\n            us.milestone = currentSprintId\n            us[orderField] = startIndex + key\n            orderList[us.id] = us[orderField]\n\n            modifiedUs.push({us_id: us.id, order: us[orderField]})\n\n        startIndex = orderList[usList[usList.length - 1].id]\n\n        for it, key in afterDestination # increase position of the us after the dragged us's\n            orderList[it.id] = startIndex + key + 1\n\n        setNextOrders = _.map(afterDestination, (it) =>\n            {us_id: it.id, order: orderList[it.id]}\n        )\n\n        # refresh order\n        @scope.userstories = _.sortBy @scope.userstories, (it) => @.backlogOrder[it.id]\n        @scope.visibleUserStories = _.map @scope.userstories, (it) -> return it.ref\n\n        for sprint in @scope.sprints\n            sprint.user_stories = _.sortBy sprint.user_stories, (it) => @.milestonesOrder[sprint.id][it.id]\n\n        for sprint in @scope.closedSprints\n            sprint.user_stories = _.sortBy sprint.user_stories, (it) => @.milestonesOrder[sprint.id][it.id]\n\n        # saving\n        if usList.length > 1 && (newSprintId != oldSprintId) # drag multiple to sprint\n            data = modifiedUs.concat(setPreviousOrders, setNextOrders)\n            promise = @rs.userstories.bulkUpdateMilestone(project, newSprintId, data)\n        else if usList.length > 1 # drag multiple in backlog\n            data = modifiedUs.concat(setPreviousOrders, setNextOrders)\n            promise = @rs.userstories.bulkUpdateBacklogOrder(project, data)\n        else  # drag single\n            setOrders = {}\n            for it in setPreviousOrders\n                setOrders[it.us_id] = it.order\n            for it in setNextOrders\n                setOrders[it.us_id] = it.order\n\n            options = {\n                headers: {\n                    \"set-orders\": JSON.stringify(setOrders)\n                }\n            }\n\n            promise = @repo.save(usList[0], true, {}, options, true)\n\n        promise.then () =>\n            @rootscope.$broadcast(\"sprint:us:moved\")\n\n            if @scope.closedSprintsById && @scope.closedSprintsById[oldSprintId]\n                @rootscope.$broadcast(\"backlog:load-closed-sprints\")\n\n        return promise\n\n    ## Template actions\n\n    updateUserStoryStatus: () ->\n        @.generateFilters().then () =>\n            @rootscope.$broadcast(\"filters:update\")\n            @.loadProjectStats()\n            if @.isFilterDataTypeSelected('status')\n                @.filtersReloadContent()\n\n    editUserStory: (projectId, ref, $event) ->\n        target = $($event.target)\n\n        currentLoading = @loading()\n            .target(target)\n            .removeClasses(\"edit-story\")\n            .timeout(200)\n            .start()\n\n        return @rs.userstories.getByRef(projectId, ref).then (us) =>\n            @rs2.attachments.list(\"us\", us.id, projectId).then (attachments) =>\n                @rootscope.$broadcast(\"genericform:edit\", {\n                    'objType': 'us',\n                    'obj': us,\n                    'attachments': attachments.toJS()\n                })\n                currentLoading.finish()\n\n    deleteUserStory: (us) ->\n        title = @translate.instant(\"US.TITLE_DELETE_ACTION\")\n\n        message = us.subject\n\n        @confirm.askOnDelete(title, message).then (askResponse) =>\n            # We modify the userstories in scope so the user doesn't see the removed US for a while\n            @scope.userstories = _.without(@scope.userstories, us)\n            promise = @.repo.remove(us)\n            promise.then =>\n                askResponse.finish()\n\n                @q.all([\n                    @.loadProjectStats(),\n                    @.loadSprints()\n                ])\n            promise.then null, =>\n                askResponse.finish(false)\n                @confirm.notify(\"error\")\n\n    addNewUs: (type) ->\n        switch type\n            when \"standard\" then @rootscope.$broadcast(\"genericform:new\",\n                {\n                    'objType': 'us',\n                    'project': @scope.project\n                })\n            when \"bulk\" then @rootscope.$broadcast(\"usform:bulk\", @scope.projectId,\n                                                   @scope.project.default_us_status)\n\n    addNewSprint: () ->\n        @rootscope.$broadcast(\"sprintform:create\", @scope.projectId)\n\n    findCurrentSprint: () ->\n        currentDate = new Date().getTime()\n\n        return  _.find @scope.sprints, (sprint) ->\n            start = moment(sprint.estimated_start, 'YYYY-MM-DD').format('x')\n            end = moment(sprint.estimated_finish, 'YYYY-MM-DD').format('x')\n\n            return currentDate >= start && currentDate <= end\n\nmodule.controller(\"BacklogController\", BacklogController)\n\n#############################################################################\n## Backlog Directive\n#############################################################################\n\nBacklogDirective = ($repo, $rootscope, $translate, $rs) ->\n    ## Doom line Link\n    doomLineTemplate = _.template(\"\"\"\n    <div class=\"doom-line\"><span><%- text %></span></div>\n    \"\"\")\n\n    linkDoomLine = ($scope, $el, $attrs, $ctrl) ->\n        reloadDoomLine = ->\n            if $scope.displayVelocity\n                removeDoomlineDom()\n\n            if $scope.stats? and $scope.stats.total_points? and $scope.stats.total_points != 0 and !$scope.displayVelocity?\n                removeDoomlineDom()\n\n                stats = $scope.stats\n                total_points = stats.total_points\n                current_sum = stats.assigned_points\n\n                return if not $scope.userstories\n\n                for us, i in $scope.userstories\n                    current_sum += us.total_points\n\n                    if current_sum > total_points\n                        domElement = $el.find('.backlog-table-body .us-item-row')[i]\n                        addDoomLineDom(domElement)\n\n                        break\n\n        removeDoomlineDom = ->\n            $el.find(\".doom-line\").remove()\n\n        addDoomLineDom = (element) ->\n            text = $translate.instant(\"BACKLOG.DOOMLINE\")\n            $(element).before(doomLineTemplate({\"text\": text}))\n\n        getUsItems = ->\n            rowElements = $el.find('.backlog-table-body .us-item-row')\n            return _.map(rowElements, (x) -> angular.element(x))\n\n        $scope.$on(\"userstories:loaded\", reloadDoomLine)\n        $scope.$on(\"userstories:forecast\", removeDoomlineDom)\n        $scope.$watch(\"stats\", reloadDoomLine)\n\n    ## Move to current sprint link\n\n    linkToolbar = ($scope, $el, $attrs, $ctrl) ->\n        getUsToMove = () ->\n            # Calculating the us's to be modified\n            ussDom = $el.find(\".backlog-table-body input:checkbox:checked\")\n\n            return _.map ussDom, (item) ->\n                item =  $(item).closest('.tg-scope')\n                itemScope = item.scope()\n                itemScope.us.milestone = $scope.sprints[0].id\n                return itemScope.us\n\n        moveUssToSprint = (selectedUss, sprint) ->\n            ussCurrent = _($scope.userstories)\n\n            # Remove them from backlog\n            $scope.userstories = ussCurrent.without.apply(ussCurrent, selectedUss).value()\n\n            extraPoints = _.map(selectedUss, (v, k) -> v.total_points)\n            totalExtraPoints =  _.reduce(extraPoints, (acc, num) -> acc + num)\n\n            # Add them to current sprint\n            sprint.user_stories = _.union(sprint.user_stories, selectedUss)\n\n            # Update the total of points\n            sprint.total_points += totalExtraPoints\n\n            data = _.map selectedUss, (us) ->\n                return {\n                    us_id: us.id\n                    order: us.sprint_order\n                }\n            $rs.userstories.bulkUpdateMilestone($scope.project.id, $scope.sprints[0].id, data).then =>\n                $ctrl.loadSprints()\n                $ctrl.loadProjectStats()\n                $ctrl.toggleVelocityForecasting()\n                $ctrl.calculateForecasting()\n\n            $el.find(\".move-to-sprint\").hide()\n\n        moveToCurrentSprint = (selectedUss) ->\n            moveUssToSprint(selectedUss, $scope.currentSprint)\n\n        moveToLatestSprint = (selectedUss) ->\n            moveUssToSprint(selectedUss, $scope.sprints[0])\n\n        $scope.$on \"sprintform:create:success:callback\", (e, ussToMove) ->\n            if ussToMove\n                _.partial(moveToCurrentSprint, ussToMove)()\n\n        shiftPressed = false\n        lastChecked = null\n\n        checkSelected = (target) ->\n            lastChecked = target.closest(\".us-item-row\")\n            target.closest('.us-item-row').toggleClass('ui-multisortable-multiple')\n            moveToSprintDom = $el.find(\".move-to-sprint\")\n            selectedUsDom = $el.find(\".backlog-table-body input:checkbox:checked\")\n\n            if selectedUsDom.length > 0 and $scope.sprints.length > 0\n                moveToSprintDom.show()\n            else\n                moveToSprintDom.hide()\n\n\n        $(window).on \"keydown.shift-pressed keyup.shift-pressed\", (event) ->\n            shiftPressed = !!event.shiftKey\n\n            return true\n\n        # Enable move to current sprint only when there are selected us's\n        $el.on \"change\", \".backlog-table-body input:checkbox\", (event) ->\n            # check elements between the last two if shift is pressed\n            if lastChecked && shiftPressed\n                elements = []\n                current = $(event.currentTarget).closest(\".us-item-row\")\n                nextAll = lastChecked.nextAll()\n                prevAll = lastChecked.prevAll()\n\n                if _.some(nextAll, (next) -> next == current[0])\n                    elements = lastChecked.nextUntil(current)\n                else if _.some(prevAll, (prev) -> prev == current[0])\n                    elements = lastChecked.prevUntil(current)\n\n                _.map elements, (elm) ->\n                    input = $(elm).find(\"input:checkbox\")\n                    input.prop('checked', true)\n                    checkSelected(input)\n\n            target = angular.element(event.currentTarget)\n            target.closest(\".us-item-row\").toggleClass('is-checked')\n            checkSelected(target)\n\n        $el.on \"click\", \"#move-to-latest-sprint\", (event) =>\n            ussToMove = getUsToMove()\n\n            $scope.$apply(_.partial(moveToLatestSprint, ussToMove))\n\n        $el.on \"click\", \"#move-to-current-sprint\", (event) =>\n            ussToMove = getUsToMove()\n\n            $scope.$apply(_.partial(moveToCurrentSprint, ussToMove))\n\n        $el.on \"click\", \"#show-tags\", (event) ->\n            event.preventDefault()\n\n            $ctrl.toggleShowTags()\n\n            showHideTags($ctrl)\n\n        $el.on \"click\", \".forecasting-add-sprint\", (event) ->\n            ussToMoveList = $ctrl.forecastedStories\n            if $scope.currentSprint\n                ussToMove = _.map ussToMoveList, (us, index) ->\n                    us.milestone = $scope.currentSprint.id\n                    us.order = index\n                    return us\n\n                $scope.$apply(_.partial(moveToCurrentSprint, ussToMove))\n            else\n                ussToMove = _.map ussToMoveList, (us, index) ->\n                    us.order = index\n                    return us\n\n                $rootscope.$broadcast(\"sprintform:create\", $scope.projectId, ussToMove)\n\n    showHideTags = ($ctrl) ->\n        elm = angular.element(\"#show-tags\")\n\n        if $ctrl.showTags\n            elm.addClass(\"active\")\n\n            text = $translate.instant(\"BACKLOG.TAGS.HIDE\")\n            elm.text(text)\n        else\n            elm.removeClass(\"active\")\n\n            text = $translate.instant(\"BACKLOG.TAGS.SHOW\")\n            elm.text(text)\n\n    openFilterInit = ($scope, $el, $ctrl) ->\n        sidebar = $el.find(\"sidebar.backlog-filter\")\n\n        sidebar.addClass(\"active\")\n\n        $ctrl.activeFilters = true\n\n    showHideFilter = ($scope, $el, $ctrl) ->\n        sidebar = $el.find(\"sidebar.backlog-filter\")\n        sidebar.one \"transitionend\", () ->\n            timeout 150, ->\n                $rootscope.$broadcast(\"resize\")\n                $('.burndown').css(\"visibility\", \"visible\")\n\n        target = angular.element(\"#show-filters-button\")\n        $('.burndown').css(\"visibility\", \"hidden\")\n        sidebar.toggleClass(\"active\")\n        target.toggleClass(\"active\")\n\n        hideText = $translate.instant(\"BACKLOG.FILTERS.HIDE\")\n        showText = $translate.instant(\"BACKLOG.FILTERS.SHOW\")\n\n        toggleText(target, [hideText, showText])\n\n        $ctrl.toggleActiveFilters()\n\n    ## Filters Link\n\n    linkFilters = ($scope, $el, $attrs, $ctrl) ->\n        $scope.filtersSearch = {}\n        $el.on \"click\", \"#show-filters-button\", (event) ->\n            event.preventDefault()\n            $scope.$apply ->\n                showHideFilter($scope, $el, $ctrl)\n\n    link = ($scope, $el, $attrs, $rootscope) ->\n        $ctrl = $el.controller()\n\n        linkToolbar($scope, $el, $attrs, $ctrl)\n        linkFilters($scope, $el, $attrs, $ctrl)\n        linkDoomLine($scope, $el, $attrs, $ctrl)\n\n        filters = $ctrl.location.search()\n        if filters.status ||\n           filters.tags ||\n           filters.q ||\n           filters.assigned_to ||\n           filters.owner\n            openFilterInit($scope, $el, $ctrl)\n\n        $scope.$on \"showTags\", () ->\n            showHideTags($ctrl)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n            $(window).off(\".shift-pressed\")\n\n    return {link: link}\n\n\nmodule.directive(\"tgBacklog\", [\"$tgRepo\", \"$rootScope\", \"$translate\", \"$tgResources\", BacklogDirective])\n\n#############################################################################\n## User story points directive\n#############################################################################\n\nUsRolePointsSelectorDirective = ($rootscope, $template, $compile, $translate) ->\n    selectionTemplate = $template.get(\"backlog/us-role-points-popover.html\", true)\n\n    link = ($scope, $el, $attrs) ->\n        # Watchers\n        bindOnce $scope, \"project\", (project) ->\n            roles = _.filter(project.roles, \"computable\")\n            numberOfRoles = _.size(roles)\n\n            if numberOfRoles > 1\n                $el.append($compile(selectionTemplate({\"roles\": roles}))($scope))\n            else\n                $el.find(\".icon-arrow-down\").remove()\n                $el.find(\".header-points\").addClass(\"not-clickable\")\n\n        $scope.$on \"uspoints:select\", (ctx, roleId, roleName) ->\n            $el.find(\".popover\").popover().close()\n            $el.find(\".header-points\").html(\"#{roleName}/<span>Total</span>\")\n\n        $scope.$on \"uspoints:clear-selection\", (ctx, roleId) ->\n            $el.find(\".popover\").popover().close()\n\n            text = $translate.instant(\"COMMON.FIELDS.POINTS\")\n            $el.find(\".header-points\").text(text)\n\n        # Dom Event Handlers\n        $el.on \"click\", (event) ->\n            target = angular.element(event.target)\n\n            if target.is(\"span\") or target.is(\"div\")\n                event.stopPropagation()\n\n            $el.find(\".popover\").popover().open()\n\n        $el.on \"click\", \".clear-selection\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            $rootscope.$broadcast(\"uspoints:clear-selection\")\n\n        $el.on \"click\", \".role\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            target = angular.element(event.currentTarget)\n            rolScope = target.scope()\n            $rootscope.$broadcast(\"uspoints:select\", target.data(\"role-id\"), target.text())\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link: link}\n\nmodule.directive(\"tgUsRolePointsSelector\", [\"$rootScope\", \"$tgTemplate\", \"$compile\", \"$translate\", UsRolePointsSelectorDirective])\n\n\nUsPointsDirective = ($tgEstimationsService, $repo, $tgTemplate) ->\n    rolesTemplate = $tgTemplate.get(\"common/estimation/us-points-roles-popover.html\", true)\n\n    link = ($scope, $el, $attrs) ->\n        $ctrl = $el.controller()\n        updatingSelectedRoleId = null\n        selectedRoleId = null\n        filteringRoleId = null\n        estimationProcess = null\n\n        $scope.$on \"uspoints:select\", (ctx, roleId, roleName) ->\n            us = $scope.$eval($attrs.tgBacklogUsPoints)\n            selectedRoleId = roleId\n            estimationProcess.render()\n\n        $scope.$on \"uspoints:clear-selection\", (ctx) ->\n            us = $scope.$eval($attrs.tgBacklogUsPoints)\n            selectedRoleId = null\n            estimationProcess.render()\n\n        $scope.$watch $attrs.tgBacklogUsPoints, (us) ->\n            if us\n                estimationProcess = $tgEstimationsService.create($el, us, $scope.project)\n\n                # Update roles\n                roles = estimationProcess.calculateRoles()\n                if roles.length == 0\n                    $el.find(\".icon-arrow-bottom\").remove()\n                    $el.find(\"a.us-points\").addClass(\"not-clickable\")\n\n                else if roles.length == 1\n                    # Preselect the role if we have only one\n                    selectedRoleId = _.keys(us.points)[0]\n\n                if estimationProcess.isEditable\n                    bindClickElements()\n\n                estimationProcess.onSelectedPointForRole = (roleId, pointId, points) ->\n                    us.points = points\n                    estimationProcess.render()\n\n                    @save(roleId, pointId).then ->\n                        $ctrl.loadProjectStats()\n\n                estimationProcess.render = () ->\n                    totalPoints = @calculateTotalPoints()\n                    if not selectedRoleId? or roles.length == 1\n                        text = totalPoints\n                        title = totalPoints\n                    else\n                        pointId = @us.points[selectedRoleId]\n                        pointObj = @pointsById[pointId]\n                        text = \"#{pointObj.name} / <span>#{totalPoints}</span>\"\n                        title = \"#{pointObj.name} / #{totalPoints}\"\n\n                    ctx = {\n                        totalPoints: totalPoints\n                        roles: @calculateRoles()\n                        editable: @isEditable\n                        text:  text\n                        title: title\n                    }\n                    mainTemplate = \"common/estimation/us-estimation-total.html\"\n                    template = $tgTemplate.get(mainTemplate, true)\n                    html = template(ctx)\n                    @$el.html(html)\n\n                estimationProcess.render()\n\n        renderRolesSelector = () ->\n            roles = estimationProcess.calculateRoles()\n            html = rolesTemplate({\"roles\": roles})\n            # Render into DOM and show the new created element\n            $el.append(html)\n            $el.find(\".pop-role\").popover().open(() -> $(this).remove())\n\n        bindClickElements = () ->\n            $el.on \"click\", \"a.us-points\", (event) ->\n                event.preventDefault()\n                event.stopPropagation()\n                us = $scope.$eval($attrs.tgBacklogUsPoints)\n                updatingSelectedRoleId = selectedRoleId\n                if selectedRoleId?\n                    estimationProcess.renderPointsSelector(selectedRoleId)\n                else\n                    renderRolesSelector()\n\n            $el.on \"click\", \".role\", (event) ->\n                event.preventDefault()\n                event.stopPropagation()\n                target = angular.element(event.currentTarget)\n                us = $scope.$eval($attrs.tgBacklogUsPoints)\n                updatingSelectedRoleId = target.data(\"role-id\")\n                popRolesDom = $el.find(\".pop-role\")\n                popRolesDom.find(\"a\").removeClass(\"active\")\n                popRolesDom.find(\"a[data-role-id='#{updatingSelectedRoleId}']\").addClass(\"active\")\n                estimationProcess.renderPointsSelector(updatingSelectedRoleId)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link: link}\n\nmodule.directive(\"tgBacklogUsPoints\", [\"$tgEstimationsService\", \"$tgRepo\", \"$tgTemplate\", UsPointsDirective])\n\n\n#############################################################################\n## Burndown graph directive\n#############################################################################\nToggleBurndownVisibility = ($storage) ->\n    hide = () ->\n        $(\".js-burndown-graph\").removeClass(\"shown\")\n        $(\".js-toggle-burndown-visibility-button\").removeClass(\"active\")\n        $(\".js-burndown-graph\").removeClass(\"open\")\n\n    show = (firstLoad) ->\n        $(\".js-toggle-burndown-visibility-button\").addClass(\"active\")\n\n        if firstLoad\n            $(\".js-burndown-graph\").addClass(\"shown\")\n        else\n            $(\".js-burndown-graph\").addClass(\"open\")\n\n    link = ($scope, $el, $attrs) ->\n        firstLoad = true\n        hash = generateHash([\"is-burndown-grpahs-collapsed\"])\n        $scope.isBurndownGraphCollapsed = $storage.get(hash) or false\n\n        toggleGraph = ->\n            if $scope.isBurndownGraphCollapsed\n                hide(firstLoad)\n            else\n                show(firstLoad)\n\n            firstLoad = false\n\n        $scope.$watch \"showGraphPlaceholder\", () ->\n            if $scope.showGraphPlaceholder?\n                $scope.isBurndownGraphCollapsed = $scope.isBurndownGraphCollapsed || $scope.showGraphPlaceholder\n                toggleGraph()\n\n        $el.on \"click\", \".js-toggle-burndown-visibility-button\", ->\n            $scope.isBurndownGraphCollapsed = !$scope.isBurndownGraphCollapsed\n            $storage.set(hash, $scope.isBurndownGraphCollapsed)\n            toggleGraph()\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link: link\n    }\n\nmodule.directive(\"tgToggleBurndownVisibility\", [\"$tgStorage\", ToggleBurndownVisibility])\n\n\n#############################################################################\n## Burndown graph directive\n#############################################################################\n\nBurndownBacklogGraphDirective = ($translate) ->\n    redrawChart = (element, dataToDraw) ->\n        width = element.width()\n        element.height(width/6)\n        milestonesRange = [0..(dataToDraw.milestones.length - 1)]\n        data = []\n        zero_line = _.map(dataToDraw.milestones, (ml) -> 0)\n        data.push({\n            data: _.zip(milestonesRange, zero_line)\n            lines:\n                fillColor : \"rgba(0,0,0,0)\"\n            points:\n                show: false\n        })\n        optimal_line = _.map(dataToDraw.milestones, (ml) -> ml.optimal)\n        data.push({\n            data: _.zip(milestonesRange, optimal_line)\n            lines:\n                fillColor : \"rgba(120,120,120,0.2)\"\n        })\n        evolution_line = _.filter(_.map(dataToDraw.milestones, (ml) -> ml.evolution), (evolution) -> evolution?)\n        data.push({\n            data: _.zip(milestonesRange, evolution_line)\n            lines:\n                fillColor : \"rgba(102,153,51,0.3)\"\n        })\n        client_increment_line = _.map dataToDraw.milestones, (ml) ->\n            -ml[\"team-increment\"] - ml[\"client-increment\"]\n        data.push({\n            data: _.zip(milestonesRange, client_increment_line)\n            lines:\n                fillColor : \"rgba(255,51,51,0.3)\"\n        })\n        team_increment_line = _.map(dataToDraw.milestones, (ml) -> -ml[\"team-increment\"])\n        data.push({\n            data: _.zip(milestonesRange, team_increment_line)\n            lines:\n                fillColor : \"rgba(153,51,51,0.3)\"\n        })\n        colors = [\n            \"rgba(0,0,0,1)\"\n            \"rgba(120,120,120,0.2)\"\n            \"rgba(102,153,51,1)\"\n            \"rgba(153,51,51,1)\"\n            \"rgba(255,51,51,1)\"\n        ]\n\n        options = {\n            grid: {\n                borderWidth: { top: 0, right: 1, left:0, bottom: 0 }\n                borderColor: \"#ccc\"\n                hoverable: true\n            }\n            xaxis: {\n                ticks: dataToDraw.milestones.length\n                axisLabel: $translate.instant(\"BACKLOG.CHART.XAXIS_LABEL\"),\n                axisLabelUseCanvas: true\n                axisLabelFontSizePixels: 12\n                axisLabelFontFamily: \"Verdana, Arial, Helvetica, Tahoma, sans-serif\"\n                axisLabelPadding: 5\n                tickFormatter: (val, axis) -> \"\"\n            }\n            yaxis: {\n                axisLabel: $translate.instant(\"BACKLOG.CHART.YAXIS_LABEL\"),\n                axisLabelUseCanvas: true\n                axisLabelFontSizePixels: 12\n                axisLabelFontFamily: \"Verdana, Arial, Helvetica, Tahoma, sans-serif\"\n                axisLabelPadding: 5\n            }\n            series: {\n                shadowSize: 0\n                lines: {\n                    show: true\n                    fill: true\n                }\n                points: {\n                    show: true\n                    fill: true\n                    radius: 4\n                    lineWidth: 2\n                }\n            }\n            colors: colors\n            tooltip: true\n            tooltipOpts: {\n                content: (label, xval, yval, flotItem) ->\n                    if flotItem.seriesIndex == 1\n                        ctx = {sprintName: dataToDraw.milestones[xval].name, value: Math.abs(yval)}\n                        return $translate.instant(\"BACKLOG.CHART.OPTIMAL\", ctx)\n                    else if flotItem.seriesIndex == 2\n                        ctx = {sprintName: dataToDraw.milestones[xval].name, value: Math.abs(yval)}\n                        return $translate.instant(\"BACKLOG.CHART.REAL\", ctx)\n                    else if flotItem.seriesIndex == 3\n                        ctx = {sprintName: dataToDraw.milestones[xval].name, value: Math.abs(yval)}\n                        return $translate.instant(\"BACKLOG.CHART.INCREMENT_CLIENT\", ctx)\n                    else\n                        ctx = {sprintName: dataToDraw.milestones[xval].name, value: Math.abs(yval)}\n                        return $translate.instant(\"BACKLOG.CHART.INCREMENT_TEAM\", ctx)\n            }\n        }\n\n        element.empty()\n        element.plot(data, options).data(\"plot\")\n\n    link = ($scope, $el, $attrs) ->\n        element = angular.element($el)\n\n        $scope.$watch \"stats\", (value) ->\n            if $scope.stats?\n                redrawChart(element, $scope.stats)\n\n                $scope.$on \"resize\", ->\n                    redrawChart(element, $scope.stats)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link: link}\n\nmodule.directive(\"tgBurndownBacklogGraph\", [\"$translate\", BurndownBacklogGraphDirective])\n\n\n#############################################################################\n## Backlog progress bar directive\n#############################################################################\n\nTgBacklogProgressBarDirective = ($template, $compile) ->\n    template = $template.get(\"backlog/progress-bar.html\", true)\n\n    render = (scope, el, projectPointsPercentaje, closedPointsPercentaje) ->\n        html = template({\n            projectPointsPercentaje: projectPointsPercentaje,\n            closedPointsPercentaje:closedPointsPercentaje\n        })\n        html = $compile(html)(scope)\n        el.html(html)\n\n    adjustPercentaje = (percentage) ->\n        adjusted = _.max([0 , percentage])\n        adjusted = _.min([100, adjusted])\n        return Math.round(adjusted)\n\n    link = ($scope, $el, $attrs) ->\n        element = angular.element($el)\n\n        $scope.$watch $attrs.tgBacklogProgressBar, (stats) ->\n            if stats?\n                totalPoints = if stats.total_points then stats.total_points else stats.defined_points\n                definedPoints = stats.defined_points\n                closedPoints = stats.closed_points\n                if definedPoints > totalPoints\n                    projectPointsPercentaje = totalPoints * 100 / definedPoints\n                    closedPointsPercentaje = closedPoints * 100 / definedPoints\n                else\n                    projectPointsPercentaje = 100\n                    closedPointsPercentaje = closedPoints * 100 / totalPoints\n\n                projectPointsPercentaje = adjustPercentaje(projectPointsPercentaje - 3)\n                closedPointsPercentaje = adjustPercentaje(closedPointsPercentaje - 3)\n                render($scope, $el, projectPointsPercentaje, closedPointsPercentaje)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link: link}\n\nmodule.directive(\"tgBacklogProgressBar\", [\"$tgTemplate\", \"$compile\", TgBacklogProgressBarDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/backlog/sortable.coffee\n###\n\ntaiga = @.taiga\nbindOnce = @.taiga.bindOnce\n\nmodule = angular.module(\"taigaBacklog\")\n\n#############################################################################\n## Sortable Directive\n#############################################################################\n\ndeleteElement = (el) ->\n    $(el).scope().$destroy()\n    $(el).off()\n    $(el).remove()\n\nBacklogSortableDirective = () ->\n    link = ($scope, $el, $attrs) ->\n        bindOnce $scope, \"project\", (project) ->\n            # If the user has not enough permissions we don't enable the sortable\n            if not (project.my_permissions.indexOf(\"modify_us\") > -1)\n                return\n\n            initIsBacklog = false\n\n            drake = dragula([$el[0], $('.js-empty-backlog')[0]], {\n                copySortSource: false,\n                copy: false,\n                isContainer: (el) -> return el.classList.contains('sprint-table'),\n                moves: (item) ->\n                    if !$(item).hasClass('row')\n                        return false\n\n                    return true\n            })\n\n            drake.on 'drag', (item, container) ->\n                # it doesn't move is the filter is open\n                parent = $(item).parent()\n                initIsBacklog = parent.hasClass('backlog-table-body')\n\n                $(document.body).addClass(\"drag-active\")\n\n                isChecked = $(item).find(\"input[type='checkbox']\").is(\":checked\")\n\n                window.dragMultiple.start(item, container)\n\n            drake.on 'cloned', (item) ->\n                $(item).addClass('multiple-drag-mirror')\n\n            drake.on 'dragend', (item) ->\n                $('.doom-line').remove()\n\n                parent = $(item).parent()\n\n                isBacklog = parent.hasClass('backlog-table-body') || parent.hasClass('js-empty-backlog')\n\n                if initIsBacklog || isBacklog\n                    sameContainer = (initIsBacklog == isBacklog)\n                else\n                    sameContainer = parent && $(item).scope().sprint.id == parent.scope().sprint.id\n\n                dragMultipleItems = window.dragMultiple.stop()\n\n                $(document.body).removeClass(\"drag-active\")\n\n                sprint = null\n\n                firstElement = if dragMultipleItems.length then dragMultipleItems[0] else item\n\n                if isBacklog\n                    index = $(firstElement).index(\".backlog-table-body .row\")\n                else\n                    index = $(firstElement).index()\n                    sprint = parent.scope()?.sprint.id\n\n                if !sameContainer\n                    if dragMultipleItems.length\n                        usList = _.map dragMultipleItems, (item) ->\n                            return item = $(item).scope().us\n                    else if $(item).scope()\n                        usList = [$(item).scope().us]\n\n                    if (dragMultipleItems.length)\n                        _.each dragMultipleItems, (item) ->\n                            deleteElement(item)\n                    else\n                        deleteElement(item)\n                else\n                    if dragMultipleItems.length\n                        usList = _.map dragMultipleItems, (item) ->\n                            return item = $(item).scope().us\n                    else if $(item).scope()\n                        usList = [$(item).scope().us]\n\n                $scope.$emit(\"sprint:us:move\", usList, index, sprint)\n\n            scroll = autoScroll([window], {\n                margin: 20,\n                pixels: 30,\n                scrollWhenOutside: true,\n                autoScroll: () ->\n                    return this.down && drake.dragging\n            })\n\n            $scope.$on \"$destroy\", ->\n                $el.off()\n                drake.destroy()\n\n    return {link: link}\n\nmodule.directive(\"tgBacklogSortable\", BacklogSortableDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/backlog/sprints.coffee\n###\n\ntaiga = @.taiga\n\nmodule = angular.module(\"taigaBacklog\")\n\n\n#############################################################################\n## Sprint Actions Directive\n#############################################################################\n\nBacklogSprintDirective = ($repo, $rootscope) ->\n    sprintTableMinHeight = 50\n    slideOptions = {\n        duration: 500,\n        easing: 'linear'\n    }\n\n    toggleSprint = ($el) =>\n        sprintTable = $el.find(\".sprint-table\")\n        sprintArrow = $el.find(\".compact-sprint\")\n\n        sprintArrow.toggleClass('active')\n        sprintTable.toggleClass('open')\n\n    link = ($scope, $el, $attrs) ->\n        $scope.$watch $attrs.tgBacklogSprint, (sprint) ->\n            sprint = $scope.$eval($attrs.tgBacklogSprint)\n\n            if sprint.closed\n                $el.addClass(\"sprint-closed\")\n            else\n                toggleSprint($el)\n\n        # Event Handlers\n        $el.on \"click\", \".sprint-name > .compact-sprint\", (event) ->\n            event.preventDefault()\n\n            toggleSprint($el)\n\n            $el.find(\".sprint-table\").slideToggle(slideOptions)\n\n        $el.on \"click\", \".edit-sprint\", (event) ->\n            event.preventDefault()\n\n            sprint = $scope.$eval($attrs.tgBacklogSprint)\n            $rootscope.$broadcast(\"sprintform:edit\", sprint)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link: link}\n\nmodule.directive(\"tgBacklogSprint\", [\"$tgRepo\", \"$rootScope\", BacklogSprintDirective])\n\n\n#############################################################################\n## Sprint Header Directive\n#############################################################################\n\nBacklogSprintHeaderDirective = ($navUrls, $template, $compile, $translate) ->\n    template = $template.get(\"backlog/sprint-header.html\")\n\n    link = ($scope, $el, $attrs, $model) ->\n        prettyDate = $translate.instant(\"BACKLOG.SPRINTS.DATE\")\n\n        isEditable = ->\n            return $scope.project.my_permissions.indexOf(\"modify_milestone\") != -1\n\n        isVisible = ->\n            return $scope.project.my_permissions.indexOf(\"view_milestones\") != -1\n\n        render = (sprint) ->\n            taskboardUrl = $navUrls.resolve(\"project-taskboard\",\n                                            {project: $scope.project.slug, sprint: sprint.slug})\n\n            start = moment(sprint.estimated_start).format(prettyDate)\n            finish = moment(sprint.estimated_finish).format(prettyDate)\n\n            estimatedDateRange = \"#{start}-#{finish}\"\n\n            ctx = {\n                name: sprint.name\n                taskboardUrl: taskboardUrl\n                estimatedDateRange: estimatedDateRange\n                closedPoints: sprint.closed_points or 0\n                totalPoints: sprint.total_points or 0\n                isVisible: isVisible()\n                isEditable: isEditable()\n            }\n\n            templateScope = $scope.$new()\n\n            _.assign(templateScope, ctx)\n\n            compiledTemplate = $compile(template)(templateScope)\n            $el.html(compiledTemplate)\n\n        $scope.$watch \"sprint\", (sprint) ->\n            render(sprint)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link: link\n        restrict: \"EA\"\n    }\n\nmodule.directive(\"tgBacklogSprintHeader\", [\"$tgNavUrls\", \"$tgTemplate\", \"$compile\", \"$translate\"\n                                           BacklogSprintHeaderDirective])\n\n\n#############################################################################\n## Toggle Closed Sprints Directive\n#############################################################################\n\nToggleExcludeClosedSprintsVisualization = ($rootscope, $loading, $translate) ->\n    excludeClosedSprints = true\n\n    link = ($scope, $el, $attrs) ->\n        # insert loading wrapper\n        loadingElm = $(\"<div>\")\n        $el.after(loadingElm)\n\n        currentLoading = null\n\n        # Event Handlers\n        $el.on \"click\", (event) ->\n            event.preventDefault()\n            excludeClosedSprints  = not excludeClosedSprints\n\n            currentLoading = $loading()\n                .target(loadingElm)\n                .start()\n\n            if excludeClosedSprints\n                $rootscope.$broadcast(\"backlog:unload-closed-sprints\")\n            else\n                $rootscope.$broadcast(\"backlog:load-closed-sprints\")\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n        $scope.$on \"closed-sprints:reloaded\", (ctx, sprints) ->\n            if currentLoading\n                currentLoading.finish()\n\n            if sprints.length > 0\n                key = \"BACKLOG.SPRINTS.ACTION_HIDE_CLOSED_SPRINTS\"\n            else\n                key = \"BACKLOG.SPRINTS.ACTION_SHOW_CLOSED_SPRINTS\"\n\n            text = $translate.instant(key)\n\n            $el.find(\".text\").text(text)\n\n    return {link: link}\n\nmodule.directive(\"tgBacklogToggleClosedSprintsVisualization\", [\"$rootScope\", \"$tgLoading\", \"$translate\",\n                                                               ToggleExcludeClosedSprintsVisualization])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/taskboard/charts.coffee\n###\n\ntaiga = @.taiga\n\nmixOf = @.taiga.mixOf\ntoggleText = @.taiga.toggleText\nscopeDefer = @.taiga.scopeDefer\nbindOnce = @.taiga.bindOnce\ngroupBy = @.taiga.groupBy\ntimeout = @.taiga.timeout\n\nmodule = angular.module(\"taigaTaskboard\")\n\n#############################################################################\n## Sprint burndown graph directive\n#############################################################################\n\nSprintGraphDirective = ($translate)->\n    redrawChart = (element, dataToDraw) ->\n        width = element.width()\n        element.height(240)\n\n        days = _.map(dataToDraw, (x) -> moment.utc(x.day))\n\n        data = []\n        data.unshift({\n            data: _.zip(days, _.map(dataToDraw, (d) -> d.optimal_points))\n            lines:\n                fillColor : \"rgba(120,120,120,0.2)\"\n        })\n        data.unshift({\n            data: _.zip(days, _.map(dataToDraw, (d) -> d.open_points))\n            lines:\n                fillColor : \"rgba(26, 131, 255,0.3)\"\n        })\n\n        options =\n            grid:\n                borderWidth: { top: 0, right: 1, left:0, bottom: 0 }\n                borderColor: '#ccc'\n                hoverable: true\n            xaxis:\n                tickSize: [1, \"day\"]\n                min: days[0]\n                max: _.last(days)\n                mode: \"time\"\n                daysNames: days\n                axisLabel: $translate.instant(\"TASKBOARD.CHARTS.XAXIS_LABEL\")\n                axisLabelUseCanvas: true\n                axisLabelFontSizePixels: 12\n                axisLabelFontFamily: 'Verdana, Arial, Helvetica, Tahoma, sans-serif'\n                axisLabelPadding: 5\n            yaxis:\n                min: 0\n                axisLabel: $translate.instant(\"TASKBOARD.CHARTS.YAXIS_LABEL\")\n                axisLabelUseCanvas: true\n                axisLabelFontSizePixels: 12\n                axisLabelFontFamily: 'Verdana, Arial, Helvetica, Tahoma, sans-serif'\n                axisLabelPadding: 5\n            series:\n                shadowSize: 0\n                lines:\n                    show: true\n                    fill: true\n                points:\n                    show: true\n                    fill: true\n                    radius: 4\n                    lineWidth: 2\n            colors: [\"rgba(26, 131, 255,1)\", \"rgba(120,120,120,0.2)\"]\n            tooltip: true\n            tooltipOpts:\n                content: (label, xval, yval, flotItem) ->\n                    formattedDate = moment(xval).format($translate.instant(\"TASKBOARD.CHARTS.DATE\"))\n                    roundedValue = Math.round(yval)\n\n                    if flotItem.seriesIndex == 1\n                        return $translate.instant(\"TASKBOARD.CHARTS.OPTIMAL\", {\n                            formattedDate: formattedDate,\n                            roundedValue: roundedValue\n                        })\n\n                    else\n                        return $translate.instant(\"TASKBOARD.CHARTS.REAL\", {\n                            formattedDate: formattedDate,\n                            roundedValue: roundedValue\n                        })\n\n        element.empty()\n        element.plot(data, options).data(\"plot\")\n\n    link = ($scope, $el, $attrs) ->\n        element = angular.element($el)\n\n        $scope.$on \"resize\", ->\n            redrawChart(element, $scope.stats.days) if $scope.stats\n\n        $scope.$on \"taskboard:graph:toggle-visibility\", ->\n            $el.parent().toggleClass('open')\n\n            # fix chart overflow\n            timeout(100, ->\n                redrawChart(element, $scope.stats.days) if $scope.stats\n            )\n\n        $scope.$watch 'stats', (value) ->\n            if not $scope.stats?\n                return\n            redrawChart(element, $scope.stats.days)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link: link}\n\nmodule.directive(\"tgSprintGraph\", [\"$translate\", SprintGraphDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/taskboard/lightboxes.coffee\n###\n\ntaiga = @.taiga\nbindOnce = @.taiga.bindOnce\ndebounce = @.taiga.debounce\ntrim = @.taiga.trim\n\n\nmodule = angular.module(\"taigaTaskboard\")\n\n\nCreateBulkTasksDirective = ($repo, $rs, $rootscope, $loading, lightboxService, $model) ->\n    link = ($scope, $el, attrs) ->\n        $scope.form = {data: \"\", usId: null}\n\n        submit = debounce 2000, (event) =>\n            event.preventDefault()\n\n            form = $el.find(\"form\").checksley()\n            if not form.validate()\n                return\n\n            currentLoading = $loading()\n                .target(submitButton)\n                .start()\n\n            data = $scope.form.data\n            projectId = $scope.projectId\n            sprintId = $scope.form.sprintId\n            usId = $scope.form.usId\n\n            promise = $rs.tasks.bulkCreate(projectId, sprintId, usId, data)\n            promise.then (result) ->\n                result =  _.map(result, (x) => $model.make_model('tasks', x))\n                currentLoading.finish()\n                $rootscope.$broadcast(\"taskform:bulk:success\", result)\n                lightboxService.close($el)\n\n            # TODO: error handling\n            promise.then null, ->\n                currentLoading.finish()\n\n        $scope.$on \"taskform:bulk\", (ctx, sprintId, usId)->\n            lightboxService.open($el)\n            $scope.form = {data: \"\", sprintId: sprintId, usId: usId}\n\n        submitButton = $el.find(\".submit-button\")\n\n        $el.on \"submit\", \"form\", submit\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link: link}\n\nmodule.directive(\"tgLbCreateBulkTasks\", [\n    \"$tgRepo\",\n    \"$tgResources\",\n    \"$rootScope\",\n    \"$tgLoading\",\n    \"lightboxService\",\n    \"$tgModel\",\n    CreateBulkTasksDirective\n])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/taskboard/main.coffee\n###\n\ntaiga = @.taiga\ntoggleText = @.taiga.toggleText\nmixOf = @.taiga.mixOf\ngroupBy = @.taiga.groupBy\nbindOnce = @.taiga.bindOnce\nscopeDefer = @.taiga.scopeDefer\ntimeout = @.taiga.timeout\nbindMethods = @.taiga.bindMethods\ndebounceLeading = @.taiga.debounceLeading\n\nmodule = angular.module(\"taigaTaskboard\")\n\n\n#############################################################################\n## Taskboard Controller\n#############################################################################\n\nclass TaskboardController extends mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin)\n    @.$inject = [\n        \"$scope\",\n        \"$rootScope\",\n        \"$tgRepo\",\n        \"$tgConfirm\",\n        \"$tgResources\",\n        \"tgResources\"\n        \"$routeParams\",\n        \"$q\",\n        \"tgAppMetaService\",\n        \"$tgLocation\",\n        \"$tgNavUrls\"\n        \"$tgEvents\"\n        \"$tgAnalytics\",\n        \"$translate\",\n        \"tgErrorHandlingService\",\n        \"tgTaskboardTasks\",\n        \"tgTaskboardIssues\",\n        \"$tgStorage\",\n        \"tgFilterRemoteStorageService\",\n        \"tgLightboxFactory\"\n    ]\n\n    excludePrefix: \"exclude_\"\n    filterCategories: [\n        \"tags\",\n        \"status\",\n        \"assigned_to\",\n        \"owner\",\n        \"role\",\n    ]\n\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @rs2, @params, @q, @appMetaService, @location, @navUrls,\n                  @events, @analytics, @translate, @errorHandlingService, @taskboardTasksService,\n                  @taskboardIssuesService, @storage, @filterRemoteStorageService, @lightboxFactory) ->\n        bindMethods(@)\n        @taskboardTasksService.reset()\n        @scope.userstories = []\n        @.openFilter = false\n\n        return if @.applyStoredFilters(@params.pslug, \"tasks-filters\")\n\n        @scope.sectionName = @translate.instant(\"TASKBOARD.SECTION_NAME\")\n        @.initializeEventHandlers()\n\n        taiga.defineImmutableProperty @.scope, \"usTasks\", () =>\n            return @taskboardTasksService.usTasks\n\n        taiga.defineImmutableProperty @.scope, \"milestoneIssues\", () =>\n            return @taskboardIssuesService.milestoneIssues\n\n    firstLoad: () ->\n        promise = @.loadInitialData()\n\n        # On Success\n        promise.then => @._setMeta()\n        # On Error\n        promise.then null, @.onInitialDataError.bind(@)\n\n    setZoom: (zoomLevel, zoom) ->\n        if @.zoomLevel == zoomLevel\n            return null\n\n        @.isFirstLoad = !@.zoomLevel\n\n        previousZoomLevel = @.zoomLevel\n\n        @.zoomLevel = zoomLevel\n        @.zoom = zoom\n\n        if @.isFirstLoad\n            @.firstLoad().then () =>\n                @.isFirstLoad = false\n                @taskboardTasksService.resetFolds()\n\n        else if @.zoomLevel > 1 && previousZoomLevel <= 1\n            @.zoomLoading = true\n            @q.all([@.loadTasks(), @.loadIssues()]).then () =>\n                @.zoomLoading = false\n                @taskboardTasksService.resetFolds()\n\n        if @.zoomLevel == '0'\n            @rootscope.$broadcast(\"sprint:zoom0\")\n\n    changeQ: (q) ->\n        @.replaceFilter(\"q\", q)\n        @.loadTasks()\n        @.generateFilters()\n\n    removeFilter: (filter) ->\n        @.unselectFilter(filter.dataType, filter.id, false, filter.mode)\n        @.loadTasks()\n        @.generateFilters()\n\n    addFilter: (newFilter) ->\n        @.selectFilter(newFilter.category.dataType, newFilter.filter.id, false, newFilter.mode)\n        @.loadTasks()\n        @.generateFilters()\n\n    selectCustomFilter: (customFilter) ->\n        @.replaceAllFilters(customFilter.filter)\n        @.loadTasks()\n        @.generateFilters()\n\n    removeCustomFilter: (customFilter) ->\n        @filterRemoteStorageService.getFilters(@scope.projectId, 'tasks-custom-filters').then (userFilters) =>\n            delete userFilters[customFilter.id]\n\n            @filterRemoteStorageService.storeFilters(@scope.projectId, userFilters, 'tasks-custom-filters').then(@.generateFilters)\n\n    isFilterDataTypeSelected: (filterDataType) ->\n        for filter in @.selectedFilters\n            if (filter['dataType'] == filterDataType)\n                return true\n        return false\n\n    saveCustomFilter: (name) ->\n        filters = {}\n        urlfilters = @location.search()\n        for key in @.filterCategories\n            excludeKey = @.excludePrefix.concat(key)\n            filters[key] = urlfilters[key]\n            filters[excludeKey] = urlfilters[excludeKey]\n\n        @filterRemoteStorageService.getFilters(@scope.projectId, 'tasks-custom-filters').then (userFilters) =>\n            userFilters[name] = filters\n\n            @filterRemoteStorageService.storeFilters(@scope.projectId, userFilters, 'tasks-custom-filters').then(@.generateFilters)\n\n    generateFilters: ->\n        @.storeFilters(@params.pslug, @location.search(), \"tasks-filters\")\n\n        urlfilters = @location.search()\n\n        loadFilters = {}\n        loadFilters.project = @scope.projectId\n        loadFilters.milestone = @scope.sprintId\n        loadFilters.q = urlfilters.q\n\n        for key in @.filterCategories\n            excludeKey = @.excludePrefix.concat(key)\n            loadFilters[key] = urlfilters[key]\n            loadFilters[excludeKey] = urlfilters[excludeKey]\n\n        return @q.all([\n            @rs.tasks.filtersData(loadFilters),\n            @filterRemoteStorageService.getFilters(@scope.projectId, 'tasks-custom-filters')\n        ]).then (result) =>\n            data = result[0]\n            customFiltersRaw = result[1]\n            dataCollection = {}\n\n            dataCollection.status = _.map data.statuses, (it) ->\n                it.id = it.id.toString()\n\n                return it\n            dataCollection.tags = _.map data.tags, (it) ->\n                it.id = it.name\n\n                return it\n\n            tagsWithAtLeastOneElement = _.filter dataCollection.tags, (tag) ->\n                return tag.count > 0\n\n            dataCollection.assigned_to = _.map data.assigned_to, (it) ->\n                if it.id\n                    it.id = it.id.toString()\n                else\n                    it.id = \"null\"\n\n                it.name = it.full_name || \"Unassigned\"\n\n                return it\n            dataCollection.role = _.map data.roles, (it) ->\n                if it.id\n                    it.id = it.id.toString()\n                else\n                    it.id = \"null\"\n\n                it.name = it.name || \"Unassigned\"\n\n                return it\n            dataCollection.owner = _.map data.owners, (it) ->\n                it.id = it.id.toString()\n                it.name = it.full_name\n\n                return it\n\n            @.selectedFilters = []\n\n            for key in @.filterCategories\n                excludeKey = @.excludePrefix.concat(key)\n                if loadFilters[key]\n                    selected = @.formatSelectedFilters(key, dataCollection[key], loadFilters[key])\n                    @.selectedFilters = @.selectedFilters.concat(selected)\n                if loadFilters[excludeKey]\n                    selected = @.formatSelectedFilters(key, dataCollection[key], loadFilters[excludeKey], \"exclude\")\n                    @.selectedFilters = @.selectedFilters.concat(selected)\n\n            @.filterQ = loadFilters.q\n\n            @.filters = [\n                {\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.STATUS\"),\n                    dataType: \"status\",\n                    content: dataCollection.status\n                },\n                {\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.TAGS\"),\n                    dataType: \"tags\",\n                    content: dataCollection.tags,\n                    hideEmpty: true,\n                    totalTaggedElements: tagsWithAtLeastOneElement.length\n                },\n                {\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.ASSIGNED_TO\"),\n                    dataType: \"assigned_to\",\n                    content: dataCollection.assigned_to\n                },\n                {\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.ROLE\"),\n                    dataType: \"role\",\n                    content: dataCollection.role\n                },\n                {\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.CREATED_BY\"),\n                    dataType: \"owner\",\n                    content: dataCollection.owner\n                }\n            ]\n\n            @.customFilters = []\n            _.forOwn customFiltersRaw, (value, key) =>\n                @.customFilters.push({id: key, name: key, filter: value})\n\n    _setMeta: ->\n        prettyDate = @translate.instant(\"BACKLOG.SPRINTS.DATE\")\n\n        title = @translate.instant(\"TASKBOARD.PAGE_TITLE\", {\n            projectName: @scope.project.name\n            sprintName: @scope.sprint.name\n        })\n        description =  @translate.instant(\"TASKBOARD.PAGE_DESCRIPTION\", {\n            projectName: @scope.project.name\n            sprintName: @scope.sprint.name\n            startDate: moment(@scope.sprint.estimated_start).format(prettyDate)\n            endDate: moment(@scope.sprint.estimated_finish).format(prettyDate)\n            completedPercentage: @scope.stats.completedPercentage or \"0\"\n            completedPoints: @scope.stats.completedPointsSum or \"--\"\n            totalPoints: @scope.stats.totalPointsSum or \"--\"\n            openTasks: @scope.stats.openTasks or \"--\"\n            totalTasks: @scope.stats.total_tasks or \"--\"\n        })\n\n        @appMetaService.setAll(title, description)\n\n    initializeEventHandlers: ->\n        @scope.$on \"taskform:bulk:success\", (event, tasks) =>\n            @.refreshTagsColors().then () =>\n                @taskboardTasksService.add(tasks)\n\n            @analytics.trackEvent(\"task\", \"create\", \"bulk create task on taskboard\", 1)\n\n        @scope.$on \"taskform:new:success\", (event, task) =>\n            @.refreshTagsColors().then () =>\n                @taskboardTasksService.add(task)\n\n            @analytics.trackEvent(\"task\", \"create\", \"create task on taskboard\", 1)\n\n        @scope.$on \"taskform:edit:success\", (event, task) =>\n            @.refreshTagsColors().then () =>\n                @taskboardTasksService.replaceModel(task)\n\n        @scope.$on \"issueform:new:success\", (event, issue) =>\n            @.refreshTagsColors().then () =>\n                @taskboardIssuesService.add(issue)\n\n            @analytics.trackEvent(\"issue\", \"create\", \"create issue on taskboard\", 1)\n\n        @scope.$on \"issueform:add:success\", (event, issue) =>\n            @.refreshTagsColors().then () =>\n                @taskboardIssuesService.add(issue)\n\n        @scope.$on \"issueform:edit:success\", (event, issue) =>\n            @.refreshTagsColors().then () =>\n                @taskboardIssuesService.replaceModel(issue)\n\n        @scope.$on \"taskboard:task:deleted\", (event, task) =>\n            @.loadTasks()\n\n        @scope.$on \"taskboard:issue:deleted\", (event, issue) =>\n            @.loadIssues()\n\n        @scope.$on(\"taskboard:task:move\", @.taskMove)\n        @scope.$on(\"assigned-to:added\", @.onAssignedToChanged)\n\n        @scope.$on \"taskboard:items:move\", (event, itemsMoved) =>\n            if itemsMoved.uss\n                @.firstLoad()\n            else\n                @.loadTasks() if itemsMoved.tasks\n                @.loadIssues() if itemsMoved.issues\n\n    onAssignedToChanged: (ctx, userid, model) ->\n        if model.getName() == 'tasks'\n            model.assigned_to = userid\n            @taskboardTasksService.replaceModel(model)\n\n            @repo.save(model).then =>\n                @.generateFilters()\n                if @.isFilterDataTypeSelected('assigned_to') || @.isFilterDataTypeSelected('role')\n                    @.loadTasks()\n        if model.getName() == 'issues'\n            model.assigned_to = userid\n            @taskboardIssuesService.replaceModel(model)\n\n            @repo.save(model).then =>\n                @.generateFilters()\n                if @.isFilterDataTypeSelected('assigned_to') || @.isFilterDataTypeSelected('role')\n                    @.loadIssues()\n\n    initializeSubscription: ->\n        routingKey = \"changes.project.#{@scope.projectId}.tasks\"\n        @events.subscribe @scope, routingKey, debounceLeading(500, (message) =>\n            @.loadTaskboard())\n\n        routingKey = \"changes.project.#{@scope.projectId}.issues\"\n        @events.subscribe @scope, routingKey, debounceLeading(500, (message) =>\n            @.loadIssues())\n\n        routingKey1 = \"changes.project.#{@scope.projectId}.userstories\"\n        @events.subscribe @scope, routingKey1, (message) =>\n            @.refreshTagsColors()\n            @.loadSprintStats()\n            @.loadSprint()\n\n    loadProject: ->\n        return @rs.projects.get(@scope.projectId).then (project) =>\n            if not project.is_backlog_activated\n                @errorHandlingService.permissionDenied()\n\n            @scope.project = project\n            # Not used at this momment\n            @scope.pointsList = _.sortBy(project.points, \"order\")\n            @scope.pointsById = groupBy(project.points, (e) -> e.id)\n            @scope.roleById = groupBy(project.roles, (e) -> e.id)\n            @scope.taskStatusList = _.sortBy(project.task_statuses, \"order\")\n            @scope.usStatusList = _.sortBy(project.us_statuses, \"order\")\n            @scope.usStatusById = groupBy(project.us_statuses, (e) -> e.id)\n            @scope.issueStatusById = groupBy(project.issue_statuses, (e) -> e.id)\n\n            @scope.$emit('project:loaded', project)\n\n            @.fillUsersAndRoles(project.members, project.roles)\n\n            return project\n\n    loadSprintStats: ->\n        return @rs.sprints.stats(@scope.projectId, @scope.sprintId).then (stats) =>\n            totalPointsSum =_.reduce(_.values(stats.total_points), ((res, n) -> res + n), 0)\n            completedPointsSum = _.reduce(_.values(stats.completed_points), ((res, n) -> res + n), 0)\n            remainingPointsSum = totalPointsSum - completedPointsSum\n            remainingTasks = stats.total_tasks - stats.completed_tasks\n            @scope.stats = stats\n            @scope.stats.totalPointsSum = totalPointsSum\n            @scope.stats.completedPointsSum = completedPointsSum\n            @scope.stats.remainingPointsSum = remainingPointsSum\n            @scope.stats.remainingTasks = remainingTasks\n            if stats.totalPointsSum\n                @scope.stats.completedPercentage = Math.round(100*stats.completedPointsSum/stats.totalPointsSum)\n            else\n                @scope.stats.completedPercentage = 0\n\n            @scope.stats.openTasks = stats.total_tasks - stats.completed_tasks\n            return stats\n\n    refreshTagsColors: ->\n        return @rs.projects.tagsColors(@scope.projectId).then (tags_colors) =>\n            @scope.project.tags_colors = tags_colors._attrs\n\n    loadSprint: ->\n        return @rs.sprints.get(@scope.projectId, @scope.sprintId).then (sprint) =>\n            @scope.sprint = sprint\n            @scope.userstories = _.sortBy(sprint.user_stories, \"sprint_order\")\n\n            @taskboardTasksService.setUserstories(@scope.userstories)\n\n            @rootscope.$broadcast(\"taskboard:userstories:loaded\", @scope.userstories)\n            return sprint\n\n    loadIssues: ->\n        params = {}\n\n        if @.zoomLevel > 1\n            params.include_attachments = 1\n\n        params = _.merge params, @location.search()\n\n        return @rs.issues.listInProject(@scope.projectId, @scope.sprintId, params).then (issues) =>\n            @taskboardIssuesService.init(@scope.project, @scope.usersById, @scope.issueStatusById)\n            @taskboardIssuesService.set(issues)\n            @scope.taskBoardLoading = false\n\n    loadTasks: ->\n        params = {}\n\n        if @.zoomLevel > 1\n            params.include_attachments = 1\n\n        params = _.merge params, @location.search()\n        return @rs.tasks.list(@scope.projectId, @scope.sprintId, null, params).then (tasks) =>\n            @taskboardTasksService.init(@scope.project, @scope.usersById)\n            @taskboardTasksService.set(tasks)\n\n    loadTaskboard: ->\n        return @q.all([\n            @.refreshTagsColors(),\n            @.loadSprintStats(),\n            @.loadSprint().then(=>\n                @.loadTasks()\n                @.loadIssues()\n            )\n        ])\n\n    loadInitialData: ->\n        params = {\n            pslug: @params.pslug\n            sslug: @params.sslug\n        }\n\n        promise = @repo.resolve(params).then (data) =>\n            @scope.projectId = data.project\n            @scope.sprintId = data.milestone\n            @.initializeSubscription()\n            return data\n\n        return promise.then(=> @.loadProject())\n                      .then =>\n                          @.generateFilters()\n\n                          return @.loadTaskboard().then(=> @.setRolePoints())\n\n    showPlaceHolder: (statusId, usId) ->\n        if !@taskboardTasksService.tasksRaw.length\n            if @scope.taskStatusList[0].id == statusId &&\n              (!@scope.userstories.length || @scope.userstories[0].id == usId)\n                return true\n\n        return false\n\n    editTask: (id) ->\n        task = @.taskboardTasksService.getTask(id)\n\n        task = task.set('loading-edit', true)\n        @taskboardTasksService.replace(task)\n\n        @rs.tasks.getByRef(task.getIn(['model', 'project']), task.getIn(['model', 'ref']))\n        .then (editingTask) =>\n            @rs2.attachments.list(\"task\", task.get('id'), task.getIn(['model', 'project']))\n            .then (attachments) =>\n                @rootscope.$broadcast(\"genericform:edit\", {\n                    'objType': 'task',\n                    'obj': editingTask,\n                    'project': @scope.project,\n                    'sprintId': @scope.sprintId,\n                    'attachments': attachments.toJS()\n                })\n\n                task = task.set('loading-edit', false)\n                @taskboardTasksService.replace(task)\n\n    editIssue: (id) ->\n        issue = @.taskboardIssuesService.getIssue(id)\n        issue = issue.set('loading-edit', true)\n\n        @rs.issues.getByRef(issue.getIn(['model', 'project']), issue.getIn(['model', 'ref']))\n        .then (editingIssue) =>\n            @rs2.attachments.list(\"issue\", issue.get('id'), issue.getIn(['model', 'project']))\n            .then (attachments) =>\n                @rootscope.$broadcast(\"genericform:edit\", {\n                    'objType': 'issue',\n                    'obj': editingIssue,\n                    'project': @scope.project,\n                    'sprintId': @scope.sprintId,\n                    'attachments': attachments.toJS()\n                })\n                issue = issue.set('loading-edit', false)\n\n    deleteTask: (id) ->\n        task = @.taskboardTasksService.getTask(id)\n        task = task.set('loading-delete', true)\n\n        @rs.tasks.getByRef(task.getIn(['model', 'project']), task.getIn(['model', 'ref']))\n        .then (deletingTask) =>\n            task = task.set('loading-delete', false)\n            title = @translate.instant(\"TASK.TITLE_DELETE_ACTION\")\n            message = deletingTask.subject\n            @confirm.askOnDelete(title, message).then (askResponse) =>\n                promise = @repo.remove(deletingTask)\n                promise.then =>\n                    @scope.$broadcast(\"taskboard:task:deleted\")\n                    askResponse.finish()\n                promise.then null, ->\n                    askResponse.finish(false)\n                    @confirm.notify(\"error\")\n\n    deleteIssue: (id) ->\n        issue = @.taskboardIssuesService.getIssue(id)\n        issue = issue.set('loading-delete', true)\n\n        @rs.issues.getByRef(issue.getIn(['model', 'project']), issue.getIn(['model', 'ref']))\n        .then (deletingIssue) =>\n            issue = issue.set('loading-delete', false)\n            title = @translate.instant(\"ISSUES.ACTION_DELETE\")\n            message = deletingIssue.subject\n            @confirm.askOnDelete(title, message).then (askResponse) =>\n                promise = @repo.remove(deletingIssue)\n                promise.then =>\n                    @scope.$broadcast(\"taskboard:issue:deleted\")\n                    askResponse.finish()\n                promise.then null, ->\n                    askResponse.finish(false)\n                    @confirm.notify(\"error\")\n\n    removeIssueFromSprint: (id) ->\n        issue = @.taskboardIssuesService.getIssue(id)\n        issue = issue.set('loading-delete', true)\n\n        @rs.issues.getByRef(issue.getIn(['model', 'project']), issue.getIn(['model', 'ref']))\n        .then (removingIssue) =>\n            issue = issue.set('loading-delete', false)\n            title = @translate.instant(\"ISSUES.CONFIRM_DETACH_FROM_SPRINT.TITLE\")\n            message = @translate.instant(\"ISSUES.CONFIRM_DETACH_FROM_SPRINT.MESSAGE\")\n            message = @translate.instant(\n                \"ISSUES.CONFIRM_DETACH_FROM_SPRINT.MESSAGE\",\n                {sprintName: @scope.sprint.name}\n            )\n\n            @confirm.ask(title, null, message).then (askResponse) =>\n                removingIssue.milestone = null\n                promise = @repo.save(removingIssue)\n                promise.then =>\n                    @.taskboardIssuesService.remove(removingIssue)\n                    askResponse.finish()\n                promise.then null, ->\n                    askResponse.finish(false)\n                    @confirm.notify(\"error\")\n\n    taskMove: (ctx, task, oldStatusId, usId, statusId, order) ->\n        @scope.movingTask = true\n        task = @taskboardTasksService.getTaskModel(task.get('id'))\n\n        moveUpdateData = @taskboardTasksService.move(task.id, usId, statusId, order)\n\n        params = {\n            status__is_archived: false,\n            include_attachments: true,\n        }\n\n        options = {\n            headers: {\n                \"set-orders\": JSON.stringify(moveUpdateData.set_orders)\n            }\n        }\n\n        promise = @repo.save(task, true, params, options, true).then (result) =>\n            if result[0] and result[0].user_story\n                @.reloadUserStory(result[0].user_story)\n\n            @scope.movingTask = false\n            headers = result[1]\n\n            if headers && headers['taiga-info-order-updated']\n                order = JSON.parse(headers['taiga-info-order-updated'])\n                @taskboardTasksService.assignOrders(order)\n\n            @.loadSprintStats()\n            @.generateFilters()\n            if @.isFilterDataTypeSelected('status')\n                @.loadTasks()\n\n    reloadUserStory: (userStoryId) ->\n        @rs.userstories.get(@scope.project.id, userStoryId).then (us) =>\n            @scope.userstories = _.map(@scope.userstories, (x) -> if x.id == us.id then us else x)\n\n    ## Template actions\n    addNewTask: (type, us) ->\n        switch type\n            when \"standard\" then @rootscope.$broadcast(\"genericform:new\",\n                {\n                    'objType': 'task',\n                    'project': @scope.project,\n                    'sprintId': @scope.sprintId,\n                    'usId': us?.id\n                })\n            when \"bulk\" then @rootscope.$broadcast(\"taskform:bulk\", @scope.sprintId, us?.id)\n\n    addNewIssue: (type, us) ->\n        switch type\n            when \"standard\" then @rootscope.$broadcast(\"genericform:new-or-existing\",\n                {\n                    objType: 'issue',\n                    project: @scope.project,\n                    sprintId: @scope.sprintId,\n                    relatedField: 'milestone',\n                    relatedObjectId: @scope.sprintId,\n                    targetName: @scope.sprint.name,\n                })\n            when \"standard\" then @rootscope.$broadcast(\"taskform:new\", @scope.sprintId, us?.id)\n            when \"bulk\" then @rootscope.$broadcast(\"issueform:bulk\", @scope.projectId, @scope.sprintId)\n\n    toggleFold: (id,  modelName) ->\n        if modelName == 'issues'\n            @taskboardIssuesService.toggleFold(id)\n        else if modelName == 'tasks'\n            @taskboardTasksService.toggleFold(id)\n\n    openUsersSelection: (item) ->\n        onClose = (assignedUsers) =>\n            userId = assignedUsers.pop() || null\n\n            if item.getName() == 'tasks'\n                item.assigned_to = userId\n                @taskboardTasksService.replaceModel(item)\n\n                @repo.save(item).then =>\n                    @.generateFilters()\n                    if @.isFilterDataTypeSelected('assigned_to') || @.isFilterDataTypeSelected('role')\n                        @.loadTasks()\n\n            if item.getName() == 'issues'\n                item.assigned_to = userId\n                @taskboardIssuesService.replaceModel(item)\n\n                @repo.save(item).then =>\n                    @.generateFilters()\n                    if @.isFilterDataTypeSelected('assigned_to') || @.isFilterDataTypeSelected('role')\n                        @.loadIssues()\n\n        @lightboxFactory.create(\n            'tg-lb-select-user',\n            {\n                \"class\": \"lightbox lightbox-select-user\",\n            },\n            {\n                \"currentUsers\": [item.assigned_to],\n                \"activeUsers\": @scope.activeUsers,\n                \"onClose\": onClose,\n                \"single\": true,\n                \"lbTitle\": @translate.instant(\"COMMON.ASSIGNED_USERS.ADD\"),\n            }\n        )\n\n    changeTaskAssignedTo: (id) ->\n        task = @taskboardTasksService.getTaskModel(id)\n        @.openUsersSelection(task)\n\n    changeIssueAssignedTo: (id) ->\n        issue = @taskboardIssuesService.getIssueModel(id)\n        @.openUsersSelection(issue)\n\n    setRolePoints: () ->\n        computableRoles = _.filter(@scope.project.roles, \"computable\")\n\n        getRole = (roleId) =>\n            roleId = parseInt(roleId, 10)\n            return _.find computableRoles, (role) -> role.id == roleId\n\n        getPoint = (pointId) =>\n            poitnId = parseInt(pointId, 10)\n            return _.find @scope.project.points, (point) -> point.id == pointId\n\n        pointsByRole = _.reduce @scope.userstories, (result, us, key) =>\n            _.forOwn us.points, (pointId, roleId) ->\n                role = getRole(roleId)\n                point = getPoint(pointId)\n\n                if !result[role.id]\n                    result[role.id] = role\n                    result[role.id].points = 0\n\n                result[role.id].points += point.value\n\n            return result\n        , {}\n\n        @scope.pointsByRole = Object.keys(pointsByRole).map (key) -> return pointsByRole[key]\n\nmodule.controller(\"TaskboardController\", TaskboardController)\n\n\n#############################################################################\n## TaskboardDirective\n#############################################################################\n\nTaskboardDirective = ($rootscope) ->\n    link = ($scope, $el, $attrs) ->\n        $ctrl = $el.controller()\n\n        $el.on \"click\", \".toggle-analytics-visibility\", (event) ->\n            event.preventDefault()\n            target = angular.element(event.currentTarget)\n            target.toggleClass('active')\n            $rootscope.$broadcast(\"taskboard:graph:toggle-visibility\")\n\n        tableBodyDom = $el.find(\".taskboard-table-body\")\n        tableBodyDom.on \"scroll\", (event) ->\n            target = angular.element(event.currentTarget)\n            tableHeaderDom = $el.find(\".taskboard-table-header .taskboard-table-inner\")\n            tableHeaderDom.css(\"left\", -1 * target.scrollLeft())\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link: link}\n\nmodule.directive(\"tgTaskboard\", [\"$rootScope\", TaskboardDirective])\n\n#############################################################################\n## Taskboard Squish Column Directive\n#############################################################################\n\nTaskboardSquishColumnDirective = (rs) ->\n    avatarWidth = 40\n    maxColumnWidth = 300\n\n    link = ($scope, $el, $attrs) ->\n        $scope.$on \"sprint:zoom0\", () =>\n            recalculateTaskboardWidth()\n\n        $scope.$on \"sprint:task:moved\", () =>\n            recalculateTaskboardWidth()\n\n        $scope.$watch \"usTasks\", () ->\n            if $scope.project\n                $scope.statusesFolded = rs.tasks.getStatusColumnModes($scope.project.id)\n                $scope.usFolded = rs.tasks.getUsRowModes($scope.project.id, $scope.sprintId)\n\n                recalculateTaskboardWidth()\n\n        $scope.foldStatus = (status) ->\n            $scope.statusesFolded[status.id] = !!!$scope.statusesFolded[status.id]\n            rs.tasks.storeStatusColumnModes($scope.projectId, $scope.statusesFolded)\n\n            recalculateTaskboardWidth()\n\n        $scope.foldUs = (rowId) ->\n            $scope.usFolded[rowId] = !!!$scope.usFolded[rowId]\n            rs.tasks.storeUsRowModes($scope.projectId, $scope.sprintId, $scope.usFolded)\n\n            recalculateTaskboardWidth()\n\n        getCeilWidth = (usId, statusId) =>\n            if usId\n                tasks = $scope.usTasks.getIn([usId.toString(), statusId.toString()]).size\n            else\n                tasks = $scope.usTasks.getIn(['null', statusId.toString()]).size\n\n            if $scope.statusesFolded[statusId]\n                if tasks and $scope.usFolded[usId]\n                    tasksMatrixSize = Math.round(Math.sqrt(tasks))\n                    width = avatarWidth * tasksMatrixSize\n                else\n                    width = avatarWidth\n\n                return width\n\n            return 0\n\n        setStatusColumnWidth = (statusId, width) =>\n            column = $el.find(\".squish-status-#{statusId}\")\n\n            if width\n                column.css('max-width', width)\n            else\n                if $scope.ctrl.zoomLevel == '0'\n                    column.css(\"max-width\", 148)\n                else\n                    column.css(\"max-width\", maxColumnWidth)\n\n        refreshTaskboardTableWidth = () =>\n            columnWidths = []\n\n            columns = $el.find(\".task-colum-name\")\n\n            columnWidths = _.map columns, (column) ->\n                return $(column).outerWidth(true)\n\n            totalWidth = _.reduce columnWidths, (total, width) ->\n                return total + width\n\n            $el.find('.taskboard-table-inner').css(\"width\", totalWidth)\n\n            issuesBoxWidth = $el.find('.issues-row .taskboard-row-title-box').outerWidth(true)\n            $el.find('.issues-row').css(\"width\", totalWidth - columnWidths.pop())\n\n            issueCardMaxWidth = if $scope.ctrl.zoomLevel == '0' then 128 else 280\n            $el.find('.issues-row .taskboard-cards-box .card').css(\"max-width\", issueCardMaxWidth)\n\n        recalculateStatusColumnWidth = (statusId) =>\n            #unassigned ceil\n            statusFoldedWidth = getCeilWidth(null, statusId)\n\n            _.forEach $scope.userstories, (us) ->\n                width = getCeilWidth(us.id, statusId)\n                statusFoldedWidth = width if width > statusFoldedWidth\n\n            setStatusColumnWidth(statusId, statusFoldedWidth)\n\n        recalculateTaskboardWidth = () =>\n            _.forEach $scope.taskStatusList, (status) ->\n                recalculateStatusColumnWidth(status.id)\n\n            refreshTaskboardTableWidth()\n\n            return\n\n    return {link: link}\n\nmodule.directive(\"tgTaskboardSquishColumn\", [\"$tgResources\", TaskboardSquishColumnDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/taskboard/sortable.coffee\n###\n\ntaiga = @.taiga\n\nmixOf = @.taiga.mixOf\ntoggleText = @.taiga.toggleText\nscopeDefer = @.taiga.scopeDefer\nbindOnce = @.taiga.bindOnce\ngroupBy = @.taiga.groupBy\n\nmodule = angular.module(\"taigaBacklog\")\n\n\n#############################################################################\n## Sortable Directive\n#############################################################################\n\nTaskboardSortableDirective = ($repo, $rs, $rootscope, $translate) ->\n    link = ($scope, $el, $attrs) ->\n        unwatch = $scope.$watch \"usTasks\", (usTasks) ->\n            return if !usTasks || !usTasks.size\n\n            unwatch()\n\n            if not ($scope.project.my_permissions.indexOf(\"modify_task\") > -1)\n                return\n\n            oldParentScope = null\n            newParentScope = null\n            itemEl = null\n            tdom = $el\n\n            filterError = ->\n                text = $translate.instant(\"BACKLOG.SORTABLE_FILTER_ERROR\")\n                $tgConfirm.notify(\"error\", text)\n\n            deleteElement = (itemEl) ->\n                # Completelly remove item and its scope from dom\n                itemEl.scope().$destroy()\n                itemEl.off()\n                itemEl.remove()\n\n            containers = _.map $el.find('.taskboard-column'), (item) ->\n                return item\n\n            drake = dragula(containers, {\n                copySortSource: false,\n                copy: false,\n                accepts: (el, target) -> return !$(target).hasClass('taskboard-row-title-box')\n                moves: (item) ->\n                    return $(item).is('tg-card')\n            })\n\n            drake.on 'drag', (item) ->\n                oldParentScope = $(item).parent().scope()\n\n                if $el.hasClass(\"active-filters\")\n                    filterError()\n\n                    setTimeout (() ->\n                        drake.cancel(true)\n                    ), 0\n\n                    return false\n\n            drake.on 'dragend', (item) ->\n                parentEl = $(item).parent()\n                itemEl = $(item)\n                itemTask = itemEl.scope().task\n                itemIndex = itemEl.index()\n                newParentScope = parentEl.scope()\n\n                oldUsId = if oldParentScope.us then oldParentScope.us.id else null\n                oldStatusId = oldParentScope.st.id\n                newUsId = if newParentScope.us then newParentScope.us.id else null\n                newStatusId = newParentScope.st.id\n\n                if newStatusId != oldStatusId or newUsId != oldUsId\n                    deleteElement(itemEl)\n\n                $scope.$apply ->\n                    $rootscope.$broadcast(\"taskboard:task:move\", itemTask, itemTask.getIn(['model', 'status']), newUsId, newStatusId, itemIndex)\n\n\n            scroll = autoScroll([$('.taskboard-table-body')[0]], {\n                margin: 100,\n                pixels: 30,\n                scrollWhenOutside: true,\n                autoScroll: () ->\n                    return this.down && drake.dragging\n            })\n\n            $scope.$on \"$destroy\", ->\n                $el.off()\n                drake.destroy()\n\n    return {link: link}\n\n\nmodule.directive(\"tgTaskboardSortable\", [\n    \"$tgRepo\",\n    \"$tgResources\",\n    \"$rootScope\",\n    \"$translate\",\n    TaskboardSortableDirective\n])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/taskboard/taskboard-issues.coffee\n###\n\ngroupBy = @.taiga.groupBy\n\nclass TaskboardIssuesService extends taiga.Service\n    @.$inject = []\n    constructor: () ->\n        @.reset()\n\n    reset: () ->\n        @.foldStatusChanged = {}\n        @.issuesRaw = []\n\n    init: (project, usersById, issueStatusById) ->\n        @.issueStatusById = issueStatusById\n        @.project = project\n        @.usersById = usersById\n\n    resetFolds: () ->\n        @.foldStatusChanged = {}\n        @.refresh()\n\n    toggleFold: (issueId) ->\n        @.foldStatusChanged[issueId] = !@.foldStatusChanged[issueId]\n        @.refresh()\n\n    add: (issue) ->\n        @.issuesRaw = @.issuesRaw.concat(issue)\n        @.refresh()\n\n    remove: (issue) ->\n        for key, item of @.issuesRaw\n            if issue.id == item.id\n                @.issuesRaw.splice(key, 1)\n                @.refresh()\n                return\n\n    set: (issues) ->\n        @.issuesRaw = issues\n        @.refresh()\n\n    getIssue: (id) ->\n        return @.milestoneIssues.find (issue) -> return issue.get('id') == id\n\n    getIssueModel: (id) ->\n        return _.find @.issuesRaw, (issue) -> return issue.id == id\n\n    replaceModel: (issue) ->\n        @.issuesRaw = _.map @.issuesRaw, (item) ->\n            if issue.id == item.id\n                return issue\n            else\n                return item\n\n        @.refresh()\n\n    refresh: ->\n        issues = []\n        for issueModel in @.issuesRaw\n            issue = {}\n            issue.foldStatusChanged = @.foldStatusChanged[issueModel.id]\n            issue.model = issueModel.getAttrs()\n            issue.modelName = issueModel.getName()\n            issue.id = issueModel.id\n            issue.status = @.issueStatusById[issueModel.status]\n            issue.images = _.filter issue.model.attachments, (it) -> return !!it.thumbnail_card_url\n            issue.assigned_to = @.usersById[issueModel.assigned_to]\n            issue.colorized_tags = _.map issue.model.tags, (tag) ->\n                return {name: tag[0], color: tag[1]}\n\n            issues.push(issue)\n\n        @.milestoneIssues = Immutable.fromJS(issues)\n\nangular.module(\"taigaKanban\").service(\"tgTaskboardIssues\", TaskboardIssuesService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/taskboard/taskboard-tasks.coffee\n###\n\ngroupBy = @.taiga.groupBy\n\nclass TaskboardTasksService extends taiga.Service\n    @.$inject = []\n    constructor: () ->\n        @.reset()\n\n    reset: () ->\n        @.tasksRaw = []\n        @.foldStatusChanged = {}\n        @.usTasks = Immutable.Map()\n\n    init: (project, usersById) ->\n        @.project = project\n        @.usersById = usersById\n\n    resetFolds: () ->\n        @.foldStatusChanged = {}\n        @.refresh()\n\n    toggleFold: (taskId) ->\n        @.foldStatusChanged[taskId] = !@.foldStatusChanged[taskId]\n        @.refresh()\n\n    add: (task) ->\n        @.tasksRaw = @.tasksRaw.concat(task)\n        @.refresh()\n\n    set: (tasks) ->\n        @.tasksRaw = tasks\n        @.refreshRawOrder()\n        @.refresh()\n\n    setUserstories: (userstories) ->\n        @.userstories = userstories\n\n    refreshRawOrder: () ->\n        @.order = {}\n\n        @.order[task.id] = task.taskboard_order for task in @.tasksRaw\n\n    assignOrders: (order) ->\n        order = _.invert(order)\n        @.order = _.assign(@.order, order)\n\n        @.refresh()\n\n    getTask: (id) ->\n        findedTask = null\n\n        @.usTasks.forEach (us) ->\n            us.forEach (status) ->\n                findedTask = status.find (task) -> return task.get('id') == id\n\n                return false if findedTask\n\n            return false if findedTask\n\n        return findedTask\n\n    replace: (task) ->\n        @.usTasks = @.usTasks.map (us) ->\n            return us.map (status) ->\n                findedIndex = status.findIndex (usItem) ->\n                    return usItem.get('id') == us.get('id')\n\n                if findedIndex != -1\n                    status = status.set(findedIndex, task)\n\n                return status\n\n    getTaskModel: (id) ->\n        return _.find @.tasksRaw, (task) -> return task.id == id\n\n    replaceModel: (task) ->\n        @.tasksRaw = _.map @.tasksRaw, (it) ->\n            if task.id == it.id\n                return task\n            else\n                return it\n\n        @.refresh()\n\n    move: (id, usId, statusId, index) ->\n        task = @.getTaskModel(id)\n\n        taskByUsStatus = _.filter @.tasksRaw, (task) =>\n            return task.status == statusId && task.user_story == usId\n\n        taskByUsStatus = _.sortBy taskByUsStatus, (it) => @.order[it.id]\n\n        taksWithoutMoved = _.filter taskByUsStatus, (it) => it.id != id\n        beforeDestination = _.slice(taksWithoutMoved, 0, index)\n        afterDestination = _.slice(taksWithoutMoved, index)\n\n        setOrders = {}\n\n        previous = beforeDestination[beforeDestination.length - 1]\n\n        previousWithTheSameOrder = _.filter beforeDestination, (it) =>\n            @.order[it.id] == @.order[previous.id]\n\n        if previousWithTheSameOrder.length > 1\n            for it in previousWithTheSameOrder\n                setOrders[it.id] = @.order[it.id]\n\n        if !previous\n            @.order[task.id] = 0\n        else if previous\n            @.order[task.id] = @.order[previous.id] + 1\n\n        for it, key in afterDestination\n            @.order[it.id] = @.order[task.id] + key + 1\n\n        task.status = statusId\n        task.user_story = usId\n        task.taskboard_order = @.order[task.id]\n\n        @.refresh()\n\n        return {\"task_id\": task.id, \"order\": @.order[task.id], \"set_orders\": setOrders}\n\n    refresh: ->\n        if !@.project\n            return\n\n        @.tasksRaw = _.sortBy @.tasksRaw, (it) => @.order[it.id]\n\n        tasks = @.tasksRaw\n        taskStatusList = _.sortBy(@.project.task_statuses, \"order\")\n\n        usTasks = {}\n\n        # Iterate over all userstories and\n        # null userstory for unassigned tasks\n        for us in _.union(@.userstories, [{id:null}])\n            usTasks[us.id] = {}\n            for status in taskStatusList\n                usTasks[us.id][status.id] = []\n\n        for taskModel in tasks\n            if usTasks[taskModel.user_story]? and usTasks[taskModel.user_story][taskModel.status]?\n                task = {}\n\n                model = taskModel.getAttrs()\n\n                task.foldStatusChanged = @.foldStatusChanged[taskModel.id]\n                task.model = model\n                task.images = _.filter model.attachments, (it) -> return !!it.thumbnail_card_url\n                task.id = taskModel.id\n                task.assigned_to = @.usersById[taskModel.assigned_to]\n                task.colorized_tags = _.map task.model.tags, (tag) =>\n                    return {name: tag[0], color: tag[1]}\n\n                usTasks[taskModel.user_story][taskModel.status].push(task)\n\n        @.usTasks = Immutable.fromJS(usTasks)\n\nangular.module(\"taigaKanban\").service(\"tgTaskboardTasks\", TaskboardTasksService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/kanban/kanban-usertories.coffee\n###\n\ngroupBy = @.taiga.groupBy\n\nclass KanbanUserstoriesService extends taiga.Service\n    @.$inject = []\n\n    constructor: () ->\n        @.reset()\n\n    reset: () ->\n        @.userstoriesRaw = []\n        @.archivedStatus = []\n        @.statusHide = []\n        @.foldStatusChanged = {}\n        @.usByStatus = Immutable.Map()\n\n    init: (project, usersById) ->\n        @.project = project\n        @.usersById = usersById\n\n    resetFolds: () ->\n        @.foldStatusChanged = {}\n\n    toggleFold: (usId) ->\n        @.foldStatusChanged[usId] = !@.foldStatusChanged[usId]\n        @.refreshUserStory(usId)\n\n    set: (userstories) ->\n        @.userstoriesRaw = userstories\n        @.refreshRawOrder()\n        @.refresh()\n\n    add: (us) ->\n        @.userstoriesRaw = @.userstoriesRaw.concat(us)\n        @.refreshRawOrder()\n        @.refresh()\n\n    addArchivedStatus: (statusId) ->\n        @.archivedStatus.push(statusId)\n\n    isUsInArchivedHiddenStatus: (usId) ->\n        us = @.getUsModel(usId)\n        return @.archivedStatus.indexOf(us?.status) != -1 &&\n            @.statusHide.indexOf(us?.status) != -1\n\n    hideStatus: (statusId) ->\n        @.deleteStatus(statusId)\n        @.statusHide.push(statusId)\n\n    showStatus: (statusId) ->\n        _.remove @.statusHide, (it) -> return it == statusId\n\n    getStatus: (statusId) ->\n        return _.filter @.userstoriesRaw, (us) -> return us.status == statusId\n\n    deleteStatus: (statusId) ->\n        toDelete = _.filter @.userstoriesRaw, (us) -> return us.status == statusId\n        toDelete = _.map (it) -> return it.id\n\n        @.archived = _.difference(@.archived, toDelete)\n\n        @.userstoriesRaw = _.filter @.userstoriesRaw, (us) -> return us.status != statusId\n\n        @.refresh()\n\n    refreshRawOrder: () ->\n        @.order = {}\n\n        @.order[it.id] = it.kanban_order for it in @.userstoriesRaw\n\n    assignOrders: (order) ->\n        @.order = _.assign(@.order, order)\n\n        @.refresh()\n\n    move: (usList, statusId, index) ->\n\n        initialLength = usList.length\n\n        usByStatus = _.filter @.userstoriesRaw, (it) =>\n            return it.status == statusId\n\n        usByStatus = _.sortBy usByStatus, (it) => @.order[it.id]\n\n        usByStatusWithoutMoved = _.filter usByStatus, (listIt) ->\n            return !_.find usList, (moveIt) -> return listIt.id == moveIt.id\n\n        beforeDestination = _.slice(usByStatusWithoutMoved, 0, index)\n        afterDestination = _.slice(usByStatusWithoutMoved, index)\n\n        setOrders = {}\n\n        previous = beforeDestination[beforeDestination.length - 1]\n\n        previousWithTheSameOrder = _.filter beforeDestination, (it) =>\n            @.order[it.id] == @.order[previous.id]\n\n\n        if previousWithTheSameOrder.length > 1\n            for it in previousWithTheSameOrder\n                setOrders[it.id] = @.order[it.id]\n\n        modifiedUs = []\n        setPreviousOrders = []\n        setNextOrders = []\n\n        isArchivedHiddenStatus = @.archivedStatus.indexOf(statusId) != -1 &&\n            @.statusHide.indexOf(statusId) != -1\n\n        if isArchivedHiddenStatus\n            startIndex = new Date().getTime()\n\n        else if !previous\n            startIndex = 0\n\n            for it, key in afterDestination # increase position of the us after the dragged us's\n                @.order[it.id] = key + initialLength + 1\n                it.kanban_order = @.order[it.id]\n\n            setNextOrders = _.map(afterDestination, (it) =>\n                {us_id: it.id, order: @.order[it.id]}\n            )\n\n        else if previous\n            startIndex = @.order[previous.id] + 1\n\n            previousWithTheSameOrder = _.filter(beforeDestination, (it) =>\n                it.kanban_order == @.order[previous.id]\n            )\n            for it, key in afterDestination # increase position of the us after the dragged us's\n                @.order[it.id] = @.order[previous.id] + key + initialLength + 1\n                it.kanban_order = @.order[it.id]\n\n            setNextOrders = _.map(afterDestination, (it) =>\n                {us_id: it.id, order: @.order[it.id]}\n            )\n\n            # we must send the USs previous to the dropped USs to tell the backend\n            # which USs are before the dropped USs, if they have the same value to\n            # order, the backend doens't know after which one do you want to drop\n            # the USs\n            if previousWithTheSameOrder.length > 1\n                setPreviousOrders = _.map(previousWithTheSameOrder, (it) =>\n                    {us_id: it.id, order: @.order[it.id]}\n                )\n\n        for us, key in usList\n            us.status = statusId\n            us.kanban_order = startIndex + key\n            @.order[us.id] = us.kanban_order\n\n            modifiedUs.push({us_id: us.id, order: us.kanban_order})\n\n        @.refresh()\n\n        return {\n            bulkOrders: modifiedUs.concat(setPreviousOrders, setNextOrders),\n            usList: modifiedUs,\n            set_orders: setOrders\n        }\n\n    moveToEnd: (id, statusId) ->\n        us = @.getUsModel(id)\n\n        @.order[us.id] = -1\n\n        us.status = statusId\n        us.kanban_order = @.order[us.id]\n\n        @.refresh()\n\n        return {\"us_id\": us.id, \"order\": -1}\n\n    replace: (us) ->\n        @.usByStatus = @.usByStatus.map (status) ->\n            findedIndex = status.findIndex (usItem) ->\n                return usItem.get('id') == us.get('id')\n\n            if findedIndex != -1\n                status = status.set(findedIndex, us)\n\n            return status\n\n    replaceModel: (us) ->\n        @.userstoriesRaw = _.map @.userstoriesRaw, (usItem) ->\n            if us.id == usItem.id\n                return us\n            else\n                return usItem\n\n        @.refresh()\n\n    getUs: (id) ->\n        findedUs = null\n\n        @.usByStatus.forEach (status) ->\n            findedUs = status.find (us) -> return us.get('id') == id\n\n            return false if findedUs\n\n        return findedUs\n\n    getUsModel: (id) ->\n        return _.find @.userstoriesRaw, (us) -> return us.id == id\n\n    refreshUserStory: (usId) ->\n        usModel = @.getUsModel(usId)\n        collection =  @.usByStatus.toJS()\n\n        index = _.findIndex(collection[usModel.status], (x) => x.id == usId)\n        us = @.retrieveUserStoryData(usModel)\n        collection[usModel.status][index] = us\n\n        @.usByStatus = Immutable.fromJS(collection)\n\n    retrieveUserStoryData: (usModel) ->\n        us = {}\n        model = usModel.getAttrs()\n\n        us.foldStatusChanged = @.foldStatusChanged[usModel.id]\n\n        us.model = model\n        us.images = _.filter model.attachments, (it) -> return !!it.thumbnail_card_url\n\n        us.id = usModel.id\n        us.assigned_to = @.usersById[usModel.assigned_to]\n        us.assigned_users = []\n\n        usModel.assigned_users.forEach (assignedUserId) =>\n            assignedUserData = @.usersById[assignedUserId]\n            us.assigned_users.push(assignedUserData)\n\n        us.colorized_tags = _.map us.model.tags, (tag) =>\n            return {name: tag[0], color: tag[1]}\n\n        return us\n\n    refresh: () ->\n        @.userstoriesRaw = _.sortBy @.userstoriesRaw, (it) => @.order[it.id]\n\n        collection = {}\n\n        for key, usModel of @.userstoriesRaw\n            us = @.retrieveUserStoryData(usModel)\n            if (!collection[us.model.status])\n                collection[us.model.status] = []\n\n            collection[us.model.status].push(us)\n\n        @.usByStatus = Immutable.fromJS(collection)\n\nangular.module(\"taigaKanban\").service(\"tgKanbanUserstories\", KanbanUserstoriesService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/kanban/main.coffee\n###\n\ntaiga = @.taiga\n\nmixOf = @.taiga.mixOf\ntoggleText = @.taiga.toggleText\nscopeDefer = @.taiga.scopeDefer\nbindOnce = @.taiga.bindOnce\ngroupBy = @.taiga.groupBy\ntimeout = @.taiga.timeout\nbindMethods = @.taiga.bindMethods\ndebounceLeading = @.taiga.debounceLeading\n\nmodule = angular.module(\"taigaKanban\")\n\n#############################################################################\n## Kanban Controller\n#############################################################################\n\nclass KanbanController extends mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin, taiga.UsFiltersMixin)\n    @.$inject = [\n        \"$scope\",\n        \"$rootScope\",\n        \"$tgRepo\",\n        \"$tgConfirm\",\n        \"$tgResources\",\n        \"tgResources\",\n        \"$routeParams\",\n        \"$q\",\n        \"$tgLocation\",\n        \"tgAppMetaService\",\n        \"$tgNavUrls\",\n        \"$tgEvents\",\n        \"$tgAnalytics\",\n        \"$translate\",\n        \"tgErrorHandlingService\",\n        \"$tgModel\",\n        \"tgKanbanUserstories\",\n        \"$tgStorage\",\n        \"tgFilterRemoteStorageService\",\n        \"tgProjectService\",\n        \"tgLightboxFactory\",\n        \"tgLoader\",\n        \"$timeout\"\n    ]\n\n    storeCustomFiltersName: 'kanban-custom-filters'\n    storeFiltersName: 'kanban-filters'\n\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @rs2, @params, @q, @location,\n                  @appMetaService, @navUrls, @events, @analytics, @translate, @errorHandlingService,\n                  @model, @kanbanUserstoriesService, @storage, @filterRemoteStorageService,\n                  @projectService, @lightboxFactory, @tgLoader, @timeout) ->\n        bindMethods(@)\n        @kanbanUserstoriesService.reset()\n        @.openFilter = false\n        @.selectedUss = {}\n\n        return if @.applyStoredFilters(@params.pslug, \"kanban-filters\")\n\n        @scope.sectionName = @translate.instant(\"KANBAN.SECTION_NAME\")\n        @.initializeEventHandlers()\n\n        taiga.defineImmutableProperty @.scope, \"usByStatus\", () =>\n            return @kanbanUserstoriesService.usByStatus\n\n    cleanSelectedUss: () ->\n        for key of @.selectedUss\n            @.selectedUss[key] = false\n\n    toggleSelectedUs: (usId) ->\n        @.selectedUss[usId] = !@.selectedUss[usId]\n\n    firstLoad: () ->\n        promise = @.loadInitialData()\n\n        # On Success\n        promise.then =>\n            title = @translate.instant(\"KANBAN.PAGE_TITLE\", {projectName: @scope.project.name})\n            description = @translate.instant(\"KANBAN.PAGE_DESCRIPTION\", {\n                projectName: @scope.project.name,\n                projectDescription: @scope.project.description\n            })\n            @appMetaService.setAll(title, description)\n\n        # On Error\n        promise.then null, @.onInitialDataError.bind(@)\n\n    setZoom: (zoomLevel, zoom) ->\n        if @.zoomLevel == zoomLevel\n            return null\n\n        @.isFirstLoad = !@.zoomLevel\n\n        previousZoomLevel = @.zoomLevel\n\n        @.zoomLevel = zoomLevel\n        @.zoom = zoom\n\n        if @.isFirstLoad\n            @.firstLoad().then () =>\n                @.isFirstLoad = false\n                @kanbanUserstoriesService.resetFolds()\n\n        else if @.zoomLevel > 2 && previousZoomLevel <= 2\n            @.zoomLoading = true\n\n            @.loadUserstories().then () =>\n                @.zoomLoading = false\n                @kanbanUserstoriesService.resetFolds()\n\n    filtersReloadContent: () ->\n        @.loadUserstories().then () =>\n            openArchived = _.difference(@kanbanUserstoriesService.archivedStatus,\n                                        @kanbanUserstoriesService.statusHide)\n            if openArchived.length\n                for statusId in openArchived\n                    @.loadUserStoriesForStatus({}, statusId)\n\n    initializeEventHandlers: ->\n        @scope.$on \"usform:new:success\", (event, us) =>\n            @.refreshTagsColors().then () =>\n                @kanbanUserstoriesService.add(us)\n\n            @analytics.trackEvent(\"userstory\", \"create\", \"create userstory on kanban\", 1)\n\n        @scope.$on \"usform:bulk:success\", (event, uss) =>\n            @confirm.notify(\"success\")\n            @.refreshTagsColors().then () =>\n                @kanbanUserstoriesService.add(uss)\n\n            @analytics.trackEvent(\"userstory\", \"create\", \"bulk create userstory on kanban\", 1)\n\n        @scope.$on \"usform:edit:success\", (event, us) =>\n            @.refreshTagsColors().then () =>\n                @kanbanUserstoriesService.replaceModel(us)\n\n        @scope.$on \"kanban:us:deleted\", (event, us) =>\n            @.filtersReloadContent()\n\n        @scope.$on(\"kanban:us:move\", @.moveUs)\n        @scope.$on(\"kanban:show-userstories-for-status\", @.loadUserStoriesForStatus)\n        @scope.$on(\"kanban:hide-userstories-for-status\", @.hideUserStoriesForStatus)\n\n    addNewUs: (type, statusId) ->\n        switch type\n            when \"standard\" then  @rootscope.$broadcast(\"genericform:new\",\n                {\n                    'objType': 'us',\n                    'project': @scope.project,\n                    'statusId': statusId\n                })\n            when \"bulk\" then @rootscope.$broadcast(\"usform:bulk\",\n                                                   @scope.projectId, statusId)\n\n    editUs: (id) ->\n        us = @kanbanUserstoriesService.getUs(id)\n        us = us.set('loading-edit', true)\n        @kanbanUserstoriesService.replace(us)\n\n        @rs.userstories.getByRef(us.getIn(['model', 'project']), us.getIn(['model', 'ref']))\n        .then (editingUserStory) =>\n            @rs2.attachments.list(\n                \"us\", us.get('id'), us.getIn(['model', 'project'])).then (attachments) =>\n                    @rootscope.$broadcast(\"genericform:edit\", {\n                        'objType': 'us',\n                        'obj': editingUserStory,\n                        'statusList': @scope.usStatusList,\n                        'attachments': attachments.toJS()\n                    })\n\n                us = us.set('loading-edit', false)\n                @kanbanUserstoriesService.replace(us)\n\n    deleteUs: (id) ->\n        us = @kanbanUserstoriesService.getUs(id)\n        us = us.set('loading-delete', true)\n\n        @rs.userstories.getByRef(us.getIn(['model', 'project']), us.getIn(['model', 'ref']))\n        .then (deletingUserStory) =>\n            us = us.set('loading-delete', false)\n            title = @translate.instant(\"US.TITLE_DELETE_ACTION\")\n            message = deletingUserStory.subject\n            @confirm.askOnDelete(title, message).then (askResponse) =>\n                promise = @repo.remove(deletingUserStory)\n                promise.then =>\n                    @scope.$broadcast(\"kanban:us:deleted\")\n                    askResponse.finish()\n                promise.then null, ->\n                    askResponse.finish(false)\n                    @confirm.notify(\"error\")\n\n    showPlaceHolder: (statusId) ->\n        if @scope.usStatusList[0].id == statusId &&\n          !@kanbanUserstoriesService.userstoriesRaw.length\n            return true\n\n        return false\n\n    toggleFold: (id) ->\n        @kanbanUserstoriesService.toggleFold(id)\n\n    isUsInArchivedHiddenStatus: (usId) ->\n        return @kanbanUserstoriesService.isUsInArchivedHiddenStatus(usId)\n\n    changeUsAssignedUsers: (id) =>\n        item = @kanbanUserstoriesService.getUsModel(id)\n\n        onClose = (assignedUsersIds) =>\n            item.assigned_users = assignedUsersIds\n            if item.assigned_to not in assignedUsersIds and assignedUsersIds.length > 0\n                item.assigned_to = assignedUsersIds[0]\n            if assignedUsersIds.length == 0\n                item.assigned_to = null\n            @kanbanUserstoriesService.replaceModel(item)\n\n            @repo.save(item).then =>\n                @.generateFilters()\n                if @.isFilterDataTypeSelected('assigned_users') || @.isFilterDataTypeSelected('role')\n                    @.filtersReloadContent()\n\n        @lightboxFactory.create(\n            'tg-lb-select-user',\n            {\n                \"class\": \"lightbox lightbox-select-user\",\n            },\n            {\n                \"currentUsers\": _.compact(_.union(item.assigned_users, [item.assigned_to])),\n                \"activeUsers\": @scope.activeUsers,\n                \"onClose\": onClose,\n                \"lbTitle\": @translate.instant(\"COMMON.ASSIGNED_USERS.ADD\"),\n            }\n        )\n\n    refreshTagsColors: ->\n        return @rs.projects.tagsColors(@scope.projectId).then (tags_colors) =>\n            @scope.project.tags_colors = tags_colors._attrs\n\n    renderBatch: () ->\n        @.rendered = _.concat(@.rendered, _.take(@.queue, @.batchSize))\n        @.queue = _.drop(@.queue, @.batchSize)\n        @kanbanUserstoriesService.set(@.rendered)\n\n        @scope.$broadcast(\"redraw:wip\")\n\n        if @.queue.length > 0\n            @timeout(@.renderBatch)\n        else\n            scopeDefer @scope, =>\n                # The broadcast must be executed when the DOM has been fully reloaded.\n                # We can't assure when this exactly happens so we need a defer\n                @rootscope.$broadcast(\"kanban:userstories:loaded\", @.rendered)\n                @scope.$broadcast(\"userstories:loaded\", @.rendered)\n\n    renderUserStories: (userstories) =>\n        userstories = _.sortBy(userstories, 'kanban_order')\n        userstoriesMap = _.groupBy(userstories, 'status')\n        @.rendered = []\n        @.queue = []\n        @.batchSize = 0\n\n        while (@.queue.length < userstories.length)\n            _.each @scope.project.us_statuses, (x) =>\n                if (userstoriesMap[x.id]?.length > 0)\n                    @.queue = _.concat(@.queue, _.take(userstoriesMap[x.id], 3))\n                    userstoriesMap[x.id] = _.drop(userstoriesMap[x.id], 3)\n            if !@.batchSize\n                @.batchSize = @.queue.length\n\n        @timeout(@.renderBatch)\n\n    loadUserstories: () ->\n        params = {\n            status__is_archived: false\n        }\n\n        if @.zoomLevel > 2\n            params.include_attachments = 1\n            params.include_tasks = 1\n\n        params = _.merge params, @location.search()\n\n        promise = @rs.userstories.listAll(@scope.projectId, params).then (userstories) =>\n            @kanbanUserstoriesService.init(@scope.project, @scope.usersById)\n            @tgLoader.pageLoaded()\n            @.renderUserStories(userstories)\n            return userstories\n\n        return promise\n\n    loadUserStoriesForStatus: (ctx, statusId) ->\n        filteredStatus = @location.search().status\n\n        # if there are filters applied the action doesn't end if the statusId is not in the url\n        if filteredStatus\n            filteredStatus = filteredStatus.split(\",\").map (it) -> parseInt(it, 10)\n\n            return if filteredStatus.indexOf(statusId) == -1\n\n        params = {\n            status: statusId\n            include_attachments: true,\n            include_tasks: true\n        }\n\n        params = _.merge params, @location.search()\n\n        return @rs.userstories.listAll(@scope.projectId, params).then (userstories) =>\n            @scope.$broadcast(\"kanban:shown-userstories-for-status\", statusId, userstories)\n\n            return userstories\n\n    hideUserStoriesForStatus: (ctx, statusId) ->\n        @scope.$broadcast(\"kanban:hidden-userstories-for-status\", statusId)\n\n    loadKanban: ->\n        return @q.all([\n            @.refreshTagsColors(),\n            @.loadUserstories()\n        ])\n\n    loadProject: ->\n        project = @projectService.project.toJS()\n\n        if not project.is_kanban_activated\n            @errorHandlingService.permissionDenied()\n\n        @scope.projectId = project.id\n        @scope.project = project\n        @scope.projectId = project.id\n        @scope.points = _.sortBy(project.points, \"order\")\n        @scope.pointsById = groupBy(project.points, (x) -> x.id)\n        @scope.usStatusById = groupBy(project.us_statuses, (x) -> x.id)\n        @scope.usStatusList = _.sortBy(project.us_statuses, \"order\")\n\n        @scope.$emit(\"project:loaded\", project)\n        return project\n\n    initializeSubscription: ->\n        routingKey1 = \"changes.project.#{@scope.projectId}.userstories\"\n        randomTimeout = taiga.randomInt(700, 1000)\n        @events.subscribe @scope, routingKey1, debounceLeading(randomTimeout, (message) =>\n            @.loadUserstories())\n\n    loadInitialData: ->\n        project = @.loadProject()\n\n        @.fillUsersAndRoles(project.members, project.roles)\n        @.initializeSubscription()\n        @.loadKanban()\n        @.generateFilters()\n\n    # Utils methods\n\n    prepareBulkUpdateData: (uses, field=\"kanban_order\") ->\n        return _.map(uses, (x) -> {\"us_id\": x.id, \"order\": x[field]})\n\n    moveUs: (ctx, usList, newStatusId, index) ->\n        @.cleanSelectedUss()\n\n        usList = _.map usList, (us) =>\n            return @kanbanUserstoriesService.getUsModel(us.id)\n\n        @rootscope.$broadcast(\"kanban:userstories:loaded\", usList, newStatusId, index)\n\n        data = @kanbanUserstoriesService.move(usList, newStatusId, index)\n\n        promise = @rs.userstories.bulkUpdateKanbanOrder(@scope.projectId, newStatusId, data.bulkOrders)\n\n        promise.then () =>\n            # saving\n            # drag single or different status\n            options = {\n                headers: {\n                    \"set-orders\": JSON.stringify(data.setOrders)\n                }\n            }\n\n            params = {\n                include_attachments: true,\n                include_tasks: true\n            }\n\n            promises = _.map usList, (us) =>\n                @repo.save(us, true, params, options, true)\n\n            promise = @q.all(promises)\n\n            promise.then (result) =>\n                headers = result[1]\n\n                if headers && headers['taiga-info-order-updated']\n                    order = JSON.parse(headers['taiga-info-order-updated'])\n                    @kanbanUserstoriesService.assignOrders(order)\n                @scope.$broadcast(\"redraw:wip\")\n\n                @.generateFilters()\n                if @.isFilterDataTypeSelected('status')\n                    @.filtersReloadContent()\n\n                return promise\n\n\nmodule.controller(\"KanbanController\", KanbanController)\n\n#############################################################################\n## Kanban Directive\n#############################################################################\n\nKanbanDirective = ($repo, $rootscope) ->\n    link = ($scope, $el, $attrs) ->\n        tableBodyDom = $el.find(\".kanban-table-body\")\n\n        tableBodyDom.on \"scroll\", (event) ->\n            target = angular.element(event.currentTarget)\n            tableHeaderDom = $el.find(\".kanban-table-header .kanban-table-inner\")\n            tableHeaderDom.css(\"left\", -1 * target.scrollLeft())\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link: link}\n\nmodule.directive(\"tgKanban\", [\"$tgRepo\", \"$rootScope\", KanbanDirective])\n\n#############################################################################\n## Kanban Archived Status Column Header Control\n#############################################################################\n\nKanbanArchivedStatusHeaderDirective = ($rootscope, $translate, kanbanUserstoriesService) ->\n    showArchivedText = $translate.instant(\"KANBAN.ACTION_SHOW_ARCHIVED\")\n    hideArchivedText = $translate.instant(\"KANBAN.ACTION_HIDE_ARCHIVED\")\n\n    link = ($scope, $el, $attrs) ->\n        status = $scope.$eval($attrs.tgKanbanArchivedStatusHeader)\n        hidden = true\n\n        kanbanUserstoriesService.addArchivedStatus(status.id)\n        kanbanUserstoriesService.hideStatus(status.id)\n\n        $scope.class = \"icon-watch\"\n        $scope.title = showArchivedText\n\n        $el.on \"click\", (event) ->\n            hidden = not hidden\n\n            $scope.$apply ->\n                if hidden\n                    $scope.class = \"icon-watch\"\n                    $scope.title = showArchivedText\n                    $rootscope.$broadcast(\"kanban:hide-userstories-for-status\", status.id)\n\n                    kanbanUserstoriesService.hideStatus(status.id)\n                else\n                    $scope.class = \"icon-unwatch\"\n                    $scope.title = hideArchivedText\n                    $rootscope.$broadcast(\"kanban:show-userstories-for-status\", status.id)\n\n                    kanbanUserstoriesService.showStatus(status.id)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link:link}\n\nmodule.directive(\"tgKanbanArchivedStatusHeader\", [ \"$rootScope\", \"$translate\", \"tgKanbanUserstories\", KanbanArchivedStatusHeaderDirective])\n\n\n#############################################################################\n## Kanban Archived Status Column Intro Directive\n#############################################################################\n\nKanbanArchivedStatusIntroDirective = ($translate, kanbanUserstoriesService) ->\n    userStories = []\n\n    link = ($scope, $el, $attrs) ->\n        hiddenUserStoriexText = $translate.instant(\"KANBAN.HIDDEN_USER_STORIES\")\n        status = $scope.$eval($attrs.tgKanbanArchivedStatusIntro)\n        $el.text(hiddenUserStoriexText)\n\n        updateIntroText = (hasArchived) ->\n            if hasArchived\n                $el.text(\"\")\n            else\n                $el.text(hiddenUserStoriexText)\n\n        $scope.$on \"kanban:us:move\", (ctx, itemUs, oldStatusId, newStatusId, itemIndex) ->\n            hasArchived = !!kanbanUserstoriesService.getStatus(newStatusId).length\n            updateIntroText(hasArchived)\n\n        $scope.$on \"kanban:shown-userstories-for-status\", (ctx, statusId, userStoriesLoaded) ->\n            if statusId == status.id\n                kanbanUserstoriesService.deleteStatus(statusId)\n                kanbanUserstoriesService.add(userStoriesLoaded)\n\n                hasArchived = !!kanbanUserstoriesService.getStatus(statusId).length\n                updateIntroText(hasArchived)\n\n        $scope.$on \"kanban:hidden-userstories-for-status\", (ctx, statusId) ->\n            if statusId == status.id\n                updateIntroText(false)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link:link}\n\nmodule.directive(\"tgKanbanArchivedStatusIntro\", [\"$translate\", \"tgKanbanUserstories\", KanbanArchivedStatusIntroDirective])\n\n#############################################################################\n## Kanban Squish Column Directive\n#############################################################################\n\nKanbanSquishColumnDirective = (rs, projectService) ->\n    link = ($scope, $el, $attrs) ->\n        $scope.foldStatus = (status) ->\n            $scope.folds[status.id] = !!!$scope.folds[status.id]\n            rs.kanban.storeStatusColumnModes($scope.projectId, $scope.folds)\n            updateTableWidth()\n            return\n\n        updateTableWidth = ->\n            columnWidths = _.map $scope.usStatusList, (status) ->\n                if $scope.folds[status.id]\n                    return 40\n                else\n                    return 310\n\n            totalWidth = _.reduce columnWidths, (total, width) ->\n                return total + width\n\n            $el.find('.kanban-table-inner').css(\"width\", totalWidth)\n\n        unwatch = $scope.$watch 'usByStatus', (usByStatus) ->\n            if usByStatus?.size\n                $scope.folds = rs.kanban.getStatusColumnModes(projectService.project.get('id'))\n                updateTableWidth()\n\n                unwatch()\n\n    return {link: link}\n\nmodule.directive(\"tgKanbanSquishColumn\", [\"$tgResources\", \"tgProjectService\", KanbanSquishColumnDirective])\n\n#############################################################################\n## Kanban WIP Limit Directive\n#############################################################################\n\nKanbanWipLimitDirective = ($timeout) ->\n    link = ($scope, $el, $attrs) ->\n        status = $scope.$eval($attrs.tgKanbanWipLimit)\n\n        redrawWipLimit = =>\n            $el.find(\".kanban-wip-limit\").remove()\n            $timeout =>\n                element = $el.find(\"tg-card\")[status.wip_limit]\n                if element\n                    angular.element(element).before(\"<div class='kanban-wip-limit'></div>\")\n\n        if status and not status.is_archived\n            $scope.$on \"redraw:wip\", redrawWipLimit\n            $scope.$on \"kanban:us:move\", redrawWipLimit\n            $scope.$on \"usform:new:success\", redrawWipLimit\n            $scope.$on \"usform:bulk:success\", redrawWipLimit\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link: link}\n\nmodule.directive(\"tgKanbanWipLimit\", [\"$timeout\", KanbanWipLimitDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/kanban/sortable.coffee\n###\n\ntaiga = @.taiga\n\nmixOf = @.taiga.mixOf\ntoggleText = @.taiga.toggleText\nscopeDefer = @.taiga.scopeDefer\nbindOnce = @.taiga.bindOnce\ngroupBy = @.taiga.groupBy\ntimeout = @.taiga.timeout\n\nmodule = angular.module(\"taigaKanban\")\n\n\n#############################################################################\n## Sortable Directive\n#############################################################################\n\nKanbanSortableDirective = ($repo, $rs, $rootscope) ->\n    link = ($scope, $el, $attrs) ->\n        unwatch = $scope.$watch \"usByStatus\", (usByStatus) ->\n            return if !usByStatus || !usByStatus.size\n\n            unwatch()\n\n            if not ($scope.project.my_permissions.indexOf(\"modify_us\") > -1)\n                return\n\n            newParentScope = null\n            itemEl = null\n            tdom = $el\n\n            deleteElement = (itemEl) ->\n                # Completelly remove item and its scope from dom\n                itemEl.scope().$destroy()\n                itemEl.off()\n                itemEl.remove()\n\n            containers = _.map $el.find('.taskboard-column'), (item) ->\n                return item\n\n            drake = dragula(containers, {\n                copySortSource: false,\n                copy: false,\n                moves: (item) ->\n                    return $(item).is('tg-card')\n            })\n\n            drake.on 'drag', (item) ->\n                window.dragMultiple.start(item, containers)\n\n            drake.on 'cloned', (item, dropTarget) ->\n                $(item).addClass('multiple-drag-mirror')\n\n            drake.on 'dragend', (item) ->\n                parentEl = $(item).parent()\n                newParentScope = parentEl.scope()\n\n                newStatusId = newParentScope.s.id\n                dragMultipleItems = window.dragMultiple.stop()\n\n                # if it is not drag multiple\n                if !dragMultipleItems.length\n                    dragMultipleItems = [item]\n\n                firstElement = dragMultipleItems[0]\n                index = $(parentEl).find('tg-card').index(firstElement)\n                newStatus = newParentScope.s.id\n\n                usList = _.map dragMultipleItems, (item) -> $(item).scope().us\n\n                finalUsList = _.map usList, (item)  ->\n                    return {\n                        id: item.get('id'),\n                        oldStatusId: item.getIn(['model', 'status'])\n                    }\n\n                $scope.$apply ->\n                    _.each usList, (item, key) =>\n                        oldStatus = item.getIn(['model', 'status'])\n                        sameContainer = newStatus == oldStatus\n\n                        if !sameContainer\n                            itemEl = $(dragMultipleItems[key])\n                            deleteElement(itemEl)\n\n                    $rootscope.$broadcast(\"kanban:us:move\", finalUsList, newStatus, index)\n\n            scroll = autoScroll(containers, {\n                margin: 100,\n                pixels: 30,\n                scrollWhenOutside: true,\n                autoScroll: () ->\n                    return this.down && drake.dragging\n            })\n\n            $scope.$on \"$destroy\", ->\n                $el.off()\n                drake.destroy()\n\n    return {link: link}\n\n\nmodule.directive(\"tgKanbanSortable\", [\n    \"$tgRepo\",\n    \"$tgResources\",\n    \"$rootScope\",\n    KanbanSortableDirective\n])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/epics/detail.coffee\n###\n\ntaiga = @.taiga\n\nmixOf = @.taiga.mixOf\ntoString = @.taiga.toString\njoinStr = @.taiga.joinStr\ngroupBy = @.taiga.groupBy\nbindOnce = @.taiga.bindOnce\nbindMethods = @.taiga.bindMethods\n\nmodule = angular.module(\"taigaEpics\")\n\n#############################################################################\n## Epic Detail Controller\n#############################################################################\n\nclass EpicDetailController extends mixOf(taiga.Controller, taiga.PageMixin)\n    @.$inject = [\n        \"$scope\",\n        \"$rootScope\",\n        \"$tgRepo\",\n        \"$tgConfirm\",\n        \"$tgResources\",\n        \"tgResources\"\n        \"$routeParams\",\n        \"$q\",\n        \"$tgLocation\",\n        \"$log\",\n        \"tgAppMetaService\",\n        \"$tgAnalytics\",\n        \"$tgNavUrls\",\n        \"$translate\",\n        \"$tgQueueModelTransformation\",\n        \"tgErrorHandlingService\",\n        \"tgProjectService\"\n    ]\n\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @rs2, @params, @q, @location,\n                  @log, @appMetaService, @analytics, @navUrls, @translate, @modelTransform, @errorHandlingService, @projectService) ->\n        bindMethods(@)\n\n        @scope.epicRef = @params.epicref\n        @scope.sectionName = @translate.instant(\"EPIC.SECTION_NAME\")\n        @.initializeEventHandlers()\n\n        promise = @.loadInitialData()\n\n        # On Success\n        promise.then =>\n            @._setMeta()\n            @.initializeOnDeleteGoToUrl()\n\n        # On Error\n        promise.then null, @.onInitialDataError.bind(@)\n\n    _setMeta: ->\n        title = @translate.instant(\"EPIC.PAGE_TITLE\", {\n            epicRef: \"##{@scope.epic.ref}\"\n            epicSubject: @scope.epic.subject\n            projectName: @scope.project.name\n        })\n        description = @translate.instant(\"EPIC.PAGE_DESCRIPTION\", {\n            epicStatus: @scope.statusById[@scope.epic.status]?.name or \"--\"\n            epicDescription: angular.element(@scope.epic.description_html or \"\").text()\n        })\n        @appMetaService.setAll(title, description)\n\n    initializeEventHandlers: ->\n        @scope.$on \"attachment:create\", =>\n            @analytics.trackEvent(\"attachment\", \"create\", \"create attachment on epic\", 1)\n\n        @scope.$on \"comment:new\", =>\n            @.loadEpic()\n\n        @scope.$on \"custom-attributes-values:edit\", =>\n            @rootscope.$broadcast(\"object:updated\")\n\n    initializeOnDeleteGoToUrl: ->\n       ctx = {project: @scope.project.slug}\n       @scope.onDeleteGoToUrl = @navUrls.resolve(\"project-epics\", ctx)\n\n    loadProject: ->\n        project = @projectService.project.toJS()\n\n        @scope.projectId = project.id\n        @scope.project = project\n        @scope.immutableProject = @projectService.project\n        @scope.$emit('project:loaded', project)\n        @scope.statusList = project.epic_statuses\n        @scope.statusById = groupBy(project.epic_statuses, (x) -> x.id)\n        return project\n\n    loadEpic: ->\n        return @rs.epics.getByRef(@scope.projectId, @params.epicref).then (epic) =>\n            @scope.epic = epic\n            @scope.immutableEpic = Immutable.fromJS(epic._attrs)\n            @scope.epicId = epic.id\n            @scope.commentModel = epic\n\n            @modelTransform.setObject(@scope, 'epic')\n\n            if @scope.epic.neighbors.previous?.ref?\n                ctx = {\n                    project: @scope.project.slug\n                    ref: @scope.epic.neighbors.previous.ref\n                }\n                @scope.previousUrl = @navUrls.resolve(\"project-epics-detail\", ctx)\n\n            if @scope.epic.neighbors.next?.ref?\n                ctx = {\n                    project: @scope.project.slug\n                    ref: @scope.epic.neighbors.next.ref\n                }\n                @scope.nextUrl = @navUrls.resolve(\"project-epics-detail\", ctx)\n\n    loadUserstories: ->\n          return @rs2.userstories.listInEpic(@scope.epicId).then (data) =>\n              @scope.userstories = data\n\n    loadInitialData: ->\n        project = @.loadProject()\n\n        @.fillUsersAndRoles(project.members, project.roles)\n        @.loadEpic().then(=> @.loadUserstories())\n\n    ###\n    # Note: This methods (onUpvote() and onDownvote()) are related to tg-vote-button.\n    #       See app/modules/components/vote-button for more info\n    ###\n    onUpvote: ->\n        onSuccess = =>\n            @.loadEpic()\n            @rootscope.$broadcast(\"object:updated\")\n        onError = =>\n            @confirm.notify(\"error\")\n\n        return @rs.epics.upvote(@scope.epicId).then(onSuccess, onError)\n\n    onDownvote: ->\n        onSuccess = =>\n            @.loadEpic()\n            @rootscope.$broadcast(\"object:updated\")\n        onError = =>\n            @confirm.notify(\"error\")\n\n        return @rs.epics.downvote(@scope.epicId).then(onSuccess, onError)\n\n    ###\n    # Note: This methods (onWatch() and onUnwatch()) are related to tg-watch-button.\n    #       See app/modules/components/watch-button for more info\n    ###\n    onWatch: ->\n        onSuccess = =>\n            @.loadEpic()\n            @rootscope.$broadcast(\"object:updated\")\n        onError = =>\n            @confirm.notify(\"error\")\n\n        return @rs.epics.watch(@scope.epicId).then(onSuccess, onError)\n\n    onUnwatch: ->\n        onSuccess = =>\n            @.loadEpic()\n            @rootscope.$broadcast(\"object:updated\")\n        onError = =>\n            @confirm.notify(\"error\")\n\n        return @rs.epics.unwatch(@scope.epicId).then(onSuccess, onError)\n\n    onSelectColor: (color) ->\n        onSelectColorSuccess = () =>\n            @rootscope.$broadcast(\"object:updated\")\n            @confirm.notify('success')\n\n        onSelectColorError = () =>\n            @confirm.notify('error')\n\n        transform = @modelTransform.save (epic) ->\n            epic.color = color\n            return epic\n\n        return transform.then(onSelectColorSuccess, onSelectColorError)\n\nmodule.controller(\"EpicDetailController\", EpicDetailController)\n\n\n#############################################################################\n## Epic status display directive\n#############################################################################\n\nEpicStatusDisplayDirective = ($template, $compile) ->\n    # Display if an epic is open or closed and its status.\n    #\n    # Example:\n    #     tg-epic-status-display(ng-model=\"epic\")\n    #\n    # Requirements:\n    #   - Epic object (ng-model)\n    #   - scope.statusById object\n\n    template = $template.get(\"common/components/status-display.html\", true)\n\n    link = ($scope, $el, $attrs) ->\n        render = (epic) ->\n            status =  $scope.statusById[epic.status]\n\n            html = template({\n                is_closed: status.is_closed\n                status: status\n            })\n\n            html = $compile(html)($scope)\n            $el.html(html)\n\n        $scope.$watch $attrs.ngModel, (epic) ->\n            render(epic) if epic?\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link: link\n        restrict: \"EA\"\n        require: \"ngModel\"\n    }\n\nmodule.directive(\"tgEpicStatusDisplay\", [\"$tgTemplate\", \"$compile\", EpicStatusDisplayDirective])\n\n\n#############################################################################\n## Epic status button directive\n#############################################################################\n\nEpicStatusButtonDirective = ($rootScope, $repo, $confirm, $loading, $modelTransform, $compile, $translate, $template) ->\n    # Display the status of epic and you can edit it.\n    #\n    # Example:\n    #     tg-epic-status-button(ng-model=\"epic\")\n    #\n    # Requirements:\n    #   - Epic object (ng-model)\n    #   - scope.statusById object\n    #   - $scope.project.my_permissions\n\n    template = $template.get(\"common/components/status-button.html\", true)\n\n    link = ($scope, $el, $attrs, $model) ->\n        isEditable = ->\n            return $scope.project.my_permissions.indexOf(\"modify_epic\") != -1\n\n        render = (epic) =>\n            status = $scope.statusById[epic.status]\n\n            html = $compile(template({\n                status: status\n                statuses: $scope.statusList\n                editable: isEditable()\n            }))($scope)\n\n            $el.html(html)\n\n        save = (status) ->\n            currentLoading = $loading()\n                .target($el)\n                .start()\n\n            transform = $modelTransform.save (epic) ->\n                epic.status = status\n\n                return epic\n\n            onSuccess = ->\n                $rootScope.$broadcast(\"object:updated\")\n                currentLoading.finish()\n\n            onError = ->\n                $confirm.notify(\"error\")\n                currentLoading.finish()\n\n            transform.then(onSuccess, onError)\n\n        $el.on \"click\", \".js-edit-status\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            return if not isEditable()\n\n            $el.find(\".pop-status\").popover().open()\n\n        $el.on \"click\", \".status\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            return if not isEditable()\n\n            target = angular.element(event.currentTarget)\n\n            $.fn.popover().closeAll()\n\n            save(target.data(\"status-id\"))\n\n        $scope.$watch () ->\n            return $model.$modelValue?.status\n        , () ->\n            epic = $model.$modelValue\n            render(epic) if epic\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link: link\n        restrict: \"EA\"\n        require: \"ngModel\"\n    }\n\nmodule.directive(\"tgEpicStatusButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\",\n                                        \"$compile\", \"$translate\", \"$tgTemplate\", EpicStatusButtonDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/issues/detail.coffee\n###\n\ntaiga = @.taiga\n\nmixOf = @.taiga.mixOf\ntoString = @.taiga.toString\njoinStr = @.taiga.joinStr\ngroupBy = @.taiga.groupBy\nbindOnce = @.taiga.bindOnce\nbindMethods = @.taiga.bindMethods\nnormalizeString = @.taiga.normalizeString\n\nmodule = angular.module(\"taigaIssues\")\n\n#############################################################################\n## Issue Detail Controller\n#############################################################################\n\nclass IssueDetailController extends mixOf(taiga.Controller, taiga.PageMixin)\n    @.$inject = [\n        \"$scope\",\n        \"$rootScope\",\n        \"$tgRepo\",\n        \"$tgConfirm\",\n        \"$tgResources\",\n        \"$routeParams\",\n        \"$q\",\n        \"$tgLocation\",\n        \"$log\",\n        \"tgAppMetaService\",\n        \"$tgAnalytics\",\n        \"$tgNavUrls\",\n        \"$translate\",\n        \"$tgQueueModelTransformation\",\n        \"tgErrorHandlingService\",\n        \"tgProjectService\"\n    ]\n\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @params, @q, @location,\n                  @log, @appMetaService, @analytics, @navUrls, @translate, @modelTransform,\n                  @errorHandlingService, @projectService) ->\n        bindMethods(@)\n\n        @scope.issueRef = @params.issueref\n        @scope.sectionName = @translate.instant(\"ISSUES.SECTION_NAME\")\n        @.initializeEventHandlers()\n\n        promise = @.loadInitialData()\n\n        # On Success\n        promise.then =>\n            @._setMeta()\n            @.initializeOnDeleteGoToUrl()\n\n        # On Error\n        promise.then null, @.onInitialDataError.bind(@)\n\n    _setMeta: ->\n        title = @translate.instant(\"ISSUE.PAGE_TITLE\", {\n            issueRef: \"##{@scope.issue.ref}\"\n            issueSubject: @scope.issue.subject\n            projectName: @scope.project.name\n        })\n        description = @translate.instant(\"ISSUE.PAGE_DESCRIPTION\", {\n            issueStatus: @scope.statusById[@scope.issue.status]?.name or \"--\"\n            issueType: @scope.typeById[@scope.issue.type]?.name or \"--\"\n            issueSeverity: @scope.severityById[@scope.issue.severity]?.name or \"--\"\n            issuePriority: @scope.priorityById[@scope.issue.priority]?.name or \"--\"\n            issueDescription: angular.element(@scope.issue.description_html or \"\").text()\n        })\n        @appMetaService.setAll(title, description)\n\n    initializeEventHandlers: ->\n        @scope.$on \"attachment:create\", =>\n            @analytics.trackEvent(\"attachment\", \"create\", \"create attachment on issue\", 1)\n\n        @scope.$on \"promote-issue-to-us:success\", =>\n            @analytics.trackEvent(\"issue\", \"promoteToUserstory\", \"promote issue to userstory\", 1)\n            @rootscope.$broadcast(\"object:updated\")\n            @.loadIssue()\n\n        @scope.$on \"comment:new\", =>\n            @.loadIssue()\n\n        @scope.$on \"custom-attributes-values:edit\", =>\n            @rootscope.$broadcast(\"object:updated\")\n\n        @scope.$on \"assign-sprint-to-issue:success\", (ctx, milestoneId) =>\n            @scope.issue.milestone = milestoneId\n            @rootscope.$broadcast(\"object:updated\")\n            if milestoneId\n                @.loadSprint()\n            else\n                @scope.sprint = null\n\n    initializeOnDeleteGoToUrl: ->\n       ctx = {project: @scope.project.slug}\n       if @scope.project.is_issues_activated\n           @scope.onDeleteGoToUrl = @navUrls.resolve(\"project-issues\", ctx)\n       else\n           @scope.onDeleteGoToUrl = @navUrls.resolve(\"project\", ctx)\n\n    loadProject: ->\n        project = @projectService.project.toJS()\n\n        @scope.projectId = project.id\n        @scope.project = project\n        @scope.$emit('project:loaded', project)\n        @scope.statusList = project.issue_statuses\n        @scope.statusById = groupBy(project.issue_statuses, (x) -> x.id)\n        @scope.typeById = groupBy(project.issue_types, (x) -> x.id)\n        @scope.typeList = _.sortBy(project.issue_types, \"order\")\n        @scope.severityList = project.severities\n        @scope.severityById = groupBy(project.severities, (x) -> x.id)\n        @scope.priorityList = project.priorities\n        @scope.priorityById = groupBy(project.priorities, (x) -> x.id)\n        return project\n\n    loadIssue: ->\n        return @rs.issues.getByRef(@scope.projectId, @params.issueref).then (issue) =>\n            @scope.issue = issue\n            @scope.issueId = issue.id\n            @scope.commentModel = issue\n\n            @modelTransform.setObject(@scope, 'issue')\n\n            if @scope.issue.neighbors.previous?.ref?\n                ctx = {\n                    project: @scope.project.slug\n                    ref: @scope.issue.neighbors.previous.ref\n                }\n                @scope.previousUrl = @navUrls.resolve(\"project-issues-detail\", ctx)\n\n            if @scope.issue.neighbors.next?.ref?\n                ctx = {\n                    project: @scope.project.slug\n                    ref: @scope.issue.neighbors.next.ref\n                }\n                @scope.nextUrl = @navUrls.resolve(\"project-issues-detail\", ctx)\n\n    loadSprint: ->\n        if @scope.issue.milestone\n            return @rs.sprints.get(@scope.issue.project, @scope.issue.milestone).then (sprint) =>\n                @scope.sprint = sprint\n                return sprint\n\n    loadInitialData: ->\n        project = @.loadProject()\n\n        @.fillUsersAndRoles(project.members, project.roles)\n\n        return @.loadIssue().then(=> @.loadSprint())\n\n    ###\n    # Note: This methods (onUpvote() and onDownvote()) are related to tg-vote-button.\n    #       See app/modules/components/vote-button for more info\n    ###\n    onUpvote: ->\n        onSuccess = =>\n            @.loadIssue()\n            @rootscope.$broadcast(\"object:updated\")\n        onError = =>\n            @confirm.notify(\"error\")\n\n        return @rs.issues.upvote(@scope.issueId).then(onSuccess, onError)\n\n    onDownvote: ->\n        onSuccess = =>\n            @.loadIssue()\n            @rootscope.$broadcast(\"object:updated\")\n        onError = =>\n            @confirm.notify(\"error\")\n\n        return @rs.issues.downvote(@scope.issueId).then(onSuccess, onError)\n\n    ###\n    # Note: This methods (onWatch() and onUnwatch()) are related to tg-watch-button.\n    #       See app/modules/components/watch-button for more info\n    ###\n    onWatch: ->\n        onSuccess = =>\n            @.loadIssue()\n            @rootscope.$broadcast(\"object:updated\")\n        onError = =>\n            @confirm.notify(\"error\")\n\n        return @rs.issues.watch(@scope.issueId).then(onSuccess, onError)\n\n    onUnwatch: ->\n        onSuccess = =>\n            @.loadIssue()\n            @rootscope.$broadcast(\"object:updated\")\n        onError = =>\n            @confirm.notify(\"error\")\n\n        return @rs.issues.unwatch(@scope.issueId).then(onSuccess, onError)\n\nmodule.controller(\"IssueDetailController\", IssueDetailController)\n\n\n#############################################################################\n## Issue status display directive\n#############################################################################\n\nIssueStatusDisplayDirective = ($template, $compile)->\n    # Display if a Issue is open or closed and its issueboard status.\n    #\n    # Example:\n    #     tg-issue-status-display(ng-model=\"issue\")\n    #\n    # Requirements:\n    #   - Issue object (ng-model)\n    #   - scope.statusById object\n\n    template = $template.get(\"common/components/status-display.html\", true)\n\n    link = ($scope, $el, $attrs) ->\n        render = (issue) ->\n            status = $scope.statusById[issue.status]\n\n            html = template({\n                is_closed: status.is_closed\n                status: status\n            })\n\n            html = $compile(html)($scope)\n\n            $el.html(html)\n\n        $scope.$watch $attrs.ngModel, (issue) ->\n            render(issue) if issue?\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link: link\n        restrict: \"EA\"\n        require: \"ngModel\"\n    }\n\nmodule.directive(\"tgIssueStatusDisplay\", [\"$tgTemplate\", \"$compile\", IssueStatusDisplayDirective])\n\n\n#############################################################################\n## Issue status button directive\n#############################################################################\n\nIssueStatusButtonDirective = ($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) ->\n    # Display the status of Issue and you can edit it.\n    #\n    # Example:\n    #     tg-issue-status-button(ng-model=\"issue\")\n    #\n    # Requirements:\n    #   - Issue object (ng-model)\n    #   - scope.statusById object\n    #   - $scope.project.my_permissions\n\n    template = $template.get(\"common/components/status-button.html\", true)\n\n    link = ($scope, $el, $attrs, $model) ->\n        isEditable = ->\n            return $scope.project.my_permissions.indexOf(\"modify_issue\") != -1\n\n        render = (issue) =>\n            status = $scope.statusById[issue.status]\n\n            html = template({\n                status: status\n                statuses: $scope.statusList\n                editable: isEditable()\n            })\n\n            html = $compile(html)($scope)\n\n            $el.html(html)\n\n        save = (statusId) ->\n            $.fn.popover().closeAll()\n\n            currentLoading = $loading()\n                .target($el)\n                .start()\n\n            transform = $modelTransform.save (issue) ->\n                issue.status = statusId\n\n                return issue\n\n            onSuccess = ->\n                $rootScope.$broadcast(\"object:updated\")\n                currentLoading.finish()\n\n            onError = ->\n                $confirm.notify(\"error\")\n                currentLoading.finish()\n\n            transform.then(onSuccess, onError)\n\n        $el.on \"click\", \".js-edit-status\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            return if not isEditable()\n\n            $el.find(\".pop-status\").popover().open()\n\n        $el.on \"click\", \".status\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            return if not isEditable()\n\n            target = angular.element(event.currentTarget)\n\n            save(target.data(\"status-id\"))\n\n        $scope.$watch () ->\n            return $model.$modelValue?.status\n        , () ->\n            issue = $model.$modelValue\n            render(issue) if issue\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link: link\n        restrict: \"EA\"\n        require: \"ngModel\"\n    }\n\nmodule.directive(\"tgIssueStatusButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", IssueStatusButtonDirective])\n\n#############################################################################\n## Issue type button directive\n#############################################################################\n\nIssueTypeButtonDirective = ($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) ->\n    # Display the type of Issue and you can edit it.\n    #\n    # Example:\n    #     tg-issue-type-button(ng-model=\"issue\")\n    #\n    # Requirements:\n    #   - Issue object (ng-model)\n    #   - scope.typeById object\n    #   - $scope.project.my_permissions\n\n    template = $template.get(\"issue/issue-type-button.html\", true)\n\n    link = ($scope, $el, $attrs, $model) ->\n        notAutoSave = $scope.$eval($attrs.notAutoSave)\n\n        isEditable = ->\n            return $scope.project.my_permissions.indexOf(\"modify_issue\") != -1\n\n        render = (issue) ->\n            type = $scope.typeById[issue.type]\n\n            html = template({\n                type: type\n                typees: $scope.typeList\n                editable: isEditable()\n            })\n\n            html = $compile(html)($scope)\n\n            $el.html(html)\n\n        save = (type) ->\n            $.fn.popover().closeAll()\n\n            if notAutoSave\n                $model.$modelValue.type = type\n                $scope.$apply()\n                return\n\n            currentLoading = $loading()\n                .target($el.find(\".level-name\"))\n                .start()\n\n            transform = $modelTransform.save (issue) ->\n                issue.type = type\n\n                return issue\n\n            onSuccess = ->\n                $rootScope.$broadcast(\"object:updated\")\n                currentLoading.finish()\n\n            onError = ->\n                $confirm.notify(\"error\")\n                currentLoading.finish()\n\n            transform.then(onSuccess, onError)\n\n        $el.on \"click\", \".type-data\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            return if not isEditable()\n\n            $el.find(\".pop-type\").popover().open()\n\n        $el.on \"click\", \".type\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            return if not isEditable()\n\n            target = angular.element(event.currentTarget)\n            type = target.data(\"type-id\")\n            save(type)\n\n        $scope.$watch () ->\n            return $model.$modelValue?.type\n        , () ->\n            issue = $model.$modelValue\n            render(issue) if issue\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link: link\n        restrict: \"EA\"\n        require: \"ngModel\"\n    }\n\nmodule.directive(\"tgIssueTypeButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", IssueTypeButtonDirective])\n\n\n#############################################################################\n## Issue severity button directive\n#############################################################################\n\nIssueSeverityButtonDirective = ($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) ->\n    # Display the severity of Issue and you can edit it.\n    #\n    # Example:\n    #     tg-issue-severity-button(ng-model=\"issue\")\n    #\n    # Requirements:\n    #   - Issue object (ng-model)\n    #   - scope.severityById object\n    #   - $scope.project.my_permissions\n\n    template = $template.get(\"issue/issue-severity-button.html\", true)\n\n    link = ($scope, $el, $attrs, $model) ->\n        notAutoSave = $scope.$eval($attrs.notAutoSave)\n\n        isEditable = ->\n            return $scope.project.my_permissions.indexOf(\"modify_issue\") != -1\n\n        render = (issue) ->\n            severity = $scope.severityById[issue.severity]\n\n            html = template({\n                severity: severity\n                severityes: $scope.severityList\n                editable: isEditable()\n            })\n\n            html = $compile(html)($scope)\n\n            $el.html(html)\n\n        save = (severity) ->\n            $.fn.popover().closeAll()\n\n            if notAutoSave\n                $model.$modelValue.severity = severity\n                $scope.$apply()\n                return\n\n            currentLoading = $loading()\n                .target($el.find(\".level-name\"))\n                .start()\n\n            transform = $modelTransform.save (issue) ->\n                issue.severity = severity\n\n                return issue\n\n            onSuccess = ->\n                $rootScope.$broadcast(\"object:updated\")\n                currentLoading.finish()\n\n            onError = ->\n                $confirm.notify(\"error\")\n                currentLoading.finish()\n\n            transform.then(onSuccess, onError)\n\n        $el.on \"click\", \".severity-data\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            return if not isEditable()\n\n            $el.find(\".pop-severity\").popover().open()\n\n        $el.on \"click\", \".severity\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            return if not isEditable()\n\n            target = angular.element(event.currentTarget)\n            severity = target.data(\"severity-id\")\n\n            save(severity)\n\n        $scope.$watch () ->\n            return $model.$modelValue?.severity\n        , () ->\n            issue = $model.$modelValue\n            render(issue) if issue\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link: link\n        restrict: \"EA\"\n        require: \"ngModel\"\n    }\n\nmodule.directive(\"tgIssueSeverityButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", IssueSeverityButtonDirective])\n\n\n#############################################################################\n## Issue priority button directive\n#############################################################################\n\nIssuePriorityButtonDirective = ($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) ->\n    # Display the priority of Issue and you can edit it.\n    #\n    # Example:\n    #     tg-issue-priority-button(ng-model=\"issue\")\n    #\n    # Requirements:\n    #   - Issue object (ng-model)\n    #   - scope.priorityById object\n    #   - $scope.project.my_permissions\n\n    template = $template.get(\"issue/issue-priority-button.html\", true)\n\n    link = ($scope, $el, $attrs, $model) ->\n        notAutoSave = $scope.$eval($attrs.notAutoSave)\n\n        isEditable = ->\n            return $scope.project.my_permissions.indexOf(\"modify_issue\") != -1\n\n        render = (issue) ->\n            priority = $scope.priorityById[issue.priority]\n\n            html = template({\n                priority: priority\n                priorityes: $scope.priorityList\n                editable: isEditable()\n            })\n\n            html = $compile(html)($scope)\n\n            $el.html(html)\n\n        save = (priority) ->\n            $.fn.popover().closeAll()\n\n            if notAutoSave\n                $model.$modelValue.priority = priority\n                $scope.$apply()\n                return\n\n            currentLoading = $loading()\n                .target($el.find(\".level-name\"))\n                .start()\n\n            transform = $modelTransform.save (issue) ->\n                issue.priority = priority\n\n                return issue\n\n            onSuccess = ->\n                $rootScope.$broadcast(\"object:updated\")\n                currentLoading.finish()\n\n            onError = ->\n                $confirm.notify(\"error\")\n                currentLoading.finish()\n\n            transform.then(onSuccess, onError)\n\n        $el.on \"click\", \".priority-data\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            return if not isEditable()\n\n            $el.find(\".pop-priority\").popover().open()\n\n        $el.on \"click\", \".priority\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            return if not isEditable()\n\n            target = angular.element(event.currentTarget)\n            priority = target.data(\"priority-id\")\n\n            save(priority)\n\n        $scope.$watch () ->\n            return $model.$modelValue?.priority\n        , () ->\n            issue = $model.$modelValue\n            render(issue) if issue\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link: link\n        restrict: \"EA\"\n        require: \"ngModel\"\n    }\n\nmodule.directive(\"tgIssuePriorityButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", IssuePriorityButtonDirective])\n\n\n#############################################################################\n## Add Issue to Sprint button directive\n#############################################################################\n\nAssignSprintToIssueButtonDirective = ($rootscope, $rs, $repo, $loading, $translate,\nlightboxService, $modelTransform, $confirm) ->\n    link = ($scope, $el, $attrs, $model) ->\n        avaliableMilestones = []\n        issue = null\n\n        $scope.$watch $attrs.ngModel, (item) ->\n            return if not item\n            if item.milestone\n                $el.find('.assign-issue-button.button-unset').removeClass('is-active')\n                $el.find('.assign-issue-button.button-set').addClass('is-active')\n            else\n                $el.find('.assign-issue-button.button-set').removeClass('is-active')\n                $el.find('.assign-issue-button.button-unset').addClass('is-active')\n\n        $el.on \"click\", \".assign-issue-button.button-unset\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            title = $translate.instant(\"ISSUES.ACTION_ATTACH_SPRINT\")\n            issue = $model.$modelValue\n            $rs.sprints.list($scope.projectId, null).then (data) ->\n                $scope.milestones = data.milestones\n                $scope.selectedSprint = issue.milestone\n                avaliableMilestones = angular.copy($scope.milestones)\n                lightboxService.open($el.find(\".lightbox-assign-sprint-to-issue\"))\n\n        $el.on \"click\", \".assign-issue-button.button-set\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            issue = $model.$modelValue\n            $rs.sprints.list($scope.projectId, null).then (data) ->\n                currentSprint = _.find(data.milestones, { \"id\": issue.milestone })\n\n                title = $translate.instant(\"ISSUES.CONFIRM_DETACH_FROM_SPRINT.TITLE\")\n                message = $translate.instant(\n                    \"ISSUES.CONFIRM_DETACH_FROM_SPRINT.MESSAGE\",\n                    {sprintName: currentSprint.name}\n                )\n\n                $confirm.ask(title, null, message).then (askResponse) ->\n                    onSuccess = ->\n                        $rootscope.$broadcast(\"assign-sprint-to-issue:success\", null)\n                        askResponse.finish()\n                        lightboxService.close($el)\n\n\n                    onError = ->\n                        askResponse.finish(false)\n                        $confirm.notify(\"error\")\n\n                    transform = $modelTransform.save (issue) ->\n                        issue.setAttr('milestone', null)\n                        return issue\n                    transform.then(onSuccess, onError)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n        existsMilestone = (needle, haystack) ->\n            haystack = normalizeString(haystack.toUpperCase())\n            needle = normalizeString(needle.toUpperCase())\n            return _.includes(haystack, needle)\n\n        $scope.filterMilestones = (filterText) ->\n            $scope.milestones = avaliableMilestones.filter((milestone) ->\n                existsMilestone(filterText, milestone.name)\n            )\n\n        $scope.saveIssueToSprint = (selectedSprint, event) ->\n            currentLoading = $loading().target($(event.currentTarget)).start()\n            issue.setAttr('milestone', selectedSprint.id)\n\n            transform = $modelTransform.save (item) ->\n                issue.setAttr('milestone', selectedSprint.id)\n                return item\n\n            transform.then ->\n                currentLoading.finish()\n                lightboxService.close($el.find(\".lightbox-assign-sprint-to-issue\"))\n                $rootscope.$broadcast(\"assign-sprint-to-issue:success\", selectedSprint.id)\n\n    return {\n        link: link\n        restrict: \"EA\"\n        require: \"ngModel\"\n        templateUrl: \"issue/assign-sprint-to-issue-button.html\"\n\n    }\n\nmodule.directive(\"tgAssignSprintToIssueButton\", [\"$rootScope\", \"$tgResources\", \"$tgRepo\",\n                \"$tgLoading\", \"$translate\", \"lightboxService\", \"$tgQueueModelTransformation\",\n                \"$tgConfirm\", AssignSprintToIssueButtonDirective] )\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/issues/lightboxes.coffee\n###\n\ntaiga = @.taiga\nbindOnce = @.taiga.bindOnce\ndebounce = @.taiga.debounce\ntrim = @.taiga.trim\n\nmodule = angular.module(\"taigaIssues\")\n\n#############################################################################\n## Issue Bulk Create Lightbox Directive\n#############################################################################\n\nCreateBulkIssuesDirective = ($repo, $rs, $confirm, $rootscope, $loading, lightboxService, $model) ->\n    link = ($scope, $el, attrs) ->\n        form = null\n\n        $scope.$on \"issueform:bulk\", (ctx, projectId, milestoneId, status)->\n            form.reset() if form\n\n            lightboxService.open($el)\n            $scope.new = {\n                projectId: projectId,\n                milestoneId: milestoneId,\n                bulk: \"\"\n            }\n\n        submit = debounce 2000, (event) ->\n            event.preventDefault()\n\n            form = $el.find(\"form\").checksley()\n            if not form.validate()\n                return\n\n            currentLoading = $loading()\n                .target(submitButton)\n                .start()\n\n            data = $scope.new.bulk\n            projectId = $scope.new.projectId\n            milestoneId = $scope.new.milestoneId\n\n            promise = $rs.issues.bulkCreate(projectId, milestoneId, data)\n            promise.then (result) ->\n                result =  _.map(result.data, (x) -> $model.make_model('issues', x))\n                currentLoading.finish()\n                $rootscope.$broadcast(\"issueform:new:success\", result)\n                lightboxService.close($el)\n                $confirm.notify(\"success\")\n\n            promise.then null, ->\n                currentLoading.finish()\n                $confirm.notify(\"error\")\n\n        submitButton = $el.find(\".submit-button\")\n\n        $el.on \"submit\", \"form\", submit\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link: link}\n\nmodule.directive(\"tgLbCreateBulkIssues\", [\"$tgRepo\", \"$tgResources\", \"$tgConfirm\", \"$rootScope\", \"$tgLoading\",\n                                          \"lightboxService\", \"$tgModel\", CreateBulkIssuesDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/issues/list.coffee\n###\n\ntaiga = @.taiga\n\nmixOf = @.taiga.mixOf\ntrim = @.taiga.trim\ntoString = @.taiga.toString\njoinStr = @.taiga.joinStr\ngroupBy = @.taiga.groupBy\nbindOnce = @.taiga.bindOnce\ndebounceLeading = @.taiga.debounceLeading\nstartswith = @.taiga.startswith\nbindMethods = @.taiga.bindMethods\ndebounceLeading = @.taiga.debounceLeading\n\nmodule = angular.module(\"taigaIssues\")\n\n#############################################################################\n## Issues Controller\n#############################################################################\n\nclass IssuesController extends mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin)\n    @.$inject = [\n        \"$scope\",\n        \"$rootScope\",\n        \"$tgRepo\",\n        \"$tgConfirm\",\n        \"$tgResources\",\n        \"$tgUrls\",\n        \"$routeParams\",\n        \"$q\",\n        \"$tgLocation\",\n        \"tgAppMetaService\",\n        \"$tgNavUrls\",\n        \"$tgEvents\",\n        \"$tgAnalytics\",\n        \"$translate\",\n        \"tgErrorHandlingService\",\n        \"$tgStorage\",\n        \"tgFilterRemoteStorageService\",\n        \"tgProjectService\",\n        \"tgUserActivityService\"\n    ]\n\n    filtersHashSuffix: \"issues-filters\"\n    myFiltersHashSuffix: \"issues-my-filters\"\n    excludePrefix: \"exclude_\"\n    filterCategories: [\n        \"tags\",\n        \"status\",\n        \"type\",\n        \"severity\",\n        \"priority\",\n        \"assigned_to\",\n        \"owner\",\n        \"role\",\n    ]\n\n\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @urls, @params, @q, @location, @appMetaService,\n                  @navUrls, @events, @analytics, @translate, @errorHandlingService, @storage, @filterRemoteStorageService, @projectService) ->\n        bindMethods(@)\n\n        @scope.sectionName = @translate.instant(\"PROJECT.SECTION.ISSUES\")\n        @.voting = false\n\n        return if @.applyStoredFilters(@params.pslug, @.filtersHashSuffix)\n\n        promise = @.loadInitialData()\n\n        # On Success\n        promise.then =>\n            title = @translate.instant(\"ISSUES.PAGE_TITLE\", {projectName: @scope.project.name})\n            description = @translate.instant(\"ISSUES.PAGE_DESCRIPTION\", {\n                projectName: @scope.project.name,\n                projectDescription: @scope.project.description\n            })\n            @appMetaService.setAll(title, description)\n\n        # On Error\n        promise.then null, @.onInitialDataError.bind(@)\n\n        @scope.$on \"issueform:new:success\", =>\n            @analytics.trackEvent(\"issue\", \"create\", \"create issue on issues list\", 1)\n            @.loadIssues()\n\n        @scope.$on \"assigned-to:changed\", =>\n            @.generateFilters()\n            if @.isFilterDataTypeSelected('assigned_to') ||\\\n                @.isFilterDataTypeSelected('role') ||\\\n                @.isOrderedBy('assigned_to') || @.isOrderedBy('modified')\n                    @.loadIssues()\n\n        @scope.$on \"status:changed\", =>\n            @.generateFilters()\n            if @.isFilterDataTypeSelected('status') ||\\\n                @.isOrderedBy('status') || @.isOrderedBy('modified')\n                    @.loadIssues()\n\n    isOrderedBy: (fieldName) ->\n        pattern = new RegExp(\"-*\"+fieldName)\n        return pattern.test(@location.search().order_by)\n\n    changeQ: (q) ->\n        @.unselectFilter(\"page\")\n        @.replaceFilter(\"q\", q)\n        @.loadIssues()\n        @.generateFilters()\n\n    removeFilter: (filter) ->\n        @.unselectFilter(\"page\")\n        @.unselectFilter(filter.dataType, filter.id, false, filter.mode)\n        @.loadIssues()\n        @.generateFilters()\n\n    addFilter: (newFilter) ->\n        @.unselectFilter(\"page\")\n        @.selectFilter(newFilter.category.dataType, newFilter.filter.id, false, newFilter.mode)\n        @.loadIssues()\n        @.generateFilters()\n\n    selectCustomFilter: (customFilter) ->\n        orderBy = @location.search().order_by\n\n        if orderBy\n            customFilter.filter.order_by = orderBy\n\n        @.unselectFilter(\"page\")\n        @.replaceAllFilters(customFilter.filter)\n        @.loadIssues()\n        @.generateFilters()\n\n    removeCustomFilter: (customFilter) ->\n        @filterRemoteStorageService.getFilters(@scope.projectId, @.myFiltersHashSuffix).then (userFilters) =>\n            delete userFilters[customFilter.id]\n            @filterRemoteStorageService.storeFilters(@scope.projectId, userFilters, @.myFiltersHashSuffix).then(@.generateFilters)\n\n    isFilterDataTypeSelected: (filterDataType) ->\n        for filter in @.selectedFilters\n            if (filter['dataType'] == filterDataType)\n                return true\n        return false\n\n    saveCustomFilter: (name) ->\n        filters = {}\n        urlfilters = @location.search()\n\n        for key in @.filterCategories\n            excludeKey = @.excludePrefix.concat(key)\n            filters[key] = urlfilters[key]\n            filters[excludeKey] = urlfilters[excludeKey]\n\n        @filterRemoteStorageService.getFilters(@scope.projectId, @.myFiltersHashSuffix).then (userFilters) =>\n            userFilters[name] = filters\n\n            @filterRemoteStorageService.storeFilters(@scope.projectId, userFilters, @.myFiltersHashSuffix).then(@.generateFilters)\n\n    generateFilters: ->\n        @.storeFilters(@params.pslug, @location.search(), @.filtersHashSuffix)\n        urlfilters = @location.search()\n\n        loadFilters = {}\n        loadFilters.project = @scope.projectId\n        loadFilters.q = urlfilters.q\n\n        for key in @.filterCategories\n            excludeKey = @.excludePrefix.concat(key)\n            loadFilters[key] = urlfilters[key]\n            loadFilters[excludeKey] = urlfilters[excludeKey]\n\n        return @q.all([\n            @rs.issues.filtersData(loadFilters),\n            @filterRemoteStorageService.getFilters(@scope.projectId, @.myFiltersHashSuffix)\n        ]).then (result) =>\n            data = result[0]\n            customFiltersRaw = result[1]\n            dataCollection = {}\n\n            dataCollection.status = _.map data.statuses, (it) ->\n                it.id = it.id.toString()\n\n                return it\n            dataCollection.type = _.map data.types, (it) ->\n                it.id = it.id.toString()\n\n                return it\n            dataCollection.severity = _.map data.severities, (it) ->\n                it.id = it.id.toString()\n\n                return it\n            dataCollection.priority = _.map data.priorities, (it) ->\n                it.id = it.id.toString()\n\n                return it\n            dataCollection.tags = _.map data.tags, (it) ->\n                it.id = it.name\n\n                return it\n\n            tagsWithAtLeastOneElement = _.filter dataCollection.tags, (tag) ->\n                return tag.count > 0\n\n            dataCollection.assigned_to = _.map data.assigned_to, (it) ->\n                if it.id\n                    it.id = it.id.toString()\n                else\n                    it.id = \"null\"\n\n                it.name = it.full_name || \"Unassigned\"\n\n                return it\n            dataCollection.owner = _.map data.owners, (it) ->\n                it.id = it.id.toString()\n                it.name = it.full_name\n\n                return it\n            dataCollection.role = _.map data.roles, (it) ->\n                if it.id\n                    it.id = it.id.toString()\n                else\n                    it.id = \"null\"\n\n                it.name = it.name || \"Unassigned\"\n\n                return it\n\n            @.selectedFilters = []\n\n            for key in @.filterCategories\n                excludeKey = @.excludePrefix.concat(key)\n                if loadFilters[key]\n                    selected = @.formatSelectedFilters(key, dataCollection[key], loadFilters[key])\n                    @.selectedFilters = @.selectedFilters.concat(selected)\n                if loadFilters[excludeKey]\n                    selected = @.formatSelectedFilters(key, dataCollection[key], loadFilters[excludeKey], \"exclude\")\n                    @.selectedFilters = @.selectedFilters.concat(selected)\n\n            @.filterQ = loadFilters.q\n\n            @.filters = [\n                {\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.TYPE\"),\n                    dataType: \"type\",\n                    content: dataCollection.type\n                },\n                {\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.SEVERITY\"),\n                    dataType: \"severity\",\n                    content: dataCollection.severity\n                },\n                {\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.PRIORITIES\"),\n                    dataType: \"priority\",\n                    content: dataCollection.priority\n                },\n                {\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.STATUS\"),\n                    dataType: \"status\",\n                    content: dataCollection.status\n                },\n                {\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.TAGS\"),\n                    dataType: \"tags\",\n                    content: dataCollection.tags,\n                    hideEmpty: true,\n                    totalTaggedElements: tagsWithAtLeastOneElement.length\n                },\n                {\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.ASSIGNED_TO\"),\n                    dataType: \"assigned_to\",\n                    content: dataCollection.assigned_to\n                },\n                {\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.ROLE\"),\n                    dataType: \"role\",\n                    content: dataCollection.role\n                },\n                {\n                    title: @translate.instant(\"COMMON.FILTERS.CATEGORIES.CREATED_BY\"),\n                    dataType: \"owner\",\n                    content: dataCollection.owner\n                }\n            ]\n\n            @.customFilters = []\n            _.forOwn customFiltersRaw, (value, key) =>\n                @.customFilters.push({id: key, name: key, filter: value})\n\n    initializeSubscription: ->\n        routingKey = \"changes.project.#{@scope.projectId}.issues\"\n        @events.subscribe @scope, routingKey, debounceLeading(500, (message) =>\n            @.loadIssues())\n\n    loadProject: ->\n        project = @projectService.project.toJS()\n\n        if not project.is_issues_activated\n            @errorHandlingService.permissionDenied()\n\n        @scope.projectId = project.id\n        @scope.project = project\n        @scope.$emit('project:loaded', project)\n\n        @scope.issueStatusById = groupBy(project.issue_statuses, (x) -> x.id)\n        @scope.issueStatusList = _.sortBy(project.issue_statuses, \"order\")\n        @scope.severityById = groupBy(project.severities, (x) -> x.id)\n        @scope.severityList = _.sortBy(project.severities, \"order\")\n        @scope.priorityById = groupBy(project.priorities, (x) -> x.id)\n        @scope.priorityList = _.sortBy(project.priorities, \"order\")\n        @scope.issueTypes = _.sortBy(project.issue_types, \"order\")\n        @scope.issueTypeById = groupBy(project.issue_types, (x) -> x.id)\n\n        return project\n\n    # We need to guarantee that the last petition done here is the finally used\n    # When searching by text loadIssues can be called fastly with different parameters and\n    # can be resolved in a different order than generated\n    # We count the requests made and only if the callback is for the last one data is updated\n    loadIssuesRequests: 0\n    loadIssues: =>\n        params = @location.search()\n\n        promise = @rs.issues.list(@scope.projectId, params)\n        @.loadIssuesRequests += 1\n        promise.index = @.loadIssuesRequests\n        promise.then (data) =>\n            if promise.index == @.loadIssuesRequests\n                @scope.issues = data.models\n                @scope.page = data.current\n                @scope.count = data.count\n                @scope.paginatedBy = data.paginatedBy\n\n            return data\n\n        return promise\n\n    loadInitialData: ->\n        project = @.loadProject()\n\n        @.fillUsersAndRoles(project.members, project.roles)\n        @.initializeSubscription()\n        @.generateFilters()\n\n        return @.loadIssues()\n\n    # Functions used from templates\n    addNewIssue: ->\n        project = @projectService.project.toJS()\n        @rootscope.$broadcast(\"genericform:new\", {\n            'objType': 'issue',\n            'project': project\n        })\n\n    addIssuesInBulk: ->\n        @rootscope.$broadcast(\"issueform:bulk\", @scope.projectId)\n\n    upVoteIssue: (issueId) ->\n        @.voting = issueId\n        onSuccess = =>\n            @.loadIssues()\n            @.voting = null\n        onError = =>\n            @confirm.notify(\"error\")\n            @.voting = null\n\n        return @rs.issues.upvote(issueId).then(onSuccess, onError)\n\n    downVoteIssue: (issueId) ->\n        @.voting = issueId\n        onSuccess = =>\n            @.loadIssues()\n            @.voting = null\n        onError = =>\n            @confirm.notify(\"error\")\n            @.voting = null\n\n        return @rs.issues.downvote(issueId).then(onSuccess, onError)\n\n    getOrderBy: ->\n        if _.isString(@location.search().order_by)\n            return @location.search().order_by\n        else\n            return \"created_date\"\n\nmodule.controller(\"IssuesController\", IssuesController)\n\n#############################################################################\n## Issues Directive\n#############################################################################\n\nIssuesDirective = ($log, $location, $template, $compile) ->\n    ## Issues Pagination\n    template = $template.get(\"issue/issue-paginator.html\", true)\n\n    linkPagination = ($scope, $el, $attrs, $ctrl) ->\n        # Constants\n        afterCurrent = 2\n        beforeCurrent = 4\n        atBegin = 2\n        atEnd = 2\n\n        $pagEl = $el.find(\".issues-paginator\")\n\n        getNumPages = ->\n            numPages = $scope.count / $scope.paginatedBy\n            if parseInt(numPages, 10) < numPages\n                numPages = parseInt(numPages, 10) + 1\n            else\n                numPages = parseInt(numPages, 10)\n\n            return numPages\n\n        renderPagination = ->\n            numPages = getNumPages()\n\n            if numPages <= 1\n                $pagEl.hide()\n                return\n            $pagEl.show()\n\n            pages = []\n            options = {}\n            options.pages = pages\n            options.showPrevious = ($scope.page > 1)\n            options.showNext = not ($scope.page == numPages)\n\n            cpage = $scope.page\n\n            for i in [1..numPages]\n                if i == (cpage + afterCurrent) and numPages > (cpage + afterCurrent + atEnd)\n                    pages.push({classes: \"dots\", type: \"dots\"})\n                else if i == (cpage - beforeCurrent) and cpage > (atBegin + beforeCurrent)\n                    pages.push({classes: \"dots\", type: \"dots\"})\n                else if i > (cpage + afterCurrent) and i <= (numPages - atEnd)\n                else if i < (cpage - beforeCurrent) and i > atBegin\n                else if i == cpage\n                    pages.push({classes: \"active\", num: i, type: \"page-active\"})\n                else\n                    pages.push({classes: \"page\", num: i, type: \"page\"})\n\n\n            html = template(options)\n            html = $compile(html)($scope)\n\n            $pagEl.html(html)\n\n        $scope.$watch \"issues\", (value) ->\n            # Do nothing if value is not logical true\n            return if not value\n\n            renderPagination()\n\n        $el.on \"click\", \".issues-paginator a.next\", (event) ->\n            event.preventDefault()\n\n            $scope.$apply ->\n                $ctrl.selectFilter(\"page\", $scope.page + 1)\n                $ctrl.loadIssues()\n\n        $el.on \"click\", \".issues-paginator a.previous\", (event) ->\n            event.preventDefault()\n            $scope.$apply ->\n                $ctrl.selectFilter(\"page\", $scope.page - 1)\n                $ctrl.loadIssues()\n\n        $el.on \"click\", \".issues-paginator li.page > a\", (event) ->\n            event.preventDefault()\n            target = angular.element(event.currentTarget)\n            pagenum = target.data(\"pagenum\")\n\n            $scope.$apply ->\n                $ctrl.selectFilter(\"page\", pagenum)\n                $ctrl.loadIssues()\n\n    ## Issues Filters\n    linkOrdering = ($scope, $el, $attrs, $ctrl) ->\n        # Draw the arrow the first time\n\n        currentOrder = $ctrl.getOrderBy()\n\n        if currentOrder\n            icon = if startswith(currentOrder, \"-\") then \"icon-arrow-up\" else \"icon-arrow-down\"\n            colHeadElement = $el.find(\".row.title > div[data-fieldname='#{trim(currentOrder, \"-\")}']\")\n\n            svg = $(\"<tg-svg>\").attr(\"svg-icon\", icon)\n\n            colHeadElement.append(svg)\n            $compile(colHeadElement.contents())($scope)\n\n        $el.on \"click\", \".row.title > div\", (event) ->\n            target = angular.element(event.currentTarget)\n\n            currentOrder = $ctrl.getOrderBy()\n            newOrder = target.data(\"fieldname\")\n\n            if newOrder == 'total_voters' and currentOrder != \"-total_voters\"\n                currentOrder = \"total_voters\"\n            finalOrder = if currentOrder == newOrder then \"-#{newOrder}\" else newOrder\n\n            $scope.$apply ->\n                $ctrl.replaceFilter(\"order_by\", finalOrder)\n\n                $ctrl.storeFilters($ctrl.params.pslug, $location.search(), $ctrl.filtersHashSuffix)\n                $ctrl.loadIssues().then ->\n                    # Update the arrow\n                    $el.find(\".row.title > div > tg-svg\").remove()\n                    icon = if startswith(finalOrder, \"-\") then \"icon-arrow-up\" else \"icon-arrow-down\"\n\n                    svg = $(\"<tg-svg>\")\n                        .attr(\"svg-icon\", icon)\n\n                    target.append(svg)\n                    $compile(target.contents())($scope)\n\n    ## Issues Link\n    link = ($scope, $el, $attrs) ->\n        $ctrl = $el.controller()\n        linkOrdering($scope, $el, $attrs, $ctrl)\n        linkPagination($scope, $el, $attrs, $ctrl)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link:link}\n\nmodule.directive(\"tgIssues\", [\"$log\", \"$tgLocation\", \"$tgTemplate\", \"$compile\", IssuesDirective])\n\n\n#############################################################################\n## Issue status Directive (popover for change status)\n#############################################################################\n\nIssueStatusInlineEditionDirective = ($repo, $template, $rootscope) ->\n    ###\n    Print the status of an Issue and a popover to change it.\n    - tg-issue-status-inline-edition: The issue\n\n    Example:\n\n      div.status(tg-issue-status-inline-edition=\"issue\")\n        a.issue-status(href=\"\")\n\n    NOTE: This directive need 'issueStatusById' and 'project'.\n    ###\n    selectionTemplate = $template.get(\"issue/issue-status-inline-edition-selection.html\", true)\n\n    updateIssueStatus = ($el, issue, issueStatusById) ->\n        issueStatusDomParent = $el.find(\".issue-status\")\n        issueStatusDom = $el.find(\".issue-status .issue-status-bind\")\n\n        status = issueStatusById[issue.status]\n\n        if status\n            issueStatusDom.text(status.name)\n            issueStatusDom.prop(\"title\", status.name)\n            issueStatusDomParent.css('color', status.color)\n\n    link = ($scope, $el, $attrs) ->\n        $ctrl = $el.controller()\n        issue = $scope.$eval($attrs.tgIssueStatusInlineEdition)\n\n        $el.on \"click\", \".issue-status\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            $el.find(\".pop-status\").popover().open()\n\n        $el.on \"click\", \".status\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            target = angular.element(event.currentTarget)\n\n            issue.status = target.data(\"status-id\")\n            $el.find(\".pop-status\").popover().close()\n            updateIssueStatus($el, issue, $scope.issueStatusById)\n\n            $scope.$apply () ->\n                $repo.save(issue).then (response) ->\n                    $rootscope.$broadcast(\"status:changed\", response)\n\n        taiga.bindOnce $scope, \"project\", (project) ->\n            $el.append(selectionTemplate({ 'statuses':  project.issue_statuses }))\n            updateIssueStatus($el, issue, $scope.issueStatusById)\n\n            # If the user has not enough permissions the click events are unbinded\n            if project.my_permissions.indexOf(\"modify_issue\") == -1\n                $el.unbind(\"click\")\n                $el.find(\"a\").addClass(\"not-clickable\")\n\n        $scope.$watch $attrs.tgIssueStatusInlineEdition, (val) =>\n            updateIssueStatus($el, val, $scope.issueStatusById)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link: link}\n\nmodule.directive(\"tgIssueStatusInlineEdition\", [\"$tgRepo\", \"$tgTemplate\", \"$rootScope\",\n                                                IssueStatusInlineEditionDirective])\n\n\n#############################################################################\n## Issue assigned to Directive\n#############################################################################\n\nIssueAssignedToInlineEditionDirective = ($repo, $rootscope, $translate, avatarService, $lightboxFactory) ->\n    template = _.template(\"\"\"\n    <img style=\"background-color: <%- bg %>\" src=\"<%- imgurl %>\" alt=\"<%- name %>\"/>\n    <figcaption><%- name %></figcaption>\n    \"\"\")\n\n    link = ($scope, $el, $attrs) ->\n        updateIssue = (issue) ->\n            ctx = {\n                name: $translate.instant(\"COMMON.ASSIGNED_TO.NOT_ASSIGNED\"),\n                imgurl: \"/#{window._version}/images/unnamed.png\"\n            }\n\n            member = $scope.usersById[issue.assigned_to]\n\n            avatar = avatarService.getAvatar(member)\n            ctx.imgurl = avatar.url\n            ctx.bg = null\n\n            if member\n                ctx.name = member.full_name_display\n                ctx.bg = avatar.bg\n\n            $el.find(\".avatar\").html(template(ctx))\n            $el.find(\".issue-assignedto\").attr('title', ctx.name)\n\n        $ctrl = $el.controller()\n        issue = $scope.$eval($attrs.tgIssueAssignedToInlineEdition)\n        updateIssue(issue)\n\n        $el.on \"click\", \".issue-assignedto\", (event) ->\n            onClose = (assignedUsers) =>\n                issue.assigned_to = assignedUsers.pop() || null\n                $repo.save(issue).then ->\n                    updateIssue(issue)\n                    $rootscope.$broadcast(\"assigned-to:changed\", issue)\n\n            $lightboxFactory.create(\n                'tg-lb-select-user',\n                {\n                    \"class\": \"lightbox lightbox-select-user\",\n                },\n                {\n                    \"currentUsers\": [issue.assigned_to],\n                    \"activeUsers\": $scope.activeUsers,\n                    \"onClose\": onClose,\n                    \"single\": true,\n                    \"lbTitle\": $translate.instant(\"COMMON.ASSIGNED_USERS.ADD\"),\n                }\n            )\n\n        taiga.bindOnce $scope, \"project\", (project) ->\n            # If the user has not enough permissions the click events are unbinded\n            if project.my_permissions.indexOf(\"modify_issue\") == -1\n                $el.unbind(\"click\")\n                $el.find(\"a\").addClass(\"not-clickable\")\n\n        $scope.$watch $attrs.tgIssueAssignedToInlineEdition, (val) ->\n            updateIssue(val)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link: link}\n\nmodule.directive(\"tgIssueAssignedToInlineEdition\", [\"$tgRepo\", \"$rootScope\", \"$translate\", \"tgAvatarService\",\n                                                    \"tgLightboxFactory\", IssueAssignedToInlineEditionDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/userstories/detail.coffee\n###\n\ntaiga = @.taiga\n\nmixOf = @.taiga.mixOf\ngroupBy = @.taiga.groupBy\nbindOnce = @.taiga.bindOnce\nbindMethods = @.taiga.bindMethods\n\nmodule = angular.module(\"taigaUserStories\")\n\n#############################################################################\n## User story Detail Controller\n#############################################################################\n\nclass UserStoryDetailController extends mixOf(taiga.Controller, taiga.PageMixin)\n    @.$inject = [\n        \"$scope\",\n        \"$rootScope\",\n        \"$tgRepo\",\n        \"$tgConfirm\",\n        \"$tgResources\",\n        \"$routeParams\",\n        \"$q\",\n        \"$tgLocation\",\n        \"$log\",\n        \"tgAppMetaService\",\n        \"$tgNavUrls\",\n        \"$tgAnalytics\",\n        \"$translate\",\n        \"$tgQueueModelTransformation\",\n        \"tgErrorHandlingService\",\n        \"$tgConfig\",\n        \"tgProjectService\",\n        \"tgWysiwygService\"\n    ]\n\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @params, @q, @location,\n                  @log, @appMetaService, @navUrls, @analytics, @translate, @modelTransform,\n                  @errorHandlingService, @configService, @projectService, @wysiwigService) ->\n        bindMethods(@)\n\n        @scope.usRef = @params.usref\n        @scope.sectionName = @translate.instant(\"US.SECTION_NAME\")\n        @scope.tribeEnabled = @configService.config.tribeHost\n\n        @.initializeEventHandlers()\n\n        promise = @.loadInitialData()\n\n        # On Success\n        promise.then =>\n            @._setMeta()\n            @.initializeOnDeleteGoToUrl()\n\n        # On Error\n        promise.then null, @.onInitialDataError.bind(@)\n\n    _setMeta: ->\n        totalTasks = @scope.tasks.length\n        closedTasks = _.filter(@scope.tasks, (t) => @scope.taskStatusById[t.status].is_closed).length\n        progressPercentage = if totalTasks > 0 then Math.round(100 * closedTasks / totalTasks) else 0\n\n        title = @translate.instant(\"US.PAGE_TITLE\", {\n            userStoryRef: \"##{@scope.us.ref}\"\n            userStorySubject: @scope.us.subject\n            projectName: @scope.project.name\n        })\n        description = @translate.instant(\"US.PAGE_DESCRIPTION\", {\n            userStoryStatus: @scope.statusById[@scope.us.status]?.name or \"--\"\n            userStoryPoints: @scope.us.total_points\n            userStoryDescription: angular.element(@wysiwigService.getHTML(@scope.us.description) or \"\").text()\n            userStoryClosedTasks: closedTasks\n            userStoryTotalTasks: totalTasks\n            userStoryProgressPercentage: progressPercentage\n        })\n\n        @appMetaService.setAll(title, description)\n\n    initializeEventHandlers: ->\n        @scope.relateToEpic = (us) =>\n            @scope.$broadcast(\"relate-to-epic:add\", us)\n\n        @scope.$on \"related-tasks:update\", =>\n            @.loadTasks()\n            @scope.tasks = _.clone(@scope.tasks, false)\n            allClosed = _.every @scope.tasks, (task) -> return task.is_closed\n\n            if @scope.us.is_closed != allClosed\n                @.loadUs()\n\n        @scope.$on \"attachment:create\", =>\n            @analytics.trackEvent(\"attachment\", \"create\", \"create attachment on userstory\", 1)\n\n        @scope.$on \"task:reorder\", (event, task, newIndex) =>\n            @.reorderTask(task, newIndex)\n\n        @scope.$on \"comment:new\", =>\n            @.loadUs()\n\n    initializeOnDeleteGoToUrl: ->\n        ctx = {project: @scope.project.slug}\n        @scope.onDeleteGoToUrl = @navUrls.resolve(\"project\", ctx)\n        if @scope.project.is_backlog_activated\n            if @scope.us.milestone\n                ctx.sprint = @scope.sprint.slug\n                @scope.onDeleteGoToUrl = @navUrls.resolve(\"project-taskboard\", ctx)\n            else\n                @scope.onDeleteGoToUrl = @navUrls.resolve(\"project-backlog\", ctx)\n        else if @scope.project.is_kanban_activated\n            @scope.onDeleteGoToUrl = @navUrls.resolve(\"project-kanban\", ctx)\n\n    loadProject: ->\n        project = @projectService.project.toJS()\n\n        @scope.projectId = project.id\n        @scope.project = project\n        @scope.$emit('project:loaded', project)\n        @scope.statusList = project.us_statuses\n        @scope.statusById = groupBy(project.us_statuses, (x) -> x.id)\n        @scope.taskStatusById = groupBy(project.task_statuses, (x) -> x.id)\n        @scope.pointsList = _.sortBy(project.points, \"order\")\n        @scope.pointsById = groupBy(@scope.pointsList, (e) -> e.id)\n        return project\n\n    loadUs: ->\n        httpParams = _.pick(@location.search(), \"milestone\", \"no-milestone\", \"kanban-status\")\n        milestone = httpParams.milestone\n        if milestone\n            @rs.userstories.storeQueryParams(@scope.projectId, {\n                milestone: milestone\n                order_by: \"sprint_order\"\n            })\n\n        noMilestone = httpParams[\"no-milestone\"]\n        if noMilestone\n            @rs.userstories.storeQueryParams(@scope.projectId, {\n                milestone: \"null\"\n                order_by: \"backlog_order\"\n            })\n\n        kanbanStaus = httpParams[\"kanban-status\"]\n        if kanbanStaus\n            @rs.userstories.storeQueryParams(@scope.projectId, {\n                status: kanbanStaus\n                order_by: \"kanban_order\"\n            })\n\n\n\n        return @rs.userstories.getByRef(@scope.projectId, @params.usref).then (us) =>\n            @rootscope.$broadcast(\"userstory:loaded\", us)\n\n            @scope.us = us\n            @scope.usId = us.id\n            @scope.commentModel = us\n\n            @modelTransform.setObject(@scope, 'us')\n\n            return us\n\n    loadSprint: ->\n        if @scope.us.milestone\n            return @rs.sprints.get(@scope.us.project, @scope.us.milestone).then (sprint) =>\n                @scope.sprint = sprint\n                return sprint\n\n    loadTasks: ->\n        return @rs.tasks.list(@scope.projectId, null, @scope.usId).then (tasks) =>\n            @scope.tasks = tasks\n            return tasks\n\n    loadInitialData: ->\n        project = @.loadProject()\n        @.fillUsersAndRoles(project.members, project.roles)\n        @.loadUs().then(=> @q.all([@.loadSprint(), @.loadTasks()]))\n\n    ###\n    # Note: This methods (onUpvote() and onDownvote()) are related to tg-vote-button.\n    #       See app/modules/components/vote-button for more info\n    ###\n    onUpvote: ->\n        onSuccess = =>\n            @.loadUs()\n            @rootscope.$broadcast(\"object:updated\")\n        onError = =>\n            @confirm.notify(\"error\")\n\n        return @rs.userstories.upvote(@scope.usId).then(onSuccess, onError)\n\n    onDownvote: ->\n        onSuccess = =>\n            @.loadUs()\n            @rootscope.$broadcast(\"object:updated\")\n        onError = =>\n            @confirm.notify(\"error\")\n\n        return @rs.userstories.downvote(@scope.usId).then(onSuccess, onError)\n\n    ###\n    # Note: This methods (onWatch() and onUnwatch()) are related to tg-watch-button.\n    #       See app/modules/components/watch-button for more info\n    ###\n    onWatch: ->\n        onSuccess = =>\n            @.loadUs()\n            @rootscope.$broadcast(\"object:updated\")\n        onError = =>\n            @confirm.notify(\"error\")\n\n        return @rs.userstories.watch(@scope.usId).then(onSuccess, onError)\n\n    onUnwatch: ->\n        onSuccess = =>\n            @.loadUs()\n            @rootscope.$broadcast(\"object:updated\")\n        onError = =>\n            @confirm.notify(\"error\")\n\n        return @rs.userstories.unwatch(@scope.usId).then(onSuccess, onError)\n\n    onTribeInfo: ->\n        publishTitle = @translate.instant(\"US.TRIBE.PUBLISH_MORE_INFO_TITLE\")\n        image = $('<img />')\n            .attr({\n                'src': \"/#{window._version}/images/monster-fight.png\",\n                'alt': @translate.instant(\"US.TRIBE.PUBLISH_MORE_INFO_TITLE\")\n            })\n        text = @translate.instant(\"US.TRIBE.PUBLISH_MORE_INFO_TEXT\")\n        publishDesc = $('<div></div>').append(image).append(text)\n        @confirm.success(publishTitle, publishDesc)\n\n    reorderTask: (task, newIndex) ->\n        orderList = {}\n        @scope.tasks.forEach (it) ->\n            orderList[it.id] = it.us_order\n\n        withoutMoved = @scope.tasks.filter (it) -> it.id != task.id\n        beforeDestination = withoutMoved.slice(0, newIndex)\n        afterDestination = withoutMoved.slice(newIndex)\n\n        previous = beforeDestination[beforeDestination.length - 1]\n        newOrder = if !previous then 0 else previous.us_order + 1\n\n        orderList[task.id] = newOrder\n\n        previousWithTheSameOrder = beforeDestination.filter (it) ->\n            it.us_order == previous.us_order\n\n        setOrders = _.fromPairs previousWithTheSameOrder.map((it) ->\n            [it.id, it.us_order]\n        )\n\n        afterDestination.forEach (it) -> orderList[it.id] = it.us_order + 1\n\n        @scope.tasks =  _.map(@scope.tasks, (it) ->\n            it.us_order = orderList[it.id]\n            return it\n        )\n        @scope.tasks = _.sortBy(@scope.tasks, \"us_order\")\n\n        data = {\n            us_order: newOrder,\n            version: task.version\n        }\n\n        return @rs.tasks.reorder(task.id, data, setOrders).then (newTask) =>\n            @scope.tasks =  _.map(@scope.tasks, (it) ->\n                return if it.id == newTask.id then newTask else it\n            )\n            @rootscope.$broadcast(\"related-tasks:reordered\")\n\n    \n\nmodule.controller(\"UserStoryDetailController\", UserStoryDetailController)\n\n\n#############################################################################\n## User story status display directive\n#############################################################################\n\nUsStatusDisplayDirective = ($template, $compile) ->\n    # Display if a US is open or closed and its kanban status.\n    #\n    # Example:\n    #     tg-us-status-display(ng-model=\"us\")\n    #\n    # Requirements:\n    #   - US object (ng-model)\n    #   - scope.statusById object\n\n    template = $template.get(\"common/components/status-display.html\", true)\n\n    link = ($scope, $el, $attrs) ->\n        render = (us) ->\n            status = $scope.statusById[us.status]\n\n            html = template({\n                is_closed: us.is_closed\n                status: status\n            })\n\n            html = $compile(html)($scope)\n            $el.html(html)\n\n        $scope.$watch $attrs.ngModel, (us) ->\n            render(us) if us?\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link: link\n        restrict: \"EA\"\n        require: \"ngModel\"\n    }\n\nmodule.directive(\"tgUsStatusDisplay\", [\"$tgTemplate\", \"$compile\", UsStatusDisplayDirective])\n\n#############################################################################\n## User story status button directive\n#############################################################################\n\nUsStatusButtonDirective = ($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) ->\n    # Display the status of a US and you can edit it.\n    #\n    # Example:\n    #     tg-us-status-button(ng-model=\"us\")\n    #\n    # Requirements:\n    #   - Us object (ng-model)\n    #   - scope.statusById object\n    #   - $scope.project.my_permissions\n\n    template = $template.get(\"common/components/status-button.html\", true)\n\n    link = ($scope, $el, $attrs, $model) ->\n        isEditable = ->\n            return $scope.project.my_permissions.indexOf(\"modify_us\") != -1\n\n        render = (us) =>\n            status = $scope.statusById[us.status]\n\n            html = template({\n                status: status\n                statuses: $scope.statusList\n                editable: isEditable()\n            })\n\n            $el.html(html)\n\n            $compile($el.contents())($scope)\n\n        save = (status) =>\n            $el.find(\".pop-status\").popover().close()\n\n            currentLoading = $loading()\n                .target($el.find('.js-edit-status'))\n                .start()\n\n            transform = $modelTransform.save (us) ->\n                us.status = status\n\n                return us\n\n            onSuccess = ->\n                $rootScope.$broadcast(\"object:updated\")\n                currentLoading.finish()\n\n            onError = ->\n                $confirm.notify(\"error\")\n                currentLoading.finish()\n\n            transform.then(onSuccess, onError)\n\n        $el.on \"click\", \".js-edit-status\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            return if not isEditable()\n\n            $el.find(\".pop-status\").popover().open()\n\n        $el.on \"click\", \".status\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            return if not isEditable()\n\n            target = angular.element(event.currentTarget)\n            status = target.data(\"status-id\")\n\n            save(status)\n\n        $scope.$watch () ->\n            return $model.$modelValue?.status\n        , () ->\n            us = $model.$modelValue\n\n            render(us) if us\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link: link\n        restrict: \"EA\"\n        require: \"ngModel\"\n    }\n\nmodule.directive(\"tgUsStatusButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\",\"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\",\n                                      UsStatusButtonDirective])\n\n\n#############################################################################\n## User story team requirements button directive\n#############################################################################\n\nUsTeamRequirementButtonDirective = ($rootscope, $tgrepo, $confirm, $loading, $modelTransform, $template, $compile) ->\n    template = $template.get(\"us/us-team-requirement-button.html\", true)\n\n    link = ($scope, $el, $attrs, $model) ->\n        canEdit = ->\n            return $scope.project.my_permissions.indexOf(\"modify_us\") != -1\n\n        render = (us) ->\n            ctx = {\n                canEdit: canEdit()\n                isRequired: us.team_requirement\n            }\n            html = template(ctx)\n            html = $compile(html)($scope)\n\n            $el.html(html)\n\n        save = (team_requirement) ->\n            currentLoading = $loading()\n                .target($el.find(\"label\"))\n                .start()\n\n            transform = $modelTransform.save (us) ->\n                us.team_requirement = team_requirement\n\n                return us\n\n            transform.then =>\n                currentLoading.finish()\n                $rootscope.$broadcast(\"object:updated\")\n\n            transform.then null, ->\n                currentLoading.finish()\n                $confirm.notify(\"error\")\n\n        $el.on \"click\", \".team-requirement\", (event) ->\n            return if not canEdit()\n\n            team_requirement = not $model.$modelValue.team_requirement\n\n            save(team_requirement)\n\n        $scope.$watch () ->\n            return $model.$modelValue?.team_requirement\n        , () ->\n            us = $model.$modelValue\n\n            render(us) if us\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link: link\n        restrict: \"EA\"\n        require: \"ngModel\"\n    }\n\nmodule.directive(\"tgUsTeamRequirementButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", UsTeamRequirementButtonDirective])\n\n#############################################################################\n## User story client requirements button directive\n#############################################################################\n\nUsClientRequirementButtonDirective = ($rootscope, $tgrepo, $confirm, $loading, $modelTransform, $template, $compile) ->\n    template = $template.get(\"us/us-client-requirement-button.html\", true)\n\n    link = ($scope, $el, $attrs, $model) ->\n        canEdit = ->\n            return $scope.project.my_permissions.indexOf(\"modify_us\") != -1\n\n        render = (us) ->\n            ctx = {\n                canEdit: canEdit()\n                isRequired: us.client_requirement\n            }\n            html = $compile(template(ctx))($scope)\n            $el.html(html)\n\n        save = (client_requirement) ->\n            currentLoading = $loading()\n                .target($el.find(\"label\"))\n                .start()\n\n            transform = $modelTransform.save (us) ->\n                us.client_requirement = client_requirement\n\n                return us\n\n            transform.then =>\n                currentLoading.finish()\n                $rootscope.$broadcast(\"object:updated\")\n\n            transform.then null, ->\n                $confirm.notify(\"error\")\n\n        $el.on \"click\", \".client-requirement\", (event) ->\n            return if not canEdit()\n\n            client_requirement = not $model.$modelValue.client_requirement\n            save(client_requirement)\n\n        $scope.$watch () ->\n            return $model.$modelValue?.client_requirement\n        , () ->\n            us = $model.$modelValue\n            render(us) if us\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link: link\n        restrict: \"EA\"\n        require: \"ngModel\"\n    }\n\nmodule.directive(\"tgUsClientRequirementButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\",\n                                                 UsClientRequirementButtonDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/tasks/detail.coffee\n###\n\ntaiga = @.taiga\n\nmixOf = @.taiga.mixOf\ngroupBy = @.taiga.groupBy\nbindMethods = @.taiga.bindMethods\n\nmodule = angular.module(\"taigaTasks\")\n\n\n#############################################################################\n## Task Detail Controller\n#############################################################################\n\nclass TaskDetailController extends mixOf(taiga.Controller, taiga.PageMixin)\n    @.$inject = [\n        \"$scope\",\n        \"$rootScope\",\n        \"$tgRepo\",\n        \"$tgConfirm\",\n        \"$tgResources\",\n        \"$routeParams\",\n        \"$q\",\n        \"$tgLocation\",\n        \"$log\",\n        \"tgAppMetaService\",\n        \"$tgNavUrls\",\n        \"$tgAnalytics\",\n        \"$translate\",\n        \"$tgQueueModelTransformation\",\n        \"tgErrorHandlingService\",\n        \"tgProjectService\"\n    ]\n\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @params, @q, @location,\n                  @log, @appMetaService, @navUrls, @analytics, @translate, @modelTransform, @errorHandlingService, @projectService) ->\n        bindMethods(@)\n\n        @scope.taskRef = @params.taskref\n        @scope.sectionName = @translate.instant(\"TASK.SECTION_NAME\")\n        @.initializeEventHandlers()\n\n        promise = @.loadInitialData()\n\n        promise.then () =>\n            @._setMeta()\n            @.initializeOnDeleteGoToUrl()\n\n        promise.then null, @.onInitialDataError.bind(@)\n\n    _setMeta: ->\n        title = @translate.instant(\"TASK.PAGE_TITLE\", {\n            taskRef: \"##{@scope.task.ref}\"\n            taskSubject: @scope.task.subject\n            projectName: @scope.project.name\n        })\n        description = @translate.instant(\"TASK.PAGE_DESCRIPTION\", {\n            taskStatus: @scope.statusById[@scope.task.status]?.name or \"--\"\n            taskDescription: angular.element(@scope.task.description_html or \"\").text()\n        })\n        @appMetaService.setAll(title, description)\n\n    initializeEventHandlers: ->\n        @scope.$on \"promote-task-to-us:success\", =>\n            @analytics.trackEvent(\"task\", \"promoteToUserstory\", \"promote task to userstory\", 1)\n            @rootscope.$broadcast(\"object:updated\")\n            @.loadTask()\n        @scope.$on \"attachment:create\", =>\n            @analytics.trackEvent(\"attachment\", \"create\", \"create attachment on task\", 1)\n        @scope.$on \"custom-attributes-values:edit\", =>\n            @rootscope.$broadcast(\"object:updated\")\n        @scope.$on \"comment:new\", =>\n            @.loadTask()\n\n    initializeOnDeleteGoToUrl: ->\n        ctx = {project: @scope.project.slug}\n        @scope.onDeleteGoToUrl = @navUrls.resolve(\"project\", ctx)\n        if @scope.project.is_backlog_activated\n            if @scope.task.milestone\n                ctx.sprint = @scope.sprint.slug\n                @scope.onDeleteGoToUrl = @navUrls.resolve(\"project-taskboard\", ctx)\n            else if @scope.task.us\n                ctx.ref = @scope.us.ref\n                @scope.onDeleteGoToUrl = @navUrls.resolve(\"project-userstories-detail\", ctx)\n        else if @scope.project.is_kanban_activated\n            if @scope.us\n                ctx.ref = @scope.us.ref\n                @scope.onDeleteGoToUrl = @navUrls.resolve(\"project-userstories-detail\", ctx)\n\n    loadProject: ->\n        project = @projectService.project.toJS()\n\n        @scope.projectId = project.id\n        @scope.project = project\n        @scope.$emit('project:loaded', project)\n        @scope.statusList = project.task_statuses\n        @scope.statusById = groupBy(project.task_statuses, (x) -> x.id)\n        return project\n\n    loadTask: ->\n        return @rs.tasks.getByRef(@scope.projectId, @params.taskref).then (task) =>\n            @scope.task = task\n            @scope.taskId = task.id\n            @scope.commentModel = task\n\n            @modelTransform.setObject(@scope, 'task')\n\n            if @scope.task.neighbors.previous?.ref?\n                ctx = {\n                    project: @scope.project.slug\n                    ref: @scope.task.neighbors.previous.ref\n                }\n                @scope.previousUrl = @navUrls.resolve(\"project-tasks-detail\", ctx)\n\n            if @scope.task.neighbors.next?.ref?\n                ctx = {\n                    project: @scope.project.slug\n                    ref: @scope.task.neighbors.next.ref\n                }\n                @scope.nextUrl = @navUrls.resolve(\"project-tasks-detail\", ctx)\n            return task\n\n    loadSprint: ->\n        if @scope.task.milestone\n            return @rs.sprints.get(@scope.task.project, @scope.task.milestone).then (sprint) =>\n                @scope.sprint = sprint\n                return sprint\n\n    loadUserStory: ->\n        if @scope.task.user_story\n            return @rs.userstories.get(@scope.task.project, @scope.task.user_story).then (us) =>\n                @scope.us = us\n                return us\n\n    loadInitialData: ->\n        project = @.loadProject()\n\n        @.fillUsersAndRoles(project.members, project.roles)\n        return @.loadTask().then(=> @q.all([@.loadSprint(), @.loadUserStory()]))\n\n    ###\n    # Note: This methods (onUpvote() and onDownvote()) are related to tg-vote-button.\n    #       See app/modules/components/vote-button for more info\n    ###\n    onUpvote: ->\n        onSuccess = =>\n            @.loadTask()\n            @rootscope.$broadcast(\"object:updated\")\n        onError = =>\n            @confirm.notify(\"error\")\n\n        return @rs.tasks.upvote(@scope.taskId).then(onSuccess, onError)\n\n    onDownvote: ->\n        onSuccess = =>\n            @.loadTask()\n            @rootscope.$broadcast(\"object:updated\")\n        onError = =>\n            @confirm.notify(\"error\")\n\n        return @rs.tasks.downvote(@scope.taskId).then(onSuccess, onError)\n\n    ###\n    # Note: This methods (onWatch() and onUnwatch()) are related to tg-watch-button.\n    #       See app/modules/components/watch-button for more info\n    ###\n    onWatch: ->\n        onSuccess = =>\n            @.loadTask()\n            @rootscope.$broadcast(\"object:updated\")\n        onError = =>\n            @confirm.notify(\"error\")\n\n        return @rs.tasks.watch(@scope.taskId).then(onSuccess, onError)\n\n    onUnwatch: ->\n        onSuccess = =>\n            @.loadTask()\n            @rootscope.$broadcast(\"object:updated\")\n        onError = =>\n            @confirm.notify(\"error\")\n\n        return @rs.tasks.unwatch(@scope.taskId).then(onSuccess, onError)\n\nmodule.controller(\"TaskDetailController\", TaskDetailController)\n\n\n#############################################################################\n## Task status display directive\n#############################################################################\n\nTaskStatusDisplayDirective = ($template, $compile) ->\n    # Display if a Task is open or closed and its taskboard status.\n    #\n    # Example:\n    #     tg-task-status-display(ng-model=\"task\")\n    #\n    # Requirements:\n    #   - Task object (ng-model)\n    #   - scope.statusById object\n\n    template = $template.get(\"common/components/status-display.html\", true)\n\n    link = ($scope, $el, $attrs) ->\n        render = (task) ->\n            status =  $scope.statusById[task.status]\n\n            html = template({\n                is_closed: status.is_closed\n                status: status\n            })\n\n            html = $compile(html)($scope)\n            $el.html(html)\n\n        $scope.$watch $attrs.ngModel, (task) ->\n            render(task) if task?\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link: link\n        restrict: \"EA\"\n        require: \"ngModel\"\n    }\n\nmodule.directive(\"tgTaskStatusDisplay\", [\"$tgTemplate\", \"$compile\", TaskStatusDisplayDirective])\n\n\n#############################################################################\n## Task status button directive\n#############################################################################\n\nTaskStatusButtonDirective = ($rootScope, $repo, $confirm, $loading, $modelTransform, $compile, $translate, $template) ->\n    # Display the status of Task and you can edit it.\n    #\n    # Example:\n    #     tg-task-status-button(ng-model=\"task\")\n    #\n    # Requirements:\n    #   - Task object (ng-model)\n    #   - scope.statusById object\n    #   - $scope.project.my_permissions\n\n    template = $template.get(\"common/components/status-button.html\", true)\n\n    link = ($scope, $el, $attrs, $model) ->\n        isEditable = ->\n            return $scope.project.my_permissions.indexOf(\"modify_task\") != -1\n\n        render = (task) =>\n            status = $scope.statusById[task.status]\n\n            html = $compile(template({\n                status: status\n                statuses: $scope.statusList\n                editable: isEditable()\n            }))($scope)\n\n            $el.html(html)\n\n        save = (status) ->\n            currentLoading = $loading()\n                .target($el)\n                .start()\n\n            transform = $modelTransform.save (task) ->\n                task.status = status\n\n                return task\n\n            onSuccess = ->\n                $rootScope.$broadcast(\"object:updated\")\n                currentLoading.finish()\n\n            onError = ->\n                $confirm.notify(\"error\")\n                currentLoading.finish()\n\n            transform.then(onSuccess, onError)\n\n        $el.on \"click\", \".js-edit-status\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            return if not isEditable()\n\n            $el.find(\".pop-status\").popover().open()\n\n        $el.on \"click\", \".status\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            return if not isEditable()\n\n            target = angular.element(event.currentTarget)\n\n            $.fn.popover().closeAll()\n\n            save(target.data(\"status-id\"))\n\n        $scope.$watch () ->\n            return $model.$modelValue?.status\n        , () ->\n            task = $model.$modelValue\n            render(task) if task\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link: link\n        restrict: \"EA\"\n        require: \"ngModel\"\n    }\n\nmodule.directive(\"tgTaskStatusButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\",\n                                        \"$compile\", \"$translate\", \"$tgTemplate\", TaskStatusButtonDirective])\n\n\nTaskIsIocaineButtonDirective = ($rootscope, $tgrepo, $confirm, $loading, $modelTransform, $compile, $template) ->\n    template = $template.get(\"issue/iocaine-button.html\", true)\n\n    link = ($scope, $el, $attrs, $model) ->\n        isEditable = ->\n            return $scope.project.my_permissions.indexOf(\"modify_task\") != -1\n\n        render = (task) ->\n            if not isEditable() and not task.is_iocaine\n                $el.html(\"\")\n                return\n\n            ctx = {\n                isIocaine: task.is_iocaine\n                isEditable: isEditable()\n            }\n            html = $compile(template(ctx))($scope)\n            $el.html(html)\n\n        save = (is_iocaine) ->\n            currentLoading = $loading()\n                .target($el.find('label'))\n                .start()\n\n            transform = $modelTransform.save (task) ->\n                task.is_iocaine = is_iocaine\n\n                return task\n\n            transform.then ->\n                $rootscope.$broadcast(\"object:updated\")\n\n            transform.then null, ->\n                $confirm.notify(\"error\")\n\n            transform.finally ->\n                currentLoading.finish()\n\n        $el.on \"click\", \".is-iocaine\", (event) ->\n            return if not isEditable()\n\n            is_iocaine = not $model.$modelValue.is_iocaine\n            save(is_iocaine)\n\n        $scope.$watch () ->\n            return $model.$modelValue?.is_iocaine\n        , () ->\n            task = $model.$modelValue\n            render(task) if task\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link: link\n        restrict: \"EA\"\n        require: \"ngModel\"\n    }\n\nmodule.directive(\"tgTaskIsIocaineButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\",\n                                           \"$compile\", \"$tgTemplate\", TaskIsIocaineButtonDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/team/main.coffee\n###\n\ntaiga = @.taiga\n\nmixOf = @.taiga.mixOf\n\nmodule = angular.module(\"taigaTeam\")\n\n#############################################################################\n## Team Controller\n#############################################################################\n\nclass TeamController extends mixOf(taiga.Controller, taiga.PageMixin)\n    @.$inject = [\n        \"$scope\",\n        \"$rootScope\",\n        \"$tgRepo\",\n        \"$tgResources\",\n        \"$routeParams\",\n        \"$q\",\n        \"$location\",\n        \"$tgNavUrls\",\n        \"tgAppMetaService\",\n        \"$tgAuth\",\n        \"$translate\",\n        \"tgProjectService\",\n        \"tgErrorHandlingService\"\n    ]\n\n    constructor: (@scope, @rootscope, @repo, @rs, @params, @q, @location, @navUrls, @appMetaService, @auth,\n                  @translate, @projectService, @errorHandlingService) ->\n        @scope.sectionName = \"TEAM.SECTION_NAME\"\n\n        promise = @.loadInitialData()\n\n        # On Success\n        promise.then =>\n            title = @translate.instant(\"TEAM.PAGE_TITLE\", {projectName: @scope.project.name})\n            description = @translate.instant(\"TEAM.PAGE_DESCRIPTION\", {\n                projectName: @scope.project.name,\n                projectDescription: @scope.project.description\n            })\n            @appMetaService.setAll(title, description)\n\n        # On Error\n        promise.then null, @.onInitialDataError.bind(@)\n\n    setRole: (role) ->\n        if role\n            @scope.filtersRole = role\n        else\n            @scope.filtersRole = null\n\n    loadMembers: ->\n        user = @auth.getUser()\n\n        # Calculate totals\n        @scope.totals = {}\n        for member in @scope.activeUsers\n            @scope.totals[member.id] = 0\n\n        # Get current user\n        @scope.currentUser = _.find(@scope.activeUsers, {id: user?.id})\n\n        # Get member list without current user\n        @scope.memberships = _.reject(@scope.activeUsers, {id: user?.id})\n\n    loadProject: ->\n        project = @projectService.project.toJS()\n\n        @scope.projectId = project.id\n        @scope.project = project\n        @scope.$emit('project:loaded', project)\n\n        @scope.issuesEnabled = project.is_issues_activated\n        @scope.tasksEnabled = project.is_kanban_activated or project.is_backlog_activated\n        @scope.wikiEnabled = project.is_wiki_activated\n        @scope.owner = project.owner.id\n\n        return project\n\n    loadMemberStats: ->\n        return @rs.projects.memberStats(@scope.projectId).then (stats) =>\n          totals = {}\n          _.forEach @scope.totals, (total, userId) =>\n              vals = _.map(stats, (memberStats, statsKey) -> memberStats[userId])\n              total = _.reduce(vals, (sum, el) -> sum + el)\n              @scope.totals[userId] = total\n\n          @scope.stats = @._processStats(stats)\n          @scope.stats.totals = @scope.totals\n\n    _processStat: (stat) ->\n        max = _.max(_.toArray(stat))\n        min = _.min(_.toArray(stat))\n\n        singleStat = Object()\n        for own key, value of stat\n            if value == min\n                singleStat[key] = 0.1\n            else if value == max\n                singleStat[key] = 1\n            else\n                singleStat[key] = (value * 0.5) / max\n\n        return singleStat\n\n    _processStats: (stats) ->\n        for key,value of stats\n            stats[key] = @._processStat(value)\n        return stats\n\n    loadInitialData: ->\n        project = @.loadProject()\n\n        @.fillUsersAndRoles(project.members, project.roles)\n        @.loadMembers()\n\n        userRoles = _.map @scope.users, (user) -> user.role\n\n        @scope.roles = _.filter @scope.roles, (role) -> userRoles.indexOf(role.id) != -1\n\n        return @.loadMemberStats()\n\nmodule.controller(\"TeamController\", TeamController)\n\n\n#############################################################################\n## Team Filters Directive\n#############################################################################\n\nTeamFiltersDirective = () ->\n    return {\n        templateUrl: \"team/team-filter.html\"\n    }\n\nmodule.directive(\"tgTeamFilters\", [TeamFiltersDirective])\n\n\n#############################################################################\n## Team Member Stats Directive\n#############################################################################\n\nTeamMemberStatsDirective = () ->\n    return {\n        templateUrl: \"team/team-member-stats.html\",\n        scope: {\n            stats: \"=\",\n            userId: \"=user\"\n            issuesEnabled: \"=issuesenabled\"\n            tasksEnabled: \"=tasksenabled\"\n            wikiEnabled: \"=wikienabled\"\n        }\n    }\n\nmodule.directive(\"tgTeamMemberStats\", TeamMemberStatsDirective)\n\n\n#############################################################################\n## Team Current User Directive\n#############################################################################\n\nTeamMemberCurrentUserDirective = () ->\n    return {\n        templateUrl: \"team/team-member-current-user.html\"\n        scope: {\n            project: \"=project\",\n            currentUser: \"=currentuser\",\n            stats: \"=\",\n            issuesEnabled: \"=issuesenabled\",\n            tasksEnabled: \"=tasksenabled\",\n            wikiEnabled: \"=wikienabled\",\n            owner: \"=owner\"\n        }\n    }\n\nmodule.directive(\"tgTeamCurrentUser\", TeamMemberCurrentUserDirective)\n\n\n#############################################################################\n## Team Members Directive\n#############################################################################\n\nTeamMembersDirective = () ->\n    template = \"team/team-members.html\"\n\n    return {\n        templateUrl: template\n        scope: {\n            memberships: \"=\",\n            filtersQ: \"=filtersq\",\n            filtersRole: \"=filtersrole\",\n            stats: \"=\",\n            issuesEnabled: \"=issuesenabled\",\n            tasksEnabled: \"=tasksenabled\",\n            wikiEnabled: \"=wikienabled\",\n            owner: \"=owner\"\n        }\n    }\n\nmodule.directive(\"tgTeamMembers\", TeamMembersDirective)\n\n\n#############################################################################\n## Leave project Directive\n#############################################################################\n\nLeaveProjectDirective = ($repo, $confirm, $location, $rs, $navurls, $translate, lightboxFactory, currentUserService) ->\n    link = ($scope, $el, $attrs) ->\n        leaveConfirm = () ->\n            leave_project_text = $translate.instant(\"TEAM.ACTION_LEAVE_PROJECT\")\n            confirm_leave_project_text = $translate.instant(\"TEAM.CONFIRM_LEAVE_PROJECT\")\n\n            $confirm.ask(leave_project_text, confirm_leave_project_text).then (response) =>\n                promise = $rs.projects.leave($scope.project.id)\n\n                promise.then =>\n                    currentUserService.loadProjects().then () ->\n                        response.finish()\n                        $confirm.notify(\"success\")\n                        $location.path($navurls.resolve(\"home\"))\n\n                promise.then null, (response) ->\n                    response.finish()\n                    $confirm.notify('error', response.data._error_message)\n\n        $scope.leave = () ->\n            if $scope.project.owner.id == $scope.user.id\n                lightboxFactory.create(\"tg-lightbox-leave-project-warning\", {\n                    class: \"lightbox lightbox-leave-project-warning\"\n                }, {\n                    isCurrentUser: true,\n                    project: $scope.project\n                })\n            else\n                leaveConfirm()\n\n    return {\n        scope: {\n            user: \"=\",\n            project: \"=\"\n        },\n        templateUrl: \"team/leave-project.html\",\n        link: link\n    }\n\nmodule.directive(\"tgLeaveProject\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"$tgResources\", \"$tgNavUrls\", \"$translate\", \"tgLightboxFactory\", \"tgCurrentUserService\",\n                                    LeaveProjectDirective])\n\n\n#############################################################################\n## Team Filters\n#############################################################################\n\nmembersFilter = ->\n    return (members, filtersQ, filtersRole) ->\n        return _.filter members, (m) -> (not filtersRole or m.role == filtersRole.id) and\n                                        (not filtersQ or m.full_name.search(new RegExp(filtersQ, \"i\")) >= 0)\n\nmodule.filter('membersFilter', membersFilter)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/wiki/main.coffee\n###\n\ntaiga = @.taiga\n\nmixOf = @.taiga.mixOf\ngroupBy = @.taiga.groupBy\nbindOnce = @.taiga.bindOnce\ndebounce = @.taiga.debounce\n\nmodule = angular.module(\"taigaWiki\")\n\n#############################################################################\n## Wiki Detail Controller\n#############################################################################\n\nclass WikiDetailController extends mixOf(taiga.Controller, taiga.PageMixin)\n    @.$inject = [\n        \"$scope\",\n        \"$rootScope\",\n        \"$tgRepo\",\n        \"$tgModel\",\n        \"$tgConfirm\",\n        \"$tgResources\",\n        \"$routeParams\",\n        \"$q\",\n        \"$tgLocation\",\n        \"$filter\",\n        \"$log\",\n        \"tgAppMetaService\",\n        \"$tgNavUrls\",\n        \"$tgAnalytics\",\n        \"$translate\",\n        \"tgErrorHandlingService\",\n        \"tgProjectService\"\n    ]\n\n    constructor: (@scope, @rootscope, @repo, @model, @confirm, @rs, @params, @q, @location,\n                  @filter, @log, @appMetaService, @navUrls, @analytics, @translate, @errorHandlingService, @projectService) ->\n        @scope.$on(\"wiki:links:move\", @.moveLink)\n        @scope.$on(\"wikipage:add\", @.loadWiki)\n        @scope.projectSlug = @params.pslug\n        @scope.wikiSlug = @params.slug\n        @scope.sectionName = \"Wiki\"\n        @scope.linksVisible = false\n\n        promise = @.loadInitialData()\n\n        # On Success\n        promise.then () => @._setMeta()\n\n        # On Error\n        promise.then null, @.onInitialDataError.bind(@)\n\n    _setMeta: ->\n        title =  @translate.instant(\"WIKI.PAGE_TITLE\", {\n            wikiPageName: @scope.wikiSlug\n            projectName: @scope.project.name\n        })\n        description =  @translate.instant(\"WIKI.PAGE_DESCRIPTION\", {\n            wikiPageContent: angular.element(@scope.wiki?.html or \"\").text()\n            totalEditions: @scope.wiki?.editions or 0\n            lastModifiedDate: moment(@scope.wiki?.modified_date).format(@translate.instant(\"WIKI.DATETIME\"))\n        })\n\n        @appMetaService.setAll(title, description)\n\n    loadProject: ->\n        project = @projectService.project.toJS()\n\n        if not project.is_wiki_activated\n            @errorHandlingService.permissionDenied()\n\n        @scope.projectId = project.id\n        @scope.project = project\n        @scope.$emit('project:loaded', project)\n        return project\n\n    loadWiki: =>\n        promise = @rs.wiki.getBySlug(@scope.projectId, @params.slug)\n        promise.then (wiki) =>\n            @scope.wiki = wiki\n            @scope.wikiId = wiki.id\n            return @scope.wiki\n\n        promise.then null, (xhr) =>\n            @scope.wikiId = null\n\n            if @scope.project.my_permissions.indexOf(\"add_wiki_page\") == -1\n                return null\n\n            data = {\n                project: @scope.projectId\n                slug: @scope.wikiSlug\n                content: \"\"\n            }\n            @scope.wiki = @model.make_model(\"wiki\", data)\n            return @scope.wiki\n\n    loadWikiLinks: ->\n        return @rs.wiki.listLinks(@scope.projectId).then (wikiLinks) =>\n            @scope.wikiLinks = wikiLinks\n\n            for link in @scope.wikiLinks\n                link.url = @navUrls.resolve(\"project-wiki-page\", {\n                    project: @scope.projectSlug\n                    slug: link.href\n                })\n\n            selectedWikiLink = _.find(wikiLinks, {href: @scope.wikiSlug})\n\n    loadInitialData: ->\n        project = @.loadProject()\n\n        @.fillUsersAndRoles(project.members, project.roles)\n        @q.all([@.loadWikiLinks(), @.loadWiki()]).then @.checkLinksPerms.bind(this)\n\n    checkLinksPerms: ->\n        if @scope.project.my_permissions.indexOf(\"add_wiki_link\") != -1 ||\n          (@scope.project.my_permissions.indexOf(\"view_wiki_links\") != -1 && @scope.wikiLinks.length)\n            @scope.linksVisible = true\n\n    delete: ->\n        title = @translate.instant(\"WIKI.DELETE_LIGHTBOX_TITLE\")\n        message = @scope.wikiSlug\n\n        @confirm.askOnDelete(title, message).then (askResponse) =>\n            onSuccess = =>\n                askResponse.finish()\n                ctx = {project: @scope.projectSlug}\n                @location.path(@navUrls.resolve(\"project-wiki\", ctx))\n                @confirm.notify(\"success\")\n                @.loadWiki()\n\n            onError = =>\n                askResponse.finish(false)\n                @confirm.notify(\"error\")\n\n            @repo.remove(@scope.wiki).then onSuccess, onError\n\n    moveLink: (ctx, item, itemIndex) =>\n        values = @scope.wikiLinks\n        r = values.indexOf(item)\n        values.splice(r, 1)\n        values.splice(itemIndex, 0, item)\n        _.each values, (value, index) ->\n            value.order = index\n\n        @repo.saveAll(values)\n\nmodule.controller(\"WikiDetailController\", WikiDetailController)\n\n\n#############################################################################\n## Wiki Summary Directive\n#############################################################################\n\nWikiSummaryDirective = ($log, $template, $compile, $translate, avatarService) ->\n    template = $template.get(\"wiki/wiki-summary.html\", true)\n\n    link = ($scope, $el, $attrs, $model) ->\n        render = (wiki) ->\n            if not $scope.usersById?\n                $log.error \"WikiSummaryDirective requires userById set in scope.\"\n            else\n                user = $scope.usersById[wiki.last_modifier]\n\n            avatar = avatarService.getAvatar(user)\n\n            if user is undefined\n                user = {name: \"unknown\", avatar: avatar}\n            else\n                user = {name: user.full_name_display, avatar: avatar}\n\n            ctx = {\n                totalEditions: wiki.editions\n                lastModifiedDate: moment(wiki.modified_date).format($translate.instant(\"WIKI.DATETIME\"))\n                user: user\n            }\n            html = template(ctx)\n            html = $compile(html)($scope)\n            $el.html(html)\n\n        $scope.$watch $attrs.ngModel, (wikiPage) ->\n            return if not wikiPage\n            render(wikiPage)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link: link\n        restrict: \"EA\"\n        require: \"ngModel\"\n    }\n\nmodule.directive(\"tgWikiSummary\", [\"$log\", \"$tgTemplate\", \"$compile\", \"$translate\",  \"tgAvatarService\", WikiSummaryDirective])\n\nWikiWysiwyg = ($modelTransform, $rootscope, $confirm, attachmentsFullService,\n$qqueue, $repo, $analytics, activityService) ->\n    link = ($scope, $el, $attrs) ->\n        $scope.editableDescription = false\n\n        $scope.saveDescription = $qqueue.bindAdd (description, cb) ->\n            onSuccess = (wikiPage) ->\n                if not $scope.item.id?\n                    $analytics.trackEvent(\"wikipage\", \"create\", \"create wiki page\", 1)\n                    $scope.$emit(\"wikipage:add\")\n\n                activityService.fetchEntries(true)\n                $confirm.notify(\"success\")\n\n            onError = ->\n                $confirm.notify(\"error\")\n\n            $scope.item.content =  description\n\n            if $scope.item.id?\n                promise = $repo.save($scope.item).then(onSuccess, onError)\n            else\n                promise = $repo.create(\"wiki\", $scope.item).then(onSuccess, onError)\n\n            promise.finally(cb)\n\n        uploadFile = (file, cb) ->\n            return attachmentsFullService.addAttachment($scope.project.id, $scope.item.id, 'wiki_page', file).then (result) ->\n                cb(result.getIn(['file', 'name']), result.getIn(['file', 'url']), 'wiki_page', result.getIn(['file', 'id']))\n\n        $scope.uploadFiles = (files, cb) ->\n            for file in files\n                uploadFile(file, cb)\n\n        $scope.$watch $attrs.model, (value) ->\n            return if not value\n            $scope.item = value\n            $scope.version = value.version\n            $scope.storageKey = $scope.project.id + \"-\" + value.id + \"-wiki\"\n\n        $scope.$watch 'project', (project) ->\n            return if !project\n\n            $scope.editableDescription = project.my_permissions.indexOf(\"modify_wiki_page\") != -1\n\n    return {\n        scope: true,\n        link: link,\n        template: \"\"\"\n            <div>\n                <tg-wysiwyg\n                    ng-if=\"editableDescription\"\n                    version='version'\n                    storage-key='storageKey'\n                    content='item.content'\n                    on-save='saveDescription(text, cb)'\n                    on-upload-file='uploadFiles(files, cb)'>\n                </tg-wysiwyg>\n\n                <div\n                    class=\"wysiwyg\"\n                    ng-if=\"!editableDescription && item.content.length\"\n                    ng-bind-html=\"item.content | markdownToHTML\"></div>\n\n                <div\n                    class=\"wysiwyg\"\n                    ng-if=\"!editableDescription && !item.content.length\">\n                    {{'COMMON.DESCRIPTION.NO_DESCRIPTION' | translate}}\n                </div>\n            </div>\n        \"\"\"\n    }\n\nmodule.directive(\"tgWikiWysiwyg\", [\n    \"$tgQueueModelTransformation\",\n    \"$rootScope\",\n    \"$tgConfirm\",\n    \"tgAttachmentsFullService\",\n    \"$tgQqueue\", \"$tgRepo\", \"$tgAnalytics\", \"tgActivityService\"\n    WikiWysiwyg])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/wiki/nav.coffee\n###\n\ntaiga = @.taiga\n\nmixOf = @.taiga.mixOf\ngroupBy = @.taiga.groupBy\nbindOnce = @.taiga.bindOnce\n\nmodule = angular.module(\"taigaWiki\")\n\n\n#############################################################################\n## Wiki Main Directive\n#############################################################################\n\nWikiNavDirective = ($tgrepo, $log, $location, $confirm, $analytics, $loading, $template,\n                    $compile, $translate) ->\n    template = $template.get(\"wiki/wiki-nav.html\", true)\n\n    linkWikiLinks = ($scope, $el, $attrs) ->\n        $ctrl = $el.controller()\n\n        if not $attrs.ngModel?\n            return $log.error \"WikiNavDirective: no ng-model attr is defined\"\n\n        addWikiLinkPermission = $scope.project.my_permissions.indexOf(\"add_wiki_link\") > -1\n        drake = null\n\n        render = (wikiLinks) ->\n            addWikiLinkPermission = $scope.project.my_permissions.indexOf(\"add_wiki_link\") > -1\n            deleteWikiLinkPermission = $scope.project.my_permissions.indexOf(\"delete_wiki_link\") > -1\n\n            html = template({\n                wikiLinks: wikiLinks,\n                projectSlug: $scope.projectSlug\n                addWikiLinkPermission: addWikiLinkPermission\n                deleteWikiLinkPermission: deleteWikiLinkPermission\n            })\n\n            html = $compile(html)($scope)\n\n            $el.off()\n            if addWikiLinkPermission and drake\n                drake.destroy()\n\n            $el.html(html)\n\n            if addWikiLinkPermission\n                itemEl = null\n                tdom = $el.find(\".sortable\")\n\n                drake = dragula([tdom[0]], {\n                    direction: 'vertical',\n                    copySortSource: false,\n                    copy: false,\n                    mirrorContainer: tdom[0],\n                    moves: (item) -> return $(item).is('li')\n                })\n\n                drake.on 'dragend', (item) ->\n                    itemEl = $(item)\n                    item = itemEl.scope().link\n                    itemIndex = itemEl.index()\n                    $scope.$emit(\"wiki:links:move\", item, itemIndex)\n\n                scroll = autoScroll(window, {\n                    margin: 20,\n                    pixels: 30,\n                    scrollWhenOutside: true,\n                    autoScroll: () ->\n                        return this.down && drake.dragging\n                })\n\n            $el.on \"click\", \".add-button\", (event) ->\n                event.preventDefault()\n                $el.find(\".new\").removeClass(\"hidden\")\n                $el.find(\".new input\").focus()\n                $el.find(\".add-button\").hide()\n\n            $el.on \"click\", \".js-delete-link\", (event) ->\n                event.preventDefault()\n                event.stopPropagation()\n                target = angular.element(event.currentTarget)\n                linkId = target.parents('.wiki-link').data('id')\n\n                title = $translate.instant(\"WIKI.DELETE_LINK_TITLE\")\n                message = $scope.wikiLinks[linkId].title\n\n                $confirm.askOnDelete(title, message).then (askResponse) =>\n                    promise = $tgrepo.remove($scope.wikiLinks[linkId])\n                    promise.then ->\n                        promise = $ctrl.loadWikiLinks()\n                        promise.then ->\n                            askResponse.finish()\n                            render($scope.wikiLinks)\n                        promise.then null, ->\n                            askResponse.finish()\n                    promise.then null, ->\n                        askResponse.finish(false)\n                        $confirm.notify(\"error\")\n\n            $el.on \"keyup\", \".new input\", (event) ->\n                event.preventDefault()\n                if event.keyCode == 13\n                    target = angular.element(event.currentTarget)\n                    newLink = target.val()\n\n                    currentLoading = $loading()\n                        .target($el.find(\".new\"))\n                        .start()\n\n                    promise = $tgrepo.create(\"wiki-links\", {project: $scope.projectId, title: newLink})\n                    promise.then ->\n                        $analytics.trackEvent(\"wikilink\", \"create\", \"create wiki link\", 1)\n                        loadPromise = $ctrl.loadWikiLinks()\n                        loadPromise.then ->\n                            currentLoading.finish()\n                            $el.find(\".new\").addClass(\"hidden\")\n                            $el.find(\".new input\").val('')\n                            $el.find(\".add-button\").show()\n                            render($scope.wikiLinks)\n                        loadPromise.then null, ->\n                            currentLoading.finish()\n                            $el.find(\".new\").addClass(\"hidden\")\n                            $el.find(\".new input\").val('')\n                            $el.find(\".add-button\").show()\n                            $confirm.notify(\"error\", \"Error loading wiki links\")\n\n                    promise.then null, (error) ->\n                        currentLoading.finish()\n                        $el.find(\".new input\").val(newLink)\n                        $el.find(\".new input\").focus().select()\n                        if error?.__all__?[0]?\n                            $confirm.notify(\"error\", \"The link already exists\")\n                        else\n                            $confirm.notify(\"error\")\n\n                else if event.keyCode == 27\n                    target = angular.element(event.currentTarget)\n                    $el.find(\".new\").addClass(\"hidden\")\n                    $el.find(\".new input\").val('')\n                    $el.find(\".add-button\").show()\n\n        bindOnce($scope, $attrs.ngModel, render)\n\n    link = ($scope, $el, $attrs) ->\n        linkWikiLinks($scope, $el, $attrs)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link:link}\n\nmodule.directive(\"tgWikiNav\", [\"$tgRepo\", \"$log\", \"$tgLocation\", \"$tgConfirm\", \"$tgAnalytics\",\n                               \"$tgLoading\", \"$tgTemplate\", \"$compile\", \"$translate\", WikiNavDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/wiki/pages-list.coffee\n###\n\ntaiga = @.taiga\n\nmixOf = @.taiga.mixOf\n\nmodule = angular.module(\"taigaWiki\")\n\n#############################################################################\n## Wiki Pages List Controller\n#############################################################################\n\nclass WikiPagesListController extends mixOf(taiga.Controller, taiga.PageMixin)\n    @.$inject = [\n        \"$scope\",\n        \"$rootScope\",\n        \"$tgRepo\",\n        \"$tgModel\",\n        \"$tgConfirm\",\n        \"$tgResources\",\n        \"$routeParams\",\n        \"$q\",\n        \"$tgNavUrls\",\n        \"tgErrorHandlingService\",\n        \"tgProjectService\"\n    ]\n\n    constructor: (@scope, @rootscope, @repo, @model, @confirm, @rs, @params, @q,\n                  @navUrls, @errorHandlingService, @projectService) ->\n        @scope.projectSlug = @params.pslug\n        @scope.wikiSlug = @params.slug\n        @scope.sectionName = \"Wiki\"\n        @scope.linksVisible = false\n\n        promise = @.loadInitialData()\n\n        # On Error\n        promise.then null, @.onInitialDataError.bind(@)\n\n    loadProject: ->\n        project = @projectService.project.toJS()\n\n        if not project.is_wiki_activated\n            @errorHandlingService.permissionDenied()\n\n        @scope.projectId = project.id\n        @scope.project = project\n        @scope.$emit('project:loaded', project)\n\n        return project\n\n    loadWikiPages: ->\n        promise = @rs.wiki.list(@scope.projectId).then (wikipages) =>\n            @scope.wikipages = wikipages\n\n    loadWikiLinks: ->\n        return @rs.wiki.listLinks(@scope.projectId).then (wikiLinks) =>\n            @scope.wikiLinks = wikiLinks\n\n            for link in @scope.wikiLinks\n                link.url = @navUrls.resolve(\"project-wiki-page\", {\n                    project: @scope.projectSlug\n                    slug: link.href\n                })\n\n            selectedWikiLink = _.find(wikiLinks, {href: @scope.wikiSlug})\n\n    loadInitialData: ->\n        project = @.loadProject()\n\n        @.fillUsersAndRoles(project.members, project.roles)\n\n        @q.all([@.loadWikiLinks(), @.loadWikiPages()]).then(@.checkLinksPerms.bind(this))\n\n    checkLinksPerms: ->\n        if @scope.project.my_permissions.indexOf(\"add_wiki_link\") != -1 ||\n          (@scope.project.my_permissions.indexOf(\"view_wiki_links\") != -1 && @scope.wikiLinks.length)\n            @scope.linksVisible = true\n\nmodule.controller(\"WikiPagesListController\", WikiPagesListController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/admin/lightboxes.coffee\n###\n\ntaiga = @.taiga\ndebounce = @.taiga.debounce\nnormalizeString = @.taiga.normalizeString\n\nmodule = angular.module(\"taigaKanban\")\n\n#############################################################################\n## Warning message directive\n#############################################################################\n\nLightboxAddMembersWarningMessageDirective = () ->\n    return {\n          templateUrl: \"admin/memberships-warning-message.html\"\n          scope: {\n              project: \"=\"\n          }\n    }\n\nmodule.directive(\"tgLightboxAddMembersWarningMessage\", [LightboxAddMembersWarningMessageDirective])\n\n\n#############################################################################\n## Transfer project ownership\n#############################################################################\n\nLbRequestOwnershipDirective = (lightboxService, rs, confirmService, $translate) ->\n    return {\n        link: (scope, el) ->\n            lightboxService.open(el)\n\n            scope.request = () ->\n                scope.loading = true\n\n                rs.projects.transferRequest(scope.projectId).then () ->\n                    scope.loading = false\n\n                    lightboxService.close(el)\n\n                    confirmService.notify(\"success\", $translate.instant(\"ADMIN.PROJECT_PROFILE.REQUEST_OWNERSHIP_SUCCESS\"))\n\n        templateUrl: \"common/lightbox/lightbox-request-ownership.html\"\n    }\n\nmodule.directive('tgLbRequestOwnership', [\n    \"lightboxService\",\n    \"tgResources\",\n    \"$tgConfirm\",\n    \"$translate\",\n    LbRequestOwnershipDirective])\n\nclass ChangeOwnerLightboxController\n    constructor: (@rs, @lightboxService, @confirm, @translate) ->\n        @.users = []\n        @.q = \"\"\n        @.commentOpen = false\n\n    limit: 3\n\n    filterUsers: (user) ->\n        username = user.full_name_display.toUpperCase()\n        username = normalizeString(username)\n        text = @.q.toUpperCase()\n        text = normalizeString(text)\n\n        return _.includes(username, text)\n\n    getUsers: () ->\n        if !@.users.length && !@.q.length\n            users =  @.activeUsers\n        else\n            users = @.users\n\n        users = _.reject(users, {\"id\": @.currentOwnerId})\n        users = _.reject(users, {\"selected\": true})\n\n        @.totalUsers = _.size(users)\n\n        return users.slice(0, @.limit)\n\n\n    userSearch: () ->\n        @.users = @.activeUsers\n\n        @.selected = _.find(@.users, {\"selected\": true})\n\n        @.users = _.filter(@.users, @.filterUsers.bind(this)) if @.q\n\n    selectUser: (user) ->\n        @.activeUsers = _.map @.activeUsers, (user) ->\n            user.selected = false\n\n            return user\n\n        user.selected = true\n\n        @.userSearch()\n\n    submit: () ->\n        @.loading = true\n        @rs.projects.transferStart(@.projectId, @.selected.id, @.comment)\n            .then () =>\n                @.loading = false\n                @lightboxService.closeAll()\n\n                title = @translate.instant(\"ADMIN.PROJECT_PROFILE.CHANGE_OWNER_SUCCESS_TITLE\")\n                desc = @translate.instant(\"ADMIN.PROJECT_PROFILE.CHANGE_OWNER_SUCCESS_DESC\")\n\n                @confirm.success(title, desc, {\n                    type: \"svg\",\n                    name: \"icon-speak-up\"\n                })\n\nChangeOwnerLightboxController.$inject = [\n        \"tgResources\",\n        \"lightboxService\",\n        \"$tgConfirm\",\n        \"$translate\"\n]\n\nmodule.controller('ChangeOwnerLightbox', ChangeOwnerLightboxController)\n\nChangeOwnerLightboxDirective = (lightboxService, lightboxKeyboardNavigationService, $template, $compile) ->\n    link = (scope, el) ->\n        lightboxService.open(el)\n\n    return {\n        scope: true,\n        controller: \"ChangeOwnerLightbox\",\n        controllerAs: \"vm\",\n        bindToController: {\n            currentOwnerId: \"=\",\n            projectId: \"=\",\n            activeUsers: \"=\"\n        },\n        templateUrl: \"common/lightbox/lightbox-change-owner.html\"\n        link:link\n    }\n\n\nmodule.directive(\"tgLbChangeOwner\", [\"lightboxService\", \"lightboxKeyboardNavigationService\", \"$tgTemplate\", \"$compile\", ChangeOwnerLightboxDirective])\n\nTransferProjectStartSuccessDirective = (lightboxService) ->\n    link = (scope, el) ->\n        scope.close = () ->\n            lightboxService.close(el)\n\n        lightboxService.open(el)\n\n    return {\n        templateUrl: \"common/lightbox/lightbox-transfer-project-start-success.html\"\n        link:link\n    }\n\n\nmodule.directive(\"tgLbTransferProjectStartSuccess\", [\"lightboxService\", TransferProjectStartSuccessDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/admin/memberships.coffee\n###\n\ntaiga = @.taiga\n\nmixOf = @.taiga.mixOf\nbindMethods = @.taiga.bindMethods\n\nmodule = angular.module(\"taigaAdmin\")\n\n\n#############################################################################\n## Project Memberships Controller\n#############################################################################\n\nclass MembershipsController extends mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin)\n    @.$inject = [\n        \"$scope\",\n        \"$rootScope\",\n        \"$tgRepo\",\n        \"$tgConfirm\",\n        \"$tgResources\",\n        \"$routeParams\",\n        \"$q\",\n        \"$tgLocation\",\n        \"$tgNavUrls\",\n        \"$tgAnalytics\",\n        \"tgAppMetaService\",\n        \"$translate\",\n        \"$tgAuth\",\n        \"tgLightboxFactory\",\n        \"tgErrorHandlingService\",\n        \"tgProjectService\"\n    ]\n\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @params, @q, @location, @navUrls, @analytics,\n                  @appMetaService, @translate, @auth, @lightboxFactory, @errorHandlingService, @projectService) ->\n        bindMethods(@)\n\n        @scope.project = {}\n        @scope.filters = {}\n\n        promise = @.loadInitialData()\n\n        promise.then  =>\n           title = @translate.instant(\"ADMIN.MEMBERSHIPS.PAGE_TITLE\", {projectName:  @scope.project.name})\n           description = @scope.project.description\n           @appMetaService.setAll(title, description)\n\n        promise.then null, @.onInitialDataError.bind(@)\n\n        @scope.$on \"membersform:new:success\", =>\n            @.loadInitialData()\n            @analytics.trackEvent(\"membership\", \"create\", \"create memberships on admin\", 1)\n\n    loadProject: ->\n        project = @projectService.project.toJS()\n\n        if not project.i_am_admin\n            @errorHandlingService.permissionDenied()\n\n        @scope.projectId = project.id\n        @scope.project = project\n\n        @scope.canAddUsers = project.max_memberships == null || project.max_memberships > project.total_memberships\n\n        @scope.$emit('project:loaded', project)\n        return project\n\n    loadMembers: ->\n        httpFilters = @.getUrlFilters()\n\n        return @rs.memberships.list(@scope.projectId, httpFilters).then (data) =>\n            @scope.memberships = _.filter(data.models, (membership) ->\n                                    membership.user == null or membership.is_user_active)\n\n            _.map(@scope.memberships, (member) =>\n                if member.is_owner\n                    @scope.projectOwnerEmail = member.user_email\n            )\n\n            @scope.page = data.current\n            @scope.count = data.count\n            @scope.paginatedBy = data.paginatedBy\n            return data\n\n    loadInitialData: ->\n        @.loadProject()\n\n        return @q.all([\n            @.loadMembers(),\n            @auth.refresh()\n        ])\n\n    getUrlFilters: ->\n        filters = _.pick(@location.search(), \"page\")\n        filters.page = 1 if not filters.page\n        return filters\n\n    # Actions\n\n    addNewMembers:  ->\n        @lightboxFactory.create(\n            'tg-lb-add-members',\n            {\n                \"class\": \"lightbox lightbox-add-member\",\n                \"project\": \"project\"\n            },\n            {\n                \"project\": @scope.project\n            }\n        )\n\n    showLimitUsersWarningMessage: ->\n        title = @translate.instant(\"ADMIN.MEMBERSHIPS.LIMIT_USERS_WARNING\")\n        message = @translate.instant(\"ADMIN.MEMBERSHIPS.LIMIT_USERS_WARNING_MESSAGE\", {\n            members: @scope.project.max_memberships\n        })\n        icon = \"/\" + window._version + \"/svg/icons/team-question.svg\"\n        @confirm.success(title, message, {\n            name: icon,\n            type: \"img\"\n        })\n\nmodule.controller(\"MembershipsController\", MembershipsController)\n\n\n#############################################################################\n## Member Avatar Directive\n#############################################################################\n\nMembershipsDirective = ($template, $compile) ->\n    template = $template.get(\"admin/admin-membership-paginator.html\", true)\n\n    linkPagination = ($scope, $el, $attrs, $ctrl) ->\n        # Constants\n        afterCurrent = 2\n        beforeCurrent = 4\n        atBegin = 2\n        atEnd = 2\n\n        $pagEl = $el.find(\".memberships-paginator\")\n\n        getNumPages = ->\n            numPages = $scope.count / $scope.paginatedBy\n            if parseInt(numPages, 10) < numPages\n                numPages = parseInt(numPages, 10) + 1\n            else\n                numPages = parseInt(numPages, 10)\n\n            return numPages\n\n        renderPagination = ->\n            numPages = getNumPages()\n\n            if numPages <= 1\n                $pagEl.hide()\n                return\n\n            pages = []\n            options = {}\n            options.pages = pages\n            options.showPrevious = ($scope.page > 1)\n            options.showNext = not ($scope.page == numPages)\n\n            cpage = $scope.page\n\n            for i in [1..numPages]\n                if i == (cpage + afterCurrent) and numPages > (cpage + afterCurrent + atEnd)\n                    pages.push({classes: \"dots\", type: \"dots\"})\n                else if i == (cpage - beforeCurrent) and cpage > (atBegin + beforeCurrent)\n                    pages.push({classes: \"dots\", type: \"dots\"})\n                else if i > (cpage + afterCurrent) and i <= (numPages - atEnd)\n                else if i < (cpage - beforeCurrent) and i > atBegin\n                else if i == cpage\n                    pages.push({classes: \"active\", num: i, type: \"page-active\"})\n                else\n                    pages.push({classes: \"page\", num: i, type: \"page\"})\n\n            html = template(options)\n            html = $compile(html)($scope)\n\n            $pagEl.html(html)\n            $pagEl.show()\n\n        $scope.$watch \"memberships\", (value) ->\n            # Do nothing if value is not logical true\n            return if not value\n\n            renderPagination()\n\n        $el.on \"click\", \".memberships-paginator a.next\", (event) ->\n            event.preventDefault()\n\n            $scope.$apply ->\n                $ctrl.selectFilter(\"page\", $scope.page + 1)\n                $ctrl.loadMembers()\n\n        $el.on \"click\", \".memberships-paginator a.previous\", (event) ->\n            event.preventDefault()\n            $scope.$apply ->\n                $ctrl.selectFilter(\"page\", $scope.page - 1)\n                $ctrl.loadMembers()\n\n        $el.on \"click\", \".memberships-paginator li.page > a\", (event) ->\n            event.preventDefault()\n            target = angular.element(event.currentTarget)\n            pagenum = target.data(\"pagenum\")\n\n            $scope.$apply ->\n                $ctrl.selectFilter(\"page\", pagenum)\n                $ctrl.loadMembers()\n\n\n    link = ($scope, $el, $attrs) ->\n        $ctrl = $el.controller()\n        linkPagination($scope, $el, $attrs, $ctrl)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link:link}\n\nmodule.directive(\"tgMemberships\", [\"$tgTemplate\", \"$compile\", MembershipsDirective])\n\n\n#############################################################################\n## Member Avatar Directive\n#############################################################################\n\nMembershipsRowAvatarDirective = ($log, $template, $translate, $compile, avatarService) ->\n    template = $template.get(\"admin/memberships-row-avatar.html\", true)\n\n    link = ($scope, $el, $attrs) ->\n        pending = $translate.instant(\"ADMIN.MEMBERSHIP.STATUS_PENDING\")\n        render = (member) ->\n            avatar = avatarService.getAvatar(member)\n\n            ctx = {\n                full_name: if member.full_name then member.full_name else \"\"\n                email: if member.user_email then member.user_email else member.email\n                imgurl: avatar.url\n                bg: avatar.bg\n                pending: if !member.is_user_active then pending else \"\"\n                isOwner: member.is_owner\n            }\n\n            html = template(ctx)\n            html = $compile(html)($scope)\n\n            $el.html(html)\n\n        if not $attrs.tgMembershipsRowAvatar?\n            return $log.error \"MembershipsRowAvatarDirective: the directive need a member\"\n\n        member = $scope.$eval($attrs.tgMembershipsRowAvatar)\n        render(member)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link: link}\n\n\nmodule.directive(\"tgMembershipsRowAvatar\", [\"$log\", \"$tgTemplate\", '$translate', \"$compile\", \"tgAvatarService\", MembershipsRowAvatarDirective])\n\n\n#############################################################################\n## Member IsAdminCheckbox Directive\n#############################################################################\n\nMembershipsRowAdminCheckboxDirective = ($log, $repo, $confirm, $template, $compile) ->\n    template = $template.get(\"admin/admin-memberships-row-checkbox.html\", true)\n\n    link = ($scope, $el, $attrs) ->\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n        if not $attrs.tgMembershipsRowAdminCheckbox?\n            return $log.error \"MembershipsRowAdminCheckboxDirective: the directive need a member\"\n\n        member = $scope.$eval($attrs.tgMembershipsRowAdminCheckbox)\n\n        if member.is_owner\n            $el.find(\".js-check\").remove()\n            return\n\n        render = (member) ->\n            ctx = {inputId: \"is-admin-#{member.id}\"}\n\n            html = template(ctx)\n            html = $compile(html)($scope)\n\n            $el.html(html)\n\n        $el.on \"click\", \":checkbox\", (event) =>\n            onSuccess = ->\n                $confirm.notify(\"success\")\n\n            onError = (data) ->\n                member.revert()\n                $el.find(\":checkbox\").prop(\"checked\", member.is_admin)\n                $confirm.notify(\"error\", data.is_admin[0])\n\n            target = angular.element(event.currentTarget)\n            member.is_admin = target.prop(\"checked\")\n            $repo.save(member).then(onSuccess, onError)\n\n        html = render(member)\n\n        if member.is_admin\n            $el.find(\":checkbox\").prop(\"checked\", true)\n\n    return {link: link}\n\n\nmodule.directive(\"tgMembershipsRowAdminCheckbox\", [\"$log\", \"$tgRepo\", \"$tgConfirm\",\n    \"$tgTemplate\", \"$compile\", MembershipsRowAdminCheckboxDirective])\n\n\n#############################################################################\n## Member RoleSelector Directive\n#############################################################################\n\nMembershipsRowRoleSelectorDirective = ($log, $repo, $confirm) ->\n    template = _.template(\"\"\"\n    <select>\n        <% _.each(roleList, function(role) { %>\n        <option value=\"<%- role.id %>\" <% if(selectedRole === role.id){ %>selected=\"selected\"<% } %>>\n            <%- role.name %>\n        </option>\n        <% }); %>\n    </select>\n    \"\"\")\n\n    link = ($scope, $el, $attrs) ->\n        render = (member) ->\n            ctx = {\n                roleList: $scope.project.roles,\n                selectedRole: member.role\n            }\n\n            html = template(ctx)\n            $el.html(html)\n\n        if not $attrs.tgMembershipsRowRoleSelector?\n            return $log.error \"MembershipsRowRoleSelectorDirective: the directive need a member\"\n\n        $ctrl = $el.controller()\n        member = $scope.$eval($attrs.tgMembershipsRowRoleSelector)\n        html = render(member)\n\n        $el.on \"change\", \"select\", (event) =>\n            onSuccess = ->\n                $confirm.notify(\"success\")\n\n            onError = ->\n                $confirm.notify(\"error\")\n\n            target = angular.element(event.currentTarget)\n            newRole = parseInt(target.val(), 10)\n\n            if member.role != newRole\n                member.role = newRole\n                $repo.save(member).then(onSuccess, onError)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link: link}\n\n\nmodule.directive(\"tgMembershipsRowRoleSelector\", [\"$log\", \"$tgRepo\", \"$tgConfirm\",\n                                                  MembershipsRowRoleSelectorDirective])\n\n\n#############################################################################\n## Member Actions Directive\n#############################################################################\n\nMembershipsRowActionsDirective = ($log, $repo, $rs, $confirm, $compile, $translate, $location,\n                                  $navUrls, lightboxFactory, projectService) ->\n    activedTemplate = \"\"\"\n    <div class=\"active\"\n         translate=\"ADMIN.MEMBERSHIP.STATUS_ACTIVE\">\n    </div>\n    <a class=\"delete\" href=\"\"\n       title=\"{{ 'ADMIN.MEMBERSHIP.DELETE_MEMBER' | translate }}\">\n        <tg-svg svg-icon=\"icon-trash\"></tg-svg>\n    </a>\n    \"\"\"\n\n    pendingTemplate = \"\"\"\n    <a class=\"resend js-resend\" href=\"\"\n       title=\"{{ 'ADMIN.MEMBERSHIP.RESEND' | translate }}\"\n       translate=\"ADMIN.MEMBERSHIP.RESEND\">\n    </a>\n    <a class=\"delete\" href=\"\"\n       title=\"{{ 'ADMIN.MEMBERSHIP.DELETE_MEMBER' | translate }}\">\n        <tg-svg svg-icon=\"icon-trash\"></tg-svg>\n    </a>\n    \"\"\"\n\n    link = ($scope, $el, $attrs) ->\n        render = (member) ->\n            if member.user\n                html = $compile(activedTemplate)($scope)\n            else\n                html = $compile(pendingTemplate)($scope)\n\n            $el.html(html)\n\n        if not $attrs.tgMembershipsRowActions?\n            return $log.error \"MembershipsRowActionsDirective: the directive need a member\"\n\n        $ctrl = $el.controller()\n        member = $scope.$eval($attrs.tgMembershipsRowActions)\n        render(member)\n\n        $el.on \"click\", \".js-resend\", (event) ->\n            event.preventDefault()\n            onSuccess = ->\n                text = $translate.instant(\"ADMIN.MEMBERSHIP.SUCCESS_SEND_INVITATION\", {\n                    email: $scope.member.email\n                })\n                $confirm.notify(\"success\", text)\n            onError = ->\n                text = $translate.instant(\"ADMIM.MEMBERSHIP.ERROR_SEND_INVITATION\")\n                $confirm.notify(\"error\", text)\n\n            $rs.memberships.resendInvitation($scope.member.id).then(onSuccess, onError)\n\n        leaveConfirm = () ->\n            title = $translate.instant(\"ADMIN.MEMBERSHIP.DELETE_MEMBER\")\n            defaultMsg = $translate.instant(\"ADMIN.MEMBERSHIP.DEFAULT_DELETE_MESSAGE\", {email: member.email})\n            message = if member.user then member.full_name else defaultMsg\n\n            $confirm.askOnDelete(title, message).then (askResponse) ->\n                onSuccess = =>\n                    askResponse.finish()\n                    if member.user != $scope.user.id\n                        if $scope.page > 1 && ($scope.count - 1) <= $scope.paginatedBy\n                            $ctrl.selectFilter(\"page\", $scope.page - 1)\n\n                        projectService.fetchProject().then =>\n                            $ctrl.loadInitialData()\n                    else\n                        $location.path($navUrls.resolve(\"home\"))\n\n                    text = $translate.instant(\"ADMIN.MEMBERSHIP.SUCCESS_DELETE\", {message: message})\n                    $confirm.notify(\"success\", text, null, 5000)\n\n                onError = =>\n                    askResponse.finish(false)\n\n                    text = $translate.instant(\"ADMIN.MEMBERSHIP.ERROR_DELETE\", {message: message})\n                    $confirm.notify(\"error\", text)\n\n                $repo.remove(member).then(onSuccess, onError)\n\n        $el.on \"click\", \".delete\", (event) ->\n            event.preventDefault()\n\n            if $scope.project.owner.id == member.user\n                isCurrentUser = $scope.user.id == member.user\n\n                lightboxFactory.create(\"tg-lightbox-leave-project-warning\", {\n                    class: \"lightbox lightbox-leave-project-warning\"\n                }, {\n                    isCurrentUser: isCurrentUser,\n                    project: $scope.project\n                })\n            else\n                leaveConfirm()\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link: link}\n\nmodule.directive(\"tgMembershipsRowActions\", [\"$log\", \"$tgRepo\", \"$tgResources\", \"$tgConfirm\", \"$compile\",\n                                             \"$translate\", \"$tgLocation\", \"$tgNavUrls\", \"tgLightboxFactory\",\n                                             \"tgProjectService\", MembershipsRowActionsDirective])\n\n\n#############################################################################\n## No more memberships explanation directive\n#############################################################################\n\nNoMoreMembershipsExplanationDirective = () ->\n    return {\n          templateUrl: \"admin/no-more-memberships-explanation.html\"\n          scope: {\n              project: \"=\",\n              ownerEmail: \"=\"\n          }\n    }\n\nmodule.directive(\"tgNoMoreMembershipsExplanation\", [NoMoreMembershipsExplanationDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/admin/nav.coffee\n###\n\nAdminNavigationDirective = ->\n    link = ($scope, $el, $attrs) ->\n        section = $attrs.tgAdminNavigation\n        $el.find(\".active\").removeClass(\"active\")\n        $el.find(\"#adminmenu-#{section} a\").addClass(\"active\")\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link:link}\n\nmodule = angular.module(\"taigaAdmin\")\nmodule.directive(\"tgAdminNavigation\", AdminNavigationDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/admin/project-profile.coffee\n###\n\ntaiga = @.taiga\n\nmixOf = @.taiga.mixOf\nscopeDefer = @.taiga.scopeDefer\ntrim = @.taiga.trim\ntoString = @.taiga.toString\njoinStr = @.taiga.joinStr\ngroupBy = @.taiga.groupBy\nbindOnce = @.taiga.bindOnce\ndebounce = @.taiga.debounce\n\nmodule = angular.module(\"taigaAdmin\")\n\n\n#############################################################################\n## Project Profile Controller\n#############################################################################\n\nclass ProjectProfileController extends mixOf(taiga.Controller, taiga.PageMixin)\n    @.$inject = [\n        \"$scope\",\n        \"$rootScope\",\n        \"$tgRepo\",\n        \"$tgConfirm\",\n        \"$tgResources\",\n        \"$routeParams\",\n        \"$q\",\n        \"$tgLocation\",\n        \"$tgNavUrls\",\n        \"tgAppMetaService\",\n        \"$translate\",\n        \"$tgAuth\",\n        \"tgCurrentUserService\",\n        \"tgErrorHandlingService\",\n        \"tgProjectService\",\n        \"$tgModel\"\n    ]\n\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @params, @q, @location, @navUrls,\n                  @appMetaService, @translate, @tgAuth, @currentUserService, @errorHandlingService, @projectService, @model) ->\n        @scope.project = {}\n\n        @scope.projectTags = []\n        promise = @.loadInitialData()\n\n        promise.then =>\n            sectionName = @translate.instant( @scope.sectionName)\n            title = @translate.instant(\"ADMIN.PROJECT_PROFILE.PAGE_TITLE\", {\n                     sectionName: sectionName, projectName: @scope.project.name})\n            description = @scope.project.description\n            @appMetaService.setAll(title, description)\n\n            @.fillUsersAndRoles(@scope.project.members, @scope.project.roles)\n\n        promise.then null, @.onInitialDataError.bind(@)\n\n        @scope.$on \"project:loaded\", =>\n            sectionName = @translate.instant(@scope.sectionName)\n            title = @translate.instant(\"ADMIN.PROJECT_PROFILE.PAGE_TITLE\", {\n                     sectionName: sectionName, projectName: @scope.project.name})\n            description = @scope.project.description\n            @appMetaService.setAll(title, description)\n\n    loadProject: ->\n        project = @projectService.project.toJS()\n        project = @model.make_model(\"projects\", project)\n\n        if not project.i_am_admin\n            @errorHandlingService.permissionDenied()\n\n        @scope.projectId = project.id\n        @scope.project = project\n        @scope.epicStatusList = _.sortBy(project.epic_statuses, \"order\")\n        @scope.usStatusList = _.sortBy(project.us_statuses, \"order\")\n        @scope.pointsList = _.sortBy(project.points, \"order\")\n        @scope.taskStatusList = _.sortBy(project.task_statuses, \"order\")\n        @scope.issueTypesList = _.sortBy(project.issue_types, \"order\")\n        @scope.issueStatusList = _.sortBy(project.issue_statuses, \"order\")\n        @scope.prioritiesList = _.sortBy(project.priorities, \"order\")\n        @scope.severitiesList = _.sortBy(project.severities, \"order\")\n\n        scopeDefer @scope, =>\n            @scope.$emit('project:loaded', project)\n\n        @scope.projectTags = _.map @scope.project.tags, (it) =>\n            return [it, @scope.project.tags_colors[it]]\n\n        return project\n\n    loadInitialData: ->\n        @.loadProject()\n\n        return @tgAuth.refresh()\n\n    openDeleteLightbox: ->\n        @rootscope.$broadcast(\"deletelightbox:new\", @scope.project)\n\n    addTag: (name, color) ->\n        tags = _.clone(@scope.project.tags)\n\n        tags.push(name)\n\n        @scope.projectTags.push([name, null])\n        @scope.project.tags = tags\n\n    deleteTag: (tag) ->\n        tags = _.clone(@scope.project.tags)\n        _.pull(tags, tag[0])\n        _.remove @scope.projectTags, (it) => it[0] == tag[0]\n\n        @scope.project.tags = tags\n\nmodule.controller(\"ProjectProfileController\", ProjectProfileController)\n\n\n#############################################################################\n## Project Profile Directive\n#############################################################################\n\nProjectProfileDirective = ($repo, $confirm, $loading, $navurls, $location, projectService, currentUserService, $analytics) ->\n    link = ($scope, $el, $attrs) ->\n        $ctrl = $el.controller()\n\n        form = $el.find(\"form\").checksley({\"onlyOneErrorElement\": true})\n        submit = debounce 2000, (event) =>\n            event.preventDefault()\n\n            return if not form.validate()\n\n            currentLoading = $loading()\n                .target(submitButton)\n                .start()\n\n            privacyChanged = $scope.project.isAttributeModified(\"is_private\")\n            promise = $repo.save($scope.project)\n            promise.then ->\n                currentLoading.finish()\n                if privacyChanged && $scope.project.is_private\n                    $analytics.trackEvent(\n                        \"project-privacy-changed\",\n                        \"from-public-to-private\",\n                        \"Change project privacy from public to private\",\n                        1\n                    )\n                else if privacyChanged && !$scope.project.is_private\n                    $analytics.trackEvent(\n                        \"project-privacy-changed\",\n                        \"from-private-to-public\",\n                        \"Change project privacy from private to public\",\n                        1\n                    )\n                $confirm.notify(\"success\")\n                newUrl = $navurls.resolve(\"project-admin-project-profile-details\", {\n                    project: $scope.project.slug\n                })\n                $location.path(newUrl)\n\n                projectService.fetchProject().then () =>\n                    $ctrl.loadInitialData()\n\n                currentUserService.loadProjects()\n\n            promise.then null, (data) ->\n                currentLoading.finish()\n                form.setErrors(data)\n                if data._error_message\n                    $confirm.notify(\"error\", data._error_message)\n\n        submitButton = $el.find(\".submit-button\")\n\n        $el.on \"submit\", \"form\", submit\n\n    return {link:link}\n\nmodule.directive(\"tgProjectProfile\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgNavUrls\", \"$tgLocation\",\n                                      \"tgProjectService\", \"tgCurrentUserService\", \"$tgAnalytics\",\n                                      ProjectProfileDirective])\n\n\n#############################################################################\n## Project Default Values Directive\n#############################################################################\n\nProjectDefaultValuesDirective = ($rootScope, $repo, $confirm, $loading) ->\n    link = ($scope, $el, $attrs) ->\n        form = $el.find(\"form\").checksley({\"onlyOneErrorElement\": true})\n        submit = debounce 2000, (event) =>\n            event.preventDefault()\n\n            return if not form.validate()\n\n            currentLoading = $loading()\n                .target(submitButton)\n                .start()\n\n            promise = $repo.save($scope.project)\n            promise.then ->\n                currentLoading.finish()\n                $confirm.notify(\"success\")\n                $rootScope.$broadcast(\"admin:project-default-values:updated\")\n\n            promise.then null, (data) ->\n                currentLoading.finish()\n                form.setErrors(data)\n                if data._error_message\n                    $confirm.notify(\"error\", data._error_message)\n\n        submitButton = $el.find(\".submit-button\")\n\n        $el.on \"submit\", \"form\", submit\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link:link}\n\nmodule.directive(\"tgProjectDefaultValues\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\",\n                                            ProjectDefaultValuesDirective])\n\n#############################################################################\n## Project Modules Directive\n#############################################################################\n\nProjectModulesDirective = ($rootScope, $repo, $confirm, $loading) ->\n    link = ($scope, $el, $attrs) ->\n        submit = =>\n            form = $el.find(\"form\").checksley()\n            form.initializeFields() # Need to reset the form constrains\n            form.reset() # Need to reset the form constrains\n            return if not form.validate()\n\n            promise = $repo.save($scope.project)\n            promise.then ->\n                $scope.$emit(\"project:loaded\", $scope.project)\n                $rootScope.$broadcast(\"admin:project-modules:updated\")\n                $confirm.notify(\"success\")\n\n            promise.then null, (data) ->\n                form.setErrors(data)\n                if data._error_message\n                    $confirm.notify(\"error\", data._error_message)\n\n        $el.on \"change\", \".module-activation.module-direct-active input\", (event) ->\n            event.preventDefault()\n\n            $scope.$applyAsync(submit)\n\n        $el.on \"submit\", \"form\", (event) ->\n            event.preventDefault()\n\n            submit()\n\n        $el.on \"click\", \".save\", (event) ->\n            event.preventDefault()\n            submit()\n\n        $el.on \"keydown\", \".videoconference-attributes input\", (e) ->\n            return e.which != 32\n\n        $scope.$watch \"project.videoconferences\", (newVal, oldVal) ->\n            # Reset videoconferences_extra_data if videoconference system change\n            if newVal? and oldVal? and newVal != oldVal\n                $scope.project.videoconferences_extra_data = \"\"\n\n        $scope.$watch \"isVideoconferenceActivated\", (newValue, oldValue) ->\n            if newValue == false\n                # Reset videoconference attributes\n                $scope.project.videoconferences = null\n                $scope.project.videoconferences_extra_data = \"\"\n\n                # Save when videoconference is desactivated\n                submit() if oldValue == true\n\n        $scope.$watch \"project\", (project) ->\n            if project.videoconferences?\n                $scope.isVideoconferenceActivated = true\n            else\n                $scope.isVideoconferenceActivated = false\n\n    return {link:link}\n\nmodule.directive(\"tgProjectModules\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\",\n                                      ProjectModulesDirective])\n\n\n#############################################################################\n## Project Export Directive\n#############################################################################\n\nProjectExportDirective = ($window, $rs, $confirm, $translate, $analytics) ->\n    link = ($scope, $el, $attrs) ->\n        buttonsEl = $el.find(\".admin-project-export-buttons\")\n        showButtons = -> buttonsEl.removeClass(\"hidden\")\n        hideButtons = -> buttonsEl.addClass(\"hidden\")\n\n        resultEl = $el.find(\".admin-project-export-result\")\n        showResult = -> resultEl.removeClass(\"hidden\")\n        hideResult = -> resultEl.addClass(\"hidden\")\n\n        spinnerEl = $el.find(\".spin\")\n        showSpinner = -> spinnerEl.removeClass(\"hidden\")\n        hideSpinner = -> spinnerEl.addClass(\"hidden\")\n\n        resultTitleEl = $el.find(\".result-title\")\n\n\n        loading_title = $translate.instant(\"ADMIN.PROJECT_EXPORT.LOADING_TITLE\")\n        loading_msg = $translate.instant(\"ADMIN.PROJECT_EXPORT.LOADING_MESSAGE\")\n        dump_ready_text = -> resultTitleEl.html($translate.instant(\"ADMIN.PROJECT_EXPORT.DUMP_READY\"))\n        asyn_message = -> resultTitleEl.html($translate.instant(\"ADMIN.PROJECT_EXPORT.ASYNC_MESSAGE\"))\n        syn_message = (url) -> resultTitleEl.html($translate.instant(\"ADMIN.PROJECT_EXPORT.SYNC_MESSAGE\", {\n                                                                                                   url: url}))\n\n        setLoadingTitle = -> resultTitleEl.html(loading_title)\n        setAsyncTitle = -> resultTitleEl.html(loading_msg)\n        setSyncTitle = -> resultTitleEl.html(dump_ready_text)\n\n        resultMessageEl = $el.find(\".result-message \")\n        setLoadingMessage = -> resultMessageEl.html(loading_msg)\n        setAsyncMessage = -> resultMessageEl.html(asyn_message)\n        setSyncMessage = (url) -> resultMessageEl.html(syn_message(url))\n\n        showLoadingMode = ->\n            showSpinner()\n            setLoadingTitle()\n            setLoadingMessage()\n            hideButtons()\n            showResult()\n\n        showExportResultAsyncMode = ->\n            hideSpinner()\n            setAsyncTitle()\n            setAsyncMessage()\n\n        showExportResultSyncMode = (url) ->\n            hideSpinner()\n            setSyncTitle()\n            setSyncMessage(url)\n\n        showErrorMode = ->\n            hideSpinner()\n            hideResult()\n            showButtons()\n\n        $el.on \"click\", \"a.button-export\", debounce 2000, (event) =>\n            event.preventDefault()\n\n            onSuccess = (result) =>\n                $analytics.trackEvent(\"exporter\", \"export-project\", \"Exported project\", 1)\n                if result.status == 202 # Async mode\n                    showExportResultAsyncMode()\n                else #result.status == 200 # Sync mode\n                    dumpUrl = result.data.url\n                    showExportResultSyncMode(dumpUrl)\n                    $window.open(dumpUrl, \"_blank\")\n\n            onError = (result) =>\n                showErrorMode()\n\n                errorMsg = $translate.instant(\"ADMIN.PROJECT_EXPORT.ERROR\")\n\n                if result.status == 429  # TOO MANY REQUESTS\n                    errorMsg = $translate.instant(\"ADMIN.PROJECT_EXPORT.ERROR_BUSY\")\n                else if result.data?._error_message\n                    errorMsg = $translate.instant(\"ADMIN.PROJECT_EXPORT.ERROR_BUSY\", {\n                                                   message: result.data._error_message})\n\n                $confirm.notify(\"error\", errorMsg)\n\n            showLoadingMode()\n            $rs.projects.export($scope.projectId).then(onSuccess, onError)\n\n    return {link:link}\n\nmodule.directive(\"tgProjectExport\", [\"$window\", \"$tgResources\", \"$tgConfirm\", \"$translate\",\n                                     \"$tgAnalytics\", ProjectExportDirective])\n\n\n#############################################################################\n## CSV Export Controllers\n#############################################################################\n\nclass CsvExporterController extends taiga.Controller\n    @.$inject = [\n        \"$scope\",\n        \"$rootScope\",\n        \"$tgUrls\",\n        \"$tgConfirm\",\n        \"$tgResources\",\n        \"$translate\"\n    ]\n\n    constructor: (@scope, @rootscope, @urls, @confirm, @rs, @translate) ->\n        @rootscope.$on(\"project:loaded\", @.setCsvUuid)\n        @scope.$watch \"csvUuid\", (value) =>\n            if value\n                @scope.csvUrl = @urls.resolveAbsolute(\"#{@.type}-csv\", value)\n            else\n                @scope.csvUrl = \"\"\n\n    setCsvUuid: =>\n        @scope.csvUuid = @scope.project[\"#{@.type}_csv_uuid\"]\n\n    _generateUuid: (response=null) =>\n        promise = @rs.projects[\"regenerate_#{@.type}_csv_uuid\"](@scope.projectId)\n\n        promise.then (data) =>\n            @scope.csvUuid = data.data?.uuid\n\n        promise.then null, =>\n            @confirm.notify(\"error\")\n\n        promise.finally ->\n            response.finish() if response\n        return promise\n\n    _deleteUuid: (response=null) =>\n        promise = @rs.projects[\"delete_#{@.type}_csv_uuid\"](@scope.projectId)\n\n        promise.then (data) =>\n            @scope.csvUuid = data.data?.uuid\n\n        promise.then null, =>\n            @confirm.notify(\"error\")\n\n        promise.finally ->\n            response.finish() if response\n        return promise\n\n    regenerateUuid: ->\n        if @scope.csvUuid\n            title = @translate.instant(\"ADMIN.REPORTS.REGENERATE_TITLE\")\n            subtitle = @translate.instant(\"ADMIN.REPORTS.REGENERATE_SUBTITLE\")\n\n            @confirm.ask(title, subtitle).then @._generateUuid\n        else\n            @._generateUuid()\n\n    deleteUuid: ->\n        if @scope.csvUuid\n            title = @translate.instant(\"ADMIN.REPORTS.DELETE_TITLE\")\n            subtitle = @translate.instant(\"ADMIN.REPORTS.DELETE_SUBTITLE\")\n\n            @confirm.ask(title, subtitle).then @._deleteUuid\n        else\n            @._deleteUuid()\n\n\nclass CsvExporterEpicsController extends CsvExporterController\n    type: \"epics\"\n\n\nclass CsvExporterUserstoriesController extends CsvExporterController\n    type: \"userstories\"\n\n\nclass CsvExporterTasksController extends CsvExporterController\n    type: \"tasks\"\n\n\nclass CsvExporterIssuesController extends CsvExporterController\n    type: \"issues\"\n\n\nmodule.controller(\"CsvExporterEpicsController\", CsvExporterEpicsController)\nmodule.controller(\"CsvExporterUserstoriesController\", CsvExporterUserstoriesController)\nmodule.controller(\"CsvExporterTasksController\", CsvExporterTasksController)\nmodule.controller(\"CsvExporterIssuesController\", CsvExporterIssuesController)\n\n\n#############################################################################\n## CSV Directive\n#############################################################################\n\nCsvEpicDirective = ($translate) ->\n    link = ($scope) ->\n        $scope.sectionTitle = \"ADMIN.CSV.SECTION_TITLE_EPIC\"\n\n    return {\n        controller: \"CsvExporterEpicsController\",\n        controllerAs: \"ctrl\",\n        templateUrl: \"admin/project-csv.html\",\n        link: link,\n        scope: true\n    }\n\nmodule.directive(\"tgCsvEpic\", [\"$translate\", CsvEpicDirective])\n\n\nCsvUsDirective = ($translate) ->\n    link = ($scope) ->\n        $scope.sectionTitle = \"ADMIN.CSV.SECTION_TITLE_US\"\n\n    return {\n        controller: \"CsvExporterUserstoriesController\",\n        controllerAs: \"ctrl\",\n        templateUrl: \"admin/project-csv.html\",\n        link: link,\n        scope: true\n    }\n\nmodule.directive(\"tgCsvUs\", [\"$translate\", CsvUsDirective])\n\n\nCsvTaskDirective = ($translate) ->\n    link = ($scope) ->\n        $scope.sectionTitle = \"ADMIN.CSV.SECTION_TITLE_TASK\"\n\n    return {\n        controller: \"CsvExporterTasksController\",\n        controllerAs: \"ctrl\",\n        templateUrl: \"admin/project-csv.html\",\n        link: link,\n        scope: true\n    }\n\nmodule.directive(\"tgCsvTask\", [\"$translate\", CsvTaskDirective])\n\n\nCsvIssueDirective = ($translate) ->\n    link = ($scope) ->\n        $scope.sectionTitle = \"ADMIN.CSV.SECTION_TITLE_ISSUE\"\n\n    return {\n        controller: \"CsvExporterIssuesController\",\n        controllerAs: \"ctrl\",\n        templateUrl: \"admin/project-csv.html\",\n        link: link,\n        scope: true\n    }\n\nmodule.directive(\"tgCsvIssue\", [\"$translate\", CsvIssueDirective])\n\n\n#############################################################################\n## Project Logo Directive\n#############################################################################\n\nProjectLogoDirective = ($auth, $model, $rs, $confirm) ->\n    link = ($scope, $el, $attrs) ->\n        showSizeInfo = ->\n            $el.find(\".size-info\").addClass(\"active\")\n\n        onSuccess = (response) ->\n            project = $model.make_model(\"projects\", response.data)\n            $scope.project = project\n\n            $el.find('.loading-overlay').removeClass('active')\n            $confirm.notify('success')\n\n        onError = (response) ->\n            showSizeInfo() if response.status == 413\n            $el.find('.loading-overlay').removeClass('active')\n            $confirm.notify('error', response.data._error_message)\n\n        # Change photo\n        $el.on \"click\", \".js-change-logo\", ->\n            $el.find(\"#logo-field\").click()\n\n        $el.on \"change\", \"#logo-field\", (event) ->\n            if $scope.logoAttachment\n                $el.find('.loading-overlay').addClass(\"active\")\n                $rs.projects.changeLogo($scope.project.id, $scope.logoAttachment).then(onSuccess, onError)\n\n        # Use default photo\n        $el.on \"click\", \"a.js-use-default-logo\", (event) ->\n            $el.find('.loading-overlay').addClass(\"active\")\n            $rs.projects.removeLogo($scope.project.id).then(onSuccess, onError)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link:link}\n\nmodule.directive(\"tgProjectLogo\", [\"$tgAuth\", \"$tgModel\", \"$tgResources\", \"$tgConfirm\", ProjectLogoDirective])\n\n\n#############################################################################\n## Project Logo Model Directive\n#############################################################################\n\nProjectLogoModelDirective = ($parse) ->\n    link = ($scope, $el, $attrs) ->\n        model = $parse($attrs.tgProjectLogoModel)\n        modelSetter = model.assign\n\n        $el.bind 'change', ->\n            $scope.$apply ->\n                modelSetter($scope, $el[0].files[0])\n\n    return {link:link}\n\nmodule.directive('tgProjectLogoModel', ['$parse', ProjectLogoModelDirective])\n\n\nAdminProjectRestrictionsDirective = () ->\n    return {\n        scope: {\n            \"project\": \"=\"\n        },\n        templateUrl: \"admin/admin-project-restrictions.html\"\n    }\n\nmodule.directive('tgAdminProjectRestrictions', [AdminProjectRestrictionsDirective])\n\nAdminProjectRequestOwnershipDirective = (lightboxFactory) ->\n    return {\n        link: (scope) ->\n            scope.requestOwnership = () ->\n                lightboxFactory.create(\"tg-lb-request-ownership\", {\n                    \"class\": \"lightbox lightbox-request-ownership\"\n                }, {\n                    projectId: scope.projectId\n                })\n\n        scope: {\n            \"projectId\": \"=\",\n            \"owner\": \"=\"\n        },\n        templateUrl: \"admin/admin-project-request-ownership.html\"\n    }\n\nmodule.directive('tgAdminProjectRequestOwnership', [\"tgLightboxFactory\", AdminProjectRequestOwnershipDirective])\n\nAdminProjectChangeOwnerDirective = (lightboxFactory) ->\n    return {\n        link: (scope) ->\n            scope.changeOwner = () ->\n                lightboxFactory.create(\"tg-lb-change-owner\", {\n                    \"class\": \"lightbox lightbox-select-user\",\n                    \"project-id\": \"projectId\",\n                    \"active-users\": \"activeUsers\",\n                    \"current-owner-id\": \"currentOwnerId\"\n                }, {\n                    projectId: scope.projectId,\n                    activeUsers: scope.activeUsers,\n                    currentOwnerId: scope.owner.id,\n                    members: scope.members\n                })\n\n        scope: {\n            \"activeUsers\": \"=\"\n            \"projectId\": \"=\"\n            \"owner\": \"=\"\n            \"members\": \"=\"\n        },\n        templateUrl: \"admin/admin-project-change-owner.html\"\n    }\n\nmodule.directive('tgAdminProjectChangeOwner', [\"tgLightboxFactory\", AdminProjectChangeOwnerDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/admin/project-values.coffee\n###\n\ntaiga = @.taiga\n\nmixOf = @.taiga.mixOf\ntrim = @.taiga.trim\ntoString = @.taiga.toString\njoinStr = @.taiga.joinStr\ngroupBy = @.taiga.groupBy\nbindOnce = @.taiga.bindOnce\ndebounce = @.taiga.debounce\ngetDefaulColorList = @.taiga.getDefaulColorList\n\nmodule = angular.module(\"taigaAdmin\")\n\n#############################################################################\n## Project values section Controller\n#############################################################################\n\nclass ProjectValuesSectionController extends mixOf(taiga.Controller, taiga.PageMixin)\n    @.$inject = [\n        \"$scope\",\n        \"$rootScope\",\n        \"$tgRepo\",\n        \"$tgConfirm\",\n        \"$tgResources\",\n        \"$routeParams\",\n        \"$q\",\n        \"$tgLocation\",\n        \"$tgNavUrls\",\n        \"tgAppMetaService\",\n        \"$translate\",\n        \"tgErrorHandlingService\",\n        \"tgProjectService\"\n    ]\n\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @params, @q, @location, @navUrls,\n                  @appMetaService, @translate, @errorHandlingService, @projectService) ->\n        @scope.project = {}\n\n        @.loadInitialData()\n\n        sectionName = @translate.instant(@scope.sectionName)\n\n        title = @translate.instant(\"ADMIN.PROJECT_VALUES.PAGE_TITLE\", {\n            \"sectionName\": sectionName,\n            \"projectName\": @scope.project.name\n        })\n\n        description = @scope.project.description\n        @appMetaService.setAll(title, description)\n\n    loadProject: ->\n        project = @projectService.project.toJS()\n\n        if not project.i_am_admin\n            @errorHandlingService.permissionDenied()\n\n        @scope.projectId = project.id\n        @scope.project = project\n        @scope.$emit('project:loaded', project)\n        return project\n\n    loadInitialData: ->\n        promise = @.loadProject()\n        return promise\n\n\nmodule.controller(\"ProjectValuesSectionController\", ProjectValuesSectionController)\n\n#############################################################################\n## Project values Controller\n#############################################################################\n\nclass ProjectValuesController extends taiga.Controller\n    @.$inject = [\n        \"$scope\",\n        \"$rootScope\",\n        \"$tgRepo\",\n        \"$tgConfirm\",\n        \"$tgResources\",\n    ]\n\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs) ->\n        @scope.$on(\"admin:project-values:move\", @.moveValue)\n\n        unwatch = @scope.$watch \"resource\", (resource) =>\n            if resource\n                @.loadValues()\n                unwatch()\n    loadValues: =>\n        return @rs[@scope.resource].listValues(@scope.projectId, @scope.type).then (values) =>\n            if values.length\n                @scope.values = values\n                @scope.maxValueOrder = _.maxBy(values, \"order\").order\n            return values\n\n    moveValue: (ctx, itemValue, itemIndex) =>\n        values = @scope.values\n        r = values.indexOf(itemValue)\n        values.splice(r, 1)\n        values.splice(itemIndex, 0, itemValue)\n        _.each values, (value, index) ->\n            value.order = index\n\n        @repo.saveAll(values).then () =>\n            @rootscope.$broadcast(\"admin:project-values:updated\")\n\nmodule.controller(\"ProjectValuesController\", ProjectValuesController)\n\n\n#############################################################################\n## Project due dates values Controller\n#############################################################################\n\nclass ProjectDueDatesValuesController extends ProjectValuesController\n    @.$inject = [\n        \"$scope\",\n        \"$rootScope\",\n        \"$tgRepo\",\n        \"$tgConfirm\",\n        \"$tgResources\",\n    ]\n\n    loadValues: =>\n        return @rs[@scope.resource].listValues(@scope.projectId, @scope.type).then (values) =>\n            if values.length\n                @scope.maxValueOrder = _.maxBy(values, \"order\").order\n                @displayValues(values)\n            else\n                @createDefaultValues()\n            return values\n\n    createDefaultValues: =>\n        if !@rs[@scope.resource].createDefaultValues?\n            return\n        return @rs[@scope.resource].createDefaultValues(@scope.projectId, @scope.type).then (response) =>\n            @rootscope.$broadcast(\"admin:project-values:updated\")\n            values = response.data\n            if values.length\n                @scope.maxValueOrder = _.maxBy(values, \"order\").order\n                @displayValues(values)\n            return values\n\n    displayValues: (values) =>\n        _.each values, (value, index) ->\n            value.days_to_due_abs = if value.days_to_due != null then Math.abs(value.days_to_due) else null\n            value.sign =  if value.days_to_due >= 0 then 1 else -1\n        @scope.values = values\n\nmodule.controller(\"ProjectDueDatesValuesController\", ProjectDueDatesValuesController)\n\n#############################################################################\n## Project values directive\n#############################################################################\n\nProjectValuesDirective = ($log, $repo, $confirm, $location, animationFrame, $translate, $rootscope, projectService) ->\n    ## Drag & Drop Link\n\n    linkDragAndDrop = ($scope, $el, $attrs) ->\n        oldParentScope = null\n        newParentScope = null\n        itemEl = null\n        tdom = $el.find(\".sortable\")\n\n        drake = dragula([tdom[0]], {\n            direction: 'vertical',\n            copySortSource: false,\n            copy: false,\n            mirrorContainer: tdom[0],\n            moves: (item) -> return $(item).is('div[tg-bind-scope]')\n        })\n\n        drake.on 'dragend', (item) ->\n            itemEl = $(item)\n            itemValue = itemEl.scope().value\n            itemIndex = itemEl.index()\n            $scope.$broadcast(\"admin:project-values:move\", itemValue, itemIndex)\n\n        scroll = autoScroll(window, {\n            margin: 20,\n            pixels: 30,\n            scrollWhenOutside: true,\n            autoScroll: () ->\n                return this.down && drake.dragging\n        })\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n            drake.destroy()\n\n    ## Value Link\n\n    linkValue = ($scope, $el, $attrs) ->\n        $ctrl = $el.controller()\n        valueType = $attrs.type\n        objName = $attrs.objname\n\n        initializeNewValue = ->\n            $scope.newValue = {\n                \"name\": \"\"\n                \"is_closed\": false\n                \"is_archived\": false\n            }\n\n        initializeTextTranslations = ->\n            $scope.addNewElementText = $translate.instant(\n                \"ADMIN.PROJECT_VALUES_#{objName.toUpperCase()}.ACTION_ADD\"\n            )\n\n        initializeNewValue()\n        initializeTextTranslations()\n\n        $rootscope.$on \"$translateChangeEnd\", ->\n            $scope.$evalAsync(initializeTextTranslations)\n\n        goToBottomList = (focus = false) =>\n            table = $el.find(\".table-main\")\n\n            $(document.body).scrollTop(table.offset().top + table.height())\n\n            if focus\n                $el.find(\".new-value input:visible\").first().focus()\n\n        saveValue = (target) ->\n            formEl = target.parents(\"form\")\n            form = formEl.checksley()\n            return if not form.validate()\n\n            value = formEl.scope().value\n            promise = $repo.save(value)\n            promise.then ->\n                row = target.parents(\".row.table-main\")\n                row.addClass(\"hidden\")\n                row.siblings(\".visualization\").removeClass('hidden')\n                $rootscope.$broadcast(\"admin:project-values:updated\")\n\n                projectService.fetchProject()\n\n            promise.then null, (data) ->\n                form.setErrors(data)\n\n        saveNewValue = (target) ->\n            formEl = target.parents(\"form\")\n            form = formEl.checksley()\n            return if not form.validate()\n\n            $scope.newValue.project = $scope.project.id\n\n            $scope.newValue.order = if $scope.maxValueOrder then $scope.maxValueOrder + 1 else 1\n\n            promise = $repo.create(valueType, $scope.newValue)\n            promise.then (data) ->\n                target.addClass(\"hidden\")\n                $scope.values.push(data)\n                $scope.maxValueOrder = data.order\n                initializeNewValue()\n                $rootscope.$broadcast(\"admin:project-values:updated\")\n\n            promise.then null, (data) ->\n                form.setErrors(data)\n\n        cancel = (target) ->\n            row = target.parents(\".row.table-main\")\n            formEl = target.parents(\"form\")\n            value = formEl.scope().value\n            $scope.$apply ->\n                row.addClass(\"hidden\")\n                value.revert()\n                row.siblings(\".visualization\").removeClass('hidden')\n\n        $el.on \"click\", \".show-add-new\", (event) ->\n            event.preventDefault()\n            $el.find(\".new-value\").removeClass('hidden')\n\n            goToBottomList(true)\n\n        $el.on \"click\", \".add-new\", debounce 2000, (event) ->\n            event.preventDefault()\n            target = $el.find(\".new-value\")\n            saveNewValue(target)\n\n        $el.on \"click\", \".delete-new\", (event) ->\n            event.preventDefault()\n            $el.find(\".new-value\").addClass(\"hidden\")\n            initializeNewValue()\n\n        $el.on \"click\", \".edit-value\", (event) ->\n            event.preventDefault()\n            target = angular.element(event.currentTarget)\n\n            row = target.parents(\".row.table-main\")\n            row.addClass(\"hidden\")\n\n            editionRow = row.siblings(\".edition\")\n            editionRow.removeClass('hidden')\n            editionRow.find('input:visible').first().focus().select()\n\n        $el.on \"keyup\", \".new-value input\", (event) ->\n            if event.keyCode == 13\n                target = $el.find(\".new-value\")\n                saveNewValue(target)\n            else if event.keyCode == 27\n                $el.find(\".new-value\").addClass(\"hidden\")\n                initializeNewValue()\n\n        $el.on \"click\", \".save\", (event) ->\n            event.preventDefault()\n            target = angular.element(event.currentTarget)\n            saveValue(target)\n\n        $el.on \"click\", \".cancel\", (event) ->\n            event.preventDefault()\n            target = angular.element(event.currentTarget)\n            cancel(target)\n\n        $el.on \"click\", \".delete-value\", (event) ->\n            event.preventDefault()\n            target = angular.element(event.currentTarget)\n            formEl = target.parents(\"form\")\n            value = formEl.scope().value\n\n            choices = {}\n            _.each $scope.values, (option) ->\n                if value.id != option.id\n                    choices[option.id] = option.name\n\n            subtitle = value.name\n\n            if _.keys(choices).length == 0\n                return $confirm.error($translate.instant(\"ADMIN.PROJECT_VALUES.ERROR_DELETE_ALL\"))\n\n            title = $translate.instant(\"ADMIN.COMMON.TITLE_ACTION_DELETE_VALUE\")\n            text = $translate.instant(\"ADMIN.PROJECT_VALUES.REPLACEMENT\")\n\n            $confirm.askChoice(title, subtitle, choices, text).then (response) ->\n                onSucces = ->\n                    $ctrl.loadValues().finally ->\n                        $rootscope.$broadcast(\"admin:project-values:updated\")\n                        response.finish()\n                onError = ->\n                    $confirm.notify(\"error\")\n                $repo.remove(value, {\"moveTo\": response.selected}).then(onSucces, onError)\n\n    link = ($scope, $el, $attrs) ->\n        linkDragAndDrop($scope, $el, $attrs)\n        linkValue($scope, $el, $attrs)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link:link}\n\nmodule.directive(\"tgProjectValues\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"animationFrame\",\n                                     \"$translate\", \"$rootScope\", \"tgProjectService\", ProjectValuesDirective])\n\n#############################################################################\n## Project due dates values directive\n#############################################################################\n\nProjectDueDatesValues = ($log, $repo, $confirm, $location, animationFrame, $translate, $rootscope, projectService) ->\n    parentDirective = ProjectValuesDirective($log, $repo, $confirm, $location, animationFrame,\n    $translate, $rootscope, projectService)\n\n    linkDueDateStatusValue = ($scope, $el, $attrs, $ctrl) ->\n        $ctrl = $el.controller()\n        valueType = $attrs.type\n\n        initializeNewValue = ->\n            $scope.newValue = {\n                \"name\": \"\"\n                \"days_to_due\": 0\n                \"sign\": 1\n            }\n\n        initializeNewValue()\n\n        _setDaysToDue = (value) ->\n            value.days_to_due = value.days_to_due_abs * value.sign\n\n        _valueFromEventTarget = (event) ->\n            target = angular.element(event.currentTarget)\n            row = target.parents(\".row.table-main\")\n            formEl = target.parents(\"form\")\n            if not formEl.scope().value\n                return formEl.scope().newValue\n            else\n                return formEl.scope().value\n\n        saveNewValue = (target) ->\n            formEl = target.parents(\"form\")\n            form = formEl.checksley()\n            return if not form.validate()\n\n            $scope.newValue.project = $scope.project.id\n\n            $scope.newValue.order = if $scope.maxValueOrder then $scope.maxValueOrder + 1 else 1\n\n            promise = $repo.create(valueType, $scope.newValue)\n            promise.then (data) ->\n                target.addClass(\"hidden\")\n                data.sign = $scope.newValue.sign\n                data.days_to_due_abs = $scope.newValue.days_to_due_abs\n\n                $scope.values.push(data)\n                $rootscope.$broadcast(\"admin:project-values:updated\")\n                initializeNewValue()\n\n            promise.then null, (data) ->\n                form.setErrors(data)\n\n        $el.on \"input\", \".days-to-due-abs\", (event) ->\n            event.preventDefault()\n            value = _valueFromEventTarget(event)\n            $scope.$apply ->\n                _setDaysToDue(value)\n\n        $el.on \"click\", \".days-to-due-sign\", (event) ->\n            event.preventDefault()\n            value = _valueFromEventTarget(event)\n            $scope.$apply ->\n                value.sign = value.sign * -1\n                _setDaysToDue(value)\n\n        $el.on \"click\", \".add-new-due-date\", debounce 2000, (event) ->\n            event.preventDefault()\n            target = $el.find(\".new-value\")\n            saveNewValue(target)\n\n        $el.on \"click\", \".delete-due-date\", (event) ->\n            event.preventDefault()\n            target = angular.element(event.currentTarget)\n            formEl = target.parents(\"form\")\n            value = formEl.scope().value\n\n            title = $translate.instant(\"LIGHTBOX.ADMIN_DUE_DATES.TITLE_ACTION_DELETE_DUE_DATE\")\n            subtitle = $translate.instant(\"LIGHTBOX.ADMIN_DUE_DATES.SUBTITLE_ACTION_DELETE_DUE_DATE\",\n                                          {due_date_status_name:  value.name})\n\n            $confirm.ask(title, subtitle).then (response) ->\n                onSucces = ->\n                    $ctrl.loadValues().finally ->\n                        $rootscope.$broadcast(\"admin:project-values:updated\")\n                        response.finish()\n                onError = ->\n                    $confirm.notify(\"error\")\n                $repo.remove(value).then(onSucces, onError)\n\n\n    return {\n        link: ($scope, $el, $attrs) ->\n            parentDirective.link($scope, $el, $attrs)\n            linkDueDateStatusValue($scope, $el, $attrs)\n    }\n\nmodule.directive(\"tgProjectDueDatesValues\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"animationFrame\",\n                                             \"$translate\", \"$rootScope\", \"tgProjectService\", ProjectDueDatesValues])\n\n#############################################################################\n## Color selection directive\n#############################################################################\n\nColorSelectionDirective = () ->\n    ## Color selection Link\n\n    link = ($scope, $el, $attrs, $model) ->\n        $scope.colorList = getDefaulColorList()\n\n        $scope.allowEmpty = false\n        if $attrs.tgAllowEmpty\n            $scope.allowEmpty = true\n\n        $ctrl = $el.controller()\n\n        $scope.$watch $attrs.ngModel, (element) ->\n            $scope.color = element.color\n\n        $el.on \"click\", \".current-color\", (event) ->\n            # Showing the color selector\n            event.preventDefault()\n            event.stopPropagation()\n            target = angular.element(event.currentTarget)\n            $(\".select-color\").hide()\n            target.siblings(\".select-color\").show()\n            # Hide when click outside\n            body = angular.element(\"body\")\n            body.on \"click\", (event) =>\n                if angular.element(event.target).parent(\".select-color\").length == 0\n                    $el.find(\".select-color\").hide()\n                    body.unbind(\"click\")\n\n        $el.on \"click\", \".select-color .color\", (event) ->\n            # Selecting one color on color selector\n            event.preventDefault()\n            target = angular.element(event.currentTarget)\n            $scope.$apply ->\n                $model.$modelValue.color = target.data(\"color\")\n            $el.find(\".select-color\").hide()\n\n        $el.on \"click\", \".select-color .selected-color\", (event) ->\n            event.preventDefault()\n            $scope.$apply ->\n                $model.$modelValue.color = $scope.color\n            $el.find(\".select-color\").hide()\n\n        $el.on \"keyup\", \"input\", (event) ->\n            event.stopPropagation()\n            if event.keyCode == 13\n                $scope.$apply ->\n                    $model.$modelValue.color = $scope.color\n                $el.find(\".select-color\").hide()\n\n            else if event.keyCode == 27\n                $el.find(\".select-color\").hide()\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n      return {\n          link: link\n          require:\"ngModel\"\n      }\n\nmodule.directive(\"tgColorSelection\", ColorSelectionDirective)\n\n\n#############################################################################\n## Custom Attributes Controller\n#############################################################################\n\n# Custom attributes types (see taiga-back/taiga/projects/custom_attributes/choices.py)\nTEXT_TYPE = \"text\"\nMULTILINE_TYPE = \"multiline\"\nRICHTEXT_TYPE = \"richtext\"\nDATE_TYPE = \"date\"\nURL_TYPE = \"url\"\nDROPDOWN_TYPE = \"dropdown\"\nCHECKBOX_TYPE = \"checkbox\"\nNUMBER_TYPE = \"number\"\n\n\nTYPE_CHOICES = [\n    {\n        key: TEXT_TYPE,\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_TEXT\"\n    },\n    {\n        key: MULTILINE_TYPE,\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_MULTI\"\n    },\n    {\n        key: RICHTEXT_TYPE,\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_RICHTEXT\"\n    },\n    {\n        key: DATE_TYPE,\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_DATE\"\n    },\n    {\n        key: URL_TYPE,\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_URL\"\n    },\n    {\n        key: DROPDOWN_TYPE,\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_DROPDOWN\"\n    },\n    {\n        key: CHECKBOX_TYPE,\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_CHECKBOX\"\n    },\n    {\n        key: NUMBER_TYPE,\n        name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_NUMBER\"\n    }\n]\n\nclass ProjectCustomAttributesController extends mixOf(taiga.Controller, taiga.PageMixin)\n    @.$inject = [\n        \"$scope\",\n        \"$rootScope\",\n        \"$tgRepo\",\n        \"$tgResources\",\n        \"$routeParams\",\n        \"$q\",\n        \"$tgLocation\",\n        \"$tgNavUrls\",\n        \"tgAppMetaService\",\n        \"$translate\",\n        \"tgProjectService\"\n    ]\n\n    constructor: (@scope, @rootscope, @repo, @rs, @params, @q, @location, @navUrls, @appMetaService,\n                  @translate, @projectService) ->\n        @scope.TYPE_CHOICES = TYPE_CHOICES\n        @scope.project = @projectService.project.toJS()\n        @scope.projectId = @scope.project.id\n\n        sectionName = @translate.instant(@scope.sectionName)\n        title = @translate.instant(\"ADMIN.CUSTOM_ATTRIBUTES.PAGE_TITLE\", {\n            \"sectionName\": sectionName,\n            \"projectName\": @scope.project.name\n        })\n        description = @scope.project.description\n        @appMetaService.setAll(title, description)\n\n        @scope.init = (type) =>\n            @scope.type = type\n            @.loadCustomAttributes()\n\n    #########################\n    # Custom Attribute\n    #########################\n    _parseAttributesExtra: () ->\n        @scope.customAttributes = _.map(@scope.customAttributes, (x) => @._parseAttributeExtra(x))\n\n    _parseAttributeExtra: (attr) ->\n        if (attr.type == 'dropdown' && !attr.extra)\n            attr.extra = ['']\n        return attr\n\n    _onCustomAttributesModified: =>\n        @rootscope.$broadcast(\"admin:project-custom-attributes:updated\")\n\n    loadCustomAttributes: =>\n        return @rs.customAttributes[@scope.type].list(@scope.projectId).then (customAttributes) =>\n            @scope.customAttributes = customAttributes\n            @scope.maxOrder = _.maxBy(customAttributes, \"order\")?.order\n            @._parseAttributesExtra()\n            return customAttributes\n\n    createCustomAttribute: (attrValues) =>\n        return @repo.create(\"custom-attributes/#{@scope.type}\", attrValues).then =>\n            @._onCustomAttributesModified()\n\n    saveCustomAttribute: (attrModel) =>\n        return @repo.save(attrModel).then =>\n            @._onCustomAttributesModified()\n\n    deleteCustomAttribute: (attrModel) =>\n        return @repo.remove(attrModel).then =>\n            @._onCustomAttributesModified()\n\n    moveCustomAttributes: (attrModel, newIndex) =>\n        customAttributes = @scope.customAttributes\n        r = customAttributes.indexOf(attrModel)\n        customAttributes.splice(r, 1)\n        customAttributes.splice(newIndex, 0, attrModel)\n\n        _.each customAttributes, (val, idx) ->\n            val.order = idx\n\n        @repo.saveAll(customAttributes).then =>\n            @._onCustomAttributesModified()\n\n\nmodule.controller(\"ProjectCustomAttributesController\", ProjectCustomAttributesController)\n\n\n#############################################################################\n## Custom Attributes Directive\n#############################################################################\n\nProjectCustomAttributesDirective = ($log, $confirm, animationFrame, $translate) ->\n    link = ($scope, $el, $attrs) ->\n        $ctrl = $el.controller()\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n        $scope.isExtraVisible = {}\n\n        _manageFormEvent = (event, callback) ->\n            event.preventDefault()\n            formEl = angular.element(event.currentTarget).closest(\"form\")\n            callback(formEl)\n\n        ##################################\n        # Drag & Drop\n        ##################################\n\n        initDraggable = ->\n            sortableEl = $el.find(\".js-sortable\")\n            drake = dragula([sortableEl[0]], {\n                direction: 'vertical',\n                copySortSource: false,\n                copy: false,\n                mirrorContainer: sortableEl[0],\n                moves: (item, source, handle) ->\n                    childItem = $(handle).closest('.js-child-sortable')\n                    if childItem[0]\n                        return false\n                    return $(item).is('div[tg-bind-scope]')\n            })\n\n            drake.on 'dragend', (item) ->\n                itemEl = $(item)\n                itemAttr = itemEl.scope().attr\n                itemIndex = itemEl.index()\n                $ctrl.moveCustomAttributes(itemAttr, itemIndex)\n                \n            sortableChildren = $el.find(\".js-child-sortable\")\n            for el in sortableChildren\n                drake[el] = dragula([el], {\n                    direction: 'vertical',\n                    copySortSource: false,\n                    copy: false,\n                    mirrorContainer: el,\n                    moves: (item) -> return $(item).is('div[tg-bind-scope]')\n                })\n\n                drake[el].on 'dragend', (item) ->\n                    itemEl = $(item)\n                    attrExtra = itemEl.scope().attr.extra\n\n                    sourceIndex = itemEl.scope().$index\n                    targetIndex = itemEl.index()\n\n                    value = attrExtra[sourceIndex]\n\n                    attrExtra.splice(sourceIndex, 1)\n                    attrExtra.splice(targetIndex, 0, value)\n\n                    itemEl.scope().attr.setAttr('extra', attrExtra)\n                    $ctrl.saveCustomAttribute(itemEl.scope().attr).then ->\n                        $confirm.notify(\"success\")\n\n\n        ##################################\n        # New custom attribute\n        ##################################\n\n        showCreateForm = ->\n            $el.find(\".js-new-custom-field\").removeClass(\"hidden\")\n            $el.find(\".js-new-custom-field input:visible\").first().focus()\n\n        hideCreateForm = ->\n            $el.find(\".js-new-custom-field\").addClass(\"hidden\")\n\n        showAddButton = ->\n            $el.find(\".js-add-custom-field-button\").removeClass(\"hidden\")\n\n        hideAddButton = ->\n            $el.find(\".js-add-custom-field-button\").addClass(\"hidden\")\n\n        showCancelButton = ->\n            $el.find(\".js-cancel-new-custom-field-button\").removeClass(\"hidden\")\n\n        hideCancelButton = ->\n            $el.find(\".js-cancel-new-custom-field-button\").addClass(\"hidden\")\n\n        resetNewAttr = ->\n            $scope.newAttr = {}\n\n        create = (formEl) ->\n            form = formEl.checksley()\n            return if not form.validate()\n\n            onSucces = ->\n                $ctrl.loadCustomAttributes()\n                hideCreateForm()\n                resetNewAttr()\n                $confirm.notify(\"success\")\n\n            onError = (data) ->\n                form.setErrors(data)\n\n            attr = $scope.newAttr\n            attr.project = $scope.projectId\n            attr.order = if $scope.maxOrder then $scope.maxOrder + 1 else 1\n\n            $ctrl.createCustomAttribute(attr).then(onSucces, onError)\n\n        cancelCreate = ->\n            hideCreateForm()\n            resetNewAttr()\n\n        initAttrType = (formEl) ->\n            attr =  if formEl.scope().newAttr then formEl.scope().newAttr else formEl.scope().attr\n\n            if attr.type isnt \"dropdown\"\n                return\n\n            if attr.extra?.length\n                return\n\n            attr.extra = ['']\n            if attr.id\n                showEditForm(formEl)\n            else\n                showExtra(-1)\n                formEl.scope().$apply()\n\n        $scope.$watch \"customAttributes\", (customAttributes) ->\n            return if not customAttributes\n\n            if customAttributes.length == 0\n                hideCancelButton()\n                hideAddButton()\n                showCreateForm()\n            else\n                hideCreateForm()\n                showAddButton()\n                showCancelButton()\n                initDraggable()\n\n        $el.on \"change\", \".custom-field-type select\", (event) ->\n            _manageFormEvent(event, initAttrType)\n\n        $el.on \"click\", \".js-add-custom-field-button\", (event) ->\n            _manageFormEvent(event, showCreateForm)\n\n        $el.on \"click\", \".js-create-custom-field-button\", debounce 2000, (event) ->\n            _manageFormEvent(event, create)\n\n        $el.on \"click\", \".js-cancel-new-custom-field-button\", (event) ->\n            event.preventDefault()\n            cancelCreate()\n\n        $el.on \"keyup\", \".js-new-custom-field input\", (event) ->\n            if event.keyCode == 13 # Enter\n                _manageFormEvent(event, create)\n            else if event.keyCode == 27 # Esc\n                cancelCreate()\n\n        ##################################\n        # Edit custom attribute\n        ##################################\n\n        showEditForm = (formEl) ->\n            formEl.find(\".js-view-custom-field\").addClass(\"hidden\")\n            formEl.find(\".js-edit-custom-field\").removeClass(\"hidden\")\n            formEl.find(\".js-edit-custom-field input:visible\").first().focus().select()\n            formEl.find(\".js-view-custom-field-extra\").addClass(\"hidden\")\n            formEl.find(\".js-edit-custom-field-extra\").removeClass(\"hidden\")\n            formEl.find(\".custom-extra-actions\").removeClass(\"hidden\")\n            showExtra(formEl.scope().attr.id)\n            $scope.$apply()\n\n        update = (formEl) ->\n            form = formEl.checksley()\n            return if not form.validate()\n            onSucces = ->\n                $ctrl.loadCustomAttributes()\n                hideEditForm(formEl)\n                $confirm.notify(\"success\")\n\n            onError = (data) ->\n                form.setErrors(data)\n\n            attr = formEl.scope().attr\n            attr.setAttr('extra', attr.extra)\n            $ctrl.saveCustomAttribute(attr).then(onSucces, onError)\n\n        cancelUpdate = (formEl) ->\n            hideEditForm(formEl)\n            revertChangesInCustomAttribute(formEl)\n\n        hideEditForm = (formEl) ->\n            formEl.find(\".js-edit-custom-field\").addClass(\"hidden\")\n            formEl.find(\".js-view-custom-field\").removeClass(\"hidden\")\n            formEl.find(\".js-edit-custom-field-extra\").addClass(\"hidden\")\n            formEl.find(\".js-view-custom-field-extra\").removeClass(\"hidden\")\n            formEl.find(\".custom-extra-actions\").addClass(\"hidden\")\n\n        revertChangesInCustomAttribute = (formEl) ->\n            $scope.$apply ->\n                formEl.scope().attr.revert()\n\n        $el.on \"click\", \".js-edit-custom-field-button\", (event) ->\n            _manageFormEvent(event, showEditForm)\n\n        $el.on \"click\", \".js-update-custom-field-button\", debounce 1000, (event) ->\n            _manageFormEvent(event, update)\n\n        $el.on \"click\", \".js-cancel-edit-custom-field-button\", (event) ->\n            _manageFormEvent(event, cancelUpdate)\n\n        $el.on \"keyup\", \".js-edit-custom-field input\", (event) ->\n            if event.keyCode == 13 # Enter\n                _manageFormEvent(event, update)\n            else if event.keyCode == 27 # Esc\n                _manageFormEvent(event, cancelUpdate)\n\n        ##################################\n        # Delete custom attribute\n        ##################################\n\n        deleteCustomAttribute = (formEl) ->\n            attr = formEl.scope().attr\n            message = attr.name\n\n            title = $translate.instant(\"COMMON.CUSTOM_ATTRIBUTES.DELETE\")\n            text = $translate.instant(\"COMMON.CUSTOM_ATTRIBUTES.CONFIRM_DELETE\")\n\n            $confirm.ask(title, text, message).then (response) ->\n                onSucces = ->\n                    $ctrl.loadCustomAttributes().finally -> response.finish()\n\n                onError = ->\n                    $confirm.notify(\"error\", null, \"We have not been able to delete '#{message}'.\")\n\n                $ctrl.deleteCustomAttribute(attr).then(onSucces, onError)\n\n        $el.on \"click\", \".js-delete-custom-field-button\", debounce 2000, (event) ->\n            _manageFormEvent(event, deleteCustomAttribute)\n\n        ##################################\n        # Custom attribute extra\n        ##################################\n\n        $scope.toggleExtraVisible = (index) ->\n            if not $scope.isExtraVisible[index]\n                showExtra(index)\n            else\n                hideExtra(index)\n\n        showExtra = (index) ->\n            $scope.isExtraVisible[index] = true\n\n        hideExtra = (index) ->\n            $scope.isExtraVisible[index] = false\n    \n        _manageExtraFormEvent = (event, callback) ->\n            event.preventDefault()\n            formEl = angular.element(event.currentTarget).closest(\"form\")\n            formExtraEl = angular.element(event.currentTarget).closest(\".js-form\")\n            callback(formEl, formExtraEl)\n\n        addExtraOption = (formEl, formExtraEl) ->\n            formScope = formEl.scope()\n            attrExtra = if formScope.newAttr?.extra then formScope.newAttr.extra else formScope.attr.extra\n            attrExtra.push(\"\")\n            formScope.$apply()\n\n            formEl.find(\".js-edit-custom-field-extra\").last().removeClass(\"hidden\")\n            formEl.find(\".js-view-custom-field-extra\").last().addClass(\"hidden\")\n            formEl.find(\".js-edit-custom-field-extra input\").last().focus()\n\n        removeExtraOption = (formEl, formExtraEl) ->\n            attrExtra = formEl.scope().attr.extra\n            attrExtra.splice(formExtraEl.scope().$index, 1)\n            formExtraEl.scope().$apply()\n\n        $el.on \"keyup\", \".js-edit-custom-field-extra input\", (event) ->\n            if event.keyCode == 13 # Enter\n                _manageFormEvent(event, update)\n            else if event.keyCode == 27 # Esc\n                _manageFormEvent(event, cancelUpdate)\n\n        $el.on \"keyup\", \".js-new-custom-field-extra input\", (event) ->\n            if event.keyCode == 13 # Enter\n                _manageFormEvent(event, create)\n            else if event.keyCode == 27 # Esc\n                cancelCreate()\n  \n        $el.on \"click\", \".js-add-option-custom-field-extra-button\", debounce 500, (event) ->\n            _manageExtraFormEvent(event, addExtraOption)\n\n        $el.on \"click\", \".js-delete-custom-field-extra-button\", debounce 500, (event) ->\n            _manageExtraFormEvent(event, removeExtraOption)\n\n    return {link: link}\n\nmodule.directive(\"tgProjectCustomAttributes\", [\"$log\", \"$tgConfirm\", \"animationFrame\", \"$translate\",\nProjectCustomAttributesDirective])\n\n\n#############################################################################\n## Tags Controller\n#############################################################################\n\nclass ProjectTagsController extends taiga.Controller\n    @.$inject = [\n        \"$scope\",\n        \"$rootScope\",\n        \"$tgRepo\",\n        \"$tgConfirm\",\n        \"$tgResources\",\n        \"$tgModel\",\n        \"tgProjectService\"\n    ]\n\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @model, @projectService) ->\n        @.loading = true\n        @.loadTags()\n\n    loadTags: =>\n        project = @projectService.project.toJS()\n        return @rs.projects.tagsColors(project.id).then (tags) =>\n            @scope.projectTagsAll = _.map tags.getAttrs(), (color, name) =>\n                @model.make_model('tag', {name: name, color: color})\n            @.filterAndSortTags()\n            @.loading = false\n\n    filterAndSortTags: =>\n        @scope.projectTags = _.sortBy @scope.projectTagsAll, (it) -> it.name.toLowerCase()\n\n        @scope.projectTags = _.filter(\n            @scope.projectTags,\n            (tag) => tag.name.indexOf(@scope.tagsFilter.name) != -1\n        )\n\n    createTag: (tag, color) =>\n        return @rs.projects.createTag(@scope.projectId, tag, color)\n\n    editTag: (from_tag, to_tag, color) =>\n        if from_tag == to_tag\n            to_tag = null\n\n        return @rs.projects.editTag(@scope.projectId, from_tag, to_tag, color)\n\n    deleteTag: (tag) =>\n        @scope.loadingDelete = true\n        return @rs.projects.deleteTag(@scope.projectId, tag).finally =>\n            @scope.loadingDelete = false\n\n    startMixingTags: (tag) =>\n        @scope.mixingTags.toTag = tag.name\n\n    toggleMixingFromTags: (tag) =>\n        if tag.name != @scope.mixingTags.toTag\n            index = @scope.mixingTags.fromTags.indexOf(tag.name)\n            if index == -1\n                @scope.mixingTags.fromTags.push(tag.name)\n            else\n                @scope.mixingTags.fromTags.splice(index, 1)\n\n    confirmMixingTags: () =>\n        toTag = @scope.mixingTags.toTag\n        fromTags = @scope.mixingTags.fromTags\n        @scope.loadingMixing = true\n        @rs.projects.mixTags(@scope.projectId, toTag, fromTags)\n            .then =>\n                @.cancelMixingTags()\n                @.loadTags()\n            .finally =>\n                @scope.loadingMixing = false\n\n    cancelMixingTags: () =>\n        @scope.mixingTags.toTag = null\n        @scope.mixingTags.fromTags = []\n\n    mixingClass: (tag) =>\n        if @scope.mixingTags.toTag != null\n            if tag.name == @scope.mixingTags.toTag\n                return \"mixing-tags-to\"\n            else if @scope.mixingTags.fromTags.indexOf(tag.name) != -1\n                return \"mixing-tags-from\"\n\nmodule.controller(\"ProjectTagsController\", ProjectTagsController)\n\n\n#############################################################################\n## Tags directive\n#############################################################################\n\nProjectTagsDirective = ($log, $repo, $confirm, $location, animationFrame, $translate, $rootscope) ->\n    link = ($scope, $el, $attrs) ->\n        $window = $(window)\n        $ctrl = $el.controller()\n        valueType = $attrs.type\n        objName = $attrs.objname\n\n        initializeNewValue = ->\n            $scope.newValue = {\n                \"tag\": \"\"\n                \"color\": \"\"\n            }\n\n        initializeTagsFilter = ->\n            $scope.tagsFilter = {\n                \"name\": \"\"\n            }\n\n        initializeMixingTags = ->\n            $scope.mixingTags = {\n                \"toTag\": null,\n                \"fromTags\": []\n            }\n\n        initializeTextTranslations = ->\n            $scope.addNewElementText = $translate.instant(\"ADMIN.PROJECT_VALUES_TAGS.ACTION_ADD\")\n\n        initializeNewValue()\n        initializeTagsFilter()\n        initializeMixingTags()\n        initializeTextTranslations()\n\n        $rootscope.$on \"$translateChangeEnd\", ->\n            $scope.$evalAsync(initializeTextTranslations)\n\n        goToBottomList = (focus = false) =>\n            table = $el.find(\".table-main\")\n\n            $(document.body).scrollTop(table.offset().top + table.height())\n\n            if focus\n                $el.find(\".new-value input:visible\").first().focus()\n\n        saveValue = (target) ->\n            formEl = target.parents(\"form\")\n            form = formEl.checksley()\n            return if not form.validate()\n\n            tag = formEl.scope().tag\n            originalTag = tag.clone()\n            originalTag.revert()\n\n            $scope.loadingEdit = true\n            promise = $ctrl.editTag(originalTag.name, tag.name, tag.color)\n            promise.then ->\n                $ctrl.loadTags().then ->\n                    row = target.parents(\".row.table-main\")\n                    row.addClass(\"hidden\")\n                    $scope.loadingEdit = false\n                    $rootscope.$broadcast('tags:updated')\n                    row.siblings(\".visualization\").removeClass('hidden')\n\n            promise.then null, (response) ->\n                $scope.loadingEdit = false\n                form.setErrors(response.data)\n\n        saveNewValue = (target) ->\n            formEl = target.parents(\"form\")\n            formEl = target\n            form = formEl.checksley()\n            return if not form.validate()\n\n            $scope.loadingCreate = true\n            promise = $ctrl.createTag($scope.newValue.tag, $scope.newValue.color)\n            promise.then (data) ->\n                $ctrl.loadTags().then ->\n                    $scope.loadingCreate = false\n                    target.addClass(\"hidden\")\n                    $rootscope.$broadcast('tags:updated')\n                    initializeNewValue()\n\n            promise.then null, (response) ->\n                $scope.loadingCreate = false\n                form.setErrors(response.data)\n\n        cancel = (target) ->\n            row = target.parents(\".row.table-main\")\n            formEl = target.parents(\"form\")\n            tag = formEl.scope().tag\n\n            $scope.$apply ->\n                row.addClass(\"hidden\")\n                tag.revert()\n                row.siblings(\".visualization\").removeClass('hidden')\n\n        $scope.$watch \"tagsFilter.name\", (tagsFilter) ->\n            $ctrl.filterAndSortTags()\n\n        $window.on \"keyup\", (event) ->\n            if event.keyCode == 27\n                $scope.$apply ->\n                    initializeMixingTags()\n\n        $el.on \"click\", \".show-add-new\", (event) ->\n            event.preventDefault()\n            $el.find(\".new-value\").removeClass('hidden')\n\n        $el.on \"click\", \".add-new\", debounce 2000, (event) ->\n            event.preventDefault()\n            target = $el.find(\".new-value\")\n            saveNewValue(target)\n\n        $el.on \"click\", \".delete-new\", (event) ->\n            event.preventDefault()\n            $el.find(\".new-value\").addClass(\"hidden\")\n            initializeNewValue()\n\n        $el.on \"click\", \".mix-tags\", (event) ->\n            event.preventDefault()\n            target = angular.element(event.currentTarget)\n            $scope.$apply ->\n                $ctrl.startMixingTags(target.parents('form').scope().tag)\n\n        $el.on \"click\", \".mixing-row\", (event) ->\n            event.preventDefault()\n            target = angular.element(event.currentTarget)\n            $scope.$apply ->\n                $ctrl.toggleMixingFromTags(target.parents('form').scope().tag)\n\n        $el.on \"click\", \".mixing-confirm\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            $scope.$apply ->\n                $ctrl.confirmMixingTags()\n\n        $el.on \"click\", \".mixing-cancel\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            $scope.$apply ->\n                $ctrl.cancelMixingTags()\n\n        $el.on \"click\", \".edit-value\", (event) ->\n            event.preventDefault()\n            target = angular.element(event.currentTarget)\n\n            row = target.parents(\".row.table-main\")\n            row.addClass(\"hidden\")\n\n            editionRow = row.siblings(\".edition\")\n            editionRow.removeClass('hidden')\n            editionRow.find('input:visible').first().focus().select()\n\n        $el.on \"keyup\", \".new-value input\", (event) ->\n            if event.keyCode == 13\n                target = $el.find(\".new-value\")\n                saveNewValue(target)\n            else if event.keyCode == 27\n                $el.find(\".new-value\").addClass(\"hidden\")\n                initializeNewValue()\n\n        $el.on \"keyup\", \".status-name input\", (event) ->\n            target = angular.element(event.currentTarget)\n            if event.keyCode == 13\n                saveValue(target)\n            else if event.keyCode == 27\n                cancel(target)\n\n        $el.on \"click\", \".save\", (event) ->\n            event.preventDefault()\n            target = angular.element(event.currentTarget)\n            saveValue(target)\n\n        $el.on \"click\", \".cancel\", (event) ->\n            event.preventDefault()\n            target = angular.element(event.currentTarget)\n            cancel(target)\n\n        $el.on \"click\", \".delete-tag\", (event) ->\n            event.preventDefault()\n            target = angular.element(event.currentTarget)\n            formEl = target.parents(\"form\")\n            tag = formEl.scope().tag\n\n            title = $translate.instant(\"ADMIN.COMMON.TITLE_ACTION_DELETE_TAG\")\n\n            $confirm.askOnDelete(title, tag.name).then (response) ->\n                onSucces = ->\n                    $ctrl.loadTags().finally ->\n                        $rootscope.$broadcast('tags:updated')\n                        response.finish()\n                onError = ->\n                    $confirm.notify(\"error\")\n                $ctrl.deleteTag(tag.name).then(onSucces, onError)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n            $window.off()\n\n    return {link:link}\n\nmodule.directive(\"tgProjectTags\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"animationFrame\",\n                                   \"$translate\", \"$rootScope\", ProjectTagsDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/admin/roles.coffee\n###\n\ntaiga = @.taiga\n\nmixOf = @.taiga.mixOf\nbindOnce = @.taiga.bindOnce\ndebounce = @.taiga.debounce\nbindMethods = @.taiga.bindMethods\n\nmodule = angular.module(\"taigaAdmin\")\n\n\n#############################################################################\n## Project Roles Controller\n#############################################################################\n\nclass RolesController extends mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin)\n    @.$inject = [\n        \"$scope\",\n        \"$rootScope\",\n        \"$tgRepo\",\n        \"$tgConfirm\",\n        \"$tgResources\",\n        \"$routeParams\",\n        \"$q\",\n        \"$tgLocation\",\n        \"$tgNavUrls\",\n        \"$tgModel\",\n        \"tgAppMetaService\",\n        \"$translate\",\n        \"tgErrorHandlingService\",\n        \"tgProjectService\"\n    ]\n\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @params, @q, @location, @navUrls,\n                  @model, @appMetaService, @translate, @errorHandlingService, @projectService) ->\n        bindMethods(@)\n\n        @scope.sectionName = \"ADMIN.MENU.PERMISSIONS\"\n        @scope.project = {}\n        @scope.anyComputableRole = true\n\n        promise = @.loadInitialData()\n\n        promise.then () =>\n            title = @translate.instant(\"ADMIN.ROLES.PAGE_TITLE\", {projectName: @scope.project.name})\n            description = @scope.project.description\n            @appMetaService.setAll(title, description)\n\n        promise.then null, @.onInitialDataError.bind(@)\n\n    loadProject: ->\n        project = @projectService.project.toJS()\n        project = @model.make_model(\"projects\", project)\n\n        if not project.i_am_admin\n            @errorHandlingService.permissionDenied()\n\n        @scope.projectId = project.id\n        @scope.project = project\n\n        @scope.$emit('project:loaded', project)\n        @scope.anyComputableRole = _.some(_.map(project.roles, (point) -> point.computable))\n\n        return project\n\n    loadRoles: ->\n        return @rs.roles.list(@scope.projectId).then (roles) =>\n            roles = roles.map (role) ->\n                role.external_user = false\n\n                return role\n\n            public_permission = {\n                \"name\": @translate.instant(\"ADMIN.ROLES.EXTERNAL_USER\"),\n                \"permissions\": @scope.project.public_permissions,\n                \"external_user\": true\n            }\n\n            roles.push(public_permission)\n\n            @scope.roles = roles\n            @scope.role = @scope.roles[0]\n\n            return roles\n\n    loadInitialData: ->\n        @.loadProject()\n        return @.loadRoles()\n\n    forceLoadProject: () ->\n        @rootscope.$broadcast(\"admin:project-roles:updated\")\n\n    setRole: (role) ->\n        @scope.role = role\n        @scope.$broadcast(\"role:changed\", @scope.role)\n\n    delete: ->\n        choices = {}\n        for role in @scope.roles\n            if role.id != @scope.role.id\n                choices[role.id] = role.name\n\n        if _.keys(choices).length == 0\n            return @confirm.error(@translate.instant(\"ADMIN.ROLES.ERROR_DELETE_ALL\"))\n\n        title = @translate.instant(\"ADMIN.ROLES.TITLE_DELETE_ROLE\")\n        subtitle = @scope.role.name\n        replacement = @translate.instant(\"ADMIN.ROLES.REPLACEMENT_ROLE\")\n        warning = @translate.instant(\"ADMIN.ROLES.WARNING_DELETE_ROLE\")\n        return @confirm.askChoice(title, subtitle, choices, replacement, warning).then (response) =>\n            onSuccess = =>\n                @.forceLoadProject()\n                @.loadRoles().finally =>\n                    response.finish()\n            onError = =>\n                @confirm.notify('error')\n\n            return @repo.remove(@scope.role, {moveTo: response.selected}).then onSuccess, onError\n\n    _enableComputable: =>\n        onSuccess = =>\n            @confirm.notify(\"success\")\n            @.forceLoadProject()\n\n        onError = =>\n            @confirm.notify(\"error\")\n            @scope.role.revert()\n\n        @repo.save(@scope.role).then onSuccess, onError\n\n    _disableComputable: =>\n        askOnSuccess = (response) =>\n            onSuccess = =>\n                response.finish()\n                @confirm.notify(\"success\")\n                @.forceLoadProject()\n            onError = =>\n                response.finish()\n                @confirm.notify(\"error\")\n                @scope.role.revert()\n            @repo.save(@scope.role).then onSuccess, onError\n\n        askOnError = (response) =>\n            @scope.role.revert()\n\n        title = @translate.instant(\"ADMIN.ROLES.DISABLE_COMPUTABLE_ALERT_TITLE\")\n        subtitle = @translate.instant(\"ADMIN.ROLES.DISABLE_COMPUTABLE_ALERT_SUBTITLE\", {\n            roleName: @scope.role.name\n        })\n        return @confirm.ask(title, subtitle, \"\").then askOnSuccess, askOnError\n\n    toggleComputable: debounce 2000, ->\n        if not @scope.role.computable\n            @._disableComputable()\n        else\n            @._enableComputable()\n\nmodule.controller(\"RolesController\", RolesController)\n\n\nEditRoleDirective = ($repo, $confirm) ->\n    link = ($scope, $el, $attrs) ->\n        toggleView = ->\n            $el.find('.total').toggle()\n            $el.find('.edit-role').toggle()\n\n        submit = () ->\n            $scope.role.name = $el.find(\"input\").val()\n\n            promise = $repo.save($scope.role)\n\n            promise.then ->\n                $confirm.notify(\"success\")\n\n            promise.then null, (data) ->\n                $confirm.notify(\"error\")\n\n            toggleView()\n\n        $el.on \"click\", \".edit-value\", ->\n            toggleView()\n            $el.find(\"input\").focus()\n            $el.find(\"input\").val($scope.role.name)\n\n        $el.on \"click\", \"a.save\", submit\n\n        $el.on \"keyup\", \"input\", (event) ->\n            if event.keyCode == 13  # Enter key\n                submit()\n            else if event.keyCode == 27  # ESC key\n                toggleView()\n\n        $scope.$on \"role:changed\", ->\n            if $el.find('.edit-role').is(\":visible\")\n                toggleView()\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link:link}\n\nmodule.directive(\"tgEditRole\", [\"$tgRepo\", \"$tgConfirm\", EditRoleDirective])\n\nRolesDirective =  ->\n    link = ($scope, $el, $attrs) ->\n        $ctrl = $el.controller()\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link:link}\n\nmodule.directive(\"tgRoles\", RolesDirective)\n\nNewRoleDirective = ($tgrepo, $confirm) ->\n    DEFAULT_PERMISSIONS = [\"view_project\", \"view_milestones\", \"view_us\", \"view_tasks\", \"view_issues\"]\n\n    link = ($scope, $el, $attrs) ->\n        $ctrl = $el.controller()\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n        $el.on \"click\", \"a.add-button\", (event) ->\n            event.preventDefault()\n            $el.find(\".new\").removeClass(\"hidden\")\n            $el.find(\".new\").focus()\n            $el.find(\".add-button\").hide()\n\n        $el.on \"keyup\", \".new\", (event) ->\n            event.preventDefault()\n            if event.keyCode == 13  # Enter key\n                target = angular.element(event.currentTarget)\n                newRole = {\n                    project: $scope.projectId\n                    name: target.val()\n                    permissions: DEFAULT_PERMISSIONS\n                    order: _.maxBy($scope.roles, (r) -> r.order).order + 1\n                    computable: false\n                }\n\n                $el.find(\".new\").addClass(\"hidden\")\n                $el.find(\".new\").val('')\n\n                onSuccess = (role) ->\n                    insertPosition = $scope.roles.length - 1\n                    $scope.roles.splice(insertPosition, 0, role)\n                    $ctrl.setRole(role)\n                    $el.find(\".add-button\").show()\n                    $ctrl.forceLoadProject()\n\n                onError = ->\n                    $confirm.notify(\"error\")\n\n                $tgrepo.create(\"roles\", newRole).then(onSuccess, onError)\n\n            else if event.keyCode == 27  # ESC key\n                target = angular.element(event.currentTarget)\n                $el.find(\".new\").addClass(\"hidden\")\n                $el.find(\".new\").val('')\n                $el.find(\".add-button\").show()\n\n    return {link:link}\n\nmodule.directive(\"tgNewRole\", [\"$tgRepo\", \"$tgConfirm\", NewRoleDirective])\n\n\n# Use category-config.scss styles\nRolePermissionsDirective = ($rootscope, $repo, $confirm, $compile) ->\n    resumeTemplate = _.template(\"\"\"\n    <div class=\"resume-title\" translate=\"<%- category.name %>\"></div>\n    <div class=\"summary-role\">\n        <div class=\"count\"><%- category.activePermissions %>/<%- category.permissions.length %></div>\n        <% _.each(category.permissions, function(permission) { %>\n            <div class=\"role-summary-single check-toggle <% if(permission.active) { %>active<% } %>\"\n                 title=\"{{ '<%- permission.name %>' | translate }}\"></div>\n        <% }) %>\n    </div>\n    <tg-svg svg-icon=\"icon-arrow-right\"></tg-svg>\n    \"\"\")\n\n    categoryTemplate = _.template(\"\"\"\n    <div class=\"category-config\" data-id=\"<%- index %>\">\n        <div class=\"resume\">\n        </div>\n        <div class=\"category-items\">\n            <div class=\"items-container\">\n            <% _.each(category.permissions, function(permission) { %>\n                <div class=\"category-item\" data-id=\"<%- permission.key %>\">\n                    <span translate=\"<%- permission.name %>\"></span>\n                    <div class=\"check\">\n                        <input type=\"checkbox\"\n                               <% if(!permission.editable) { %> disabled=\"disabled\" <% } %>\n                               <% if(permission.active) { %> checked=\"checked\" <% } %>/>\n                        <div></div>\n                        <span class=\"check-text check-yes\" translate=\"COMMON.YES\"></span>\n                        <span class=\"check-text check-no\" translate=\"COMMON.NO\"></span>\n                    </div>\n                </div>\n            <% }) %>\n            </div>\n        </div>\n    </div>\n    \"\"\")\n\n    baseTemplate = _.template(\"\"\"\n    <div class=\"category-config-list\"></div>\n    \"\"\")\n\n    link = ($scope, $el, $attrs) ->\n        $ctrl = $el.controller()\n\n        generateCategoriesFromRole = (role) ->\n            setActivePermissions = (permissions) ->\n                return _.map(permissions, (x) -> _.extend({}, x, {active: x[\"key\"] in role.permissions}))\n\n            isPermissionEditable = (permission, role, project) ->\n                if role.external_user &&\n                   !project.is_private &&\n                   permission.key.indexOf(\"view_\") == 0\n                    return false\n                else\n                    return true\n\n            setActivePermissionsPerCategory = (category) ->\n                return _.map(category, (cat) ->\n                    cat.permissions = cat.permissions.map (permission) ->\n                        permission.editable = isPermissionEditable(permission, role, $scope.project)\n\n                        return permission\n\n                    _.extend({}, cat, {\n                        activePermissions: _.filter(cat[\"permissions\"], \"active\").length\n                    })\n                )\n\n            categories = []\n\n            epicPermissions = [\n                { key: \"view_epics\", name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.VIEW_EPICS\"}\n                { key: \"add_epic\", name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.ADD_EPICS\"}\n                { key: \"modify_epic\", name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.MODIFY_EPICS\"}\n                { key: \"comment_epic\", name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.COMMENT_EPICS\"}\n                { key: \"delete_epic\", name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.DELETE_EPICS\"}\n            ]\n            categories.push({\n                name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.NAME\" ,\n                permissions: setActivePermissions(epicPermissions)\n            })\n\n            milestonePermissions = [\n                { key: \"view_milestones\", name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.VIEW_SPRINTS\"}\n                { key: \"add_milestone\", name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.ADD_SPRINTS\"}\n                { key: \"modify_milestone\", name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.MODIFY_SPRINTS\"}\n                { key: \"delete_milestone\", name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.DELETE_SPRINTS\"}\n            ]\n            categories.push({\n                name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.NAME\",\n                permissions: setActivePermissions(milestonePermissions)\n            })\n\n            userStoryPermissions = [\n                { key: \"view_us\", name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.VIEW_USER_STORIES\"}\n                { key: \"add_us\", name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.ADD_USER_STORIES\"}\n                { key: \"modify_us\", name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.MODIFY_USER_STORIES\"}\n                { key: \"comment_us\", name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.COMMENT_USER_STORIES\"}\n                { key: \"delete_us\", name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.DELETE_USER_STORIES\"}\n            ]\n            categories.push({\n                name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.NAME\",\n                permissions: setActivePermissions(userStoryPermissions)\n            })\n\n            taskPermissions = [\n                { key: \"view_tasks\", name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.VIEW_TASKS\"}\n                { key: \"add_task\", name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.ADD_TASKS\"}\n                { key: \"modify_task\", name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.MODIFY_TASKS\"}\n                { key: \"comment_task\", name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.COMMENT_TASKS\"}\n                { key: \"delete_task\", name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.DELETE_TASKS\"}\n            ]\n            categories.push({\n                name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.NAME\" ,\n                permissions: setActivePermissions(taskPermissions)\n            })\n\n            issuePermissions = [\n                { key: \"view_issues\", name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.VIEW_ISSUES\"}\n                { key: \"add_issue\", name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.ADD_ISSUES\"}\n                { key: \"modify_issue\", name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.MODIFY_ISSUES\"}\n                { key: \"comment_issue\", name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.COMMENT_ISSUES\"}\n                { key: \"delete_issue\", name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.DELETE_ISSUES\"}\n            ]\n            categories.push({\n                name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.NAME\",\n                permissions: setActivePermissions(issuePermissions)\n            })\n\n            wikiPermissions = [\n                { key: \"view_wiki_pages\", name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.VIEW_WIKI_PAGES\"}\n                { key: \"add_wiki_page\", name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.ADD_WIKI_PAGES\"}\n                { key: \"modify_wiki_page\", name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.MODIFY_WIKI_PAGES\"}\n                { key: \"delete_wiki_page\", name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.DELETE_WIKI_PAGES\"}\n                { key: \"view_wiki_links\", name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.VIEW_WIKI_LINKS\"}\n                { key: \"add_wiki_link\", name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.ADD_WIKI_LINKS\"}\n                { key: \"delete_wiki_link\", name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.DELETE_WIKI_LINKS\"}\n            ]\n            categories.push({\n                name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.NAME\",\n                permissions: setActivePermissions(wikiPermissions)\n            })\n\n            return setActivePermissionsPerCategory(categories)\n\n        renderResume = (element, category) ->\n            element.find(\".resume\").html($compile(resumeTemplate({category: category}))($scope))\n\n        renderCategory = (category, index) ->\n            html = categoryTemplate({category: category, index: index})\n            html = angular.element(html)\n            renderResume(html, category)\n            return $compile(html)($scope)\n\n        renderPermissions = () ->\n            $el.off()\n            html = baseTemplate()\n            _.each generateCategoriesFromRole($scope.role), (category, index) ->\n                html = angular.element(html).append(renderCategory(category, index))\n\n            $el.html(html)\n            $el.on \"click\", \".resume\", (event) ->\n                event.preventDefault()\n                target = angular.element(event.currentTarget)\n                target.toggleClass(\"open-drawer\")\n                target.next().toggleClass(\"open\")\n\n            $el.on \"change\", \".category-item input\", (event) ->\n                getActivePermissions = ->\n                    activePermissions = _.filter($el.find(\".category-item input\"), (t) ->\n                        angular.element(t).is(\":checked\")\n                    )\n                    activePermissions = _.sortBy(_.map(activePermissions, (t) ->\n                        permission = angular.element(t).parents(\".category-item\").data(\"id\")\n                    ))\n\n                    if activePermissions.length\n                        activePermissions.push(\"view_project\")\n\n                    return activePermissions\n\n                target = angular.element(event.currentTarget)\n\n                $scope.role.permissions = getActivePermissions()\n\n                onSuccess = () ->\n                    categories = generateCategoriesFromRole($scope.role)\n                    categoryId = target.parents(\".category-config\").data(\"id\")\n                    renderResume(target.parents(\".category-config\"), categories[categoryId])\n                    $rootscope.$broadcast(\"projects:reload\")\n                    $confirm.notify(\"success\")\n                    $ctrl.forceLoadProject()\n\n                onError = ->\n                    $confirm.notify(\"error\")\n                    target.prop \"checked\", !target.prop(\"checked\")\n                    $scope.role.permissions = getActivePermissions()\n\n                if $scope.role.external_user\n                    $scope.project.public_permissions = $scope.role.permissions\n                    $scope.project.anon_permissions = $scope.role.permissions.filter (permission) ->\n                        return permission.indexOf(\"view_\") == 0\n\n                    $repo.save($scope.project).then onSuccess, onError\n                else\n                    $repo.save($scope.role).then onSuccess, onError\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n        $scope.$on \"role:changed\", ->\n            renderPermissions()\n\n        bindOnce($scope, $attrs.ngModel, renderPermissions)\n\n    return {link:link}\n\nmodule.directive(\"tgRolePermissions\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$compile\",\n                                       RolePermissionsDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/admin/third-parties.coffee\n###\n\ntaiga = @.taiga\n\nmixOf = @.taiga.mixOf\nbindMethods = @.taiga.bindMethods\ndebounce = @.taiga.debounce\ntimeout = @.taiga.timeout\n\nmodule = angular.module(\"taigaAdmin\")\n\n\n#############################################################################\n## Webhooks\n#############################################################################\n\nclass WebhooksController extends mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin)\n    @.$inject = [\n        \"$scope\",\n        \"$tgRepo\",\n        \"$tgResources\",\n        \"$routeParams\",\n        \"$tgLocation\",\n        \"$tgNavUrls\",\n        \"tgAppMetaService\",\n        \"$translate\",\n        \"tgErrorHandlingService\",\n        \"tgProjectService\"\n    ]\n\n    constructor: (@scope, @repo, @rs, @params, @location, @navUrls, @appMetaService, @translate, @errorHandlingService, @projectService) ->\n        bindMethods(@)\n\n        @scope.sectionName = \"ADMIN.WEBHOOKS.SECTION_NAME\"\n        @scope.project = {}\n\n        promise = @.loadInitialData()\n\n        promise.then () =>\n            title = @translate.instant(\"ADMIN.WEBHOOKS.PAGE_TITLE\", {projectName: @scope.project.name})\n            description = @scope.project.description\n            @appMetaService.setAll(title, description)\n\n        promise.then null, @.onInitialDataError.bind(@)\n\n        @scope.$on \"webhooks:reload\", @.loadWebhooks\n\n    loadWebhooks: ->\n        return @rs.webhooks.list(@scope.projectId).then (webhooks) =>\n            @scope.webhooks = webhooks\n\n    loadProject: ->\n        project = @projectService.project.toJS()\n\n        if not project.i_am_admin\n            @errorHandlingService.permissionDenied()\n\n        @scope.projectId = project.id\n        @scope.project = project\n        @scope.$emit('project:loaded', project)\n        return project\n\n    loadInitialData: ->\n        @.loadProject()\n\n        return @.loadWebhooks()\n\nmodule.controller(\"WebhooksController\", WebhooksController)\n\n\n#############################################################################\n## Webhook Directive\n#############################################################################\n\nWebhookDirective = ($rs, $repo, $confirm, $loading, $translate) ->\n    link = ($scope, $el, $attrs) ->\n        webhook = $scope.$eval($attrs.tgWebhook)\n\n        updateLogs = () ->\n            prettyDate = $translate.instant(\"ADMIN.WEBHOOKS.DATE\")\n\n            $rs.webhooklogs.list(webhook.id).then (webhooklogs) =>\n                for log in webhooklogs\n                    log.validStatus = 200 <= log.status < 300\n                    log.prettySentHeaders = _.map(_.toPairs(log.request_headers), ([header, value]) -> \"#{header}: #{value}\").join(\"\\n\")\n                    log.prettySentData = JSON.stringify(log.request_data)\n                    log.prettyDate = moment(log.created).format(prettyDate)\n\n                webhook.logs_counter = webhooklogs.length\n                webhook.logs = webhooklogs\n                updateShowHideHistoryText()\n\n        updateShowHideHistoryText = () ->\n            textElement = $el.find(\".toggle-history\")\n            historyElement = textElement.parents(\".single-webhook-wrapper\").find(\".webhooks-history\")\n\n            if historyElement.hasClass(\"open\")\n                text = $translate.instant(\"ADMIN.WEBHOOKS.ACTION_HIDE_HISTORY\")\n                title = $translate.instant(\"ADMIN.WEBHOOKS.ACTION_HIDE_HISTORY_TITLE\")\n            else\n                text = $translate.instant(\"ADMIN.WEBHOOKS.ACTION_SHOW_HISTORY\")\n                title = $translate.instant(\"ADMIN.WEBHOOKS.ACTION_SHOW_HISTORY_TITLE\")\n\n            textElement.text(text)\n            textElement.prop(\"title\", title)\n\n        showVisualizationMode = () ->\n            $el.find(\".edition-mode\").addClass(\"hidden\")\n            $el.find(\".visualization-mode\").removeClass(\"hidden\")\n\n        showEditMode = () ->\n            $el.find(\".visualization-mode\").addClass(\"hidden\")\n            $el.find(\".edition-mode\").removeClass(\"hidden\")\n\n        openHistory = () ->\n            $el.find(\".webhooks-history\").addClass(\"open\")\n\n        cancel = () ->\n            showVisualizationMode()\n            $scope.$apply ->\n                webhook.revert()\n\n        save = debounce 2000, (target) ->\n            form = target.parents(\"form\").checksley()\n            return if not form.validate()\n            promise = $repo.save(webhook)\n            promise.then =>\n                showVisualizationMode()\n\n            promise.then null, (data) ->\n                $confirm.notify(\"error\")\n                form.setErrors(data)\n\n        $el.on \"click\", \".test-webhook\", () ->\n            openHistory()\n            $rs.webhooks.test(webhook.id).then =>\n                updateLogs()\n\n        $el.on \"click\", \".edit-webhook\", () ->\n            showEditMode()\n\n        $el.on \"click\", \".cancel-existing\", () ->\n            cancel()\n\n        $el.on \"click\", \".edit-existing\", (event) ->\n            event.preventDefault()\n            target = angular.element(event.currentTarget)\n            save(target)\n\n        $el.on \"keyup\", \".edition-mode input\", (event) ->\n            if event.keyCode == 13\n                target = angular.element(event.currentTarget)\n                save(target)\n            else if event.keyCode == 27\n                target = angular.element(event.currentTarget)\n                cancel(target)\n\n        $el.on \"click\", \".delete-webhook\", () ->\n            title = $translate.instant(\"ADMIN.WEBHOOKS.DELETE\")\n            message = $translate.instant(\"ADMIN.WEBHOOKS.WEBHOOK_NAME\", {name: webhook.name})\n\n            $confirm.askOnDelete(title, message).then (askResponse) =>\n                onSucces = ->\n                    askResponse.finish()\n                    $scope.$emit(\"webhooks:reload\")\n\n                onError = ->\n                    askResponse.finish(false)\n                    $confirm.notify(\"error\")\n\n                $repo.remove(webhook).then(onSucces, onError)\n\n        $el.on \"click\", \".toggle-history\", (event) ->\n            target = angular.element(event.currentTarget)\n\n            if not webhook.logs? or webhook.logs.length == 0\n                updateLogs().then ->\n                    #Waiting for ng-repeat to finish\n                    timeout 0, ->\n                        $el.find(\".webhooks-history\")\n                            .toggleClass(\"open\")\n                            .slideToggle()\n\n                        updateShowHideHistoryText()\n\n            else\n                $el.find(\".webhooks-history\")\n                    .toggleClass(\"open\")\n                    .slideToggle()\n\n                $scope.$apply () ->\n                    updateShowHideHistoryText()\n\n\n        $el.on \"click\", \".history-single\", (event) ->\n            target = angular.element(event.currentTarget)\n            target.toggleClass(\"history-single-open\")\n            target.siblings(\".history-single-response\").toggleClass(\"open\")\n\n        $el.on \"click\", \".resend-request\", (event) ->\n            target = angular.element(event.currentTarget)\n            log = target.data(\"log\")\n            $rs.webhooklogs.resend(log).then () =>\n                updateLogs()\n\n    return {link:link}\n\nmodule.directive(\"tgWebhook\", [\"$tgResources\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$translate\",\n                               WebhookDirective])\n\n\n#############################################################################\n## New webhook Directive\n#############################################################################\n\nNewWebhookDirective = ($rs, $repo, $confirm, $loading, $analytics) ->\n    link = ($scope, $el, $attrs) ->\n        webhook = $scope.$eval($attrs.tgWebhook)\n        formDOMNode = $el.find(\".new-webhook-form\")\n        addWebhookDOMNode = $el.find(\".add-webhook\")\n        initializeNewValue = ->\n            $scope.newValue = {\n                \"name\": \"\"\n                \"url\": \"\"\n                \"key\": \"\"\n            }\n\n        initializeNewValue()\n\n        $scope.$watch \"webhooks\", (webhooks) ->\n            if webhooks?\n                if webhooks.length == 0\n                    formDOMNode.removeClass(\"hidden\")\n                    addWebhookDOMNode.addClass(\"hidden\")\n                    formDOMNode.find(\"input\")[0].focus()\n                else\n                    formDOMNode.addClass(\"hidden\")\n                    addWebhookDOMNode.removeClass(\"hidden\")\n\n        save = debounce 2000, () ->\n            form = formDOMNode.checksley()\n            return if not form.validate()\n\n            $scope.newValue.project = $scope.project.id\n            promise = $repo.create(\"webhooks\", $scope.newValue)\n            promise.then =>\n                $analytics.trackEvent(\"webhooks\", \"create\", \"Create new webhook\", 1)\n                $scope.$emit(\"webhooks:reload\")\n                initializeNewValue()\n\n            promise.then null, (data) ->\n                $confirm.notify(\"error\")\n                form.setErrors(data)\n\n        formDOMNode.on \"click\", \".add-new\", (event) ->\n            event.preventDefault()\n            save()\n\n        formDOMNode.on \"keyup\", \"input\", (event) ->\n            if event.keyCode == 13\n                save()\n\n        formDOMNode.on \"click\", \".cancel-new\", (event) ->\n            $scope.$apply ->\n                initializeNewValue()\n\n                # Close form if there some webhooks created\n                if $scope.webhooks.length >= 1\n                    formDOMNode.addClass(\"hidden\")\n\n        addWebhookDOMNode.on \"click\", (event) ->\n            formDOMNode.removeClass(\"hidden\")\n            formDOMNode.find(\"input\")[0].focus()\n\n    return {link:link}\n\nmodule.directive(\"tgNewWebhook\", [\"$tgResources\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", NewWebhookDirective])\n\n\n#############################################################################\n## Github Controller\n#############################################################################\n\nclass GithubController extends mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin)\n    @.$inject = [\n        \"$scope\",\n        \"$tgRepo\",\n        \"$tgResources\",\n        \"$routeParams\",\n        \"tgAppMetaService\",\n        \"$translate\",\n        \"tgProjectService\"\n    ]\n\n    constructor: (@scope, @repo, @rs, @params, @appMetaService, @translate, @projectService) ->\n        bindMethods(@)\n\n        @scope.sectionName = @translate.instant(\"ADMIN.GITHUB.SECTION_NAME\")\n        @scope.project = {}\n\n        promise = @.loadInitialData()\n\n        promise.then () =>\n            title = @translate.instant(\"ADMIN.GITHUB.PAGE_TITLE\", {projectName: @scope.project.name})\n            description = @scope.project.description\n            @appMetaService.setAll(title, description)\n\n        promise.then null, @.onInitialDataError.bind(@)\n\n    loadModules: ->\n        return @rs.modules.list(@scope.projectId, \"github\").then (github) =>\n            @scope.github = github\n\n    loadProject: ->\n        project = @projectService.project.toJS()\n\n        @scope.projectId = project.id\n        @scope.project = project\n        @scope.$emit('project:loaded', project)\n        return project\n\n    loadInitialData: ->\n        promise = @.loadProject()\n        return @.loadModules()\n\nmodule.controller(\"GithubController\", GithubController)\n\n\n#############################################################################\n## Gitlab Controller\n#############################################################################\n\nclass GitlabController extends mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin)\n    @.$inject = [\n        \"$scope\",\n        \"$tgRepo\",\n        \"$tgResources\",\n        \"$routeParams\",\n        \"tgAppMetaService\",\n        \"$translate\",\n        \"tgProjectService\"\n    ]\n\n    constructor: (@scope, @repo, @rs, @params, @appMetaService, @translate, @projectService) ->\n        bindMethods(@)\n\n        @scope.sectionName = @translate.instant(\"ADMIN.GITLAB.SECTION_NAME\")\n        @scope.project = {}\n        promise = @.loadInitialData()\n\n        promise.then () =>\n            title = @translate.instant(\"ADMIN.GITLAB.PAGE_TITLE\", {projectName: @scope.project.name})\n            description = @scope.project.description\n            @appMetaService.setAll(title, description)\n\n        promise.then null, @.onInitialDataError.bind(@)\n\n        @scope.$on \"project:modules:reload\", =>\n            @.loadModules()\n\n    loadModules: ->\n        return @rs.modules.list(@scope.projectId, \"gitlab\").then (gitlab) =>\n            @scope.gitlab = gitlab\n\n    loadProject: ->\n        project = @projectService.project.toJS()\n\n        @scope.projectId = project.id\n        @scope.project = project\n        @scope.$emit('project:loaded', project)\n        return project\n\n    loadInitialData: ->\n        @.loadProject()\n        return @.loadModules()\n\nmodule.controller(\"GitlabController\", GitlabController)\n\n\n#############################################################################\n## Bitbucket Controller\n#############################################################################\n\nclass BitbucketController extends mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin)\n    @.$inject = [\n        \"$scope\",\n        \"$tgRepo\",\n        \"$tgResources\",\n        \"$routeParams\",\n        \"tgAppMetaService\",\n        \"$translate\",\n        \"tgProjectService\"\n    ]\n\n    constructor: (@scope, @repo, @rs, @params, @appMetaService, @translate, @projectService) ->\n        bindMethods(@)\n\n        @scope.sectionName = @translate.instant(\"ADMIN.BITBUCKET.SECTION_NAME\")\n        @scope.project = {}\n        promise = @.loadInitialData()\n\n        promise.then () =>\n            title = @translate.instant(\"ADMIN.BITBUCKET.PAGE_TITLE\", {projectName: @scope.project.name})\n            description = @scope.project.description\n            @appMetaService.setAll(title, description)\n\n        promise.then null, @.onInitialDataError.bind(@)\n\n        @scope.$on \"project:modules:reload\", =>\n            @.loadModules()\n\n    loadModules: ->\n        return @rs.modules.list(@scope.projectId, \"bitbucket\").then (bitbucket) =>\n            @scope.bitbucket = bitbucket\n\n    loadProject: ->\n        project = @projectService.project.toJS()\n\n        @scope.projectId = project.id\n        @scope.project = project\n        @scope.$emit('project:loaded', project)\n        return project\n\n    loadInitialData: ->\n        @.loadProject()\n        return @.loadModules()\n\nmodule.controller(\"BitbucketController\", BitbucketController)\n\n\nSelectInputText = ($translate, $confirm)->\n    link = ($scope, $el, $attrs) ->\n        $el.on \"click\", \".select-input-content\", () ->\n            source = $el.find(\"input\")\n            if !source.val()\n                return\n\n            source.select()\n            document.execCommand 'copy'\n            $confirm.notify(\"success\", $translate.instant(\"COMMON.COPIED_TO_CLIPBOARD\"))\n\n    return {link:link}\n\nmodule.directive(\"tgSelectInputText\", [\"$translate\", \"$tgConfirm\", SelectInputText])\n\n\n#############################################################################\n## GithubWebhooks Directive\n#############################################################################\n\nGithubWebhooksDirective = ($repo, $confirm, $loading, $analytics) ->\n    link = ($scope, $el, $attrs) ->\n        form = $el.find(\"form\").checksley({\"onlyOneErrorElement\": true})\n        submit = debounce 2000, (event) =>\n            event.preventDefault()\n\n            return if not form.validate()\n\n            currentLoading = $loading()\n                .target(submitButton)\n                .start()\n\n            promise = $repo.saveAttribute($scope.github, \"github\")\n            promise.then ->\n                $analytics.trackEvent(\"github-webhook\", \"created-or-changed\", \"Create or changed github webhook\", 1)\n                currentLoading.finish()\n                $confirm.notify(\"success\")\n\n            promise.then null, (data) ->\n                currentLoading.finish()\n                form.setErrors(data)\n                if data._error_message\n                    $confirm.notify(\"error\", data._error_message)\n\n        submitButton = $el.find(\".submit-button\")\n\n        $el.on \"submit\", \"form\", submit\n\n    return {link:link}\n\nmodule.directive(\"tgGithubWebhooks\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", GithubWebhooksDirective])\n\n\n#############################################################################\n## GitlabWebhooks Directive\n#############################################################################\n\nGitlabWebhooksDirective = ($repo, $confirm, $loading, $analytics) ->\n    link = ($scope, $el, $attrs) ->\n        form = $el.find(\"form\").checksley({\"onlyOneErrorElement\": true})\n        submit = debounce 2000, (event) =>\n            event.preventDefault()\n\n            return if not form.validate()\n\n            currentLoading = $loading()\n                .target(submitButton)\n                .start()\n\n            promise = $repo.saveAttribute($scope.gitlab, \"gitlab\")\n            promise.then ->\n                $analytics.trackEvent(\"gitlab-webhook\", \"created-or-changed\", \"Create or changed gitlab webhook\", 1)\n                currentLoading.finish()\n                $confirm.notify(\"success\")\n                $scope.$emit(\"project:modules:reload\")\n\n            promise.then null, (data) ->\n                currentLoading.finish()\n                form.setErrors(data)\n                if data._error_message\n                    $confirm.notify(\"error\", data._error_message)\n\n        submitButton = $el.find(\".submit-button\")\n\n        $el.on \"submit\", \"form\", submit\n\n    return {link:link}\n\nmodule.directive(\"tgGitlabWebhooks\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", GitlabWebhooksDirective])\n\n\n#############################################################################\n## BitbucketWebhooks Directive\n#############################################################################\n\nBitbucketWebhooksDirective = ($repo, $confirm, $loading, $analytics) ->\n    link = ($scope, $el, $attrs) ->\n        form = $el.find(\"form\").checksley({\"onlyOneErrorElement\": true})\n        submit = debounce 2000, (event) =>\n            event.preventDefault()\n\n            return if not form.validate()\n\n            currentLoading = $loading()\n                .target(submitButton)\n                .start()\n\n            promise = $repo.saveAttribute($scope.bitbucket, \"bitbucket\")\n            promise.then ->\n                $analytics.trackEvent(\"bitbucket-webhook\", \"created-or-changed\", \"Create or changed bitbucket webhook\", 1)\n                currentLoading.finish()\n                $confirm.notify(\"success\")\n                $scope.$emit(\"project:modules:reload\")\n\n            promise.then null, (data) ->\n                currentLoading.finish()\n                form.setErrors(data)\n                if data._error_message\n                    $confirm.notify(\"error\", data._error_message)\n\n        submitButton = $el.find(\".submit-button\")\n\n        $el.on \"submit\", \"form\", submit\n\n    return {link:link}\n\nmodule.directive(\"tgBitbucketWebhooks\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", BitbucketWebhooksDirective])\n\n\n#############################################################################\n## Valid Origin IP's Directive\n#############################################################################\nValidOriginIpsDirective = ->\n    link = ($scope, $el, $attrs, $ngModel) ->\n        $ngModel.$parsers.push (value) ->\n            value = $.trim(value)\n            if value == \"\"\n                return []\n\n            return value.split(\",\")\n\n    return {\n        link: link\n        restrict: \"EA\"\n        require: \"ngModel\"\n    }\n\nmodule.directive(\"tgValidOriginIps\", ValidOriginIpsDirective)\n\n#############################################################################\n## Gogs Controller\n#############################################################################\n\nclass GogsController extends mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin)\n    @.$inject = [\n        \"$scope\",\n        \"$tgRepo\",\n        \"$tgResources\",\n        \"$routeParams\",\n        \"tgAppMetaService\",\n        \"$translate\",\n        \"tgProjectService\"\n    ]\n\n    constructor: (@scope, @repo, @rs, @params, @appMetaService, @translate, @projectService) ->\n        bindMethods(@)\n\n        @scope.sectionName = @translate.instant(\"ADMIN.GOGS.SECTION_NAME\")\n        @scope.project = {}\n\n        promise = @.loadInitialData()\n\n        promise.then () =>\n            title = @translate.instant(\"ADMIN.GOGS.PAGE_TITLE\", {projectName: @scope.project.name})\n            description = @scope.project.description\n            @appMetaService.setAll(title, description)\n\n        promise.then null, @.onInitialDataError.bind(@)\n\n    loadModules: ->\n        return @rs.modules.list(@scope.projectId, \"gogs\").then (gogs) =>\n            @scope.gogs = gogs\n\n    loadProject: ->\n        project = @projectService.project.toJS()\n\n        @scope.projectId = project.id\n        @scope.project = project\n        @scope.$emit('project:loaded', project)\n        return project\n\n    loadInitialData: ->\n        @.loadProject()\n        return @.loadModules()\n\nGogsWebhooksDirective = ($repo, $confirm, $loading, $analytics) ->\n    link = ($scope, $el, $attrs) ->\n        form = $el.find(\"form\").checksley({\"onlyOneErrorElement\": true})\n        submit = debounce 2000, (event) =>\n            event.preventDefault()\n\n            return if not form.validate()\n\n            currentLoading = $loading()\n                .target(submitButton)\n                .start()\n\n            promise = $repo.saveAttribute($scope.gogs, \"gogs\")\n            promise.then ->\n                $analytics.trackEvent(\"gogs-webhook\", \"create-or-change\", \"Create or change gogs webhook\", 1)\n                currentLoading.finish()\n                $confirm.notify(\"success\")\n                $scope.$emit(\"project:modules:reload\")\n\n            promise.then null, (data) ->\n                currentLoading.finish()\n                form.setErrors(data)\n                if data._error_message\n                    $confirm.notify(\"error\", data._error_message)\n\n        submitButton = $el.find(\".submit-button\")\n\n        $el.on \"submit\", \"form\", submit\n        $el.on \"click\", \".submit-button\", submit\n\n    return {link:link}\n\nmodule.controller(\"GogsController\", GogsController)\nmodule.directive(\"tgGogsWebhooks\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", GogsWebhooksDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/projects/lightboxes.coffee\n###\n\ntaiga = @.taiga\nbindOnce = @.taiga.bindOnce\ntimeout = @.taiga.timeout\ndebounce = @.taiga.debounce\n\nmodule = angular.module(\"taigaProject\")\n\n#############################################################################\n## Delete Project Lightbox Directive\n#############################################################################\n\nDeleteProjectDirective = ($repo, $rootscope, $auth, $location, $navUrls, $confirm, lightboxService, tgLoader, currentUserService, $analytics) ->\n    link = ($scope, $el, $attrs) ->\n        projectToDelete = null\n        $scope.$on \"deletelightbox:new\", (ctx, project)->\n            lightboxService.open($el)\n            projectToDelete = project\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n        submit = ->\n            tgLoader.start()\n            lightboxService.close($el)\n\n            promise = $repo.remove(projectToDelete)\n\n            promise.then (data) ->\n                $analytics.trackEvent(\"projects\", \"delete\", \"Delete project\", 1)\n                tgLoader.pageLoaded()\n                $rootscope.$broadcast(\"projects:reload\")\n                $location.path($navUrls.resolve(\"home\"))\n                $confirm.notify(\"success\")\n                currentUserService.loadProjects()\n\n            # FIXME: error handling?\n            promise.then null, ->\n                $confirm.notify(\"error\")\n                lightboxService.close($el)\n\n        $el.on \"click\", \".button-red\", (event) ->\n            event.preventDefault()\n            lightboxService.close($el)\n\n        $el.on \"click\", \".button-green\", (event) ->\n            event.preventDefault()\n            submit()\n\n    return {link:link}\n\nmodule.directive(\"tgLbDeleteProject\", [\"$tgRepo\", \"$rootScope\", \"$tgAuth\", \"$tgLocation\", \"$tgNavUrls\",\n                                       \"$tgConfirm\", \"lightboxService\", \"tgLoader\", \"tgCurrentUserService\",\n                                       \"$tgAnalytics\", DeleteProjectDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/base/bind.coffee\n###\n\nbindOnce = @.taiga.bindOnce\n\n# Escape Html bind once directive\nBindOnceBindDirective = ->\n    link = ($scope, $el, $attrs) ->\n        bindOnce $scope, $attrs.tgBoBind, (val) ->\n            $el.text(val)\n\n    return {link:link}\n\n# Html bind once directive\nBindOnceHtmlDirective = ->\n    link = ($scope, $el, $attrs) ->\n        bindOnce $scope, $attrs.tgBoHtml, (val) ->\n            $el.html(val)\n\n    return {link:link}\n\n# Object reference bind once helper.\nBindOnceRefDirective = ->\n    link = ($scope, $el, $attrs) ->\n        bindOnce $scope, $attrs.tgBoRef, (val) ->\n            $el.html(\"##{val} \")\n    return {link:link}\n\n# Object src bind once helper.\nBindOnceSrcDirective = ->\n    link = ($scope, $el, $attrs) ->\n        bindOnce $scope, $attrs.tgBoSrc, (val) ->\n            $el.attr(\"src\", val)\n    return {link:link}\n\n# Object href bind once helper.\nBindOnceHrefDirective = ->\n    link = ($scope, $el, $attrs) ->\n        bindOnce $scope, $attrs.tgBoHref, (val) ->\n            $el.attr(\"href\", val)\n    return {link:link}\n\n# Object alt bind once helper.\nBindOnceAltDirective = ->\n    link = ($scope, $el, $attrs) ->\n        bindOnce $scope, $attrs.tgBoAlt, (val) ->\n            $el.attr(\"alt\", val)\n    return {link:link}\n\n# Object title bind once helper.\nBindOnceTitleDirective = ->\n    link = ($scope, $el, $attrs) ->\n        bindOnce $scope, $attrs.tgBoTitle, (val) ->\n            $el.attr(\"title\", val)\n    return {link:link}\n\nBindTitleDirective = ->\n    link = ($scope, $el, $attrs) ->\n        $scope.$watch $attrs.tgTitleHtml, (val) ->\n            $el.attr(\"title\", val) if val?\n\n    return {link:link}\n\nBindHtmlDirective = ->\n    link = ($scope, $el, $attrs) ->\n        $scope.$watch $attrs.tgBindHtml, (val) ->\n            $el.html(val) if val?\n\n    return {link:link}\n\nmodule = angular.module(\"taigaBase\")\nmodule.directive(\"tgBoBind\", BindOnceBindDirective)\nmodule.directive(\"tgBoHtml\", BindOnceHtmlDirective)\nmodule.directive(\"tgBoRef\", BindOnceRefDirective)\nmodule.directive(\"tgBoSrc\", BindOnceSrcDirective)\nmodule.directive(\"tgBoHref\", BindOnceHrefDirective)\nmodule.directive(\"tgBoAlt\", BindOnceAltDirective)\nmodule.directive(\"tgBoTitle\", BindOnceTitleDirective)\nmodule.directive(\"tgBindTitle\", BindTitleDirective)\nmodule.directive(\"tgBindHtml\", BindHtmlDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/base/conf.coffee\n###\n\nclass ConfigurationService\n    constructor: () ->\n        @.config = window.taigaConfig\n\n    get: (key, defaultValue=null) ->\n        if _.has(@.config, key)\n            return @.config[key]\n        return defaultValue\n\n\nmodule = angular.module(\"taigaBase\")\nmodule.service(\"$tgConfig\", ConfigurationService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/base/contrib.coffee\n###\n\nmodule = angular.module(\"taigaBase\")\n\n\nclass ContribController extends taiga.Controller\n    @.$inject = [\n        \"$rootScope\",\n        \"$scope\",\n        \"$routeParams\",\n        \"$tgRepo\",\n        \"$tgResources\",\n        \"$tgConfirm\",\n        \"tgProjectService\"\n    ]\n\n    constructor: (@rootScope, @scope, @params, @repo, @rs, @confirm, @projectService) ->\n        @scope.currentPlugin = _.head(_.filter(@rootScope.adminPlugins, {\"slug\": @params.plugin}))\n        @scope.projectSlug = @params.pslug\n\n        @.loadInitialData()\n\n    loadProject: ->\n        project = @projectService.project.toJS()\n\n        @scope.projectId = project.id\n        @scope.project = project\n        @scope.$emit('project:loaded', project)\n        @scope.$broadcast('project:loaded', project)\n        return project\n\n    loadInitialData: ->\n        return @.loadProject()\n\nmodule.controller(\"ContribController\", ContribController)\n\n\nclass ContribUserSettingsController extends taiga.Controller\n    @.$inject = [\n        \"$rootScope\",\n        \"$scope\",\n        \"$routeParams\"\n    ]\n\n    constructor: (@rootScope, @scope, @params) ->\n        @scope.currentPlugin = _.head(_.filter(@rootScope.userSettingsPlugins, {\"slug\": @params.plugin}))\n\nmodule.controller(\"ContribUserSettingsController\", ContribUserSettingsController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/base/filters.coffee\n###\n\n\ntaiga = @.taiga\n\nclass FiltersStorageService extends taiga.Service\n    @.$inject = [\"$tgStorage\", \"$routeParams\"]\n\n    constructor: (@storage, @params) ->\n\n    generateHash: (components=[]) ->\n        components = _.map(components, (x) -> JSON.stringify(x))\n        return hex_sha1(components.join(\":\"))\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/base/http.coffee\n###\n\ntaiga = @.taiga\n\nclass HttpService extends taiga.Service\n    @.$inject = [\"$http\", \"$q\", \"tgLoader\", \"$tgStorage\", \"$rootScope\", \"$cacheFactory\", \"$translate\"]\n\n    constructor: (@http, @q, @tgLoader, @storage, @rootScope, @cacheFactory, @translate) ->\n        super()\n\n        @.cache = @cacheFactory(\"httpget\")\n    headers: ->\n        headers = {}\n\n        # Authorization\n        token = @storage.get('token')\n        if token\n            headers[\"Authorization\"] = \"Bearer #{token}\"\n\n        # Accept-Language\n        lang = @translate.preferredLanguage()\n        if lang\n            headers[\"Accept-Language\"] = lang\n\n        return headers\n\n    request: (options) ->\n        options.headers = _.assign({}, options.headers or {}, @.headers())\n\n        return @http(options)\n\n    get: (url, params, options) ->\n        options = _.assign({method: \"GET\", url: url}, options)\n        options.params = params if params\n\n        # prevent duplicated http request\n        options.cache = @.cache\n\n        return @.request(options).finally (data) =>\n            @.cache.removeAll()\n\n    post: (url, data, params, options) ->\n        options = _.assign({method: \"POST\", url: url}, options)\n\n        options.data = data if data\n        options.params = params if params\n        options.responseType = 'text'\n\n        return @.request(options)\n\n    put: (url, data, params, options) ->\n        options = _.assign({method: \"PUT\", url: url}, options)\n        options.data = data if data\n        options.params = params if params\n        return @.request(options)\n\n    patch: (url, data, params, options) ->\n        options = _.assign({method: \"PATCH\", url: url}, options)\n        options.data = data if data\n        options.params = params if params\n        return @.request(options)\n\n    delete: (url, data, params, options) ->\n        options = _.assign({method: \"DELETE\", url: url}, options)\n        options.data = data if data\n        options.params = params if params\n        return @.request(options)\n\n\nmodule = angular.module(\"taigaBase\")\nmodule.service(\"$tgHttp\", HttpService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/base/location.coffee\n###\n\n\nlocationFactory = ($location, $route, $rootscope) ->\n    $location.noreload =  (scope) ->\n        lastRoute = $route.current\n        un = scope.$on \"$locationChangeSuccess\", ->\n            $route.current = lastRoute\n            un()\n\n        return $location\n\n    $location.isInCurrentRouteParams = (name, value) ->\n        params = $location.search() || {}\n\n        return params[name] == value\n\n    return $location\n\n\nmodule = angular.module(\"taigaBase\")\nmodule.factory(\"$tgLocation\", [\"$location\", \"$route\", \"$rootScope\", locationFactory])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/base/model.coffee\n###\n\nclass Model\n    constructor: (name, data, dataTypes) ->\n        @._attrs = data\n        @._name = name\n        @._dataTypes = dataTypes\n\n        @.setAttrs(data)\n        @.initialize()\n\n    realClone: ->\n        attrs = _.cloneDeep(@._attrs)\n\n        instance =  new Model(@._name, attrs, @._dataTypes)\n\n        instance._modifiedAttrs = _.cloneDeep(@._modifiedAttrs)\n        instance._isModified = _.cloneDeep(@._isModified)\n\n        return instance\n\n    clone: ->\n        instance = new Model(@._name, @._attrs, @._dataTypes)\n        instance._modifiedAttrs = @._modifiedAttrs\n        instance._isModified = @._isModified\n        return instance\n\n    applyCasts: ->\n        for attrName, castName of @._dataTypes\n            castMethod = service.casts[castName]\n            if not castMethod\n                continue\n\n            @._attrs[attrName] = castMethod(@._attrs[attrName])\n\n    getIdAttrName: ->\n        return \"id\"\n\n    getName: ->\n        return @._name\n\n    getAttrs: (patch=false) ->\n        if @._attrs.version?\n            @._modifiedAttrs.version = @._attrs.version\n\n        if patch\n            return _.extend({}, @._modifiedAttrs)\n        return _.extend({}, @._attrs, @._modifiedAttrs)\n\n    setAttrs: (attrs) ->\n        @._attrs = attrs\n        @._modifiedAttrs = {}\n\n        @.applyCasts()\n        @._isModified = false\n\n    setAttr: (name, value) ->\n        @._modifiedAttrs[name] = value\n        @._isModified = true\n\n    initialize: () ->\n        self = @\n\n        getter = (name) ->\n            return ->\n                if typeof(name) == 'string' and name.substr(0,2) == \"__\"\n                    return self[name]\n\n                if name not in _.keys(self._modifiedAttrs)\n                    return self._attrs[name]\n\n                return self._modifiedAttrs[name]\n\n        setter = (name) ->\n            return (value) ->\n                if typeof(name) == 'string' and name.substr(0,2) == \"__\"\n                    self[name] = value\n                    return\n\n                if self._attrs[name] != value\n                    self._modifiedAttrs[name] = value\n                    self._isModified = true\n                else\n                    delete self._modifiedAttrs[name]\n\n                return\n\n        _.each @_attrs, (value, name) ->\n            options =\n                get: getter(name)\n                set: setter(name)\n                enumerable: true\n                configurable: true\n\n            Object.defineProperty(self, name, options)\n\n    serialize: () ->\n        data =\n            \"data\": _.clone(@_attrs)\n            \"name\": @_name\n\n        return JSON.stringify(data)\n\n    isModified: ->\n        return this._isModified\n\n    isAttributeModified: (attribute) ->\n        return @._modifiedAttrs[attribute]?\n\n    markSaved: () ->\n        @._isModified = false\n        @._attrs = @.getAttrs()\n        @._modifiedAttrs = {}\n\n    revert: () ->\n        @_modifiedAttrs = {}\n        @_isModified = false\n\n    @desSerialize = (sdata) ->\n        ddata = JSON.parse(sdata)\n        model = new Model(ddata.url, ddata.data)\n        return model\n\n\ntaiga = @.taiga\n\nclass ModelService extends taiga.Service\n    @.$inject = [\"$q\", \"$tgUrls\", \"$tgStorage\", \"$tgHttp\"]\n\n    constructor: (@q, @urls, @storage, @http) ->\n        super()\n\nprovider = ($q, $http, $gmUrls, $gmStorage) ->\n    service = {}\n    service.make_model = (name, data, cls=Model, dataTypes={}) ->\n        return new cls(name, data, dataTypes)\n\n    service.cls = Model\n    service.casts = {\n        int: (value) ->\n            return parseInt(value, 10)\n\n        float: (value) ->\n            return parseFloat(value, 10)\n    }\n\n    return service\n\nmodule = angular.module(\"taigaBase\")\nmodule.factory(\"$tgModel\", [\"$q\", \"$http\", \"$tgUrls\", \"$tgStorage\", provider])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/base/navurls.coffee\n###\n\ntaiga = @.taiga\ntrim = @.taiga.trim\nbindOnce = @.taiga.bindOnce\n\nmodule = angular.module(\"taigaBase\")\n\n\n#############################################################################\n## Navigation Urls Service\n#############################################################################\n\nclass NavigationUrlsService extends taiga.Service\n    constructor: ->\n        @.urls = {}\n\n    update: (urls) ->\n        @.urls = _.merge({}, @.urls, urls or {})\n\n    formatUrl: (url, ctx={}) ->\n        replacer = (match) ->\n            match = trim(match, \":\")\n            return ctx[match] or \"undefined\"\n        return url.replace(/(:\\w+)/g, replacer)\n\n    resolve: (name, ctx) ->\n        url = @.urls[name]\n        return \"\" if not url\n        return @.formatUrl(url, ctx) if ctx\n        return url\n\nmodule.service(\"$tgNavUrls\", NavigationUrlsService)\n\n\n#############################################################################\n## Navigation Urls Directive\n#############################################################################\n\nNavigationUrlsDirective = ($navurls, $auth, $q, $location, lightboxService, tgSections) ->\n    # Example:\n    # link(tg-nav=\"project-backlog:project='sss',\")\n\n    # bindOnce version that uses $q for offer\n    # promise based api\n    bindOnceP = ($scope, attr) ->\n        defered = $q.defer()\n        bindOnce $scope, attr, (v) ->\n            defered.resolve(v)\n        return defered.promise\n\n    parseNav = (data, $scope) ->\n        [name, params] = _.map(data.split(\":\"), trim)\n        if params\n            # split by 'xxx='\n            # example\n            # project=vm.timeline.getIn(['data', 'project', 'slug']), ref=vm.timeline.getIn(['obj', 'ref'])\n            # [\"\", \"project\", \"vm.timeline.getIn(['data', 'project', 'slug']), \", \"ref\", \"vm.timeline.getIn(['obj', 'ref'])\"]\n            result = params.split(/(\\w+)=/)\n\n            # remove empty string\n            result = _.filter result, (str) -> return str.length\n\n            # remove , at the end of the string\n            result = _.map result, (str) -> return trim(str.replace(/,$/g, ''))\n\n            params = []\n            index = 0\n\n            # ['param1', 'value'] => [{'param1': 'value'}]\n            while index < result.length\n                obj = {}\n                obj[result[index]] = result[index + 1]\n                params.push obj\n                index = index + 2\n        else\n            params = []\n\n        values = _.map params, (param) -> _.values(param)[0]\n        promises = _.map(values, (x) -> bindOnceP($scope, x))\n\n        return $q.all(promises).then ->\n            options = {}\n            for param in params\n                key = Object.keys(param)[0]\n                value = param[key]\n\n                options[key] = $scope.$eval(value)\n            return [name, options]\n\n    link = ($scope, $el, $attrs) ->\n        if $el.is(\"a\")\n            $el.attr(\"href\", \"#\")\n\n        $el.on \"mouseenter\", (event) ->\n            target = $(event.currentTarget)\n\n            if !target.data(\"fullUrl\") || $attrs.tgNavGetParams != target.data(\"params\")\n                parseNav($attrs.tgNav, $scope).then (result) ->\n                    [name, options] = result\n                    user = $auth.getUser()\n                    options.user = user.username if user\n\n                    if name == 'project'\n                        path = tgSections.getPath(options['project'], options['section'])\n                        name = \"#{name}-#{path}\"\n\n                    url = $navurls.resolve(name)\n\n                    fullUrl = $navurls.formatUrl(url, options)\n\n                    if $attrs.tgNavGetParams\n                        getURLParams = JSON.parse($attrs.tgNavGetParams)\n                        getURLParamsStr = $.param(getURLParams)\n                        fullUrl = \"#{fullUrl}?#{getURLParamsStr}\"\n\n                        target.data(\"params\", $attrs.tgNavGetParams)\n\n                    target.data(\"fullUrl\", fullUrl)\n\n                    if target.is(\"a\")\n                        target.attr(\"href\", fullUrl)\n\n                    $el.on \"click\", (event) ->\n                        if event.metaKey || event.ctrlKey\n                            return\n\n                        event.preventDefault()\n                        target = $(event.currentTarget)\n\n                        if target.hasClass('noclick')\n                            return\n\n                        fullUrl = target.data(\"fullUrl\")\n\n                        switch event.which\n                            when 1\n                                $location.url(fullUrl)\n                                $scope.$apply()\n                            when 2\n                                window.open fullUrl\n\n                        lightboxService.closeAll()\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link: link}\n\nmodule.directive(\"tgNav\",\n    [\"$tgNavUrls\", \"$tgAuth\", \"$q\", \"$tgLocation\", \"lightboxService\", \"$tgSections\", NavigationUrlsDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/base/repository.coffee\n###\n\ntaiga = @.taiga\n\nclass RepositoryService extends taiga.Service\n    @.$inject = [\"$q\", \"$tgModel\", \"$tgStorage\", \"$tgHttp\", \"$tgUrls\"]\n\n    constructor: (@q, @model, @storage, @http, @urls) ->\n        super()\n\n    resolveUrlForModel: (model) ->\n        idAttrName = model.getIdAttrName()\n        return \"#{@urls.resolve(model.getName())}/#{model[idAttrName]}\"\n\n    resolveUrlForAttributeModel: (model) ->\n        return @urls.resolve(model.getName(), model.parent)\n\n    create: (name, data, dataTypes={}, extraParams={}) ->\n        defered = @q.defer()\n        url = @urls.resolve(name)\n\n        promise = @http.post(url, JSON.stringify(data), extraParams)\n        promise.success (_data, _status) =>\n            defered.resolve(@model.make_model(name, _data, null, dataTypes))\n\n        promise.error (data, status) =>\n            defered.reject(data)\n\n        return defered.promise\n\n    remove: (model, params={}) ->\n        defered = @q.defer()\n        url = @.resolveUrlForModel(model)\n\n        promise = @http.delete(url, {}, params)\n        promise.success (data, status) ->\n            defered.resolve(model)\n\n        promise.error (data, status) ->\n            defered.reject(model)\n\n        return defered.promise\n\n    saveAll: (models, patch=true) ->\n        promises = _.map(models, (x) => @.save(x, true))\n        return @q.all(promises)\n\n    save: (model, patch=true, params = {}, options, returnHeaders = false) ->\n        defered = @q.defer()\n\n        if not model.isModified() and patch\n            defered.resolve(model)\n            return defered.promise\n\n        url = @.resolveUrlForModel(model)\n\n        data = JSON.stringify(model.getAttrs(patch))\n\n        if patch\n            promise = @http.patch(url, data, params, options)\n        else\n            promise = @http.put(url, data, params, options)\n\n        promise.success (data, status, headers, response) =>\n            model._isModified = false\n            model._attrs = _.extend(model.getAttrs(), data)\n            model._modifiedAttrs = {}\n\n            model.applyCasts()\n\n            if returnHeaders\n                defered.resolve([model, headers()])\n            else\n                defered.resolve(model)\n\n        promise.error (data, status) ->\n            defered.reject(data)\n\n        return defered.promise\n\n    saveAttribute: (model, attribute, patch=true) ->\n        defered = @q.defer()\n\n        if not model?.isModified() and patch\n            defered.resolve(model)\n            return defered.promise\n\n        url = @.resolveUrlForAttributeModel(model)\n\n        data = {}\n\n        data[attribute] = model.getAttrs()\n\n        if patch\n            promise = @http.patch(url, data)\n        else\n            promise = @http.put(url, data)\n\n        promise.success (data, status) =>\n            model._isModified = false\n            model._attrs = _.extend(model.getAttrs(), data)\n            model._modifiedAttrs = {}\n\n            model.applyCasts()\n            defered.resolve(model)\n\n        promise.error (data, status) ->\n            defered.reject(data)\n\n        return defered.promise\n\n    refresh: (model) ->\n        defered = @q.defer()\n\n        url = @.resolveUrlForModel(model)\n        promise = @http.get(url)\n        promise.success (data, status) ->\n            model._modifiedAttrs = {}\n            model._attrs = data\n            model._isModified = false\n            model.applyCasts()\n            defered.resolve(model)\n\n        promise.error (data, status) ->\n            defered.reject(data)\n\n        return defered.promise\n\n    queryMany: (name, params, options={}, headers=false) ->\n        url = @urls.resolve(name)\n        httpOptions = {headers: {}}\n\n        if not options.enablePagination\n            httpOptions.headers[\"x-disable-pagination\"] =  \"1\"\n\n        return @http.get(url, params, httpOptions).then (data) =>\n            result =  _.map(data.data, (x) => @model.make_model(name, x))\n\n            if headers\n                return [result, data.headers]\n\n            return result\n\n    queryOneAttribute: (name, id, attribute, params, options={}) ->\n        url = @urls.resolve(name, id)\n        httpOptions = {headers: {}}\n\n        if not options.enablePagination\n            httpOptions.headers[\"x-disable-pagination\"] =  \"1\"\n\n        return @http.get(url, params, httpOptions).then (data) =>\n            model = @model.make_model(name, data.data[attribute])\n            model.parent = id\n\n            return model\n\n    queryOne: (name, id, params, options={}) ->\n        url = @urls.resolve(name)\n        url = \"#{url}/#{id}\" if id\n        httpOptions = {headers: {}}\n        if not options.enablePagination\n            httpOptions.headers[\"x-disable-pagination\"] =  \"1\"\n\n        return @http.get(url, params, httpOptions).then (data) =>\n            return @model.make_model(name, data.data)\n\n    queryOneRaw: (name, id, params, options={}) ->\n        url = @urls.resolve(name)\n        url = \"#{url}/#{id}\" if id\n        httpOptions = _.merge({headers: {}}, options)\n        if not options.enablePagination\n            httpOptions.headers[\"x-disable-pagination\"] =  \"1\"\n        return @http.get(url, params, httpOptions).then (data) =>\n            return data.data\n\n    queryPaginated: (name, params, options={}) ->\n        url = @urls.resolve(name)\n        httpOptions = _.merge({headers: {}}, options)\n        return @http.get(url, params, httpOptions).then (data) =>\n            headers = data.headers()\n            result = {}\n            result.models = _.map(data.data, (x) => @model.make_model(name, x))\n            result.count = parseInt(headers[\"x-pagination-count\"], 10)\n            result.current = parseInt(headers[\"x-pagination-current\"] or 1, 10)\n            result.paginatedBy = parseInt(headers[\"x-paginated-by\"], 10)\n            return result\n\n    queryOnePaginatedRaw: (name, id, params, options={}) ->\n        url = @urls.resolve(name)\n        url = \"#{url}/#{id}\" if id\n        httpOptions = _.merge({headers: {}}, options)\n\n        return @http.get(url, params, httpOptions).then (data) =>\n            headers = data.headers()\n            result = {}\n            result.data = data.data\n            result.count = parseInt(headers[\"x-pagination-count\"], 10)\n            result.current = parseInt(headers[\"x-pagination-current\"] or 1, 10)\n            result.paginatedBy = parseInt(headers[\"x-paginated-by\"], 10)\n\n            return result\n\n    resolve: (options) ->\n        params = {}\n        params.project = options.pslug if options.pslug?\n        params.us = options.usref if options.usref?\n        params.task = options.taskref if options.taskref?\n        params.issue = options.issueref if options.issueref?\n        params.milestone = options.sslug if options.sslug?\n        params.wikipage = options.wikipage if options.wikipage?\n        params.ref = options.ref if options.ref?\n\n        cache = not (options.wikipage or options.sslug)\n        return @.queryOneRaw(\"resolver\", null, params, {cache: cache})\n\n\nmodule = angular.module(\"taigaBase\")\nmodule.service(\"$tgRepo\", RepositoryService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/base/storage.coffee\n###\n\ntaiga = @.taiga\n\nclass StorageService extends taiga.Service\n    @.$inject = [\"$rootScope\"]\n\n    constructor: ($rootScope) ->\n        super()\n\n    get: (key, _default) ->\n        serializedValue = localStorage.getItem(key)\n        if serializedValue == null\n            return _default or null\n\n        return JSON.parse(serializedValue)\n\n    set: (key, val) ->\n        if _.isObject(key)\n            _.each key, (val, key) =>\n                @set(key, val)\n        else\n            localStorage.setItem(key, JSON.stringify(val))\n\n    contains: (key) ->\n        value = @.get(key)\n        return (value != null)\n\n    remove: (key) ->\n        localStorage.removeItem(key)\n\n    clear: ->\n        localStorage.clear()\n\n\nmodule = angular.module(\"taigaBase\")\nmodule.service(\"$tgStorage\", StorageService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/base/urls.coffee\n###\n\nformat = (fmt, obj) ->\n    obj = _.clone(obj)\n    return fmt.replace /%s/g, (match) -> String(obj.shift())\n\ntaiga = @.taiga\n\nclass UrlsService extends taiga.Service\n    @.$inject = [\"$tgConfig\"]\n\n    constructor: (@config) ->\n        @.urls = {}\n        @.mainUrl = @config.get(\"api\")\n\n    update: (urls) ->\n        @.urls = _.merge(@.urls, urls)\n\n    resolve: ->\n        args = _.toArray(arguments)\n\n        if args.length == 0\n            throw Error(\"wrong arguments to setUrls\")\n\n        name = args.slice(0, 1)[0]\n        url = format(@.urls[name], args.slice(1))\n\n        return format(\"%s/%s\", [\n            _.trimEnd(@.mainUrl, \"/\"),\n            _.trimStart(url, \"/\")\n        ])\n\n    resolveAbsolute: ->\n        url = @.resolve.apply(@, arguments)\n        if (/^https?:\\/\\//i).test(url)\n            return url\n        if (/^\\//).test(url)\n            return \"#{window.location.protocol}//#{window.location.host}#{url}\"\n        return \"#{window.location.protocol}//#{window.location.host}/#{url}\"\n\n\nmodule = angular.module(\"taigaBase\")\nmodule.service('$tgUrls', UrlsService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/resources/custom-attributes-values.coffee\n###\n\ntaiga = @.taiga\n\nresourceProvider = ($repo) ->\n    _get = (objectId, resource) ->\n        return $repo.queryOne(resource, objectId)\n\n    service = {\n        epic: {\n            get: (objectId) -> _get(objectId, \"custom-attributes-values/epic\")\n        }\n        userstory: {\n            get: (objectId) -> _get(objectId, \"custom-attributes-values/userstory\")\n        }\n        task: {\n            get: (objectId) -> _get(objectId, \"custom-attributes-values/task\")\n        }\n        issue: {\n            get: (objectId) -> _get(objectId, \"custom-attributes-values/issue\")\n        }\n    }\n\n    return (instance) ->\n        instance.customAttributesValues = service\n\nmodule = angular.module(\"taigaResources\")\nmodule.factory(\"$tgCustomAttributesValuesResourcesProvider\", [\"$tgRepo\", resourceProvider])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/resources/custom-attributes.coffee\n###\n\n\ntaiga = @.taiga\nsizeFormat = @.taiga.sizeFormat\n\n\nresourceProvider = ($repo) ->\n    _list = (projectId, resource) ->\n        return $repo.queryMany(resource, {project: projectId})\n\n    service = {\n        epic:{\n            list: (projectId) -> _list(projectId, \"custom-attributes/epic\")\n        }\n        userstory:{\n            list: (projectId) -> _list(projectId, \"custom-attributes/userstory\")\n        }\n        task:{\n            list: (projectId) -> _list(projectId, \"custom-attributes/task\")\n        }\n        issue: {\n            list: (projectId) -> _list(projectId, \"custom-attributes/issue\")\n        }\n    }\n\n    return (instance) ->\n        instance.customAttributes = service\n\n\nmodule = angular.module(\"taigaResources\")\nmodule.factory(\"$tgCustomAttributesResourcesProvider\", [\"$tgRepo\", resourceProvider])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/resources/epics.coffee\n###\n\n\ntaiga = @.taiga\n\ngenerateHash = taiga.generateHash\n\n\nresourceProvider = ($repo, $http, $urls, $storage) ->\n    service = {}\n    hashSuffix = \"epics-queryparams\"\n\n    service.getByRef = (projectId, ref) ->\n        params = service.getQueryParams(projectId)\n        params.project = projectId\n        params.ref = ref\n        return $repo.queryOne(\"epics\", \"by_ref\", params)\n\n    service.listValues = (projectId, type) ->\n        params = {\"project\": projectId}\n        service.storeQueryParams(projectId, params)\n        return $repo.queryMany(type, params)\n\n    service.storeQueryParams = (projectId, params) ->\n        ns = \"#{projectId}:#{hashSuffix}\"\n        hash = generateHash([projectId, ns])\n        $storage.set(hash, params)\n\n    service.getQueryParams = (projectId) ->\n        ns = \"#{projectId}:#{hashSuffix}\"\n        hash = generateHash([projectId, ns])\n        return $storage.get(hash) or {}\n\n    service.upvote = (epicId) ->\n        url = $urls.resolve(\"epic-upvote\", epicId)\n        return $http.post(url)\n\n    service.downvote = (epicId) ->\n        url = $urls.resolve(\"epic-downvote\", epicId)\n        return $http.post(url)\n\n    service.watch = (epicId) ->\n        url = $urls.resolve(\"epic-watch\", epicId)\n        return $http.post(url)\n\n    service.unwatch = (epicId) ->\n        url = $urls.resolve(\"epic-unwatch\", epicId)\n        return $http.post(url)\n\n    return (instance) ->\n        instance.epics = service\n\n\nmodule = angular.module(\"taigaResources\")\nmodule.factory(\"$tgEpicsResourcesProvider\", [\"$tgRepo\",\"$tgHttp\", \"$tgUrls\", \"$tgStorage\", resourceProvider])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/resources/history.coffee\n###\n\n\ntaiga = @.taiga\n\nresourceProvider = ($repo, $http, $urls) ->\n    service = {}\n\n    service.get = (contentType, objectId, entryType) ->\n        return $repo.queryOneRaw(\"history/#{contentType}\", objectId, {type: entryType})\n\n    service.editComment = (type, objectId, activityId, comment) ->\n        url = $urls.resolve(\"history/#{type}\")\n        url = \"#{url}/#{objectId}/edit_comment\"\n        params = {\n            id: activityId\n        }\n        commentData = {\n            comment: comment\n        }\n        return $http.post(url, commentData, params).then (data) =>\n            return data.data\n\n    service.getCommentHistory = (type, objectId, activityId) ->\n        url = $urls.resolve(\"history/#{type}\")\n        url = \"#{url}/#{objectId}/comment_versions\"\n        params = {id: activityId}\n        return $http.get(url, params).then (data) =>\n            return data.data\n\n    service.deleteComment = (type, objectId, activityId) ->\n        url = $urls.resolve(\"history/#{type}\")\n        url = \"#{url}/#{objectId}/delete_comment\"\n        params = {id: activityId}\n        return $http.post(url, null, params).then (data) =>\n            return data.data\n\n    service.undeleteComment = (type, objectId, activityId) ->\n        url = $urls.resolve(\"history/#{type}\")\n        url = \"#{url}/#{objectId}/undelete_comment\"\n        params = {id: activityId}\n        return $http.post(url, null, params).then (data) =>\n            return data.data\n\n    return (instance) ->\n        instance.history = service\n\n\nmodule = angular.module(\"taigaResources\")\nmodule.factory(\"$tgHistoryResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/resources/invitations.coffee\n###\n\n\ntaiga = @.taiga\n\nresourceProvider = ($repo) ->\n    service = {}\n\n    service.get = (token) ->\n        return $repo.queryOne(\"invitations\", token)\n\n    return (instance) ->\n        instance.invitations = service\n\n\nmodule = angular.module(\"taigaResources\")\nmodule.factory(\"$tgInvitationsResourcesProvider\", [\"$tgRepo\", resourceProvider])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/resources/issues.coffee\n###\n\n\ntaiga = @.taiga\n\ngenerateHash = taiga.generateHash\n\nresourceProvider = ($repo, $http, $urls, $storage, $q) ->\n    service = {}\n    hashSuffix = \"issues-queryparams\"\n\n    service.get = (projectId, issueId) ->\n        params = service.getQueryParams(projectId)\n        params.project = projectId\n        return $repo.queryOne(\"issues\", issueId, params)\n\n    service.getByRef = (projectId, ref) ->\n        params = service.getQueryParams(projectId)\n        params.project = projectId\n        params.ref = ref\n        return $repo.queryOne(\"issues\", \"by_ref\", params)\n\n    service.listInAllProjects = (filters) ->\n        return $repo.queryMany(\"issues\", filters)\n\n    service.list = (projectId, filters, options) ->\n        params = {project: projectId}\n        params = _.extend({}, params, filters or {})\n        service.storeQueryParams(projectId, params)\n        return $repo.queryPaginated(\"issues\", params, options)\n\n    service.listInProject = (projectId, sprintId=null, params) ->\n        params = _.merge(params, {project: projectId})\n        params.milestone = sprintId if sprintId\n        service.storeQueryParams(projectId, params)\n        return $repo.queryMany(\"issues\", params)\n\n    service.bulkCreate = (projectId, milestoneId, data) ->\n        url = $urls.resolve(\"bulk-create-issues\")\n        params = {project_id: projectId,  milestone_id: milestoneId, bulk_issues: data}\n        return $http.post(url, params)\n\n    service.upvote = (issueId) ->\n        url = $urls.resolve(\"issue-upvote\", issueId)\n        return $http.post(url)\n\n    service.downvote = (issueId) ->\n        url = $urls.resolve(\"issue-downvote\", issueId)\n        return $http.post(url)\n\n    service.watch = (issueId) ->\n        url = $urls.resolve(\"issue-watch\", issueId)\n        return $http.post(url)\n\n    service.unwatch = (issueId) ->\n        url = $urls.resolve(\"issue-unwatch\", issueId)\n        return $http.post(url)\n\n    service.stats = (projectId) ->\n        return $repo.queryOneRaw(\"projects\", \"#{projectId}/issues_stats\")\n\n    service.filtersData = (params) ->\n        return $repo.queryOneRaw(\"issues-filters\", null, params)\n\n    service.listValues = (projectId, type) ->\n        params = {\"project\": projectId}\n        service.storeQueryParams(projectId, params)\n        return $repo.queryMany(type, params)\n\n    service.createDefaultValues = (projectId, type) ->\n        data = {\"project_id\": projectId}\n        url = $urls.resolve(\"#{type}-create-default\")\n        return $http.post(url, data)\n\n    service.storeQueryParams = (projectId, params) ->\n        ns = \"#{projectId}:#{hashSuffix}\"\n        hash = generateHash([projectId, ns])\n        $storage.set(hash, params)\n\n    service.getQueryParams = (projectId) ->\n        ns = \"#{projectId}:#{hashSuffix}\"\n        hash = generateHash([projectId, ns])\n        return $storage.get(hash) or {}\n\n    service.bulkUpdateMilestone = (projectId, milestoneId, data) ->\n        url = $urls.resolve(\"bulk-update-issue-milestone\")\n        params = {project_id: projectId, milestone_id: milestoneId, bulk_issues: data}\n        return $http.post(url, params)\n\n    service.promoteToUserStory = (issueId, projectId) ->\n        url = $urls.resolve(\"promote-issue-to-us\", issueId)\n        data = {project_id: projectId}\n        return $http.post(url, data)\n\n    return (instance) ->\n        instance.issues = service\n\n\nmodule = angular.module(\"taigaResources\")\nmodule.factory(\"$tgIssuesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgStorage\", \"$q\", resourceProvider])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/resources/kanban.coffee\n###\n\n\ntaiga = @.taiga\n\ngenerateHash = taiga.generateHash\n\nresourceProvider = ($storage) ->\n    service = {}\n    hashSuffixStatusViewModes = \"kanban-statusviewmodels\"\n    hashSuffixStatusColumnModes = \"kanban-statuscolumnmodels\"\n\n    service.storeStatusColumnModes = (projectId, params) ->\n        ns = \"#{projectId}:#{hashSuffixStatusColumnModes}\"\n        hash = generateHash([projectId, ns])\n        $storage.set(hash, params)\n\n    service.getStatusColumnModes = (projectId) ->\n        ns = \"#{projectId}:#{hashSuffixStatusColumnModes}\"\n        hash = generateHash([projectId, ns])\n        return $storage.get(hash) or {}\n\n    return (instance) ->\n        instance.kanban = service\n\n\nmodule = angular.module(\"taigaResources\")\nmodule.factory(\"$tgKanbanResourcesProvider\", [\"$tgStorage\", resourceProvider])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/resources/locales.coffee\n###\n\n\ntaiga = @.taiga\nsizeFormat = @.taiga.sizeFormat\n\n\nresourceProvider = ($repo) ->\n    service = {\n        list: -> return $repo.queryMany(\"locales\")\n    }\n\n    return (instance) ->\n        instance.locales = service\n\n\nmodule = angular.module(\"taigaResources\")\nmodule.factory(\"$tgLocalesResourcesProvider\", [\"$tgRepo\", resourceProvider])\n\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/resources/mdrender.coffee\n###\n\n\ntaiga = @.taiga\n\nresourceProvider = ($repo, $urls, $http) ->\n    service = {}\n\n    service.render = (projectId, content) ->\n        # We can't use an empty content\n        content = ' ' if not content? or content == \"\"\n\n        params = {\n            project_id: projectId\n            content: content\n        }\n        url = $urls.resolve(\"wiki\")\n        return $http.post(\"#{url}/render\", params).then (data) =>\n            return data.data\n\n    return (instance) ->\n        instance.mdrender = service\n\n\nmodule = angular.module(\"taigaResources\")\nmodule.factory(\"$tgMdRenderResourcesProvider\", [\"$tgRepo\", \"$tgUrls\", \"$tgHttp\", resourceProvider])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/resources/memberships.coffee\n###\n\n\ntaiga = @.taiga\n\nresourceProvider = ($repo, $http, $urls) ->\n    service = {}\n\n    service.get = (id) ->\n        return $repo.queryOne(\"memberships\", id)\n\n    service.list = (projectId, filters, enablePagination=true) ->\n        params = {project: projectId}\n        params = _.extend({}, params, filters or {})\n        if enablePagination\n            return $repo.queryPaginated(\"memberships\", params)\n\n        return $repo.queryMany(\"memberships\", params, options={enablePagination:enablePagination})\n\n    service.listByUser = (userId, filters) ->\n        params = {user: userId}\n        params = _.extend({}, params, filters or {})\n        return $repo.queryPaginated(\"memberships\", params)\n\n    service.resendInvitation = (id) ->\n        url = $urls.resolve(\"memberships\")\n        return $http.post(\"#{url}/#{id}/resend_invitation\", {})\n\n    service.bulkCreateMemberships = (projectId, data, invitation_extra_text) ->\n        url = $urls.resolve(\"bulk-create-memberships\")\n        params = {project_id: projectId, bulk_memberships: data, invitation_extra_text: invitation_extra_text}\n        return $http.post(url, params)\n\n    return (instance) ->\n        instance.memberships = service\n\n\nmodule = angular.module(\"taigaResources\")\nmodule.factory(\"$tgMembershipsResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/resources/modules.coffee\n###\n\nresourceProvider = ($repo) ->\n    service = {}\n\n    service.list = (projectId, module) ->\n        return $repo.queryOneAttribute(\"project-modules\", projectId, module)\n\n    return (instance) ->\n        instance.modules = service\n\n\nmodule = angular.module(\"taigaResources\")\nmodule.factory(\"$tgModulesResourcesProvider\", [\"$tgRepo\", resourceProvider])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/resources/notify-policies.coffee\n###\n\n\ntaiga = @.taiga\n\nresourceProvider = ($repo, $http, $urls) ->\n    service = {}\n\n    service.get = (id) ->\n        return $repo.queryOne(\"notify-policies\", id)\n\n    service.list = (filters) ->\n        params = _.extend({}, params, filters or {})\n        return $repo.queryMany(\"notify-policies\", params)\n\n    return (instance) ->\n        instance.notifyPolicies = service\n\n\nmodule = angular.module(\"taigaResources\")\nmodule.factory(\"$tgNotifyPoliciesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/resources/projects.coffee\n###\n\n\ntaiga = @.taiga\nsizeFormat = @.taiga.sizeFormat\n\n\nresourceProvider = ($config, $repo, $http, $urls, $auth, $q, $translate) ->\n    service = {}\n\n    service.get = (projectId) ->\n        return $repo.queryOne(\"projects\", projectId)\n\n    service.getBySlug = (projectSlug) ->\n        return $repo.queryOne(\"projects\", \"by_slug?slug=#{projectSlug}\")\n\n    service.list = (filters) ->\n        params = {\"order_by\": \"user_order\"}\n        params = _.extend({}, params, filters or {})\n        return $repo.queryMany(\"projects\", params)\n\n    service.listByMember = (memberId) ->\n        params = {\"member\": memberId, \"order_by\": \"user_order\"}\n        return $repo.queryMany(\"projects\", params)\n\n    service.templates = ->\n        return $repo.queryMany(\"project-templates\")\n\n    service.usersList = (projectId) ->\n        params = {\"project\": projectId}\n        return $repo.queryMany(\"users\", params)\n\n    service.rolesList = (projectId) ->\n        params = {\"project\": projectId}\n        return $repo.queryMany(\"roles\", params)\n\n    service.stats = (projectId) ->\n        return $repo.queryOneRaw(\"projects\", \"#{projectId}/stats\")\n\n    service.bulkUpdateOrder = (bulkData) ->\n        url = $urls.resolve(\"bulk-update-projects-order\")\n        return $http.post(url, bulkData)\n\n    service.regenerate_epics_csv_uuid = (projectId) ->\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/regenerate_epics_csv_uuid\"\n        return $http.post(url)\n\n    service.regenerate_userstories_csv_uuid = (projectId) ->\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/regenerate_userstories_csv_uuid\"\n        return $http.post(url)\n\n    service.regenerate_tasks_csv_uuid = (projectId) ->\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/regenerate_tasks_csv_uuid\"\n        return $http.post(url)\n\n    service.regenerate_issues_csv_uuid = (projectId) ->\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/regenerate_issues_csv_uuid\"\n        return $http.post(url)\n\n    service.delete_epics_csv_uuid = (projectId) ->\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/delete_epics_csv_uuid\"\n        return $http.post(url)\n\n    service.delete_userstories_csv_uuid = (projectId) ->\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/delete_userstories_csv_uuid\"\n        return $http.post(url)\n\n    service.delete_tasks_csv_uuid = (projectId) ->\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/delete_tasks_csv_uuid\"\n        return $http.post(url)\n\n    service.delete_issues_csv_uuid = (projectId) ->\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/delete_issues_csv_uuid\"\n        return $http.post(url)\n\n    service.leave = (projectId) ->\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/leave\"\n        return $http.post(url)\n\n    service.memberStats = (projectId) ->\n        return $repo.queryOneRaw(\"projects\", \"#{projectId}/member_stats\")\n\n    service.tagsColors = (projectId) ->\n        return $repo.queryOne(\"projects\", \"#{projectId}/tags_colors\")\n\n    service.deleteTag = (projectId, tag) ->\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/delete_tag\"\n        return $http.post(url, {tag: tag})\n\n    service.createTag = (projectId, tag, color) ->\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/create_tag\"\n        data = {}\n        data.tag = tag\n        data.color = null\n        if color\n            data.color = color\n        return $http.post(url, data)\n\n    service.editTag = (projectId, from_tag, to_tag, color) ->\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/edit_tag\"\n        data = {}\n        data.from_tag = from_tag\n        if to_tag\n            data.to_tag = to_tag\n        data.color = null\n        if color\n            data.color = color\n        return $http.post(url, data)\n\n    service.mixTags = (projectId, to_tag, from_tags) ->\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/mix_tags\"\n        return $http.post(url, {to_tag: to_tag, from_tags: from_tags})\n\n    service.export = (projectId) ->\n        url = \"#{$urls.resolve(\"exporter\")}/#{projectId}\"\n        return $http.get(url)\n\n    service.import = (file, statusUpdater) ->\n        defered = $q.defer()\n\n        maxFileSize = $config.get(\"maxUploadFileSize\", null)\n        if maxFileSize and file.size > maxFileSize\n            errorMsg = $translate.instant(\"PROJECT.IMPORT.ERROR_MAX_SIZE_EXCEEDED\", {\n                fileName: file.name\n                fileSize: sizeFormat(file.size)\n                maxFileSize: sizeFormat(maxFileSize)\n            })\n\n            response = {\n                status: 413,\n                data: _error_message: errorMsg\n            }\n            defered.reject(response)\n            return defered.promise\n\n        uploadProgress = (evt) =>\n            percent = Math.round((evt.loaded / evt.total) * 100)\n            message = $translate.instant(\"PROJECT.IMPORT.UPLOAD_IN_PROGRESS_MESSAGE\", {\n                uploadedSize: sizeFormat(evt.loaded)\n                totalSize: sizeFormat(evt.total)\n            })\n            statusUpdater(\"in-progress\", null, message, percent)\n\n        uploadComplete = (evt) =>\n            statusUpdater(\"done\",\n                          $translate.instant(\"PROJECT.IMPORT.TITLE\"),\n                          $translate.instant(\"PROJECT.IMPORT.DESCRIPTION\"))\n\n        uploadFailed = (evt) =>\n            statusUpdater(\"error\")\n\n        complete = (evt) =>\n            response = {}\n            try\n                response.data = JSON.parse(evt.target.responseText)\n            catch\n                response.data = {}\n            response.status = evt.target.status\n            if evt.target.getResponseHeader('Taiga-Info-Project-Is-Private')\n                response.headers = {\n                    isPrivate: evt.target.getResponseHeader('Taiga-Info-Project-Is-Private') == 'True',\n                    memberships: parseInt(evt.target.getResponseHeader('Taiga-Info-Project-Memberships'))\n                }\n            defered.resolve(response) if response.status in [201, 202]\n            defered.reject(response)\n\n        failed = (evt) =>\n            defered.reject(\"fail\")\n\n        data = new FormData()\n        data.append('dump', file)\n\n        xhr = new XMLHttpRequest()\n        xhr.upload.addEventListener(\"progress\", uploadProgress, false)\n        xhr.upload.addEventListener(\"load\", uploadComplete, false)\n        xhr.upload.addEventListener(\"error\", uploadFailed, false)\n        xhr.upload.addEventListener(\"abort\", uploadFailed, false)\n        xhr.addEventListener(\"load\", complete, false)\n        xhr.addEventListener(\"error\", failed, false)\n\n        xhr.open(\"POST\", $urls.resolve(\"importer\"))\n        xhr.setRequestHeader(\"Authorization\", \"Bearer #{$auth.getToken()}\")\n        xhr.setRequestHeader('Accept', 'application/json')\n        xhr.send(data)\n\n        return defered.promise\n\n    service.changeLogo = (projectId, file) ->\n        maxFileSize = $config.get(\"maxUploadFileSize\", null)\n        if maxFileSize and file.size > maxFileSize\n            response = {\n                status: 413,\n                data: _error_message: \"'#{file.name}' (#{sizeFormat(file.size)}) is too heavy for our oompa\n                                       loompas, try it with a smaller than (#{sizeFormat(maxFileSize)})\"\n            }\n            defered = $q.defer()\n            defered.reject(response)\n            return defered.promise\n\n        data = new FormData()\n        data.append('logo', file)\n        options = {\n            transformRequest: angular.identity,\n            headers: {'Content-Type': undefined}\n        }\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/change_logo\"\n        return $http.post(url, data, {}, options)\n\n    service.removeLogo = (projectId) ->\n        url = \"#{$urls.resolve(\"projects\")}/#{projectId}/remove_logo\"\n        return $http.post(url)\n\n    return (instance) ->\n        instance.projects = service\n\n\nmodule = angular.module(\"taigaResources\")\nmodule.factory(\"$tgProjectsResourcesProvider\", [\"$tgConfig\", \"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgAuth\",\n                                                \"$q\", \"$translate\", resourceProvider])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/resources/roles.coffee\n###\n\n\ntaiga = @.taiga\n\nresourceProvider = ($repo, $http, $urls) ->\n    service = {}\n\n    service.get = (id) ->\n        return $repo.queryOne(\"roles\", id)\n\n    service.list = (projectId) ->\n        return $repo.queryMany(\"roles\", {project: projectId})\n\n    return (instance) ->\n        instance.roles = service\n\n\nmodule = angular.module(\"taigaResources\")\nmodule.factory(\"$tgRolesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/resources/search.coffee\n###\n\n\ntaiga = @.taiga\n\nresourceProvider = ($repo, $urls, $http, $q) ->\n    service = {}\n\n    service.do = (projectId, term) ->\n        deferredAbort = $q.defer()\n\n        url = $urls.resolve(\"search\")\n        params = {\n            url: url,\n            method: \"GET\",\n            timeout: deferredAbort.promise,\n            cancelable: true,\n            params: {\n                project: projectId\n                text: term,\n                get_all: false,\n            }\n        }\n\n        request = $http.request(params).then (data) ->\n            return data.data\n\n        request.abort = () ->\n            deferredAbort.resolve()\n\n        request.finally = () ->\n            request.abort = angular.noop\n            deferredAbort = request = null\n\n        return request\n\n    return (instance) ->\n        instance.search = service\n\nmodule = angular.module(\"taigaResources\")\nmodule.factory(\"$tgSearchResourcesProvider\", [\"$tgRepo\", \"$tgUrls\", \"$tgHttp\", \"$q\", resourceProvider])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/resources/sprints.coffee\n###\n\ntaiga = @.taiga\n\ngenerateHash = taiga.generateHash\n\nresourceProvider = ($repo, $model, $storage, $http, $urls) ->\n    service = {}\n\n    service.get = (projectId, sprintId) ->\n        return $repo.queryOne(\"milestones\", sprintId).then (sprint) ->\n            uses = sprint.user_stories\n            uses = _.map(uses, (u) -> $model.make_model(\"userstories\", u))\n            sprint._attrs.user_stories = uses\n            return sprint\n\n    service.stats = (projectId, sprintId) ->\n        return $repo.queryOneRaw(\"milestones\", \"#{sprintId}/stats\")\n\n    service.list = (projectId, filters) ->\n        params = {\"project\": projectId}\n        params = _.extend({}, params, filters or {})\n        return $repo.queryMany(\"milestones\", params, {}, true).then (result) =>\n            milestones = result[0]\n            headers = result[1]\n\n            for m in milestones\n                uses = m.user_stories\n                uses = _.map(uses, (u) => $model.make_model(\"userstories\", u))\n                m._attrs.user_stories = uses\n\n            return {\n                milestones: milestones,\n                closed: parseInt(headers(\"Taiga-Info-Total-Closed-Milestones\"), 10),\n                open: parseInt(headers(\"Taiga-Info-Total-Opened-Milestones\"), 10)\n            }\n\n    service.moveUserStoriesMilestone = (currentMilestoneId, projectId, milestoneId, data) ->\n        url = $urls.resolve(\"move-userstories-to-milestone\", currentMilestoneId)\n        params = {project_id: projectId, milestone_id: milestoneId, bulk_stories: data}\n        return $http.post(url, params)\n\n    service.moveTasksMilestone = (currentMilestoneId, projectId, milestoneId, data) ->\n        url = $urls.resolve(\"move-tasks-to-milestone\", currentMilestoneId)\n        params = {project_id: projectId, milestone_id: milestoneId, bulk_tasks: data}\n        return $http.post(url, params)\n\n    service.moveIssuesMilestone = (currentMilestoneId, projectId, milestoneId, data) ->\n        url = $urls.resolve(\"move-issues-to-milestone\", currentMilestoneId)\n        params = {project_id: projectId, milestone_id: milestoneId, bulk_issues: data}\n        return $http.post(url, params)\n\n    return (instance) ->\n        instance.sprints = service\n\nmodule = angular.module(\"taigaResources\")\nmodule.factory(\"$tgSprintsResourcesProvider\",\n[\"$tgRepo\", \"$tgModel\", \"$tgStorage\", \"$tgHttp\", \"$tgUrls\", resourceProvider])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/resources/tasks.coffee\n###\n\n\ntaiga = @.taiga\n\ngenerateHash = taiga.generateHash\n\nresourceProvider = ($repo, $http, $urls, $storage) ->\n    service = {}\n    hashSuffix = \"tasks-queryparams\"\n    hashSuffixStatusColumnModes = \"tasks-statuscolumnmodels\"\n    hashSuffixUsRowModes = \"tasks-usrowmodels\"\n\n    service.get = (projectId, taskId, extraParams) ->\n        params = service.getQueryParams(projectId)\n        params.project = projectId\n\n        params = _.extend({}, params, extraParams)\n\n        return $repo.queryOne(\"tasks\", taskId, params)\n\n    service.getByRef = (projectId, ref, extraParams) ->\n        params = service.getQueryParams(projectId)\n        params.project = projectId\n        params.ref = ref\n\n        params = _.extend({}, params, extraParams)\n\n        return $repo.queryOne(\"tasks\", \"by_ref\", params)\n\n    service.listInAllProjects = (filters) ->\n        return $repo.queryMany(\"tasks\", filters)\n\n    service.filtersData = (params) ->\n        return $repo.queryOneRaw(\"task-filters\", null, params)\n\n    service.list = (projectId, sprintId=null, userStoryId=null, params) ->\n        params = _.merge(params, {project: projectId, order_by: 'us_order'})\n        params.milestone = sprintId if sprintId\n        params.user_story = userStoryId if userStoryId\n        service.storeQueryParams(projectId, params)\n        return $repo.queryMany(\"tasks\", params)\n\n    service.bulkCreate = (projectId, sprintId, usId, data) ->\n        url = $urls.resolve(\"bulk-create-tasks\")\n        params = {project_id: projectId, milestone_id: sprintId, us_id: usId, bulk_tasks: data}\n        return $http.post(url, params).then (result) ->\n            return result.data\n\n    service.upvote = (taskId) ->\n        url = $urls.resolve(\"task-upvote\", taskId)\n        return $http.post(url)\n\n    service.downvote = (taskId) ->\n        url = $urls.resolve(\"task-downvote\", taskId)\n        return $http.post(url)\n\n    service.watch = (taskId) ->\n        url = $urls.resolve(\"task-watch\", taskId)\n        return $http.post(url)\n\n    service.unwatch = (taskId) ->\n        url = $urls.resolve(\"task-unwatch\", taskId)\n        return $http.post(url)\n\n    service.bulkUpdateTaskTaskboardOrder = (projectId, data) ->\n        url = $urls.resolve(\"bulk-update-task-taskboard-order\")\n        params = {project_id: projectId, bulk_tasks: data}\n        return $http.post(url, params)\n\n    service.bulkUpdateMilestone = (projectId, milestoneId, data) ->\n        url = $urls.resolve(\"bulk-update-task-milestone\")\n        params = {project_id: projectId, milestone_id: milestoneId, bulk_tasks: data}\n        return $http.post(url, params)\n\n    service.reorder = (id, data, setOrders) ->\n        url = $urls.resolve(\"tasks\") + \"/#{id}\"\n\n        options = {\"headers\": {\"set-orders\": JSON.stringify(setOrders)}}\n\n        return $http.patch(url, data, null, options)\n            .then (result) -> result.data\n\n    service.listValues = (projectId, type) ->\n        params = {\"project\": projectId}\n        return $repo.queryMany(type, params)\n\n    service.createDefaultValues = (projectId, type) ->\n        data = {\"project_id\": projectId}\n        url = $urls.resolve(\"#{type}-create-default\")\n        return $http.post(url, data)\n\n    service.storeQueryParams = (projectId, params) ->\n        ns = \"#{projectId}:#{hashSuffix}\"\n        hash = generateHash([projectId, ns])\n        $storage.set(hash, params)\n\n    service.getQueryParams = (projectId) ->\n        ns = \"#{projectId}:#{hashSuffix}\"\n        hash = generateHash([projectId, ns])\n        return $storage.get(hash) or {}\n\n    service.storeStatusColumnModes = (projectId, params) ->\n        ns = \"#{projectId}:#{hashSuffixStatusColumnModes}\"\n        hash = generateHash([projectId, ns])\n        $storage.set(hash, params)\n\n    service.getStatusColumnModes = (projectId) ->\n        ns = \"#{projectId}:#{hashSuffixStatusColumnModes}\"\n        hash = generateHash([projectId, ns])\n        return $storage.get(hash) or {}\n\n    service.storeUsRowModes = (projectId, sprintId, params) ->\n        ns = \"#{projectId}:#{hashSuffixUsRowModes}\"\n        hash = generateHash([projectId, sprintId, ns])\n\n        $storage.set(hash, params)\n\n    service.getUsRowModes = (projectId, sprintId) ->\n        ns = \"#{projectId}:#{hashSuffixUsRowModes}\"\n        hash = generateHash([projectId, sprintId, ns])\n\n        return $storage.get(hash) or {}\n\n    service.promoteToUserStory = (taskId, projectId) ->\n        url = $urls.resolve(\"promote-task-to-us\", taskId)\n        data = {project_id: projectId}\n        return $http.post(url, data)\n\n    return (instance) ->\n        instance.tasks = service\n\n\nmodule = angular.module(\"taigaResources\")\nmodule.factory(\"$tgTasksResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgStorage\", resourceProvider])\n","###\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/resources/user-project-settings.coffee\n###\n\ntaiga = @.taiga\n\nresourceProvider = ($repo, $http, $urls) ->\n    service = {}\n\n    service.get = (id) ->\n        return $repo.queryOne(\"user-project-settings\", id)\n\n    service.list = (filters) ->\n        params = _.extend({}, params, filters or {})\n        return $repo.queryMany(\"user-project-settings\", params)\n\n    return (instance) ->\n        instance.userProjectSettings = service\n\n\nmodule = angular.module(\"taigaResources\")\nmodule.factory(\"$tgUserProjectSettingsResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/resources/user-settings.coffee\n###\n\n\ntaiga = @.taiga\nsizeFormat = @.taiga.sizeFormat\n\n\nresourceProvider = ($config, $repo, $http, $urls, $q) ->\n    service = {}\n\n    service.changeAvatar = (file) ->\n        maxFileSize = $config.get(\"maxUploadFileSize\", null)\n        if maxFileSize and file.size > maxFileSize\n            response = {\n                status: 413,\n                data: _error_message: \"'#{file.name}' (#{sizeFormat(file.size)}) is too heavy for our oompa\n                                       loompas, try it with a smaller than (#{sizeFormat(maxFileSize)})\"\n            }\n            defered = $q.defer()\n            defered.reject(response)\n            return defered.promise\n\n        data = new FormData()\n        data.append('avatar', file)\n        options = {\n            transformRequest: angular.identity,\n            headers: {'Content-Type': undefined}\n        }\n        url = \"#{$urls.resolve(\"users\")}/change_avatar\"\n        return $http.post(url, data, {}, options)\n\n    service.removeAvatar = () ->\n        url = \"#{$urls.resolve(\"users\")}/remove_avatar\"\n        return $http.post(url)\n\n    service.changePassword = (currentPassword, newPassword) ->\n        url = \"#{$urls.resolve(\"users\")}/change_password\"\n        data = {\n            current_password: currentPassword\n            password: newPassword\n        }\n        return $http.post(url, data)\n\n    return (instance) ->\n        instance.userSettings = service\n\n\nmodule = angular.module(\"taigaResources\")\nmodule.factory(\"$tgUserSettingsResourcesProvider\", [\"$tgConfig\", \"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$q\",\n                                                    resourceProvider])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/resources/users.coffee\n###\n\n\ntaiga = @.taiga\nsizeFormat = @.taiga.sizeFormat\n\n\nresourceProvider = ($http, $urls) ->\n    service = {}\n\n    service.contacts = (userId, options={}) ->\n        url = $urls.resolve(\"user-contacts\", userId)\n        httpOptions = {headers: {}}\n\n        if not options.enablePagination\n            httpOptions.headers[\"x-disable-pagination\"] =  \"1\"\n\n        return $http.get(url, {}, httpOptions)\n            .then (result) ->\n                return result.data\n\n    return (instance) ->\n        instance.users = service\n\n\nmodule = angular.module(\"taigaResources\")\nmodule.factory(\"$tgUsersResourcesProvider\", [\"$tgHttp\", \"$tgUrls\", \"$q\",\n                                                    resourceProvider])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/resources/userstories.coffee\n###\n\ntaiga = @.taiga\n\ngenerateHash = taiga.generateHash\n\nresourceProvider = ($repo, $http, $urls, $storage, $q) ->\n    service = {}\n    hashSuffix = \"userstories-queryparams\"\n\n    service.get = (projectId, usId, extraParams) ->\n        params = service.getQueryParams(projectId)\n        params.project = projectId\n\n        params = _.extend({}, params, extraParams)\n\n        return $repo.queryOne(\"userstories\", usId, params)\n\n    service.getByRef = (projectId, ref, extraParams = {}) ->\n        params = service.getQueryParams(projectId)\n        params.project = projectId\n        params.ref = ref\n        params = _.extend({}, params, extraParams)\n\n        return $repo.queryOne(\"userstories\", \"by_ref\", params)\n\n    service.listInAllProjects = (filters) ->\n        return $repo.queryMany(\"userstories\", filters)\n\n    service.filtersData = (params) ->\n        return $repo.queryOneRaw(\"userstories-filters\", null, params)\n\n    service.listUnassigned = (projectId, filters, pageSize) ->\n        params = {\"project\": projectId, \"milestone\": \"null\"}\n        params = _.extend({}, params, filters or {})\n        service.storeQueryParams(projectId, params)\n\n        return $repo.queryMany(\"userstories\", _.extend(params, {\n            page_size: pageSize\n        }), {\n            enablePagination: true\n        }, true)\n\n    service.listAll = (projectId, filters) ->\n        params = {\"project\": projectId}\n        params = _.extend({}, params, filters or {})\n        service.storeQueryParams(projectId, params)\n\n        return $repo.queryMany(\"userstories\", params)\n\n    service.bulkCreate = (projectId, status, bulk) ->\n        data = {\n            project_id: projectId\n            status_id: status\n            bulk_stories: bulk\n        }\n\n        url = $urls.resolve(\"bulk-create-us\")\n\n        return $http.post(url, data)\n\n    service.upvote = (userStoryId) ->\n        url = $urls.resolve(\"userstory-upvote\", userStoryId)\n        return $http.post(url)\n\n    service.downvote = (userStoryId) ->\n        url = $urls.resolve(\"userstory-downvote\", userStoryId)\n        return $http.post(url)\n\n    service.watch = (userStoryId) ->\n        url = $urls.resolve(\"userstory-watch\", userStoryId)\n        return $http.post(url)\n\n    service.unwatch = (userStoryId) ->\n        url = $urls.resolve(\"userstory-unwatch\", userStoryId)\n        return $http.post(url)\n\n    service.bulkUpdateBacklogOrder = (projectId, data) ->\n        url = $urls.resolve(\"bulk-update-us-backlog-order\")\n        params = {project_id: projectId, bulk_stories: data}\n        return $http.post(url, params)\n\n    service.bulkUpdateMilestone = (projectId, milestoneId, data) ->\n        url = $urls.resolve(\"bulk-update-us-milestone\")\n        params = {project_id: projectId, milestone_id: milestoneId, bulk_stories: data}\n        return $http.post(url, params)\n\n    service.bulkUpdateKanbanOrder = (projectId, statusId, data) ->\n        url = $urls.resolve(\"bulk-update-us-kanban-order\")\n        params = {project_id: projectId, status_id: statusId, bulk_stories: data}\n        return $http.post(url, params)\n\n    service.listValues = (projectId, type) ->\n        params = {\"project\": projectId}\n        service.storeQueryParams(projectId, params)\n        return $repo.queryMany(type, params)\n\n    service.createDefaultValues = (projectId, type) ->\n        data = {\"project_id\": projectId}\n        url = $urls.resolve(\"#{type}-create-default\")\n        return $http.post(url, data)\n\n    service.storeQueryParams = (projectId, params) ->\n        ns = \"#{projectId}:#{hashSuffix}\"\n        hash = generateHash([projectId, ns])\n        $storage.set(hash, params)\n\n    service.getQueryParams = (projectId) ->\n        ns = \"#{projectId}:#{hashSuffix}\"\n        hash = generateHash([projectId, ns])\n        return $storage.get(hash) or {}\n\n    service.storeShowTags = (projectId, showTags) ->\n        hash = generateHash([projectId, 'showTags'])\n        $storage.set(hash, showTags)\n\n    service.getShowTags = (projectId) ->\n        hash = generateHash([projectId, 'showTags'])\n        return $storage.get(hash) or null\n\n    return (instance) ->\n        instance.userstories = service\n\nmodule = angular.module(\"taigaResources\")\nmodule.factory(\"$tgUserstoriesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgStorage\", \"$q\", resourceProvider])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/resources/webhooklogs.coffee\n###\n\nresourceProvider = ($repo, $urls, $http) ->\n    service = {}\n\n    service.list = (webhookId) ->\n        params = {webhook: webhookId}\n        return $repo.queryMany(\"webhooklogs\", params)\n\n    service.resend = (webhooklogId) ->\n        url = $urls.resolve(\"webhooklogs-resend\", webhooklogId)\n        return $http.post(url)\n\n    return (instance) ->\n        instance.webhooklogs = service\n\n\nmodule = angular.module(\"taigaResources\")\nmodule.factory(\"$tgWebhookLogsResourcesProvider\", [\"$tgRepo\", \"$tgUrls\", \"$tgHttp\", resourceProvider])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/resources/webhooks.coffee\n###\n\nresourceProvider = ($repo, $urls, $http) ->\n    service = {}\n\n    service.list = (projectId) ->\n        params = {project: projectId}\n        return $repo.queryMany(\"webhooks\", params)\n\n    service.test = (webhookId) ->\n        url = $urls.resolve(\"webhooks-test\", webhookId)\n        return $http.post(url)\n\n    return (instance) ->\n        instance.webhooks = service\n\n\nmodule = angular.module(\"taigaResources\")\nmodule.factory(\"$tgWebhooksResourcesProvider\", [\"$tgRepo\", \"$tgUrls\", \"$tgHttp\", resourceProvider])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/resources/wiki.coffee\n###\n\n\ntaiga = @.taiga\n\nresourceProvider = ($repo, $http, $urls) ->\n    service = {}\n\n    service.get = (wikiId) ->\n        return $repo.queryOne(\"wiki\", wikiId)\n\n    service.getBySlug = (projectId, slug) ->\n        return $repo.queryOne(\"wiki\", \"by_slug?project=#{projectId}&slug=#{slug}\")\n\n    service.list = (projectId) ->\n        return $repo.queryMany(\"wiki\", {project: projectId})\n\n    service.listLinks = (projectId) ->\n        return $repo.queryMany(\"wiki-links\", {project: projectId})\n\n    return (instance) ->\n        instance.wiki = service\n\n\nmodule = angular.module(\"taigaResources\")\nmodule.factory(\"$tgWikiResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/user-settings/change-password.coffee\n###\n\ntaiga = @.taiga\n\nmixOf = @.taiga.mixOf\ndebounce = @.taiga.debounce\n\nmodule = angular.module(\"taigaUserSettings\")\n\n\n#############################################################################\n## User ChangePassword Controller\n#############################################################################\n\nclass UserChangePasswordController extends mixOf(taiga.Controller, taiga.PageMixin)\n    @.$inject = [\n        \"$scope\",\n        \"$rootScope\",\n        \"$tgRepo\",\n        \"$tgConfirm\",\n        \"$tgResources\",\n        \"$routeParams\",\n        \"$q\",\n        \"$tgLocation\",\n        \"$tgNavUrls\",\n        \"$tgAuth\",\n        \"$translate\"\n    ]\n\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @params, @q, @location, @navUrls,\n                  @auth, @translate) ->\n        @scope.sectionName = @translate.instant(\"CHANGE_PASSWORD.SECTION_NAME\")\n        @scope.user = @auth.getUser()\n\nmodule.controller(\"UserChangePasswordController\", UserChangePasswordController)\n\n\n#############################################################################\n## User ChangePassword Directive\n#############################################################################\n\nUserChangePasswordDirective = ($rs, $confirm, $loading, $translate) ->\n    link = ($scope, $el, $attrs, ctrl) ->\n        form = new checksley.Form($el.find(\"form\"))\n\n        submit = debounce 2000, (event) =>\n            event.preventDefault()\n\n            if not form.validate()\n                return\n\n            if $scope.newPassword1 != $scope.newPassword2\n                $confirm.notify('error', $translate.instant(\"CHANGE_PASSWORD.ERROR_PASSWORD_MATCH\"))\n                return\n\n            currentLoading = $loading()\n                .target(submitButton)\n                .start()\n\n            promise = $rs.userSettings.changePassword($scope.currentPassword, $scope.newPassword1)\n            promise.then =>\n                currentLoading.finish()\n                $confirm.notify('success')\n\n            promise.then null, (response) =>\n                currentLoading.finish()\n                $confirm.notify('error', response.data._error_message)\n\n        submitButton = $el.find(\".submit-button\")\n\n        $el.on \"submit\", \"form\", submit\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link:link\n    }\n\nmodule.directive(\"tgUserChangePassword\", [\"$tgResources\", \"$tgConfirm\", \"$tgLoading\", \"$translate\", UserChangePasswordDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/user-settings/lightboxes.coffee\n###\n\ntaiga = @.taiga\nbindOnce = @.taiga.bindOnce\ndebounce = @.taiga.debounce\n\nmodule = angular.module(\"taigaUserSettings\")\n\n\n#############################################################################\n## Delete User Lightbox Directive\n#############################################################################\n\nDeleteUserDirective = ($repo, $rootscope, $auth, $location, $navUrls, lightboxService, $loading) ->\n    link = ($scope, $el, $attrs) ->\n        $scope.$on \"deletelightbox:new\", (ctx, user)->\n            lightboxService.open($el)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n        submit = ->\n            currentLoading = $loading()\n                .target(submitButton)\n                .start()\n\n            promise = $repo.remove($scope.user)\n\n            promise.then (data) ->\n                currentLoading.finish()\n                lightboxService.close($el)\n                $auth.logout()\n                $location.path($navUrls.resolve(\"login\"))\n\n            # FIXME: error handling?\n            promise.then null, ->\n                currentLoading.finish()\n                console.log \"FAIL\"\n\n        $el.on \"click\", \".button-green\", (event) ->\n            event.preventDefault()\n            lightboxService.close($el)\n\n        $el.on \"click\", \".button-red\", debounce 2000, (event) ->\n            event.preventDefault()\n            submit()\n\n        submitButton = $el.find(\".button-red\")\n\n    return {\n        link: link,\n        templateUrl: \"user/lightbox/lightbox-delete-account.html\"\n    }\n\nmodule.directive(\"tgLbDeleteUser\", [\"$tgRepo\", \"$rootScope\", \"$tgAuth\", \"$tgLocation\", \"$tgNavUrls\",\n                                    \"lightboxService\", \"$tgLoading\", DeleteUserDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/user-settings/live-notifications.coffee\n###\n\ntaiga = @.taiga\nmixOf = @.taiga.mixOf\nbindOnce = @.taiga.bindOnce\n\nmodule = angular.module(\"taigaUserSettings\")\n\n\n#############################################################################\n## User settings Controller\n#############################################################################\n\nclass UserLiveNotificationsController extends mixOf(taiga.Controller, taiga.PageMixin)\n    @.$inject = [\n        \"$scope\",\n        \"$rootScope\",\n        \"$tgRepo\",\n        \"$tgConfirm\",\n        \"$tgResources\",\n        \"$routeParams\",\n        \"$q\",\n        \"$tgLocation\",\n        \"$tgNavUrls\",\n        \"$tgAuth\",\n        \"tgErrorHandlingService\"\n    ]\n\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @params, @q, @location, @navUrls, @auth, @errorHandlingService) ->\n        @scope.sectionName = \"USER_SETTINGS.NOTIFICATIONS.LIVE_SECTION_NAME\"\n        @scope.user = @auth.getUser()\n        promise = @.loadInitialData()\n        promise.then null, @.onInitialDataError.bind(@)\n\n    loadInitialData: ->\n        return @rs.notifyPolicies.list().then (notifyPolicies) =>\n            @scope.notifyPolicies = notifyPolicies\n            return notifyPolicies\n\nmodule.controller(\"UserLiveNotificationsController\", UserLiveNotificationsController)\n\n\n#############################################################################\n## User Notifications Directive\n#############################################################################\n\nUserLiveNotificationsDirective = () ->\n    link = ($scope, $el, $attrs) ->\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link:link}\n\nmodule.directive(\"tgUserLiveNotifications\", UserLiveNotificationsDirective)\n\n\n#############################################################################\n## User Notifications List Directive\n#############################################################################\n\nUserLiveNotificationsListDirective = ($repo, $confirm, $compile) ->\n    template = _.template(\"\"\"\n        <% _.each(notifyPolicies, function (notifyPolicy, index) { %>\n        <div class=\"policy-table-row\" data-index=\"<%- index %>\">\n          <div class=\"policy-table-project\"><span><%- notifyPolicy.project_name %></span></div>\n          <div class=\"policy-table-all\">\n            <div class=\"button-check\">\n              <input type=\"radio\"\n                     name=\"policy-<%- notifyPolicy.id %>\" id=\"policy-all-<%- notifyPolicy.id %>\"\n                     value=\"2\" <% if (notifyPolicy.live_notify_level == 2) { %>checked=\"checked\"<% } %>/>\n              <label for=\"policy-all-<%- notifyPolicy.id %>\"\n                     translate=\"USER_SETTINGS.NOTIFICATIONS.OPTION_ALL\"></label>\n            </div>\n          </div>\n          <div class=\"policy-table-involved\">\n            <div class=\"button-check\">\n              <input type=\"radio\"\n                     name=\"policy-<%- notifyPolicy.id %>\" id=\"policy-involved-<%- notifyPolicy.id %>\"\n                     value=\"1\" <% if (notifyPolicy.live_notify_level == 1) { %>checked=\"checked\"<% } %> />\n              <label for=\"policy-involved-<%- notifyPolicy.id %>\"\n                     translate=\"USER_SETTINGS.NOTIFICATIONS.OPTION_INVOLVED\"></label>\n            </div>\n          </div>\n          <div class=\"policy-table-none\">\n            <div class=\"button-check\">\n              <input type=\"radio\"\n                     name=\"policy-<%- notifyPolicy.id %>\" id=\"policy-none-<%- notifyPolicy.id %>\"\n                     value=\"3\" <% if (notifyPolicy.live_notify_level == 3) { %>checked=\"checked\"<% } %> />\n              <label for=\"policy-none-<%- notifyPolicy.id %>\"\n                     translate=\"USER_SETTINGS.NOTIFICATIONS.OPTION_NONE\"></label>\n            </div>\n          </div>\n        </div>\n        <% }) %>\n    \"\"\")\n\n    link = ($scope, $el, $attrs) ->\n        render = ->\n            $el.off()\n\n            ctx = {notifyPolicies: $scope.notifyPolicies}\n            html = template(ctx)\n\n            $el.html($compile(html)($scope))\n\n            $el.on \"change\", \"input[type=radio]\", (event) ->\n                target = angular.element(event.currentTarget)\n\n                policyIndex = target.parents(\".policy-table-row\").data('index')\n                policy = $scope.notifyPolicies[policyIndex]\n                prev_level = policy.live_notify_level\n                policy.live_notify_level = parseInt(target.val(), 10)\n\n                onSuccess = ->\n                    $confirm.notify(\"success\")\n\n                onError = ->\n                    $confirm.notify(\"error\")\n                    target.parents(\".policy-table-row\")\n                          .find(\"input[value=#{prev_level}]\")\n                          .prop(\"checked\", true)\n\n                $repo.save(policy).then(onSuccess, onError)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n        bindOnce($scope, $attrs.ngModel, render)\n\n    return {link:link}\n\nmodule.directive(\"tgUserLiveNotificationsList\", [\"$tgRepo\", \"$tgConfirm\", \"$compile\",\n                                             UserLiveNotificationsListDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/user-settings/main.coffee\n###\n\ntaiga = @.taiga\nmixOf = @.taiga.mixOf\nsizeFormat = @.taiga.sizeFormat\nmodule = angular.module(\"taigaUserSettings\")\ndebounce = @.taiga.debounce\n\n#############################################################################\n## User settings Controller\n#############################################################################\n\nclass UserSettingsController extends mixOf(taiga.Controller, taiga.PageMixin)\n    @.$inject = [\n        \"$scope\",\n        \"$rootScope\",\n        \"$tgConfig\",\n        \"$tgRepo\",\n        \"$tgConfirm\",\n        \"$tgResources\",\n        \"$routeParams\",\n        \"$q\",\n        \"$tgLocation\",\n        \"$tgNavUrls\",\n        \"$tgAuth\",\n        \"$translate\",\n        \"tgErrorHandlingService\"\n        \"$window\"\n    ]\n\n    constructor: (@scope, @rootscope, @config, @repo, @confirm, @rs, @params, @q, @location, @navUrls,\n                  @auth, @translate, @errorHandlingService, @window) ->\n        @scope.sectionName = \"USER_SETTINGS.MENU.SECTION_TITLE\"\n\n        @scope.project = {}\n        @scope.user = @auth.getUser()\n\n        if !@scope.user\n            @errorHandlingService.permissionDenied()\n        else\n            @scope.lang = @getLan()\n            @scope.theme = @getTheme()\n\n        maxFileSize = @config.get(\"maxUploadFileSize\", null)\n        if maxFileSize\n            text = @translate.instant(\"USER_SETTINGS.AVATAR_MAX_SIZE\", {\"maxFileSize\": sizeFormat(maxFileSize)})\n            @scope.maxFileSizeMsg = text\n\n        promise = @.loadInitialData()\n\n        promise.then null, @.onInitialDataError.bind(@)\n\n    loadInitialData: ->\n        @scope.availableThemes = @config.get(\"themes\", [])\n\n        return @rs.locales.list().then (locales) =>\n            @scope.locales = locales\n            return locales\n\n    openDeleteLightbox: ->\n        @rootscope.$broadcast(\"deletelightbox:new\", @scope.user)\n\n    getLan: ->\n        return @scope.user.lang ||\n               @translate.preferredLanguage()\n\n    getTheme: ->\n        return @scope.user.theme ||\n               @config.get(\"defaultTheme\") ||\n               \"taiga\"\n\n    exportProfile: ->\n        onSuccess = (result) ->\n            dumpUrl = result.data.url\n            @window.open(dumpUrl, \"_blank\")\n\n        onError = (response) =>\n            if response.data?._error_message\n                @confirm.notify(\"error\", response.data._error_message)\n\n        @auth.exportProfile().then(onSuccess, onError)\n\n\nmodule.controller(\"UserSettingsController\", UserSettingsController)\n\n\n#############################################################################\n## User Profile Directive\n#############################################################################\n\nUserProfileDirective = ($confirm, $auth, $repo, $translate) ->\n    link = ($scope, $el, $attrs) ->\n        submit = debounce 2000, (event) =>\n            event.preventDefault()\n\n            form = $el.find(\"form\").checksley()\n            return if not form.validate()\n\n            changeEmail = $scope.user.isAttributeModified(\"email\")\n            $scope.user.lang = $scope.lang\n            $scope.user.theme = $scope.theme\n\n            onSuccess = (data) =>\n                $auth.setUser(data)\n\n                if changeEmail\n                    text = $translate.instant(\"USER_PROFILE.CHANGE_EMAIL_SUCCESS\")\n                    $confirm.success(text)\n                else\n                    $confirm.notify('success')\n\n            onError = (data) =>\n                form.setErrors(data)\n                $confirm.notify('error', data._error_message)\n\n            $repo.save($scope.user).then(onSuccess, onError)\n\n        $el.on \"submit\", \"form\", submit\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link:link}\n\nmodule.directive(\"tgUserProfile\", [\"$tgConfirm\", \"$tgAuth\", \"$tgRepo\", \"$translate\", UserProfileDirective])\n\n\n#############################################################################\n## User Avatar Directive\n#############################################################################\n\nUserAvatarDirective = ($auth, $model, $rs, $confirm) ->\n    link = ($scope, $el, $attrs) ->\n        showSizeInfo = ->\n            $el.find(\".size-info\").removeClass(\"hidden\")\n\n        onSuccess = (response) ->\n            user = $model.make_model(\"users\", response.data)\n            $auth.setUser(user)\n            $scope.user = user\n\n            $el.find('.loading-overlay').removeClass('active')\n            $confirm.notify('success')\n\n        onError = (response) ->\n            showSizeInfo() if response.status == 413\n            $el.find('.loading-overlay').removeClass('active')\n            $confirm.notify('error', response.data._error_message)\n\n        # Change photo\n        $el.on \"click\", \".js-change-avatar\", ->\n            $el.find(\"#avatar-field\").click()\n\n        $el.on \"change\", \"#avatar-field\", (event) ->\n            if $scope.avatarAttachment\n                $el.find('.loading-overlay').addClass(\"active\")\n                $rs.userSettings.changeAvatar($scope.avatarAttachment).then(onSuccess, onError)\n\n        # Use gravatar photo\n        $el.on \"click\", \"a.js-use-gravatar\", (event) ->\n            $el.find('.loading-overlay').addClass(\"active\")\n            $rs.userSettings.removeAvatar().then(onSuccess, onError)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link:link}\n\nmodule.directive(\"tgUserAvatar\", [\"$tgAuth\", \"$tgModel\", \"$tgResources\", \"$tgConfirm\", UserAvatarDirective])\n\n\n#############################################################################\n## User Avatar Model Directive\n#############################################################################\n\nTaigaAvatarModelDirective = ($parse) ->\n    link = ($scope, $el, $attrs) ->\n        model = $parse($attrs.tgAvatarModel)\n        modelSetter = model.assign\n\n        $el.bind 'change', ->\n            $scope.$apply ->\n                modelSetter($scope, $el[0].files[0])\n\n    return {link:link}\n\nmodule.directive('tgAvatarModel', ['$parse', TaigaAvatarModelDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/user-settings/nav.coffee\n###\n\nUserSettingsNavigationDirective = ->\n    link = ($scope, $el, $attrs) ->\n        section = $attrs.tgUserSettingsNavigation\n        $el.find(\".active\").removeClass(\"active\")\n        $el.find(\"#usersettingsmenu-#{section} a\").addClass(\"active\")\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link:link}\n\nmodule = angular.module(\"taigaUserSettings\")\nmodule.directive(\"tgUserSettingsNavigation\", UserSettingsNavigationDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/user-settings/notifications.coffee\n###\n\ntaiga = @.taiga\nmixOf = @.taiga.mixOf\nbindOnce = @.taiga.bindOnce\n\nmodule = angular.module(\"taigaUserSettings\")\n\n\n#############################################################################\n## User settings Controller\n#############################################################################\n\nclass UserNotificationsController extends mixOf(taiga.Controller, taiga.PageMixin)\n    @.$inject = [\n        \"$scope\",\n        \"$rootScope\",\n        \"$tgRepo\",\n        \"$tgConfirm\",\n        \"$tgResources\",\n        \"$routeParams\",\n        \"$q\",\n        \"$tgLocation\",\n        \"$tgNavUrls\",\n        \"$tgAuth\",\n        \"tgErrorHandlingService\"\n    ]\n\n    constructor: (@scope, @rootscope, @repo, @confirm, @rs, @params, @q, @location, @navUrls, @auth, @errorHandlingService) ->\n        @scope.sectionName = \"USER_SETTINGS.NOTIFICATIONS.SECTION_NAME\"\n        @scope.user = @auth.getUser()\n        promise = @.loadInitialData()\n        promise.then null, @.onInitialDataError.bind(@)\n\n    loadInitialData: ->\n        return @rs.notifyPolicies.list().then (notifyPolicies) =>\n            @scope.notifyPolicies = notifyPolicies\n            return notifyPolicies\n\nmodule.controller(\"UserNotificationsController\", UserNotificationsController)\n\n\n#############################################################################\n## User Notifications Directive\n#############################################################################\n\nUserNotificationsDirective = () ->\n    link = ($scope, $el, $attrs) ->\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link:link}\n\nmodule.directive(\"tgUserNotifications\", UserNotificationsDirective)\n\n\n#############################################################################\n## User Notifications List Directive\n#############################################################################\n\nUserNotificationsListDirective = ($repo, $confirm, $compile) ->\n    template = _.template(\"\"\"\n        <% _.each(notifyPolicies, function (notifyPolicy, index) { %>\n        <div class=\"policy-table-row\" data-index=\"<%- index %>\">\n          <div class=\"policy-table-project\"><span><%- notifyPolicy.project_name %></span></div>\n          <div class=\"policy-table-all\">\n            <div class=\"button-check\">\n              <input type=\"radio\"\n                     name=\"policy-<%- notifyPolicy.id %>\" id=\"policy-all-<%- notifyPolicy.id %>\"\n                     value=\"2\" <% if (notifyPolicy.notify_level == 2) { %>checked=\"checked\"<% } %>/>\n              <label for=\"policy-all-<%- notifyPolicy.id %>\"\n                     translate=\"USER_SETTINGS.NOTIFICATIONS.OPTION_ALL\"></label>\n            </div>\n          </div>\n          <div class=\"policy-table-involved\">\n            <div class=\"button-check\">\n              <input type=\"radio\"\n                     name=\"policy-<%- notifyPolicy.id %>\" id=\"policy-involved-<%- notifyPolicy.id %>\"\n                     value=\"1\" <% if (notifyPolicy.notify_level == 1) { %>checked=\"checked\"<% } %> />\n              <label for=\"policy-involved-<%- notifyPolicy.id %>\"\n                     translate=\"USER_SETTINGS.NOTIFICATIONS.OPTION_INVOLVED\"></label>\n            </div>\n          </div>\n          <div class=\"policy-table-none\">\n            <div class=\"button-check\">\n              <input type=\"radio\"\n                     name=\"policy-<%- notifyPolicy.id %>\" id=\"policy-none-<%- notifyPolicy.id %>\"\n                     value=\"3\" <% if (notifyPolicy.notify_level == 3) { %>checked=\"checked\"<% } %> />\n              <label for=\"policy-none-<%- notifyPolicy.id %>\"\n                     translate=\"USER_SETTINGS.NOTIFICATIONS.OPTION_NONE\"></label>\n            </div>\n          </div>\n        </div>\n        <% }) %>\n    \"\"\")\n\n    link = ($scope, $el, $attrs) ->\n        render = ->\n            $el.off()\n\n            ctx = {notifyPolicies: $scope.notifyPolicies}\n            html = template(ctx)\n\n            $el.html($compile(html)($scope))\n\n            $el.on \"change\", \"input[type=radio]\", (event) ->\n                target = angular.element(event.currentTarget)\n\n                policyIndex = target.parents(\".policy-table-row\").data('index')\n                policy = $scope.notifyPolicies[policyIndex]\n                prev_level = policy.notify_level\n                policy.notify_level = parseInt(target.val(), 10)\n\n                onSuccess = ->\n                    $confirm.notify(\"success\")\n\n                onError = ->\n                    $confirm.notify(\"error\")\n                    target.parents(\".policy-table-row\")\n                          .find(\"input[value=#{prev_level}]\")\n                          .prop(\"checked\", true)\n\n                $repo.save(policy).then(onSuccess, onError)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n        bindOnce($scope, $attrs.ngModel, render)\n\n    return {link:link}\n\nmodule.directive(\"tgUserNotificationsList\", [\"$tgRepo\", \"$tgConfirm\", \"$compile\",\n                                             UserNotificationsListDirective])\n","###\n# Copyright (C) 2014-2017 Andrey Antukh <niwi@niwi.nz>\n# Copyright (C) 2014-2017 Jesús Espino Garcia <jespinog@gmail.com>\n# Copyright (C) 2014-2017 David Barragán Merino <bameda@dbarragan.com>\n# Copyright (C) 2014-2017 Alejandro Alonso <alejandro.alonso@kaleidos.net>\n# Copyright (C) 2014-2017 Juan Francisco Alcántara <juanfran.alcantara@kaleidos.net>\n# Copyright (C) 2014-2017 Xavi Julian <xavier.julian@kaleidos.net>\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/user-settings/user-project-settings.coffee\n###\n\ntaiga = @.taiga\nmixOf = @.taiga.mixOf\nbindOnce = @.taiga.bindOnce\n\nmodule = angular.module(\"taigaUserSettings\")\n\n\n#############################################################################\n## Custom Homepage Controller\n#############################################################################\n\nclass UserProjectSettingsController extends mixOf(taiga.Controller, taiga.PageMixin)\n    @.$inject = [\n        \"$rootScope\"\n        \"$scope\"\n        \"$tgSections\"\n        \"$tgResources\"\n        \"$tgRepo\"\n        \"$tgConfirm\"\n         \"tgCurrentUserService\"\n    ]\n\n    constructor: (@rootScope, @scope, @tgSections, @rs, @repo, @confirm, @currentUserService) ->\n        @scope.sections = @tgSections.list()\n\n        promise = @.loadInitialData()\n        promise.then null, @.onInitialDataError.bind(@)\n\n    loadInitialData: ->\n        return @rs.userProjectSettings.list().then (userProjectSettings) =>\n            @scope.userProjectSettings = userProjectSettings\n\n    updateCustomHomePage: (projectSettings) ->\n        onSuccess = =>\n            @currentUserService.loadProjects()\n            @rootScope.$broadcast(\"dropdown-project-list:updated\")\n            @confirm.notify(\"success\")\n\n        onError = =>\n            @confirm.notify(\"error\")\n\n        @repo.save(projectSettings).then(onSuccess, onError)\n\n    filteredSections: (projectSettings) ->\n        return _.filter @scope.sections, (section) ->\n            section.id in projectSettings.allowed_sections\n\n\nmodule.controller(\"UserProjectSettingsController\", UserProjectSettingsController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: modules/user-settings/live-notifications.coffee\n###\n\ntaiga = @.taiga\nmixOf = @.taiga.mixOf\nbindOnce = @.taiga.bindOnce\n\nmodule = angular.module(\"taigaUserSettings\")\n\n\n#############################################################################\n## User Web Notifications Controller\n#############################################################################\n\nclass UserWebNotificationsController extends mixOf(taiga.Controller, taiga.PageMixin)\n    @.$inject = [\n        \"$scope\",\n        \"$tgResources\",\n        \"$tgAuth\"\n    ]\n\n    constructor: (@scope, @rs, @auth) ->\n        @scope.sectionName = \"USER_SETTINGS.EVENTS.SECTION_NAME\"\n        @scope.user = @auth.getUser()\n        promise = @.loadInitialData()\n        promise.then null, @.onInitialDataError.bind(@)\n\n    loadInitialData: ->\n        return @rs.notifyPolicies.list().then (notifyPolicies) =>\n            @scope.notifyPolicies = notifyPolicies\n            return notifyPolicies\n\nmodule.controller(\"UserWebNotificationsController\", UserWebNotificationsController)\n\n\n#############################################################################\n## User Web Notifications Directive\n#############################################################################\n\nUserWebNotificationsDirective = () ->\n    link = ($scope, $el, $attrs) ->\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {link:link}\n\nmodule.directive(\"tgUserWebNotifications\", UserWebNotificationsDirective)\n\n\n#############################################################################\n## User Web Notifications List Directive\n#############################################################################\n\nUserWebNotificationsListDirective = ($repo, $confirm, $compile) ->\n    template = _.template(\"\"\"\n        <% _.each(notifyPolicies, function (notifyPolicy, index) { %>\n        <div class=\"policy-table-row\">\n          <div class=\"policy-table-project\"><span><%- notifyPolicy.project_name %></span></div>\n          <div class=\"policy-table-all\">\n            <div class=\"check\" data-index=\"<%- index %>\">\n              <input type=\"checkbox\"\n                <% if(notifyPolicy.web_notify_level) { %> checked=\"checked\" <% } %>\n                name=\"policy-<%- notifyPolicy.id %>\" id=\"policy-<%- notifyPolicy.id %>\"/>\n              <div></div>\n              <span class=\"check-text check-yes\" translate=\"COMMON.YES\"></span>\n              <span class=\"check-text check-no\"\" translate=\"COMMON.NO\"></span>\n            </div>\n          </div>\n        </div>\n        <% }) %>\n    \"\"\")\n\n    link = ($scope, $el, $attrs) ->\n        render = ->\n            $el.off()\n\n            ctx = {notifyPolicies: $scope.notifyPolicies}\n            html = template(ctx)\n\n            $el.html($compile(html)($scope))\n\n            $el.on \"click\", \".check\", (event) ->\n                target = angular.element(event.currentTarget)\n                policyIndex = target.data('index')\n                policy = $scope.notifyPolicies[policyIndex]\n                policy.web_notify_level = !policy.web_notify_level\n\n                onSuccess = ->\n                    $confirm.notify(\"success\")\n                    target.find(\"input\").prop(\"checked\", policy.web_notify_level)\n\n                onError = ->\n                    $confirm.notify(\"error\")\n\n                $repo.save(policy).then(onSuccess, onError)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n        bindOnce($scope, $attrs.ngModel, render)\n\n    return {link:link}\n\nmodule.directive(\"tgUserWebNotificationsList\",\n[\"$tgRepo\", \"$tgConfirm\", \"$compile\", UserWebNotificationsListDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/components.module.coffee\n###\n\nangular.module(\"taigaComponents\", [])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: discover/discover.module.coffee\n###\n\nmodule = angular.module(\"taigaDiscover\", [])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: external-apps/external-apps.module.coffee\n###\n\nmodule = angular.module(\"taigaExternalApps\", [])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: history/history.module.coffee\n###\n\nangular.module(\"taigaHistory\", [])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: home/home.module.coffee\n###\n\nmodule = angular.module(\"taigaHome\", [])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: navigation-bar/navigation-bar.module.coffee\n###\n\nangular.module(\"taigaNavigationBar\", [])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/projects.module.coffee\n###\n\nangular.module(\"taigaNotifications\", [])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: profile/profile.module.coffee\n###\n\nmodule = angular.module(\"taigaProfile\", [])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/projects.module.coffee\n###\n\nangular.module(\"taigaProjects\", [])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: resources/resources.module.coffee\n###\n\nangular.module(\"taigaResources2\", [])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: user-timeline/user-timeline.module.coffee\n###\n\nangular.module(\"taigaUserTimeline\", [])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: utils/utils.module.coffee\n###\n\nmodule = angular.module(\"taigaUtils\", [])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: wiki/history/wiki-history.module.coffee\n###\n\nangular.module(\"taigaWikiHistory\", [])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/assigned/assigned-to-inline.directive.coffee\n###\n\nAssignedToInlineDirective = ($rootscope, $confirm, $repo, $loading, $modelTransform, $template\n$translate, $compile, $currentUserService, avatarService, $userListService) ->\n    link = ($scope, $el, $attr, $model) ->\n        isEditable = ->\n            return $scope.project?.my_permissions?.indexOf($attr.requiredPerm) != -1\n\n        renderUserList = (text) ->\n            selectedId = $model.$modelValue.assigned_to\n            users = $userListService.searchUsers(text)\n            users = _.reject(users, {\"id\": selectedId}) if selectedId\n\n            visibleUsers = _.slice(users, 0, 5)\n            visibleUsers = _.map visibleUsers, (user) -> user.avatar = avatarService.getAvatar(user)\n\n            $scope.users = _.slice(users, 0, 5)\n            $scope.showMore = users.length > 5\n\n        renderUser = (assignedObject) ->\n            if assignedObject?.assigned_to\n                $scope.selected = assignedObject.assigned_to\n                assigned_to_extra_info = $scope.usersById[$scope.selected]\n                $scope.fullName = assigned_to_extra_info?.full_name_display\n                $scope.isUnassigned = false\n                $scope.avatar = avatarService.getAvatar(assigned_to_extra_info)\n                $scope.bg = $scope.avatar.bg\n                $scope.isIocaine = assignedObject?.is_iocaine\n            else\n                $scope.fullName = $translate.instant(\"COMMON.ASSIGNED_TO.ASSIGN\")\n                $scope.isUnassigned = true\n                $scope.avatar = avatarService.getAvatar(null)\n                $scope.bg = null\n                $scope.isIocaine = false\n\n            $scope.fullNameVisible = !($scope.isUnassigned && !$currentUserService.isAuthenticated())\n            $scope.isEditable = isEditable()\n\n        $el.on \"click\", \".users-search\", (event) ->\n            event.stopPropagation()\n\n        $el.on \"click\", \".users-dropdown\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            $scope.usersSearch = \"\"\n            renderUserList()\n            $scope.$apply()\n            $el.find(\".pop-users\").popover().open()\n\n        $scope.selfAssign = () ->\n            $model.$modelValue.assigned_to = $currentUserService.getUser().get('id')\n            renderUser($model.$modelValue)\n\n        $scope.unassign = () ->\n            $model.$modelValue.assigned_to  = null\n            renderUser()\n\n        $scope.$watch \"usersSearch\", (searchingText) ->\n            if searchingText?\n                renderUserList(searchingText)\n                $el.find('input').focus()\n\n        $el.on \"click\", \".user-list-single\", (event) ->\n            event.preventDefault()\n            target = angular.element(event.currentTarget)\n            $model.$modelValue.assigned_to = target.data(\"user-id\")\n            renderUser($model.$modelValue)\n            $scope.$apply()\n\n        $scope.$watch $attr.ngModel, (instance) ->\n            renderUser(instance)\n\n        $scope.$on \"isiocaine:changed\", (ctx, instance) ->\n            renderUser(instance)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link:link,\n        templateUrl: \"components/assigned-inline/assigned-to-inline.html\"\n        require:\"ngModel\"\n    }\n\nangular.module('taigaComponents').directive(\"tgAssignedToInline\", [\"$rootScope\", \"$tgConfirm\",\n\"$tgRepo\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$translate\", \"$compile\",\n\"tgCurrentUserService\", \"tgAvatarService\", \"tgUserListService\", AssignedToInlineDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/assigned/assigned-users-inline.directive.coffee\n###\n\nAssignedUsersInlineDirective = ($rootscope, $confirm, $repo, $loading, $modelTransform, $template\n$translate, $compile, $currentUserService, avatarService, $userListService) ->\n    link = ($scope, $el, $attrs, $model) ->\n        currentAssignedIds = []\n        currentAssignedTo = null\n\n        isAssigned = ->\n            return currentAssignedIds.length > 0\n\n        renderUsersList = (text) ->\n            users = $userListService.searchUsers(text)\n\n            # Add selected users\n            selected = []\n            _.map users, (user) ->\n                if user.id in currentAssignedIds\n                    user.avatar = avatarService.getAvatar(user)\n                    selected.push(user)\n\n            # Filter users in searchs\n            visible = []\n            _.map users, (user) ->\n                if user.id not in currentAssignedIds\n                    user.avatar = avatarService.getAvatar(user)\n                    visible.push(user)\n\n            $scope.selected = _.slice(selected, 0, 5)\n            if $scope.selected.length < 5\n                $scope.users = _.slice(visible, 0, 5 - $scope.selected.length)\n            else\n                $scope.users = []\n            $scope.showMore = users.length > 5\n\n        renderUsers = () ->\n            assignedUsers = _.map(currentAssignedIds, (assignedUserId) -> $scope.usersById[assignedUserId])\n            assignedUsers = _.filter assignedUsers, (it) -> return !!it\n\n            $scope.hiddenUsers = if currentAssignedIds.length > 3 then currentAssignedIds.length - 3 else 0\n            $scope.assignedUsers = _.slice(assignedUsers, 0, 3)\n\n            $scope.isAssigned = isAssigned()\n\n        applyToModel = () ->\n            _.map currentAssignedIds, (userId) ->\n                if !$scope.usersById[userId]\n                    currentAssignedIds.splice(currentAssignedIds.indexOf(userId), 1)\n            if currentAssignedIds.length == 0\n                currentAssignedTo = null\n            else if currentAssignedIds.indexOf(currentAssignedTo) == -1 || !currentAssignedTo\n                currentAssignedTo = currentAssignedIds[0]\n\n            if (!$model.$modelValue.assigned_users)\n                $model.$modelValue.assigned_users = currentAssignedIds\n            else\n                $model.$modelValue.setAttr('assigned_users', currentAssignedIds)\n            $model.$modelValue.assigned_to = currentAssignedTo\n\n        $el.on \"click\", \".users-dropdown\", (event) ->\n            event.preventDefault()\n            event.stopPropagation()\n            $scope.usersSearch = null\n            renderUsersList()\n            $scope.$apply()\n            $el.find(\".pop-users\").popover().open()\n\n        $scope.assign = (user) ->\n            currentAssignedIds.push(user.id)\n            renderUsers()\n            applyToModel()\n\n        $scope.selfAssign = () ->\n            currentAssignedIds.push($currentUserService.getUser().get('id'))\n            renderUsers()\n            applyToModel()\n\n        $scope.unassign = (user) ->\n            index = currentAssignedIds.indexOf(user.id)\n            currentAssignedIds.splice(index, 1)\n            renderUsers()\n            applyToModel()\n\n        $el.on \"click\", \".users-search\", (event) ->\n            event.stopPropagation()\n\n        $scope.$watch \"usersSearch\", (searchingText) ->\n            if searchingText?\n                renderUsersList(searchingText)\n                $el.find('input').focus()\n\n        $scope.$watch $attrs.ngModel, (item) ->\n            return if not item?\n            currentAssignedIds = []\n            assigned_to = null\n\n            if item.assigned_users?\n                currentAssignedIds = item.assigned_users\n            assigned_to = item.assigned_to\n            renderUsers()\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        scope: true,\n        link:link,\n        templateUrl: \"components/assigned-inline/assigned-users-inline.html\",\n        require:\"ngModel\"\n    }\n\nangular.module('taigaComponents').directive(\"tgAssignedUsersInline\", [\"$rootScope\", \"$tgConfirm\",\n\"$tgRepo\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$translate\", \"$compile\",\n\"tgCurrentUserService\", \"tgAvatarService\", \"tgUserListService\", AssignedUsersInlineDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/attachment-link/attachment-link.directive.coffee\n###\n\nAttachmentLinkDirective = ($parse, attachmentsPreviewService, lightboxService) ->\n    link = (scope, el, attrs) ->\n        attachment = $parse(attrs.tgAttachmentLink)(scope)\n\n        el.on \"click\", (event) ->\n            if taiga.isImage(attachment.getIn(['file', 'name']))\n                event.preventDefault()\n\n                scope.$apply ->\n                    lightboxService.open($('tg-attachments-preview'))\n                    attachmentsPreviewService.fileId = attachment.getIn(['file', 'id'])\n            else if taiga.isPdf(attachment.getIn(['file', 'name']))\n                event.preventDefault()\n                window.open(attachment.getIn(['file', 'url']))\n\n        scope.$on \"$destroy\", -> el.off()\n    return {\n        link: link\n    }\n\nAttachmentLinkDirective.$inject = [\n    \"$parse\",\n    \"tgAttachmentsPreviewService\",\n    \"lightboxService\"\n]\n\nangular.module(\"taigaComponents\").directive(\"tgAttachmentLink\", AttachmentLinkDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/attachment/attachment-gallery.directive.coffee\n###\n\nAttachmentGalleryDirective = () ->\n    link = (scope, el, attrs, ctrl) ->\n\n    return {\n        scope: {},\n        bindToController: {\n            attachment: \"=\",\n            onDelete: \"&\",\n            onUpdate: \"&\",\n            type: \"=\"\n        },\n        controller: \"Attachment\",\n        controllerAs: \"vm\",\n        templateUrl: \"components/attachment/attachment-gallery.html\",\n        link: link\n    }\n\nAttachmentGalleryDirective.$inject = []\n\nangular.module(\"taigaComponents\").directive(\"tgAttachmentGallery\", AttachmentGalleryDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/attachment/attachment.controller.coffee\n###\n\nclass AttachmentController\n    @.$inject = [\n        'tgAttachmentsService',\n        '$translate'\n    ]\n\n    constructor: (@attachmentsService, @translate) ->\n        @.form = {}\n        @.form.description = @.attachment.getIn(['file', 'description'])\n        @.form.is_deprecated = @.attachment.get(['file', 'is_deprecated'])\n\n        @.title = @translate.instant(\"ATTACHMENT.TITLE\", {\n            fileName: @.attachment.get('name'),\n            date: moment(@.attachment.get('created_date')).format(@translate.instant(\"ATTACHMENT.DATE\"))\n        })\n\n    editMode: (mode) ->\n        attachment = @.attachment.set('editable', mode)\n        @.onUpdate({attachment: attachment})\n\n    delete: () ->\n        @.onDelete({attachment: @.attachment})\n\n    save: () ->\n        attachment = @.attachment.set('loading', true)\n\n        @.onUpdate({attachment: attachment})\n\n        attachment = @.attachment.merge({\n            editable: false,\n            loading: false\n        })\n\n        attachment = attachment.mergeIn(['file'], {\n            description: @.form.description,\n            is_deprecated: !!@.form.is_deprecated\n        })\n\n        @.onUpdate({attachment: attachment})\n\nangular.module('taigaComponents').controller('Attachment', AttachmentController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/attachment/attachment.directive.coffee\n###\n\nAttachmentDirective = () ->\n    link = (scope, el, attrs, ctrl) ->\n\n    return {\n        scope: {},\n        bindToController: {\n            attachment: \"=\",\n            onDelete: \"&\",\n            onUpdate: \"&\",\n            type: \"=\"\n        },\n        controller: \"Attachment\",\n        controllerAs: \"vm\",\n        templateUrl: \"components/attachment/attachment.html\",\n        link: link\n    }\n\nAttachmentDirective.$inject = []\n\nangular.module(\"taigaComponents\").directive(\"tgAttachment\", AttachmentDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/attachments-drop/attachments-drop.directive.coffee\n###\n\nAttachmentsDropDirective = ($parse) ->\n    link = (scope, el, attrs) ->\n        eventAttr = $parse(attrs.tgAttachmentsDrop)\n\n        el.on 'dragover', (e) ->\n            e.preventDefault()\n            return false\n\n        el.on 'drop', (e) ->\n            e.stopPropagation()\n            e.preventDefault()\n\n            dataTransfer = e.dataTransfer || (e.originalEvent && e.originalEvent.dataTransfer)\n\n            scope.$apply () -> eventAttr(scope, {files: dataTransfer.files})\n\n        scope.$on \"$destroy\", -> el.off()\n\n    return {\n        link: link\n    }\n\nAttachmentsDropDirective.$inject = [\n    \"$parse\"\n]\n\nangular.module(\"taigaComponents\").directive(\"tgAttachmentsDrop\", AttachmentsDropDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/attachments-full/attachments-full.controller.coffee\n###\n\nsizeFormat = @.taiga.sizeFormat\n\nclass AttachmentsFullController\n    @.$inject = [\n        \"$translate\",\n        \"$tgConfirm\",\n        \"$tgConfig\",\n        \"$tgStorage\",\n        \"tgAttachmentsFullService\",\n        \"tgProjectService\",\n        \"tgAttachmentsPreviewService\"\n    ]\n\n    constructor: (@translate, @confirm, @config, @storage, @attachmentsFullService, @projectService, @attachmentsPreviewService) ->\n        @.mode = @storage.get('attachment-mode', 'list')\n\n        @.maxFileSize = @config.get(\"maxUploadFileSize\", null)\n        @.maxFileSize = sizeFormat(@.maxFileSize) if @.maxFileSize\n        @.maxFileSizeMsg = if @.maxFileSize then @translate.instant(\"ATTACHMENT.MAX_UPLOAD_SIZE\", {maxFileSize: @.maxFileSize}) else \"\"\n\n        taiga.defineImmutableProperty @, 'attachments', () => return @attachmentsFullService.attachments\n        taiga.defineImmutableProperty @, 'deprecatedsCount', () => return @attachmentsFullService.deprecatedsCount\n        taiga.defineImmutableProperty @, 'attachmentsVisible', () => return @attachmentsFullService.attachmentsVisible\n        taiga.defineImmutableProperty @, 'deprecatedsVisible', () => return @attachmentsFullService.deprecatedsVisible\n\n    uploadingAttachments: () ->\n        return @attachmentsFullService.uploadingAttachments\n\n    addAttachment: (file) ->\n        editable = (@.mode == 'list')\n\n        @attachmentsFullService.addAttachment(@.projectId, @.objId, @.type, file, editable)\n\n    setMode: (mode) ->\n        @.mode = mode\n\n        @storage.set('attachment-mode', mode)\n\n    toggleDeprecatedsVisible: () ->\n        @attachmentsFullService.toggleDeprecatedsVisible()\n\n    addAttachments: (files) ->\n        _.forEach files, (file) => @.addAttachment(file)\n\n    loadAttachments: ->\n        @attachmentsFullService.loadAttachments(@.type, @.objId, @.projectId)\n\n    deleteAttachment: (toDeleteAttachment) ->\n        @attachmentsPreviewService.fileId = null\n\n        title = @translate.instant(\"ATTACHMENT.TITLE_LIGHTBOX_DELETE_ATTACHMENT\")\n        message = @translate.instant(\"ATTACHMENT.MSG_LIGHTBOX_DELETE_ATTACHMENT\", {\n            fileName: toDeleteAttachment.getIn(['file', 'name'])\n        })\n\n        return @confirm.askOnDelete(title, message)\n            .then (askResponse) =>\n                onError = () =>\n                    message = @translate.instant(\"ATTACHMENT.ERROR_DELETE_ATTACHMENT\", {errorMessage: message})\n                    @confirm.notify(\"error\", null, message)\n                    askResponse.finish(false)\n\n                onSuccess = () => askResponse.finish()\n\n                @attachmentsFullService.deleteAttachment(toDeleteAttachment, @.type).then(onSuccess, onError)\n\n    reorderAttachment: (attachment, newIndex) ->\n        @attachmentsFullService.reorderAttachment(@.type, attachment, newIndex)\n\n    updateAttachment: (toUpdateAttachment) ->\n        @attachmentsFullService.updateAttachment(toUpdateAttachment, @.type)\n\n    _isEditable: ->\n        if @projectService.project\n            return @projectService.hasPermission(@.editPermission)\n        return false\n\n    showAttachments: ->\n        return @._isEditable() || @attachmentsFullService.attachments.size\n\nangular.module(\"taigaComponents\").controller(\"AttachmentsFull\", AttachmentsFullController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/attachments-full/attachments-full.directive.coffee\n###\n\nbindOnce = @.taiga.bindOnce\n\nAttachmentsFullDirective = () ->\n    link = (scope, el, attrs, ctrl) ->\n        bindOnce scope, 'vm.objId', (value) ->\n            ctrl.loadAttachments()\n\n    return {\n        scope: {},\n        bindToController: {\n            type: \"@\",\n            objId: \"=\",\n            projectId: \"=\",\n            editPermission: \"@\"\n        },\n        controller: \"AttachmentsFull\",\n        controllerAs: \"vm\",\n        templateUrl: \"components/attachments-full/attachments-full.html\",\n        link: link\n    }\n\nAttachmentsFullDirective.$inject = []\n\nangular.module(\"taigaComponents\").directive(\"tgAttachmentsFull\", AttachmentsFullDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/attachments-full/attachments-full.service.coffee\n###\n\nclass AttachmentsFullService extends taiga.Service\n    @.$inject = [\n        \"tgAttachmentsService\",\n        \"$rootScope\"\n    ]\n\n    constructor: (@attachmentsService, @rootScope) ->\n        @._attachments = Immutable.List()\n        @._deprecatedsCount = 0\n        @._attachmentsVisible = Immutable.List()\n        @._deprecatedsVisible = false\n        @.uploadingAttachments = []\n\n        taiga.defineImmutableProperty @, 'attachments', () => return @._attachments\n        taiga.defineImmutableProperty @, 'deprecatedsCount', () => return @._deprecatedsCount\n        taiga.defineImmutableProperty @, 'attachmentsVisible', () => return @._attachmentsVisible\n        taiga.defineImmutableProperty @, 'deprecatedsVisible', () => return @._deprecatedsVisible\n\n    toggleDeprecatedsVisible: () ->\n        @._deprecatedsVisible = !@._deprecatedsVisible\n        @.regenerate()\n\n    regenerate: () ->\n        @._deprecatedsCount = @._attachments.count (it) -> it.getIn(['file', 'is_deprecated'])\n\n        if @._deprecatedsVisible\n            @._attachmentsVisible = @._attachments\n        else\n            @._attachmentsVisible = @._attachments.filter (it) -> !it.getIn(['file', 'is_deprecated'])\n\n    addAttachment: (projectId, objId, type, file, editable = true, comment = false) ->\n        return new Promise (resolve, reject) =>\n            if @attachmentsService.validate(file)\n                @.uploadingAttachments.push(file)\n\n                promise = @attachmentsService.upload(file, objId, projectId, type, comment)\n                promise.then (file) =>\n                    @.uploadingAttachments = @.uploadingAttachments.filter (uploading) ->\n                        return uploading.name != file.get('name')\n\n                    attachment = Immutable.Map()\n\n                    attachment = attachment.merge({\n                        file: file,\n                        editable: editable,\n                        loading: false,\n                        from_comment: comment\n                    })\n\n                    @._attachments = @._attachments.push(attachment)\n\n                    @.regenerate()\n\n                    @rootScope.$broadcast(\"attachment:create\")\n\n                    resolve(attachment)\n            else\n                reject(new Error(file))\n\n    loadAttachments: (type, objId, projectId)->\n        @attachmentsService.list(type, objId, projectId).then (files) =>\n            @._attachments = files.map (file) ->\n                attachment = Immutable.Map()\n\n                return attachment.merge({\n                    loading: false,\n                    editable: false,\n                    file: file\n                })\n\n            @.regenerate()\n\n    deleteAttachment: (toDeleteAttachment, type) ->\n        onSuccess = () =>\n            @._attachments = @._attachments.filter (attachment) -> attachment != toDeleteAttachment\n\n            @.regenerate()\n\n        return @attachmentsService.delete(type, toDeleteAttachment.getIn(['file', 'id'])).then(onSuccess)\n\n    reorderAttachment: (type, attachment, newIndex) ->\n        oldIndex = @.attachments.findIndex (it) -> it == attachment\n        return if oldIndex == newIndex\n\n        attachments = @.attachments.remove(oldIndex)\n        attachments = attachments.splice(newIndex, 0, attachment)\n        attachments = attachments.map (x, i) -> x.setIn(['file', 'order'], i + 1)\n\n        promises = []\n        attachments.forEach (attachment) =>\n            patch = {order: attachment.getIn(['file', 'order'])}\n\n            promises.push @attachmentsService.patch(attachment.getIn(['file', 'id']), type, patch)\n            \n        return Promise.all(promises).then () =>\n            @._attachments = attachments\n\n            @.regenerate()\n\n    updateAttachment: (toUpdateAttachment, type) ->\n        index = @._attachments.findIndex (attachment) ->\n            return attachment.getIn(['file', 'id']) == toUpdateAttachment.getIn(['file', 'id'])\n\n        oldAttachment = @._attachments.get(index)\n\n        patch = taiga.patch(oldAttachment.get('file'), toUpdateAttachment.get('file'))\n\n        if toUpdateAttachment.get('loading')\n            @._attachments = @._attachments.set(index, toUpdateAttachment)\n\n            @.regenerate()\n        else\n            return @attachmentsService.patch(toUpdateAttachment.getIn(['file', 'id']), type, patch).then () =>\n                @._attachments = @._attachments.set(index, toUpdateAttachment)\n\n                @.regenerate()\n\nangular.module(\"taigaComponents\").service(\"tgAttachmentsFullService\", AttachmentsFullService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/attachments-preview/attachments-preview.controller.coffee\n###\n\nclass AttachmentsPreviewController\n    @.$inject = [\n        \"tgAttachmentsPreviewService\"\n    ]\n\n    constructor: (@attachmentsPreviewService) ->\n        taiga.defineImmutableProperty @, \"current\", () =>\n            if !@attachmentsPreviewService.fileId\n                return null\n\n            return @.getCurrent()\n\n    hasPagination: () ->\n        images = @.attachments.filter (attachment) =>\n            return taiga.isImage(attachment.getIn(['file', 'name']))\n\n        return images.size > 1\n\n    getCurrent: () ->\n        attachment = @.attachments.find (attachment) =>\n            @attachmentsPreviewService.fileId == attachment.getIn(['file', 'id'])\n\n        if !attachment\n            return null\n        file = attachment.get('file')\n\n        return file\n\n    getIndex: () ->\n        return @.attachments.findIndex (attachment) =>\n            @attachmentsPreviewService.fileId == attachment.getIn(['file', 'id'])\n\n    next: () ->\n        attachmentIndex = @.getIndex()\n\n        image = @.attachments.slice(attachmentIndex + 1).find (attachment) ->\n                return taiga.isImage(attachment.getIn(['file', 'name']))\n\n        if !image\n            image = @.attachments.find (attachment) ->\n                return taiga.isImage(attachment.getIn(['file', 'name']))\n\n\n        @attachmentsPreviewService.fileId = image.getIn(['file', 'id'])\n\n    previous: () ->\n        attachmentIndex = @.getIndex()\n\n        image = @.attachments.slice(0, attachmentIndex).findLast (attachment) ->\n                return taiga.isImage(attachment.getIn(['file', 'name']))\n\n        if !image\n            image = @.attachments.findLast (attachment) ->\n                return taiga.isImage(attachment.getIn(['file', 'name']))\n\n        @attachmentsPreviewService.fileId = image.getIn(['file', 'id'])\n\nangular.module('taigaComponents').controller('AttachmentsPreview', AttachmentsPreviewController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/attachments-preview/attachments-preview.directive.coffee\n###\n\nAttachmentPreviewLightboxDirective = (lightboxService, attachmentsPreviewService) ->\n    link = ($scope, el, attrs, ctrl) ->\n        $(document.body).on \"keydown.image-preview\", (e) ->\n            if attachmentsPreviewService.fileId\n                if e.keyCode == 39\n                    ctrl.next()\n                else if e.keyCode == 37\n                    ctrl.previous()\n\n            $scope.$digest()\n\n        $scope.$on '$destroy', () ->\n            $(document.body).off('.image-preview')\n\n    return {\n        scope: {},\n        controller: 'AttachmentsPreview',\n        templateUrl: 'components/attachments-preview/attachments-preview.html',\n        link: link,\n        controllerAs: \"vm\",\n        bindToController: {\n            attachments: \"=\"\n        }\n    }\n\nangular.module('taigaComponents').directive(\"tgAttachmentsPreview\", [\n    \"lightboxService\",\n    \"tgAttachmentsPreviewService\",\n    AttachmentPreviewLightboxDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/attachments-preview/attachments-preview.service.coffee\n###\n\nclass AttachmentsPreviewService extends taiga.Service\n    @.$inject = []\n\n    constructor: () ->\n\nangular.module(\"taigaComponents\").service(\"tgAttachmentsPreviewService\", AttachmentsPreviewService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/attachments-simple/attachments-simple.controller.coffee\n###\n\nclass AttachmentsSimpleController\n    @.$inject = [\n        \"tgAttachmentsService\"\n    ]\n\n    constructor: (@attachmentsService) ->\n\n    addAttachment: (file) ->\n        attachment = Immutable.fromJS({\n            file: file,\n            name: file.name,\n            size: file.size\n        })\n\n        if @attachmentsService.validate(file)\n            @.attachments = @.attachments.push(attachment)\n\n            @.onAdd({attachment: attachment}) if @.onAdd\n\n    addAttachments: (files) ->\n        _.forEach files, @.addAttachment.bind(this)\n\n    deleteAttachment: (toDeleteAttachment) ->\n        @.attachments = @.attachments.filter (attachment) -> attachment != toDeleteAttachment\n\n        @.onDelete({attachment: toDeleteAttachment}) if @.onDelete\n\nangular.module(\"taigaComponents\").controller(\"AttachmentsSimple\", AttachmentsSimpleController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/attachments-simple/attachments-simple.directive.coffee\n###\n\nAttachmentsSimpleDirective = () ->\n    link = (scope, el, attrs, ctrl) ->\n\n    return {\n        scope: {},\n        bindToController: {\n            attachments: \"=\",\n            onAdd: \"&\",\n            onDelete: \"&\"\n        },\n        controller: \"AttachmentsSimple\",\n        controllerAs: \"vm\",\n        templateUrl: \"components/attachments-simple/attachments-simple.html\",\n        link: link\n    }\n\nAttachmentsSimpleDirective.$inject = []\n\nangular.module(\"taigaComponents\").directive(\"tgAttachmentsSimple\", AttachmentsSimpleDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/attachments-sortable/attachments-sortable.directive.coffee\n###\n\nAttachmentSortableDirective = ($parse) ->\n    link = (scope, el, attrs) ->\n        callback = $parse(attrs.tgAttachmentsSortable)\n\n        drake = dragula([el[0]], {\n            copySortSource: false,\n            copy: false,\n            mirrorContainer: el[0],\n            moves: (item) -> return $(item).is('div[tg-bind-scope]')\n        })\n\n        drake.on 'dragend', (item) ->\n            item = $(item)\n\n            attachment = item.scope().attachment\n            newIndex = item.index()\n\n            scope.$apply () ->\n                callback(scope, {attachment: attachment, index: newIndex})\n\n        scroll = autoScroll(window, {\n            margin: 20,\n            pixels: 30,\n            scrollWhenOutside: true,\n            autoScroll: () ->\n                return this.down && drake.dragging\n        })\n\n\n        scope.$on \"$destroy\", ->\n            el.off()\n            drake.destroy()\n\n    return {\n        link: link\n    }\n\nAttachmentSortableDirective.$inject = [\n    \"$parse\"\n]\n\nangular.module(\"taigaComponents\").directive(\"tgAttachmentsSortable\", AttachmentSortableDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/auto-select/auto-select.directive.coffee\n###\n\nAutoSelectDirective = ($timeout) ->\n    return {\n        link: (scope, elm) ->\n            $timeout () -> elm[0].select()\n    }\n\nAutoSelectDirective.$inject = [\n    '$timeout'\n]\n\nangular.module(\"taigaComponents\").directive(\"tgAutoSelect\", AutoSelectDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/avatar/avatar.directive.coffee\n###\n\nAvatarDirective = (avatarService) ->\n    link = (scope, el, attrs) ->\n        if attrs.tgAvatarBig\n            attributeName = 'avatarBig'\n        else\n            attributeName = 'avatar'\n\n        scope.$watch attributeName, (user) ->\n            avatar = avatarService.getAvatar(user, attributeName)\n\n            el.attr('src', avatar.url)\n            el.attr('title', \"#{avatar.username}\")\n            el.attr('alt', \"#{avatar.username}\")\n            el.css('background', avatar.bg or \"\")\n\n    return {\n        link: link\n        scope: {\n            avatar: \"=tgAvatar\"\n            avatarBig: \"=tgAvatarBig\"\n        }\n    }\n\nAvatarDirective.$inject = [\n    'tgAvatarService'\n]\n\nangular.module(\"taigaComponents\").directive(\"tgAvatar\", AvatarDirective)\nangular.module(\"taigaComponents\").directive(\"tgAvatarBig\", AvatarDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/belong-to-epics/belong-to-epics.directive.coffee\n###\n\nmodule = angular.module('taigaEpics')\n\nBelongToEpicsDirective = ($translate, $confirm, $rs, $rs2, lightboxService) ->\n\n    link = (scope, el, attrs) ->\n        scope.$watch 'epics', (epics) ->\n            updateEpics(epics)\n\n        scope.$on \"related-epics:changed\", (ctx, userStory)->\n            $rs.userstories.getByRef(userStory.project, userStory.ref, {}).then (us) ->\n                scope.item.epics = us.epics\n                updateEpics(us.epics)\n\n        scope.removeEpicRelationship = (epic) ->\n            title = $translate.instant(\"LIGHTBOX.REMOVE_RELATIONSHIP_WITH_EPIC.TITLE\")\n            message = $translate.instant(\n                \"LIGHTBOX.REMOVE_RELATIONSHIP_WITH_EPIC.MESSAGE\",\n                { epicSubject:  epic.get('subject') }\n            )\n\n            $confirm.ask(title, null, message).then (askResponse) ->\n                onSuccess = ->\n                    askResponse.finish()\n                    scope.$broadcast(\"related-epics:changed\", scope.item)\n\n                onError = ->\n                    askResponse.finish(false)\n                    $confirm.notify(\"error\")\n\n                epicId = epic.get('id')\n                usId = scope.item.id\n                $rs2.epics.deleteRelatedUserstory(epicId, usId).then(onSuccess, onError)\n\n        updateEpics = (epics) ->\n            scope.epicsLength = 0\n            scope.immutable_epics = []\n            if epics && !epics.isIterable\n                scope.epicsLength = epics.length\n                scope.immutable_epics = Immutable.fromJS(epics)\n\n    templateUrl = (el, attrs) ->\n        if attrs.format\n            return \"components/belong-to-epics/belong-to-epics-\" + attrs.format + \".html\"\n        return \"components/belong-to-epics/belong-to-epics-pill.html\"\n\n    return {\n        link: link,\n        scope: {\n            epics: '=',\n            item: \"=\"\n        },\n        templateUrl: templateUrl\n    }\n\n\nmodule.directive(\"tgBelongToEpics\", [\n    \"$translate\", \"$tgConfirm\", \"$tgResources\", \"tgResources\", \"lightboxService\",\n    BelongToEpicsDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/bind-code.directive.coffee\n###\n\nBindCode = ($sce, $parse, $compile, wysiwygService, wysiwygCodeHightlighterService) ->\n  return {\n    restrict: 'A',\n    compile:  (tElement, tAttrs) ->\n        tgBindCodeGetter = $parse(tAttrs.tgBindCode)\n        tgBindCodeWatch = $parse tAttrs.tgBindCode, (value) ->\n            return (value || '').toString()\n\n        $compile.$$addBindingClass(tElement)\n\n        return (scope, element, attr) ->\n            $compile.$$addBindingInfo(element, attr.tgBindCode);\n\n            scope.$watch tgBindCodeWatch, () ->\n                html = wysiwygService.getHTML(tgBindCodeGetter(scope))\n\n                element.html($sce.getTrustedHtml(html) || '')\n\n                wysiwygCodeHightlighterService.addHightlighter(element)\n\n  }\n\nangular.module(\"taigaComponents\")\n    .directive(\"tgBindCode\", [\n        \"$sce\",\n        \"$parse\",\n        \"$compile\",\n        \"tgWysiwygService\",\n        \"tgWysiwygCodeHightlighterService\",\n        BindCode])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/board-zoom/board-zoom.directive.coffee\n###\n\nBoardZoomDirective = () ->\n    return {\n        scope: {\n            levels: \"=\",\n            value: \"=\"\n        },\n        templateUrl: 'components/board-zoom/board-zoom.html'\n    }\n\nangular.module('taigaComponents').directive(\"tgBoardZoom\", [BoardZoomDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/card-slideshow/card-slideshow.controller.coffee\n###\n\nclass CardSlideshowController\n    @.$inject = []\n\n    constructor: () ->\n        @.index = 0\n\n    next: () ->\n        @.index++\n\n        if @.index >= @.images.size\n            @.index = 0\n\n    previous: () ->\n        @.index--\n\n        if @.index < 0\n            @.index = @.images.size - 1\n\nangular.module('taigaComponents').controller('CardSlideshow', CardSlideshowController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/card-slideshow/card-slideshow.directive.coffee\n###\n\nmodule = angular.module(\"taigaComponents\")\n\ncardSlideshowDirective = () ->\n    return {\n        controller: \"CardSlideshow\",\n        templateUrl: \"components/card-slideshow/card-slideshow.html\",\n        bindToController: true,\n        controllerAs: \"vm\",\n        scope: {\n            images: \"=\"\n        }\n    }\n\nmodule.directive('tgCardSlideshow', cardSlideshowDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/card/card.controller.coffee\n###\n\nclass CardController\n    @.$inject = []\n\n    visible: (name) ->\n        return @.zoom.indexOf(name) != -1\n\n    hasTasks: () ->\n        tasks = @.item.getIn(['model', 'tasks'])\n        return tasks and tasks.size > 0\n\n    hasMultipleAssignedUsers: () ->\n        assignedUsers = @.item.getIn(['model', 'assigned_users'])\n        return assignedUsers and assignedUsers.size > 1\n\n    hasVisibleAttachments: () ->\n        return @.item.get('images').size > 0\n\n    toggleFold: () ->\n        @.onToggleFold({id: @.item.get('id')})\n\n    getClosedTasks: () ->\n        return @.item.getIn(['model', 'tasks']).filter (task) -> return task.get('is_closed')\n\n    closedTasksPercent: () ->\n        return @.getClosedTasks().size * 100 / @.item.getIn(['model', 'tasks']).size\n\n    getModifyPermisionKey: () ->\n        return  if @.type == 'task' then 'modify_task' else 'modify_us'\n\n    getDeletePermisionKey: () ->\n        return  if @.type == 'task' then 'delete_task' else 'delete_us'\n\n    _setVisibility: () ->\n        visibility = {\n            related: @.visible('related_tasks'),\n            slides: @.visible('attachments')\n        }\n\n        if!_.isUndefined(@.item.get('foldStatusChanged'))\n            if @.visible('related_tasks') && @.visible('attachments')\n                visibility.related = !@.item.get('foldStatusChanged')\n                visibility.slides = !@.item.get('foldStatusChanged')\n            else if @.visible('attachments')\n                visibility.related = @.item.get('foldStatusChanged')\n                visibility.slides = @.item.get('foldStatusChanged')\n            else if !@.visible('related_tasks') && !@.visible('attachments')\n                visibility.related = @.item.get('foldStatusChanged')\n                visibility.slides = @.item.get('foldStatusChanged')\n\n        if !@.item.getIn(['model', 'tasks']) || !@.item.getIn(['model', 'tasks']).size\n            visibility.related = false\n\n        if !@.item.get('images') || !@.item.get('images').size\n            visibility.slides = false\n\n        return visibility\n\n    isRelatedTasksVisible: () ->\n        visibility = @._setVisibility()\n\n        return visibility.related\n\n    isSlideshowVisible: () ->\n        visibility = @._setVisibility()\n\n        return visibility.slides\n\n    getNavKey: () ->\n        if @.type == 'task'\n            return 'project-tasks-detail'\n        else if @.type == 'issue'\n            return 'project-issues-detail'\n        else\n            return 'project-userstories-detail'\n\nangular.module('taigaComponents').controller('Card', CardController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/card/card.directive.coffee\n###\n\nmodule = angular.module(\"taigaComponents\")\n\ncardDirective = () ->\n    return {\n        link: (scope) ->\n\n        controller: \"Card\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        templateUrl: \"components/card/card.html\",\n        scope: {\n            onToggleFold: \"&\",\n            onClickAssignedTo: \"&\",\n            onClickEdit: \"&\",\n            onClickRemove: \"&\",\n            onClickDelete: \"&\",\n            project: \"=\",\n            item: \"=\",\n            zoom: \"=\",\n            zoomLevel: \"=\",\n            archived: \"=\",\n            type: \"@\"\n        }\n    }\n\nmodule.directive('tgCard', cardDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/click-input-file.directive.coffee\n###\n\nClickInputFile = () ->\n  return {\n      link:  (scope, el) ->\n          el.on 'click', (e) ->\n              if !$(e.target).is('input')\n                  e.preventDefault()\n                  inputFile = el.find('input[type=\"file\"]')\n                  inputFile.val('')\n                  inputFile.trigger('click')\n\n          scope.$on \"$destroy\", -> el.off()\n  }\n\nangular.module(\"taigaComponents\")\n    .directive(\"tgClickInputFile\", [ClickInputFile])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/color-selector/color-selector.controller.coffee\n###\n\ntaiga = @.taiga\ngetDefaulColorList = taiga.getDefaulColorList\n\n\nclass ColorSelectorController\n    @.$inject = [\n        \"tgProjectService\",\n    ]\n\n    constructor: (@projectService) ->\n        @.colorList = getDefaulColorList()\n        @.checkIsColorRequired()\n        @.displayColorList = false\n\n    userCanChangeColor: () ->\n        return true if not @.requiredPerm\n        return @projectService.hasPermission(@.requiredPerm)\n\n    checkIsColorRequired: () ->\n        if !@.isColorRequired\n            @.colorList = _.dropRight(@.colorList)\n\n    setColor: (color) ->\n        @.color = color\n        @.customColor = color\n\n    resetColor: () ->\n        if @.isColorRequired and not @.color\n            @.color = @.initColor\n\n    toggleColorList: () ->\n        @.displayColorList = !@.displayColorList\n        @.customColor = @.color\n        @.resetColor()\n\n    onSelectDropdownColor: (color) ->\n        @.color = color\n        @.onSelectColor({color: color})\n        @.toggleColorList()\n\n    onKeyDown: (event) ->\n        if event.which == 13 # ENTER\n            if @.customColor or not @.isColorRequired\n                @.onSelectDropdownColor(@.customColor)\n            event.preventDefault()\n\n\nangular.module('taigaComponents').controller(\"ColorSelectorCtrl\", ColorSelectorController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/color-selector/color-selector.directive.coffee\n###\n\nbindOnce = @.taiga.bindOnce\n\nColorSelectorDirective = ($timeout) ->\n    link = (scope, el, attrs, ctrl) ->\n        # Animation\n        _timeout = null\n\n        cancel = () ->\n            $timeout.cancel(_timeout)\n            _timeout = null\n\n        close = () ->\n            return if _timeout\n\n            _timeout = $timeout (() ->\n                ctrl.displayColorList = false\n                ctrl.resetColor()\n            ), 400\n\n        el.find('.color-selector')\n            .mouseenter(cancel)\n            .mouseleave(close)\n\n        el.find('.color-selector-dropdown')\n            .mouseenter(cancel)\n            .mouseleave(close)\n\n        scope.$watch 'vm.initColor', (color) ->\n            # We can't just bind once because sometimes the initial color is reset from the outside\n            ctrl.setColor(color)\n\n    return {\n        link: link,\n        templateUrl:\"components/color-selector/color-selector.html\",\n        controller: \"ColorSelectorCtrl\",\n        controllerAs: \"vm\",\n        bindToController: {\n            isColorRequired: \"=\",\n            onSelectColor: \"&\",\n            initColor: \"=\",\n            requiredPerm: \"@\"\n        },\n        scope: {},\n    }\n\n\nColorSelectorDirective.$inject = [\n    \"$timeout\"\n]\n\nangular.module('taigaComponents').directive(\"tgColorSelector\", ColorSelectorDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/detail/header/detail-header.controller.coffee\n###\n\nmodule = angular.module('taigaBase')\n\nclass DetailHeaderController\n    @.$inject = [\n        \"$rootScope\",\n        \"$tgConfirm\",\n        \"$tgQueueModelTransformation\",\n        \"$tgNavUrls\",\n        \"$window\"\n    ]\n\n    constructor: (@rootScope, @confirm, @modelTransform, @navUrls, @window) ->\n        @.editMode = false\n        @.loadingSubject = false\n        @.originalSubject = @.item.subject\n        @.objType = {\n            'tasks': 'task',\n            'issues': 'issue',\n            'userstories': 'us',\n        }[@.item._name]\n\n    _checkPermissions: () ->\n        @.permissions = {\n            canEdit: _.includes(@.project.my_permissions, @.requiredPerm)\n        }\n\n    cancelEdit: () ->\n        @.editMode = false\n        @.item.subject = @.originalSubject\n\n    editSubject: (value) ->\n        selection = @window.getSelection()\n        if selection.type != \"Range\"\n            if value\n                @.editMode = true\n            if !value\n                @.editMode = false\n\n    onKeyDown: (event) ->\n        if event.which == 13\n            @.saveSubject()\n\n        if event.which == 27\n            @.item.subject = @.originalSubject\n            @.editSubject(false)\n\n    saveSubject: () ->\n        onEditSubjectSuccess = () =>\n            @.loadingSubject = false\n            @rootScope.$broadcast(\"object:updated\")\n            @confirm.notify('success')\n            @.originalSubject = @.item.subject\n\n        onEditSubjectError = () =>\n            @.loadingSubject = false\n            @confirm.notify('error')\n\n        @.editMode = false\n        @.loadingSubject = true\n        item = @.item\n        transform = @modelTransform.save (item) ->\n            return item\n        return transform.then(onEditSubjectSuccess, onEditSubjectError)\n\nmodule.controller(\"DetailHeaderCtrl\", DetailHeaderController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/detail/header/detail-header.directive.coffee\n###\n\nmodule = angular.module('taigaBase')\n\nDetailHeaderDirective = () ->\n    @.$inject = []\n\n    link = (scope, el, attrs, ctrl) ->\n        ctrl._checkPermissions()\n\n    return {\n        link: link,\n        controller: \"DetailHeaderCtrl\",\n        bindToController: true,\n        scope: {\n            item: \"=\",\n            project: \"=\",\n            sectionName: \"=\"\n            requiredPerm: \"@\"\n        },\n        controllerAs: \"vm\",\n        templateUrl:\"components/detail/header/detail-header.html\"\n    }\n\n\nmodule.directive(\"tgDetailHeader\", DetailHeaderDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/detail/nav/detail-nav.controller.coffee\n###\n\nmodule = angular.module(\"taigaBase\")\n\nclass DetailNavController\n    @.$inject = [\n        \"$tgNavUrls\",\n    ]\n\n    constructor: (@navUrls) ->\n        return\n\n    _checkNav: () ->\n        if @.item.neighbors.previous?.ref?\n            ctx = {\n                project: @.item.project_extra_info.slug\n                ref: @.item.neighbors.previous.ref\n            }\n            @.previousUrl = @navUrls.resolve(\"project-\" + @.item._name + \"-detail\", ctx)\n\n        if @.item.neighbors.next?.ref?\n            ctx = {\n                project: @.item.project_extra_info.slug\n                ref: @.item.neighbors.next.ref\n            }\n            @.nextUrl = @navUrls.resolve(\"project-\" + @.item._name + \"-detail\", ctx)\n\nmodule.controller(\"DetailNavCtrl\", DetailNavController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/detail/nav/detail-nav.directive.coffee\n###\n\nmodule = angular.module('taigaBase')\n\nDetailNavDirective = () ->\n    link = (scope, el, attrs, ctrl) ->\n        scope.$watch \"vm.item\", (value) ->\n            return if not value\n            ctrl._checkNav()\n\n    return {\n        link: link,\n        controller: \"DetailNavCtrl\",\n        bindToController: true,\n        scope: {\n            item: \"=\"\n        },\n        controllerAs: \"vm\",\n        templateUrl:\"components/detail/nav/detail-nav.html\"\n    }\n\nmodule.directive(\"tgDetailNav\", DetailNavDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/due-date/due-date-controller.coffee\n###\n\nclass DueDateController\n    @.$inject = [\n        \"$translate\"\n        \"tgLightboxFactory\"\n        \"tgProjectService\"\n        \"$rootScope\"\n    ]\n\n    constructor: (@translate, @tgLightboxFactory, @projectService,  @rootscope) ->\n        @.defaultConfig = [\n            {\"color\": \"#9dce0a\", \"name\": \"normal due\", \"days_to_due\": null, \"by_default\": true},\n            {\"color\": \"#ff9900\", \"name\": \"due soon\", \"days_to_due\": 14, \"by_default\": false},\n            {\"color\": \"#ff8a84\", \"name\": \"past due\", \"days_to_due\": 0, \"by_default\": false}\n        ]\n\n    visible: () ->\n        return @.format == 'button' or @.dueDate?\n\n    disabled: () ->\n        return @.isClosed\n\n    color: () ->\n        return @.getStatus()?.color || null\n\n    title: () ->\n        if @.dueDate\n            return @._formatTitle()\n        else if @.format == 'button'\n            return @translate.instant('COMMON.DUE_DATE.TITLE_ACTION_SET_DUE_DATE')\n        return ''\n\n    getStatus: (options) ->\n        if !@.dueDate\n            return null\n\n        project = @projectService.project.toJS()\n        options = project[\"#{@.objType}_duedates\"]\n\n        if !options\n            options = @.defaultConfig\n\n        return @._getAppearance(options)\n\n    _getDefaultAppearance: (options) ->\n        defaultAppearance = null\n        _.map options, (option) ->\n            if option.by_default == true\n                defaultAppearance = option\n        return defaultAppearance\n\n    _getAppearance: (options) ->\n        currentAppearance = @._getDefaultAppearance(options)\n        options = _.sortBy(options, (o) -> - o.days_to_due) # sort desc\n\n        dueDate = moment(@.dueDate)\n        now = moment()\n        _.map options, (appearance) ->\n            if appearance.days_to_due == null\n                return\n            limitDate = moment(dueDate - moment.duration(appearance.days_to_due, \"days\"))\n            if now >= limitDate\n                currentAppearance = appearance\n\n        return currentAppearance\n\n    _formatTitle: () ->\n        prettyDate = @translate.instant(\"COMMON.PICKERDATE.FORMAT\")\n        formatedDate = moment(@.dueDate).format(prettyDate)\n\n        status = @.getStatus()\n        if status?.name\n            return \"#{formatedDate} (#{status.name})\"\n        return formatedDate\n\n    setDueDate: () ->\n        return if @.disabled()\n        @tgLightboxFactory.create(\n            \"tg-lb-set-due-date\",\n            {\"class\": \"lightbox lightbox-set-due-date\"},\n            {\"object\": @.item, \"notAutoSave\": @.notAutoSave}\n        )\n\nangular.module('taigaComponents').controller('DueDateCtrl', DueDateController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/due-date/due-date-popover.directive.coffee\n###\n\nmodule = angular.module(\"taigaComponents\")\n\ndueDatePopoverDirective = ($translate, datePickerConfigService) ->\n    return {\n        link: (scope, el, attrs, ctrl) ->\n            scope.open = false\n\n            datePickerConfig = datePickerConfigService.get()\n            _.merge(datePickerConfig, {\n                field: el.find('.due-date-button')[0]\n                container: el.find('.date-picker-container')[0]\n                bound: true\n                onClose: () ->\n                    scope.open = false\n                    scope.$apply()\n                onSelect: () ->\n                    ctrl.dueDate = this.getMoment().format('YYYY-MM-DD')\n            })\n            el.picker = new Pikaday(datePickerConfig)\n\n            el.on \"click\", \".due-date-button\", (event) ->\n                if scope.open\n                    el.picker.hide()\n                    return\n                if !el.picker.getDate() && ctrl.dueDate\n                    el.picker.setDate(moment(ctrl.dueDate).format('YYYY-MM-DD'))\n                el.picker.show()\n                scope.open = true\n                scope.$apply()\n\n            el.on \"click\", \".date-picker-clean\", (event) ->\n                event.preventDefault()\n                event.stopPropagation()\n                ctrl.dueDate = null\n                el.picker.setDate(ctrl.dueDate)\n                scope.open = false\n                el.picker.hide()\n                scope.$apply()\n\n            scope.$on \"status:changed\", (ctx, status) ->\n                ctrl.isClosed = ctrl.item.is_closed\n\n        controller: \"DueDateCtrl\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        templateUrl: \"components/due-date/due-date-popover.html\",\n        scope: {\n            dueDate: '=',\n            isClosed: '=',\n            item: '=',\n            objType: '@',\n            format: '@',\n            notAutoSave: '='\n        }\n    }\n\nmodule.directive('tgDueDatePopover', ['$translate', 'tgDatePickerConfigService', dueDatePopoverDirective])","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/due-date/due-date.directive.coffee\n###\n\nmodule = angular.module(\"taigaComponents\")\n\ndueDateDirective = ($translate, datePickerConfigService) ->\n    templateUrl = (el, attrs) ->\n        if attrs.format\n            return \"components/due-date/due-date-\" + attrs.format + \".html\"\n        return \"components/due-date/due-date-icon.html\"\n\n    return {\n        link: (scope, el, attrs, ctrl) ->\n            renderDatePicker = () ->\n                prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\")\n                if ctrl.dueDate\n                    ctrl.dueDate = moment(ctrl.dueDate, prettyDate)\n\n                el.on \"click\", \".date-picker-popover-trigger\", (event) ->\n                    if ctrl.disabled()\n                        return\n                    event.preventDefault()\n                    event.stopPropagation()\n                    el.find(\".date-picker-popover\").popover().open()\n\n                el.on \"click\", \".date-picker-clean\", (event) ->\n                    event.preventDefault()\n                    event.stopPropagation()\n                    ctrl.dueDate = null\n                    scope.$apply()\n                    el.find(\".date-picker-popover\").popover().close()\n\n                datePickerConfig = datePickerConfigService.get()\n                _.merge(datePickerConfig, {\n                    field: el.find('input.due-date')[0]\n                    container: el.find('.date-picker-container')[0]\n                    bound: false\n                    onSelect: () ->\n                        ctrl.dueDate = this.getMoment().format('YYYY-MM-DD')\n                        el.find(\".date-picker-popover\").popover().close()\n                        scope.$apply()\n                })\n\n                el.picker = new Pikaday(datePickerConfig)\n\n            if attrs.format == 'button-popover'\n                renderDatePicker()\n\n        controller: \"DueDateCtrl\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        templateUrl: templateUrl,\n        scope: {\n            dueDate: '=',\n            isClosed: '=',\n            item: '=',\n            objType: '@',\n            format: '@',\n            notAutoSave: '='\n        }\n    }\n\nmodule.directive('tgDueDate', ['$translate', 'tgDatePickerConfigService', dueDateDirective])","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/file-change/file-change.directive.coffee\n###\n\nFileChangeDirective = ($parse) ->\n    link = (scope, el, attrs, ctrl) ->\n        eventAttr = $parse(attrs.tgFileChange)\n\n        el.on 'change', (event) ->\n            scope.$apply () -> eventAttr(scope, {files: event.currentTarget.files})\n\n        scope.$on \"$destroy\", -> el.off()\n\n    return {\n        restrict: \"A\",\n        link: link\n    }\n\nFileChangeDirective.$inject = [\n    \"$parse\"\n]\n\nangular.module(\"taigaComponents\").directive(\"tgFileChange\", FileChangeDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/filter/filter-remote.service.coffee\n###\n\ngenerateHash = taiga.generateHash\n\nclass FilterRemoteStorageService extends taiga.Service\n    @.$inject = [\n        \"$q\",\n        \"$tgUrls\",\n        \"$tgHttp\"\n    ]\n\n    constructor: (@q, @urls, @http) ->\n\n    storeFilters: (projectId, myFilters, filtersHashSuffix) ->\n        deferred = @q.defer()\n        url = @urls.resolve(\"user-storage\")\n        ns = \"#{projectId}:#{filtersHashSuffix}\"\n        hash = generateHash([projectId, ns])\n        if _.isEmpty(myFilters)\n            promise = @http.delete(\"#{url}/#{hash}\", {key: hash, value:myFilters})\n            promise.then ->\n                deferred.resolve()\n            promise.then null, ->\n                deferred.reject()\n        else\n            promise = @http.put(\"#{url}/#{hash}\", {key: hash, value:myFilters})\n            promise.then (data) ->\n                deferred.resolve()\n            promise.then null, (data) =>\n                innerPromise = @http.post(\"#{url}\", {key: hash, value:myFilters})\n                innerPromise.then ->\n                    deferred.resolve()\n                innerPromise.then null, ->\n                    deferred.reject()\n        return deferred.promise\n\n    getFilters: (projectId, filtersHashSuffix) ->\n        deferred = @q.defer()\n        url = @urls.resolve(\"user-storage\")\n        ns = \"#{projectId}:#{filtersHashSuffix}\"\n        hash = generateHash([projectId, ns])\n\n        promise = @http.get(\"#{url}/#{hash}\")\n        promise.then (data) ->\n            deferred.resolve(data.data.value)\n        promise.then null, (data) ->\n            deferred.resolve({})\n\n        return deferred.promise\n\nangular.module(\"taigaComponents\").service(\"tgFilterRemoteStorageService\", FilterRemoteStorageService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/filter/filter-slide-down.directive.coffee\n###\n\nFilterSlideDownDirective = () ->\n    link = (scope, el, attrs, ctrl) ->\n        filter = $('tg-filter')\n\n        scope.$watch attrs.ngIf, (value) ->\n            if value\n                filter.find('.filter-list').hide()\n\n                wrapperHeight = filter.height()\n                contentHeight = 0\n\n                filter.children().each () ->\n                    contentHeight += $(this).outerHeight(true)\n\n                $(el.context.nextSibling)\n                    .css({\n                        \"display\": \"block\"\n                    })\n\n    return {\n        priority: 900,\n        link: link\n    }\n\nangular.module('taigaComponents').directive(\"tgFilterSlideDown\", [FilterSlideDownDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/filter/filter.controller.coffee\n###\n\nclass FilterController\n    @.$inject = ['$translate']\n\n    constructor: (@translate) ->\n        @.opened = null\n        @.filterModeOptions = [\"include\", \"exclude\"]\n        @.filterModeLabels = {\n            \"include\": @translate.instant(\"COMMON.FILTERS.ADVANCED_FILTERS.INCLUDE\"),\n            \"exclude\": @translate.instant(\"COMMON.FILTERS.ADVANCED_FILTERS.EXCLUDE\"),\n        }\n        @.filterMode = 'include'\n        @.showAdvancedFilter = false\n        @.customFilterForm = false\n        @.customFilterName = ''\n\n    toggleAdvancedFilter: () ->\n        @.showAdvancedFilter = !@.showAdvancedFilter\n\n    toggleFilterCategory: (filterName) ->\n        if @.opened == filterName\n            @.opened = null\n        else\n            @.opened = filterName\n\n    isOpen: (filterName) ->\n        return @.opened == filterName\n\n    saveCustomFilter: () ->\n        @.onSaveCustomFilter({name: @.customFilterName})\n        @.customFilterForm = false\n        @.opened = 'custom-filter'\n        @.customFilterName = ''\n\n    changeQ: () ->\n        @.onChangeQ({q: @.q})\n\n    unselectFilter: (filter) ->\n        @.onRemoveFilter({filter: filter})\n\n    unselectFilter: (filter) ->\n        @.onRemoveFilter({filter: filter})\n\n    selectFilter: (filterCategory, filter) ->\n        filter = {\n            category: filterCategory\n            filter: filter\n            mode: @.filterMode\n        }\n\n        @.onAddFilter({filter: filter})\n\n    removeCustomFilter: (filter) ->\n        @.onRemoveCustomFilter({filter: filter})\n\n    selectCustomFilter: (filter) ->\n        @.onSelectCustomFilter({filter: filter})\n\n    isFilterSelected: (filterCategory, filter) ->\n        return !!_.find @.selectedFilters, (it) ->\n            return filter.id == it.id && filterCategory.dataType == it.dataType\n\nangular.module('taigaComponents').controller('Filter', FilterController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/filter/filter.directive.coffee\n###\n\nFilterDirective = () ->\n    link = (scope, el, attrs, ctrl) ->\n        unwatch = scope.$watch \"vm.defaultQ\", (q) ->\n            if q && !scope.vm.filtersForm.$dirty\n                scope.vm.q = q\n                unwatch()\n            else if scope.vm.filtersForm.$dirty\n                unwatch()\n\n        attrs.$observe \"open\", (open) ->\n            open = scope.$eval(open)\n\n            if open\n                el.addClass('open')\n            else\n                el.removeClass('open')\n\n    return {\n        scope: {\n            onChangeQ: \"&\",\n            onAddFilter: \"&\",\n            onSelectCustomFilter: \"&\",\n            onRemoveFilter: \"&\",\n            onRemoveCustomFilter: \"&\",\n            onSaveCustomFilter: \"&\",\n            customFilters: \"<\",\n            defaultQ: \"=q\",\n            filters: \"<\"\n            customFilters: \"<\"\n            selectedFilters: \"<\"\n        },\n        bindToController: true,\n        controller: \"Filter\",\n        controllerAs: \"vm\",\n        templateUrl: 'components/filter/filter.html',\n        link: link\n    }\n\nangular.module('taigaComponents').directive(\"tgFilter\", [FilterDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/joy-ride/joy-ride.directive.coffee\n###\n\ntaiga = @.taiga\n\nJoyRideDirective = ($rootScope, currentUserService, joyRideService, $location, $translate) ->\n    link = (scope, el, attrs, ctrl) ->\n        unsuscribe = null\n        intro = introJs()\n\n        intro.oncomplete () ->\n            $('html,body').scrollTop(0)\n\n        intro.onexit () ->\n            currentUserService.disableJoyRide()\n\n        initJoyrRide = (next, config) ->\n            if !config[next.joyride]\n                return\n\n            intro.setOptions({\n                exitOnEsc: false,\n                exitOnOverlayClick: false,\n                showStepNumbers: false,\n                nextLabel: $translate.instant('JOYRIDE.NAV.NEXT') + ' &rarr;',\n                prevLabel: '&larr; ' + $translate.instant('JOYRIDE.NAV.BACK'),\n                skipLabel: $translate.instant('JOYRIDE.NAV.SKIP'),\n                doneLabel: $translate.instant('JOYRIDE.NAV.DONE'),\n                disableInteraction: true\n            })\n\n            intro.setOption('steps', joyRideService.get(next.joyride))\n            intro.start()\n\n        $rootScope.$on '$routeChangeSuccess',  (event, next) ->\n            if !next.joyride || !currentUserService.isAuthenticated()\n                intro.exit()\n                unsuscribe() if unsuscribe\n                return\n\n\n            intro.oncomplete () ->\n                currentUserService.disableJoyRide(next.joyride)\n\n            if next.loader\n                unsuscribe = $rootScope.$on 'loader:end',  () ->\n                    currentUserService.loadJoyRideConfig()\n                        .then (config) -> initJoyrRide(next, config)\n\n                    unsuscribe()\n            else\n                currentUserService.loadJoyRideConfig()\n                    .then (config) -> initJoyrRide(next, config)\n\n    return {\n        scope: {},\n        link: link\n    }\n\nJoyRideDirective.$inject = [\n    \"$rootScope\",\n    \"tgCurrentUserService\",\n    \"tgJoyRideService\",\n    \"$location\",\n    \"$translate\"\n]\n\nangular.module(\"taigaComponents\").directive(\"tgJoyRide\", JoyRideDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/joy-ride/joy-ride.service.coffee\n###\n\nclass JoyRideService extends taiga.Service\n    @.$inject = [\n        '$translate',\n        'tgCheckPermissionsService'\n    ]\n\n    constructor: (@translate, @checkPermissionsService) ->\n\n    getConfig: () ->\n      return {\n          dashboard: () =>\n              steps = [\n                  {\n                      element: '.project-list > section:not(.ng-hide)',\n                      position: 'left',\n                      joyride: {\n                          title: @translate.instant('JOYRIDE.DASHBOARD.STEP1.TITLE'),\n                          text: @translate.instant('JOYRIDE.DASHBOARD.STEP1.TEXT')\n                      }\n                  },\n                  {\n                      element: '.working-on-container',\n                      position: 'right',\n                      joyride: {\n                          title: @translate.instant('JOYRIDE.DASHBOARD.STEP2.TITLE'),\n                          text: @translate.instant('JOYRIDE.DASHBOARD.STEP2.TEXT')\n                      }\n                  },\n                  {\n                      element: '.watching-container',\n                      position: 'right',\n                      joyride: {\n                          title: @translate.instant('JOYRIDE.DASHBOARD.STEP3.TITLE')\n                          text: [\n                              @translate.instant('JOYRIDE.DASHBOARD.STEP3.TEXT1'),\n                              @translate.instant('JOYRIDE.DASHBOARD.STEP3.TEXT2')\n                          ]\n                      }\n                  }\n              ]\n\n              if !$('.project-list .create-project-button').is(':hidden')\n                  steps.push({\n                      element: '.project-list .create-project-button',\n                      position: 'bottom',\n                      joyride: {\n                          title: @translate.instant('JOYRIDE.DASHBOARD.STEP4.TITLE')\n                          text: [\n                              @translate.instant('JOYRIDE.DASHBOARD.STEP4.TEXT1'),\n                              @translate.instant('JOYRIDE.DASHBOARD.STEP4.TEXT2')\n                          ]\n                      }\n                  })\n\n              return steps\n\n          backlog: () =>\n              steps = [\n                  {\n                      element: '.summary',\n                      position: 'bottom',\n                      joyride: {\n                          title: @translate.instant('JOYRIDE.BACKLOG.STEP1.TITLE')\n                          text: [\n                              @translate.instant('JOYRIDE.BACKLOG.STEP1.TEXT1'),\n                              @translate.instant('JOYRIDE.BACKLOG.STEP1.TEXT2')\n                          ]\n                      }\n                  },\n                  {\n                      element: '.backlog-table-empty',\n                      position: 'bottom',\n                      joyride: {\n                          title: @translate.instant('JOYRIDE.BACKLOG.STEP2.TITLE')\n                          text: @translate.instant('JOYRIDE.BACKLOG.STEP2.TEXT')\n                      }\n                  },\n                  {\n                      element: '.sprints',\n                      position: 'left',\n                      joyride: {\n                          title: @translate.instant('JOYRIDE.BACKLOG.STEP3.TITLE')\n                          text: @translate.instant('JOYRIDE.BACKLOG.STEP3.TEXT')\n                      }\n                  }\n              ]\n\n              if @checkPermissionsService.check('add_us')\n                  steps.push({\n                      element: '.new-us',\n                      position: 'rigth',\n                      joyride: {\n                          title: @translate.instant('JOYRIDE.BACKLOG.STEP4.TITLE')\n                          text: @translate.instant('JOYRIDE.BACKLOG.STEP4.TEXT')\n                      }\n                  })\n\n              return steps\n\n           kanban: () =>\n              steps = [\n                  {\n                      element: '.kanban-table-inner',\n                      position: 'bottom',\n                      joyride: {\n                          title: @translate.instant('JOYRIDE.KANBAN.STEP1.TITLE')\n                          text: @translate.instant('JOYRIDE.KANBAN.STEP1.TEXT')\n                      }\n                  },\n                  {\n                      element: '.card-placeholder',\n                      position: 'right',\n                      joyride: {\n                          title: @translate.instant('JOYRIDE.KANBAN.STEP2.TITLE')\n                          text: @translate.instant('JOYRIDE.KANBAN.STEP2.TEXT')\n                      }\n                  }\n              ]\n\n              if @checkPermissionsService.check('add_us')\n                  steps.push({\n                        element: '.add-action',\n                        position: 'bottom',\n                        joyride: {\n                            title: @translate.instant('JOYRIDE.KANBAN.STEP3.TITLE')\n                            text: [\n                                @translate.instant('JOYRIDE.KANBAN.STEP3.TEXT1'),\n                                @translate.instant('JOYRIDE.KANBAN.STEP3.TEXT2'),\n                            ]\n                        }\n                    })\n\n              return steps\n      }\n\n    get: (name) ->\n        joyRides = @.getConfig()\n        joyRide = joyRides[name].call(this)\n\n        return _.map joyRide, (item) ->\n            html = \"\"\n\n            if item.joyride.title\n                html += \"<h3>#{item.joyride.title}</h3>\"\n\n            if _.isArray(item.joyride.text)\n                _.forEach item.joyride.text, (text) ->\n                    html += \"<p>#{text}</p>\"\n            else\n                html += \"<p>#{item.joyride.text}</p>\"\n\n            item.intro = html\n\n            return item\n\nangular.module(\"taigaComponents\").service(\"tgJoyRideService\", JoyRideService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/kanban-board-zoom/kanban-board-zoom.directive.coffee\n###\n\nKanbanBoardZoomDirective = (storage, projectService) ->\n    link = (scope, el, attrs, ctrl) ->\n        scope.zoomIndex = storage.get(\"kanban_zoom\") or 2\n        scope.levels = 5\n\n        zooms = [\n            [\"ref\"],\n            [\"subject\"],\n            [\"owner\", \"tags\", \"extra_info\"],\n            [\"unfold\"],\n            [\"attachments\", \"related_tasks\", \"empty_extra_info\"]\n        ]\n\n        getZoomView = (zoomIndex = 0) ->\n            if storage.get(\"kanban_zoom\") != zoomIndex\n                storage.set(\"kanban_zoom\", zoomIndex)\n\n            return _.reduce zooms, (result, value, key) ->\n                if key <= zoomIndex\n                    result = result.concat(value)\n\n                return result\n\n        scope.$watch 'zoomIndex', (zoomLevel) ->\n            zoom = getZoomView(zoomLevel)\n            scope.onZoomChange({zoomLevel: zoomLevel, zoom: zoom})\n\n        unwatch = scope.$watch () ->\n            return projectService.project\n        , (project) ->\n            if project\n                if project.get('my_permissions').indexOf(\"view_tasks\") == -1\n                    scope.levels = 4\n                unwatch()\n\n    return {\n        scope: {\n            onZoomChange: \"&\"\n        },\n        template: \"\"\"\n        <tg-board-zoom\n            class=\"board-zoom\"\n            value=\"zoomIndex\"\n            levels=\"levels\"\n        ></tg-board-zoom>\n        \"\"\",\n        link: link\n    }\n\nangular.module('taigaComponents').directive(\"tgKanbanBoardZoom\", [\"$tgStorage\", \"tgProjectService\", KanbanBoardZoomDirective])\n","###\n# Copyright (C) 2014-2019 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/lb-select-user/lb-select-user.directive.coffee\n###\n\ntruncate = taiga.truncate\n\nSelectUserDirective = (\n    $rootScope\n    $repo\n    $translate\n    lightboxService\n    lightboxKeyboardNavigationService\n    avatarService\n    projectService\n) ->\n    link = ($scope, $el, $attrs) ->\n        users = []\n        roles = []\n        lightboxService.open($el)\n\n        getFilteredUsers = (text=\"\") ->\n            selected = _.compact(_.sortBy(\n                _.filter(users, (x) ->\n                    _.includes($scope.currentUsers, x.id)\n                ),\n                'name'\n            ))\n\n            _filterRows = (text, row) ->\n                if row.type == 'user' && _.find(selected, ['id', row.id])\n                    return false\n\n                name = row.name.toUpperCase()\n                text = text.toUpperCase()\n                return _.includes(name, text)\n\n            collection = _.union(\n                users,\n                _.filter(roles, (role) =>\n                    difference = _.difference(role.userIds, _.map(selected, 'id'))\n                    return difference.length > 0\n                )\n            )\n            available = _.sortBy(\n                _.filter(collection, _.partial(_filterRows, text)),\n                'name'\n            )\n\n            if !text\n                $scope.selected = selected\n                $scope.collection = _.union(selected, available)\n            else\n                $scope.selected = []\n                $scope.collection = available\n\n        closeLightbox = () ->\n            lightboxKeyboardNavigationService.stop()\n            lightboxService.close($el)\n\n        $scope.$on \"watcher:add\", (ctx, item) ->\n            $scope.item = item\n            getFilteredUsers()\n\n            lightboxService.open($el).then ->\n                $el.find(\"input\").focus()\n                lightboxKeyboardNavigationService.init($el)\n\n        $scope.$watch \"activeUsers\", (activeUsers) ->\n            return if not activeUsers\n\n            users = _.map activeUsers, (user) ->\n                return {\n                    id: user.id,\n                    type: 'user',\n                    name: user.full_name_display,\n                    avatar: avatarService.getAvatar(user),\n                }\n\n            return if $scope.single\n\n            project = projectService.project.toJS()\n            roles = _.map project.roles, (role) ->\n                roleUsers = _.filter(activeUsers, {'role': role.id})\n                suffix = $translate.instant(\"LIGHTBOX.SELECT_USER.ROLE\")\n                return {\n                    id: role.id,\n                    type: 'role',\n                    name: \"#{suffix}: #{role.name}\",\n                    avatar: null,\n                    userIds: _.map(roleUsers, 'id')\n                    userNames: truncate('(' + _.join(_.map(roleUsers, 'full_name_display'), ', ') + ')', 110)\n                }\n\n        $scope.$watch \"currentUsers\", (currentUsers) ->\n            if not currentUsers\n                return\n            getFilteredUsers()\n\n        $scope.$watch \"searchText\", (searchingText) ->\n            getFilteredUsers(searchingText)\n            $el.find(\"input\").focus()\n\n        $scope.removeItem = (user, $event) ->\n            $event.preventDefault()\n            $event.stopPropagation()\n            $event.currentTarget.remove()\n\n            $scope.searchText = null\n            _.pull($scope.currentUsers, user.id)\n            getFilteredUsers()\n\n        $scope.addItem = (item) ->\n            if item.type == 'user'\n                return if _.find($scope.currentUsers, ['id', item.id])\n                if $scope.single\n                    $scope.currentUsers = [item.id]\n                    confirmSelection()\n                    return\n                $scope.currentUsers.push(item.id)\n\n            if item.type == 'role'\n                $scope.currentUsers = _.union($scope.currentUsers, item.userIds)\n\n            $scope.searchText = null\n            getFilteredUsers()\n\n        $scope.clearSearch = () ->\n            $scope.searchText = ''\n\n        confirmSelection = () ->\n            $scope.loading = true\n            $scope.onClose($scope.currentUsers)\n            closeLightbox()\n            $scope.loading = false\n\n        $el.on \"click\", \".lb-select-user-confirm\", (event) ->\n            return if $scope.loading\n            event.preventDefault()\n            confirmSelection()\n\n        $el.on \"click\", \".close\", (event) ->\n            event.preventDefault()\n\n            closeLightbox()\n            $scope.$apply ->\n                $scope.searchText = null\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        templateUrl: \"components/lb-select-user/lb-select-user.html\"\n        link: link\n        scope: true\n    }\n\nSelectUserDirective.$inject = [\n    \"$rootScope\"\n    \"$tgRepo\"\n    \"$translate\"\n    \"lightboxService\"\n    \"lightboxKeyboardNavigationService\"\n    \"tgAvatarService\"\n    \"tgProjectService\"\n]\n\nangular.module(\"taigaComponents\").directive(\"tgLbSelectUser\", SelectUserDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/live-announcement/live-announcement.directive.coffee\n###\n\n\nLiveAnnouncementDirective = (liveAnnouncementService) ->\n    link = (scope, el, attrs) ->\n\n    return {\n        restrict: \"AE\",\n        scope: {},\n        controllerAs: 'vm',\n        controller: () ->\n            this.close = () ->\n                liveAnnouncementService.open = false\n\n            Object.defineProperties(this, {\n                open: {\n                    get: () -> return liveAnnouncementService.open\n                },\n                title: {\n                    get: () -> return liveAnnouncementService.title\n                },\n                desc: {\n                    get: () -> return liveAnnouncementService.desc\n                }\n            })\n        link: link,\n        templateUrl: \"components/live-announcement/live-announcement.html\"\n    }\n\nLiveAnnouncementDirective.$inject = [\n    \"tgLiveAnnouncementService\"\n]\n\nangular.module(\"taigaComponents\")\n    .directive(\"tgLiveAnnouncement\", LiveAnnouncementDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/live-announcement/live-announcement.service.coffee\n###\n\nclass LiveAnnouncementService extends taiga.Service\n    constructor: () ->\n        @.open = false\n        @.title = \"\"\n        @.desc = \"\"\n\n    show: (title, desc) ->\n        @.open = true\n        @.title = title\n        @.desc = desc\n\nangular.module(\"taigaComponents\").service(\"tgLiveAnnouncementService\", LiveAnnouncementService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/move-to-sprint/move-to-sprint-lb/move-to-sprint-lb.controller.coffee\n###\n\nmodule = angular.module(\"taigaComponents\")\n\nclass MoveToSprintLightboxController\n    @.$inject = [\n        '$rootScope'\n        '$scope'\n        '$tgResources'\n        'tgProjectService'\n        '$translate'\n        'lightboxService'\n        '$tgConfirm'\n    ]\n\n    constructor: (\n        @rootScope\n        @scope\n        @rs\n        @projectService\n        @translate\n        @lightboxService\n        @confirm\n    ) ->\n        @.projectId = @projectService.project.get('id')\n        @.loading = false\n        @.someSelected = false\n        @.selectedSprintId = null\n        @.typesSelected = {\n            uss: false\n            tasks: false\n            issues: false\n        }\n        @.itemsToMove = {}\n        @._loadSprints()\n\n        @scope.$watch \"vm.openItems\", (openItems) =>\n            return if !openItems\n            @._init(openItems)\n\n    _init: (openItems) ->\n        @.hasManyItemTypes = _.size(@.openItems) > 1\n\n        @.ussCount = parseInt(openItems.uss?.length)\n        @.updateSelected('uss', @.ussCount > 0)\n\n        @.tasksCount = parseInt(openItems.tasks?.length)\n        @.updateSelected('tasks', @.tasksCount > 0)\n\n        @.issuesCount = parseInt(openItems.issues?.length)\n        @.updateSelected('issues', @.issuesCount > 0)\n\n    _loadSprints: () ->\n        @rs.sprints.list(@.projectId, {closed: false}).then (data) =>\n            @.sprints = _.filter(data.milestones, (x) => x.id != @.sprint.id)\n\n    updateSelected: (itemType, value) ->\n        @.typesSelected[itemType] = value\n        @.someSelected = _.some(@.typesSelected)\n\n        if value is true\n            @.itemsToMove[itemType] = @.openItems[itemType]\n        else if @.itemsToMove[itemType]\n            delete @.itemsToMove[itemType]\n\n    submit: () ->\n        itemsNotMoved = {}\n        _.map @.openItems, (itemsList, itemsType) =>\n            if not @.itemsToMove[itemsType]\n                itemsNotMoved[itemsType] = true\n\n        @.loading = true\n\n        @moveItems().then () =>\n            @rootScope.$broadcast(\"taskboard:items:move\", @.typesSelected)\n            @lightboxService.closeAll()\n            @.loading = false\n            if _.size(itemsNotMoved) > 0\n                @.displayWarning(itemsNotMoved)\n\n    moveItems: () ->\n        promises = []\n        if  @.itemsToMove.uss\n            promises.push(\n                @rs.sprints.moveUserStoriesMilestone(\n                    @.sprint.id\n                    @.projectId\n                    @.selectedSprintId\n                    @.itemsToMove.uss\n                )\n            )\n        if  @.itemsToMove.tasks\n            promises.push(\n                @rs.sprints.moveTasksMilestone(\n                    @.sprint.id\n                    @.projectId\n                    @.selectedSprintId\n                    @.itemsToMove.tasks\n                )\n            )\n        if  @.itemsToMove.issues\n            promises.push(\n                @rs.sprints.moveIssuesMilestone(\n                    @.sprint.id\n                    @.projectId\n                    @.selectedSprintId\n                    @.itemsToMove.issues\n                )\n            )\n        return Promise.all(promises)\n\n    displayWarning: (itemsNotMoved) ->\n        action = @translate.instant('COMMON.I_GET_IT')\n        if _.size(itemsNotMoved) == 1 and itemsNotMoved.issues is true\n            title = @translate.instant('TASKBOARD.MOVE_TO_SPRINT.WARNING_ISSUES_NOT_MOVED_TITLE')\n            desc = @translate.instant('TASKBOARD.MOVE_TO_SPRINT.WARNING_ISSUES_NOT_MOVED')\n        else\n            totalItemsMoved = 0\n            _.map @.itemsToMove, (itemsList, itemsType) -> totalItemsMoved += itemsList.length\n            title = @translate.instant(\n                'TASKBOARD.MOVE_TO_SPRINT.WARNING_SPRINT_STILL_OPEN_TITLE'\n                { total: totalItemsMoved }\n                'messageformat'\n            )\n            desc = @translate.instant(\n                'TASKBOARD.MOVE_TO_SPRINT.WARNING_SPRINT_STILL_OPEN'\n                { sprintName: @.sprint?.name }\n            )\n        @confirm.success(title, desc, null, action)\n\nmodule.controller(\"MoveToSprintLbCtrl\", MoveToSprintLightboxController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/move-to-sprint/move-to-sprint-lb/move-to-sprint-lb.directive.coffee\n###\n\nmodule = angular.module(\"taigaComponents\")\n\nmoveToSprintLightboxDirective = (lightboxService) ->\n    link = (scope, el, attrs, ctrl) ->\n        lightboxService.open(el)\n\n    return {\n        scope: {}\n        bindToController: {\n            openItems: \"=\"\n            sprint: \"=\"\n        },\n        templateUrl: \"components/move-to-sprint/move-to-sprint-lb/move-to-sprint-lb.html\"\n        controller: \"MoveToSprintLbCtrl\"\n        controllerAs: \"vm\"\n        link: link\n    }\n\nmoveToSprintLightboxDirective.$inject = [\n    \"lightboxService\"\n]\n\nmodule.directive(\"tgLbMoveToSprint\", moveToSprintLightboxDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/move-to-sprint/move-to-sprint-controller.coffee\n###\n\ntaiga = @.taiga\n\nclass MoveToSprintController\n    @.$inject = [\n      '$scope'\n      'tgLightboxFactory'\n      'tgProjectService'\n    ]\n\n    constructor: (\n        @scope\n        @lightboxFactory\n        @projectService\n    ) ->\n        @.permissions = @projectService.project.get('my_permissions')\n        @.hasOpenItems = false\n        @.disabled = false\n        @.openItems = {\n            uss: []\n            tasks: []\n            issues: []\n        }\n\n        @scope.$watch \"vm.uss\", () => @getOpenUss()\n        @scope.$watch \"vm.unnasignedTasks\", () => @getOpenStorylessTasks()\n        @scope.$watch \"vm.issues\", () => @getOpenIssues()\n\n    checkOpenItems: () ->\n        return _.some(Object.keys(@.openItems), (x) => @.openItems[x].length > 0)\n\n    openLightbox: () ->\n        if @.disabled is not true && @.hasOpenItems\n            openItems = {}\n            _.map @.openItems, (itemsList, itemsType) ->\n                if itemsList.length\n                    openItems[itemsType] = itemsList\n  \n            @lightboxFactory.create('tg-lb-move-to-sprint', {\n                \"class\": \"lightbox lightbox-move-to-sprint\"\n                \"sprint\": \"sprint\"\n                \"open-items\": \"openItems\"\n            }, {\n                sprint: @.sprint\n                openItems: openItems\n            })\n\n    getOpenUss: () ->\n        return if !@.uss or @.permissions.indexOf(\"modify_us\") == -1\n        @.openItems.uss = []\n        @.uss.map (us) =>\n            if us.is_closed is false\n                @.openItems.uss.push({\n                    us_id: us.id\n                    order: us.sprint_order\n                })\n        @.hasOpenItems = @checkOpenItems()\n\n    getOpenStorylessTasks: () ->\n        return if !@.unnasignedTasks or @.permissions.indexOf(\"modify_task\") == -1\n        @.openItems.tasks = []\n        @.unnasignedTasks.map (column) => column.map (task) =>\n            if task.get('model').get('is_closed') is false\n                @.openItems.tasks.push({\n                    task_id: task.get('model').get('id')\n                    order: task.get('model').get('taskboard_order')\n                })\n        @.hasOpenItems = @checkOpenItems()\n\n    getOpenIssues: () ->\n        return if !@.issues or @.permissions.indexOf(\"modify_issue\") == -1\n        @.openItems.issues = []\n        @.issues.map (issue) =>\n            if issue.get('status').get('is_closed') is false\n                @.openItems.issues.push({ issue_id: issue.get('id') })\n        @.hasOpenItems = @checkOpenItems()\n\nangular.module('taigaComponents').controller('MoveToSprintCtrl', MoveToSprintController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/move-to-sprint/move-to-sprint.directive.coffee\n###\n\nmodule = angular.module(\"taigaComponents\")\n\nmoveToSprintDirective = (taskboardTasksService) ->\n    return {\n        controller: \"MoveToSprintCtrl\"\n        controllerAs: \"vm\"\n        bindToController: true\n        templateUrl: 'components/move-to-sprint/move-to-sprint.html'\n        scope:  {\n            sprint: '='\n            uss: '='\n            unnasignedTasks: '='\n            issues: '='\n            disabled: '='\n        }\n    }\n\nmoveToSprintDirective.$inject = [\n    'tgTaskboardTasks'\n]\n\nmodule.directive('tgMoveToSprint', [moveToSprintDirective])","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/project-logo-big-src/project-logo-big-src.directive.coffee\n###\n\nProjectLogoBigSrcDirective = (projectLogoService) ->\n    link = (scope, el, attrs) ->\n        scope.$watch 'project', (project) ->\n            project = Immutable.fromJS(project) # Necesary for old code\n\n            return if not project\n\n            projectLogo = project.get('logo_big_url')\n\n            if projectLogo\n                el.attr('src', projectLogo)\n                el.css('background', \"\")\n            else\n                logo = projectLogoService.getDefaultProjectLogo(project.get('slug'), project.get('id'))\n                el.attr('src', logo.src)\n                el.css('background', logo.color)\n\n    return {\n        link: link\n        scope: {\n             project: \"=tgProjectLogoBigSrc\"\n        }\n    }\n\nProjectLogoBigSrcDirective.$inject = [\n    \"tgProjectLogoService\"\n]\n\nangular.module(\"taigaComponents\").directive(\"tgProjectLogoBigSrc\", ProjectLogoBigSrcDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/project-logo-small-src/project-logo-small-src.directive.coffee\n###\n\nProjectLogoSmallSrcDirective = (projectLogoService) ->\n    link = (scope, el, attrs) ->\n        scope.$watch 'project', (project) ->\n            project = Immutable.fromJS(project) # Necesary for old code\n\n            return if not project\n\n            projectLogo = project.get('logo_small_url')\n\n            if projectLogo\n                el.attr('src', projectLogo)\n                el.css('background', \"\")\n            else\n                logo = projectLogoService.getDefaultProjectLogo(project.get('slug'), project.get('id'))\n                el.attr('src', logo.src)\n                el.css('background', logo.color)\n\n    return {\n        link: link\n        scope: {\n             project: \"=tgProjectLogoSmallSrc\"\n        }\n    }\n\nProjectLogoSmallSrcDirective.$inject = [\n    \"tgProjectLogoService\"\n]\n\nangular.module(\"taigaComponents\").directive(\"tgProjectLogoSmallSrc\", ProjectLogoSmallSrcDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/project-menu/project-menu.controller.coffee\n###\n\nclass ProjectMenuController\n    @.$inject = [\n        \"tgProjectService\",\n        \"tgLightboxFactory\"\n    ]\n\n    constructor: (@projectService, @lightboxFactory) ->\n        @.project = null\n        @.menu = Immutable.Map()\n\n    show: () ->\n        @.project = @projectService.project\n        @.sprints = @.project.get('milestones')?.toJS()\n        @.active = @._getActiveSection()\n\n        @._setVideoConference()\n        @._setMenuPermissions()\n\n    hide: () ->\n        @.project = null\n        @.menu = {}\n\n    search: () ->\n        @lightboxFactory.create(\"tg-search-box\", {\n            \"class\": \"lightbox lightbox-search\"\n        })\n\n    _setVideoConference: () ->\n        videoconferenceUrl = @._videoConferenceUrl()\n\n        if videoconferenceUrl\n            @.project = @.project.set(\"videoconferenceUrl\", videoconferenceUrl)\n\n    _setMenuPermissions: () ->\n        @.menu = Immutable.Map({\n            epics: false,\n            backlog: false,\n            kanban: false,\n            issues: false,\n            wiki: false\n        })\n\n        if @.project.get(\"is_epics_activated\") && @.project.get(\"my_permissions\").indexOf(\"view_epics\") != -1\n            @.menu = @.menu.set(\"epics\", true)\n\n        if @.project.get(\"is_backlog_activated\") && @.project.get(\"my_permissions\").indexOf(\"view_us\") != -1\n            @.menu = @.menu.set(\"backlog\", true)\n\n        if @.project.get(\"is_kanban_activated\") && @.project.get(\"my_permissions\").indexOf(\"view_us\") != -1\n            @.menu = @.menu.set(\"kanban\", true)\n\n        if @.project.get(\"is_issues_activated\") && @.project.get(\"my_permissions\").indexOf(\"view_issues\") != -1\n            @.menu = @.menu.set(\"issues\", true)\n\n        if @.project.get(\"is_wiki_activated\") && @.project.get(\"my_permissions\").indexOf(\"view_wiki_pages\") != -1\n            @.menu = @.menu.set(\"wiki\", true)\n\n    _getActiveSection: () ->\n        sectionName = @projectService.section\n\n        sectionsBreadcrumb = @projectService.sectionsBreadcrumb\n\n        indexBacklog = sectionsBreadcrumb.lastIndexOf(\"backlog\")\n        indexKanban = sectionsBreadcrumb.lastIndexOf(\"kanban\")\n\n        if indexBacklog != -1 || indexKanban != -1\n            if indexKanban == -1 || indexBacklog > indexKanban\n                oldSectionName = \"backlog\"\n            else\n                oldSectionName = \"kanban\"\n\n        if  sectionName  == \"backlog-kanban\"\n            if oldSectionName in [\"backlog\", \"kanban\"]\n                sectionName = oldSectionName\n            else if @.project.get(\"is_backlog_activated\") && !@.project.get(\"is_kanban_activated\")\n                sectionName = \"backlog\"\n            else if !@.project.get(\"is_backlog_activated\") && @.project.get(\"is_kanban_activated\")\n                sectionName = \"kanban\"\n\n        return sectionName\n\n    _videoConferenceUrl: () ->\n        # Get base url\n        if @.project.get(\"videoconferences\") == \"whereby-com\"\n            baseUrl = \"https://whereby.com/\"\n        else if @.project.get(\"videoconferences\") == \"talky\"\n            baseUrl = \"https://talky.io/\"\n        else if @.project.get(\"videoconferences\") == \"jitsi\"\n            baseUrl = \"https://meet.jit.si/\"\n        else if @.project.get(\"videoconferences\") == \"custom\"\n            return @.project.get(\"videoconferences_extra_data\")\n        else\n            return \"\"\n\n        # Add prefix to the chat room name if exist\n        if @.project.get(\"videoconferences_extra_data\")\n            url = @.project.get(\"slug\") + \"-\" + taiga.slugify(@.project.get(\"videoconferences_extra_data\"))\n        else\n            url = @.project.get(\"slug\")\n\n        # Some special cases\n        if @.project.get(\"videoconferences\") == \"jitsi\"\n            url = url.replace(/-/g, \"\")\n\n        return baseUrl + url\n\nangular.module(\"taigaComponents\").controller(\"ProjectMenu\", ProjectMenuController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/project-menu/project-menu.directive.coffee\n###\n\ntaiga = @.taiga\n\nProjectMenuDirective = (projectService, lightboxFactory) ->\n    link = (scope, el, attrs, ctrl) ->\n        projectChange = () ->\n            if projectService.project\n                ctrl.show()\n            else\n                ctrl.hide()\n\n        scope.$watch ( () ->\n            return projectService.project\n        ), projectChange\n\n        scope.vm.fixed = false\n        $(window).on \"scroll\", () ->\n            position = $(window).scrollTop()\n            if position > 100 && scope.vm.fixed == false\n                scope.vm.fixed = true\n                scope.$digest()\n            else if position < 100 && scope.vm.fixed == true\n                scope.vm.fixed = false\n                scope.$digest()\n\n    return {\n        scope: {},\n        controller: \"ProjectMenu\",\n        controllerAs: \"vm\",\n        templateUrl: \"components/project-menu/project-menu.html\",\n        link: link\n    }\n\nProjectMenuDirective.$inject = [\n    \"tgProjectService\",\n    \"tgLightboxFactory\"\n]\n\nangular.module(\"taigaComponents\").directive(\"tgProjectMenu\", ProjectMenuDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/promote-to-us/promote-to-us.directive.coffee\n###\n\nPromoteToUsButtonDirective = ($rootScope, $rs, $confirm, $translate) ->\n    link = ($scope, $el, $attrs, $model) ->\n        itemType = null\n\n        save = (item, askResponse) ->\n            data = {\n                project: item.project\n            }\n\n            onSuccess = ->\n                askResponse.finish()\n                $confirm.notify(\"success\")\n                $rootScope.$broadcast(\"promote-#{itemType}-to-us:success\")\n\n            onError = ->\n                askResponse.finish()\n                $confirm.notify(\"error\")\n\n            $rs[item._name].promoteToUserStory(item.id, item.project).then(onSuccess, onError)\n\n        $el.on \"click\", \"a\", (event) ->\n            event.preventDefault()\n            item = $model.$modelValue\n            itemType = _.get({ tasks: 'task', issues: 'issue' }, item._name)\n\n            ctx = \"COMMON.CONFIRM_PROMOTE.#{itemType.toUpperCase()}\"\n            title = $translate.instant(\"#{ctx}.TITLE\")\n            message = $translate.instant(\"#{ctx}.MESSAGE\")\n            subtitle = item.subject\n\n            $confirm.ask(title, subtitle, message).then (response) ->\n                save(item, response)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        restrict: \"AE\"\n        require: \"ngModel\"\n        templateUrl: \"components/promote-to-us/promote-to-us.html\"\n        link: link\n    }\n\nangular.module(\"taigaComponents\").directive(\"tgPromoteToUsButton\",\n    [\"$rootScope\", \"$tgResources\", \"$tgConfirm\", \"$translate\", PromoteToUsButtonDirective])","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/search-list/search-list.directive.coffee\n###\n\nmodule = angular.module(\"taigaComponents\")\n\nnormalizeString = @.taiga.normalizeString\ngroupBy = @.taiga.groupBy\n\nsearchListDirective = ($translate) ->\n    link = (scope, el, attrs, model) ->\n        scope.templateUrl = \"components/search-list/search-list-#{scope.itemType}-choice.html\"\n        scope.currentSelected = null\n        filtering = false\n        avaliableItems = []\n        itemsById = {}\n\n        if scope.itemType == 'issue'\n            scope.milestonesById = groupBy(scope.project.milestones, (e) -> e.id)\n\n        if scope.filterClosed\n            scope.showClosed = false\n\n            if scope.itemType == 'sprint'\n                scope.textShowClosed = $translate.instant(\"BACKLOG.SPRINTS.ACTION_SHOW_CLOSED_SPRINTS\")\n                scope.textHideClosed = $translate.instant(\"BACKLOG.SPRINTS.ACTION_HIDE_CLOSED_SPRINTS\")\n\n        el.on \"click\", \".choice\", (event) ->\n            choiceId = parseInt($(event.currentTarget).data(\"choice-id\"))\n            value = if attrs.ngModel?.id != choiceId then itemsById[choiceId] else null\n            model.$setViewValue(value)\n            scope.currentSelected = value\n            scope.$apply()\n\n        isContainedIn = (needle, haystack) ->\n            return _.includes(parseString(haystack), parseString(needle))\n\n        parseString = (value) ->\n            if typeof value != 'string'\n                value = value.toString()\n            return normalizeString(value.toUpperCase())\n\n        resetSelected = () ->\n            scope.currentSelected = null\n            model.$setViewValue(null)\n\n        resetAll = () ->\n            resetSelected()\n            scope.searchText = ''\n            avaliableItems = angular.copy(scope.items)\n            itemsById = groupBy(avaliableItems, (x) -> x.id)\n\n\n        scope.isVisible = (item) ->\n            if !scope.filterClosed || scope.showClosed\n                return true\n            if (scope.itemType == 'sprint' && (item.closed || item.is_closed))\n                if (scope.currentSelected?.id == item.id)\n                    resetSelected()\n                return false\n            return true\n\n        scope.toggleShowClosed = (item) ->\n            scope.showClosed = !scope.showClosed\n\n        scope.filterItems = (searchText) ->\n            scope.filtering = true\n            scope.items = _.filter(avaliableItems, (item) ->\n                itemAttrs = item.getAttrs()\n                if Array.isArray(scope.filterBy)\n                    _.some(scope.filterBy, (attr) -> isContainedIn(searchText, itemAttrs[attr]))\n                else\n                    isContainedIn(searchText, itemAttrs[scope.filterBy])\n            )\n            if !_.find(scope.items, scope.currentSelected)\n                resetSelected()\n\n        scope.$watch 'items', (items) ->\n            if !scope.filtering && items\n                resetAll()\n\n    return {\n        link: link,\n        templateUrl: \"components/search-list/search-list.html\",\n        require: \"ngModel\",\n        scope: {\n            label: '@',\n            placeholder: '@',\n            project: '=',\n            filterBy: '=',\n            items: '=',\n            itemType: '@',\n            filterClosed: '=',\n            itemDisabled: '='\n        }\n    }\n\nmodule.directive('tgSearchList', ['$translate', searchListDirective])\n","###\n# Copyright (C) 2014-2017 Taiga Agile LLC <taiga@taiga.io>\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: tag-line.directive.coffee\n###\n\nmodule = angular.module('taigaCommon')\n\nTagOptionDirective = () ->\n    select = (selected) ->\n        selected.addClass('selected')\n\n        selectedPosition = selected.position().top + selected.outerHeight()\n        containerHeight = selected.parent().outerHeight()\n\n        if selectedPosition > containerHeight\n            diff = selectedPosition - containerHeight\n            selected.parent().scrollTop(selected.parent().scrollTop() + diff)\n        else if selected.position().top < 0\n            selected.parent().scrollTop(selected.parent().scrollTop() + selected.position().top)\n\n    dispatch = (el, code, scope) ->\n        activeElement = el.find(\".selected\")\n\n        # Key: down\n        if code == 40\n            if not activeElement.length\n                select(el.find('li:first'))\n            else\n                next = activeElement.next('li')\n                if next.length\n                    activeElement.removeClass('selected')\n                    select(next)\n        # Key: up\n        else if code == 38\n            if not activeElement.length\n                select(el.find('li:last'))\n            else\n                prev = activeElement.prev('li')\n\n                if prev.length\n                    activeElement.removeClass('selected')\n                    select(prev)\n\n    stop = ->\n        $(document).off(\".tags-keyboard-navigation\")\n\n    link = (scope, el) ->\n        stop()\n\n        $(el).parent().on \"keydown.tags-keyboard-navigation\", (event) =>\n            code = if event.keyCode then event.keyCode else event.which\n\n            if code == 40 || code == 38\n                event.preventDefault()\n\n                dispatch(el, code, scope)\n\n        scope.$on(\"$destroy\", stop)\n\n    return {\n        link: link,\n        templateUrl:\"components/tags/tag-dropdown/tag-dropdown.html\",\n        scope: {\n            onSelectTag: \"&\",\n            colorArray: \"=\",\n            tag: \"=\"\n        }\n    }\n\nmodule.directive(\"tgTagsDropdown\", TagOptionDirective)\n","###\n# Copyright (C) 2014-2017 Taiga Agile LLC <taiga@taiga.io>\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: tag-line.controller.coffee\n###\n\ntrim = @.taiga.trim\n\nmodule = angular.module('taigaCommon')\n\nclass TagLineCommonController\n\n    @.$inject = [\n        \"tgTagLineService\"\n    ]\n\n    constructor: (@tagLineService) ->\n        @.disableColorSelection = false\n        @.newTag = {name: \"\", color: null}\n        @.colorArray = []\n        @.addTag = false\n\n    checkPermissions: () ->\n        return @tagLineService.checkPermissions(@.project.my_permissions, @.permissions)\n\n    _createColorsArray: (projectTagColors) ->\n        @.colorArray =  @tagLineService.createColorsArray(projectTagColors)\n\n    displayTagInput: () ->\n        @.addTag = true\n\n    addNewTag: (name, color) ->\n        @.newTag.name = \"\"\n        @.newTag.color = null\n\n        return if not name.length\n\n        if @.disableColorSelection\n            @.onAddTag({name: name, color: color}) if name.length\n        else\n            if @.project.tags_colors[name]\n                color = @.project.tags_colors[name]\n            @.onAddTag({name: name, color: color})\n\n    selectColor: (color) ->\n        @.newTag.color = color\n\nmodule.controller(\"TagLineCommonCtrl\", TagLineCommonController)\n","###\n# Copyright (C) 2014-2017 Taiga Agile LLC <taiga@taiga.io>\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: tag-line.directive.coffee\n###\n\nmodule = angular.module('taigaCommon')\n\nTagLineCommonDirective = () ->\n    link = (scope, el, attr, ctrl) ->\n        if !_.isUndefined(attr.disableColorSelection)\n            ctrl.disableColorSelection = true\n\n        unwatch = scope.$watch \"vm.project\", (project) ->\n            return if !project || !Object.keys(project).length\n\n            unwatch()\n\n            if not ctrl.disableColorSelection\n                ctrl.colorArray = ctrl._createColorsArray(ctrl.project.tags_colors)\n\n        el.on \"keydown\", \".tag-input\", (event) ->\n            if event.keyCode == 27\n                ctrl.addTag = false\n\n                ctrl.newTag.name = \"\"\n                ctrl.newTag.color = \"\"\n\n                event.stopPropagation()\n            else if event.keyCode == 13\n                event.preventDefault()\n\n                if el.find('.tags-dropdown .selected').length\n                    tagName = $('.tags-dropdown .selected .tags-dropdown-name').text()\n                    ctrl.addNewTag(tagName, null)\n                else\n                    ctrl.addNewTag(ctrl.newTag.name, ctrl.newTag.color)\n\n            scope.$apply()\n\n    return {\n        link: link,\n        scope: {\n            permissions: \"@\",\n            loadingAddTag: \"=\",\n            loadingRemoveTag: \"=\",\n            tags: \"=\",\n            project: \"=\",\n            onAddTag: \"&\",\n            onDeleteTag: \"&\"\n        },\n        templateUrl:\"components/tags/tag-line-common/tag-line-common.html\",\n        controller: \"TagLineCommonCtrl\",\n        controllerAs: \"vm\",\n        bindToController: true\n    }\n\nmodule.directive(\"tgTagLineCommon\", TagLineCommonDirective)\n","###\n# Copyright (C) 2014-2017 Taiga Agile LLC <taiga@taiga.io>\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: tag-line.controller.coffee\n###\n\ntrim = @.taiga.trim\n\nmodule = angular.module('taigaCommon')\n\nclass TagLineController\n\n    @.$inject = [\n        \"$rootScope\",\n        \"$tgConfirm\",\n        \"$tgQueueModelTransformation\",\n    ]\n\n    constructor: (@rootScope, @confirm, @modelTransform) ->\n        @.loadingAddTag = false\n\n    onDeleteTag: (tag) ->\n        @.loadingRemoveTag = tag[0]\n\n        onDeleteTagSuccess = (item) =>\n            @rootScope.$broadcast(\"object:updated\")\n            @.loadingRemoveTag = false\n\n            return item\n\n        onDeleteTagError = () =>\n            @confirm.notify(\"error\")\n            @.loadingRemoveTag = false\n\n        tagName = trim(tag[0].toLowerCase())\n\n        transform = @modelTransform.save (item) ->\n            itemtags = _.clone(item.tags)\n\n            _.remove itemtags, (tag) -> tag[0] == tagName\n\n            item.tags = itemtags\n\n            return item\n\n        return transform.then(onDeleteTagSuccess, onDeleteTagError)\n\n    onAddTag: (tag, color) ->\n        @.loadingAddTag = true\n\n        onAddTagSuccess = (item) =>\n            @rootScope.$broadcast(\"object:updated\") #its a kind of magic.\n            @rootScope.$broadcast(\"tags:updated\")\n            @.addTag = false\n            @.loadingAddTag = false\n\n            return item\n\n        onAddTagError = () =>\n            @.loadingAddTag = false\n            @confirm.notify(\"error\")\n\n        transform = @modelTransform.save (item) =>\n            value = trim(tag.toLowerCase())\n\n            itemtags = _.clone(item.tags)\n\n            itemtags.push([tag , color])\n\n            item.tags = itemtags\n\n            return item\n\n        return transform.then(onAddTagSuccess, onAddTagError)\n\nmodule.controller(\"TagLineCtrl\", TagLineController)\n","###\n# Copyright (C) 2014-2017 Taiga Agile LLC <taiga@taiga.io>\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: tag-line.directive.coffee\n###\n\nmodule = angular.module('taigaCommon')\n\nTagLineDirective = () ->\n    return {\n        scope: {\n            item: \"=\",\n            permissions: \"@\",\n            project: \"=\"\n        },\n        templateUrl:\"components/tags/tag-line-detail/tag-line-detail.html\",\n        controller: \"TagLineCtrl\",\n        controllerAs: \"vm\",\n        bindToController: true\n    }\n\nmodule.directive(\"tgTagLine\", TagLineDirective)\n","###\n# Copyright (C) 2014-2017 Taiga Agile LLC <taiga@taiga.io>\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: tag-line.service.coffee\n###\n\nmodule = angular.module('taigaCommon')\n\nclass TagLineService extends taiga.Service\n    @.$inject = []\n\n    constructor: () ->\n\n    checkPermissions: (myPermissions, projectPermissions) ->\n        return _.includes(myPermissions, projectPermissions)\n\n    createColorsArray: (projectTagColors) ->\n        return _.map(projectTagColors, (index, value) ->\n            return [value, index]\n        )\n\nmodule.service(\"tgTagLineService\", TagLineService)\n","###\n# Copyright (C) 2014-2017 Taiga Agile LLC <taiga@taiga.io>\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: tag-line.directive.coffee\n###\n\nmodule = angular.module('taigaCommon')\n\nTagDirective = () ->\n    return {\n        templateUrl:\"components/tags/tag/tag.html\",\n        scope: {\n            tag: \"<\",\n            loadingRemoveTag: \"<\",\n            onDeleteTag: \"&\",\n            hasPermissions: \"@\"\n        }\n    }\n\nmodule.directive(\"tgTag\", TagDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/taskboard-zoom/taskboard-zoom.directive.coffee\n###\n\nTaskboardZoomDirective = (storage) ->\n    link = (scope, el, attrs, ctrl) ->\n        scope.zoomIndex = storage.get(\"taskboard_zoom\") or 2\n\n        scope.levels = 4\n\n        zooms = [\n            [\"ref\"],\n            [\"subject\"],\n            [\"owner\", \"tags\", \"extra_info\", \"unfold\"],\n            [\"attachments\", \"empty_extra_info\"],\n            [\"related_tasks\"]\n        ]\n\n        getZoomView = (zoomIndex = 0) ->\n            if storage.get(\"taskboard_zoom\") != zoomIndex\n                storage.set(\"taskboard_zoom\", zoomIndex)\n\n            return _.reduce zooms, (result, value, key) ->\n                if key <= zoomIndex\n                    result = result.concat(value)\n\n                return result\n\n        scope.$watch 'zoomIndex', (zoomLevel) ->\n            zoom = getZoomView(zoomLevel)\n            scope.onZoomChange({zoomLevel: zoomLevel, zoom: zoom})\n\n    return {\n        scope: {\n            onZoomChange: \"&\"\n        },\n        template: \"\"\"\n        <tg-board-zoom\n            levels=\"levels\"\n            class=\"board-zoom\"\n            value=\"zoomIndex\"\n        ></tg-board-zoom>\n        \"\"\",\n        link: link\n    }\n\nangular.module('taigaComponents').directive(\"tgTaskboardZoom\", [\"$tgStorage\", TaskboardZoomDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC <taiga@taiga.io>\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: tasks-sortable.directive.coffee\n###\n\nTasksSortableDirective = ($parse, projectService) ->\n    link = (scope, el, attrs) ->\n        return if not projectService.hasPermission(\"modify_task\")\n\n        callback = $parse(attrs.tgTasksSortable)\n\n        drake = dragula([el[0]], {\n            copySortSource: false\n            copy: false\n            mirrorContainer: el[0]\n            moves: (item) ->\n                return $(item).is('div.single-related-task.js-related-task')\n        })\n\n        drake.on 'dragend', (item) ->\n            itemEl = $(item)\n\n            task = itemEl.scope().task\n            newIndex = itemEl.index()\n\n            scope.$apply () ->\n                callback(scope, {task: task, newIndex: newIndex})\n\n        scroll = autoScroll(window, {\n            margin: 20,\n            pixels: 30,\n            scrollWhenOutside: true,\n            autoScroll: () ->\n                return this.down && drake.dragging\n        })\n\n        scope.$on \"$destroy\", ->\n            el.off()\n            drake.destroy()\n\n    return {\n        link: link\n    }\n\nTasksSortableDirective.$inject = [\n    \"$parse\",\n    \"tgProjectService\"\n]\n\nangular.module(\"taigaComponents\").directive(\"tgTasksSortable\", TasksSortableDirective)","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/terms-announcement/terms-announcement.directive.coffee\n###\n\n\nTermsAnnouncementDirective = (TermsAnnouncementService, $repo, $auth, $config, $model) ->\n    link = (scope, el, attrs) ->\n        scope.privacyPolicyUrl = $config.get(\"privacyPolicyUrl\")\n        scope.termsOfServiceUrl = $config.get(\"termsOfServiceUrl\")\n        scope.GDPRUrl = $config.get(\"GDPRUrl\")\n\n    return {\n        restrict: \"AE\",\n        scope: {},\n        controllerAs: 'vm',\n        controller: () ->\n            this.close = () ->\n                TermsAnnouncementService.open = false\n                user = $auth.getUser()\n\n                # We need to force initialization of rootscope user if localstorage user\n                # doesn't have the 'read_new_terms' key\n                if user.read_new_terms == undefined\n                    userData = user.getAttrs()\n                    userData.read_new_terms = false\n                    user = $model.make_model(\"users\", userData)\n\n                user.read_new_terms = true\n\n                onSuccess = (data) ->\n                    $auth.setUser(data)\n\n                $repo.save(user).then(onSuccess)\n\n            Object.defineProperties(this, {\n                open: {\n                    get: () -> return TermsAnnouncementService.open\n                }\n            })\n        link: link,\n        templateUrl: \"components/terms-announcement/terms-announcement.html\"\n    }\n\nTermsAnnouncementDirective.$inject = [\n    \"tgTermsAnnouncementService\",\n    \"$tgRepo\",\n    \"$tgAuth\",\n    \"$tgConfig\",\n    \"$tgModel\"\n]\n\nangular.module(\"taigaComponents\")\n    .directive(\"tgTermsAnnouncement\", TermsAnnouncementDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/terms-announcement/terms-announcement.service.coffee\n###\n\nclass TermsAnnouncementService extends taiga.Service\n    constructor: () ->\n        @.open = false\n\n    show: () ->\n        @.open = true\n\nangular.module(\"taigaComponents\").service(\"tgTermsAnnouncementService\", TermsAnnouncementService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/terms-of-service-and-privacy-policy-notice/terms-of-service-and-privacy-policy-notice.directive.coffee\n###\n\n\nTermsOfServiceAndPrivacyPolicyNoticeDirective = ($config) ->\n    link = (scope, el, attrs) ->\n        scope.privacyPolicyUrl = $config.get(\"privacyPolicyUrl\")\n        scope.termsOfServiceUrl = $config.get(\"termsOfServiceUrl\")\n        scope.target = false\n\n        if !scope.privacyPolicyUrl || !scope.termsOfServiceUrl\n            scope.target = true\n\n        el.on \"change\", \"input[name='accepted_terms']\", (event) ->\n            target = angular.element(event.currentTarget)\n            scope.target = target.is(\":checked\")\n            scope.$apply()\n\n    return {\n        restrict: \"AE\",\n        link: link,\n        scope: {\n            target: \"=\"\n        }\n        templateUrl: \"components/terms-of-service-and-privacy-policy-notice/terms-of-service-and-privacy-policy-notice.html\"\n    }\n\nangular.module(\"taigaComponents\")\n    .directive(\"tgTermsOfServiceAndPrivacyPolicyNotice\", [\n        \"$tgConfig\",\n        TermsOfServiceAndPrivacyPolicyNoticeDirective\n    ])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/assigned/assigned-to.directive.coffee\n###\n\nAssignedToDirective = ($rootscope, $confirm, $repo, $loading, $modelTransform, $template,\n$translate, $compile, $currentUserService, avatarService, $lightboxFactory) ->\n    link = ($scope, $el, $attrs, $model) ->\n        currentUserId = $currentUserService.getUser()?.get('id')\n\n        isEditable = ->\n            return $scope.project?.my_permissions?.indexOf($attrs.requiredPerm) != -1\n\n        isIocaine = (item) ->\n            return item?.is_iocaine\n\n        isSelfAssigned = ->\n            return $scope.assignedUser && $scope.assignedUser.id == currentUserId\n\n        save = (userId) ->\n            $scope.loading = true\n            transform = $modelTransform.save (item) ->\n                item.assigned_to = userId\n                return item\n\n            transform.then (item) ->\n                $attrs.ngModel = item\n                $rootscope.$broadcast(\"object:updated\")\n\n            transform.then null, ->\n                $confirm.notify(\"error\")\n\n            transform.finally () ->\n                $scope.loading = false\n\n            return transform\n\n        render = (item) ->\n            $scope.assignedUser = $scope.usersById[item?.assigned_to]\n            $scope.isEditable = isEditable()\n            $scope.isIocaine = isIocaine(item)\n            $scope.isSelfAssigned = isSelfAssigned()\n\n        $el.on \"click\", \".remove-user\", (event) ->\n            return if not isEditable()\n            event.stopPropagation()\n            title = $translate.instant(\"COMMON.ASSIGNED_TO.CONFIRM_UNASSIGNED\")\n            $confirm.ask(title).then (response) ->\n                response.finish()\n                save(null)\n\n        $scope.openAssignedUsers = () ->\n            onClose = (assignedUsers) =>\n                save(assignedUsers.pop() || null)\n\n            item = _.clone($model.$modelValue, false)\n            $lightboxFactory.create(\n                'tg-lb-select-user',\n                {\n                    \"class\": \"lightbox lightbox-select-user\",\n                },\n                {\n                    \"currentUsers\": [item.assigned_to],\n                    \"activeUsers\": @.activeUsers,\n                    \"onClose\": onClose,\n                    \"single\": true,\n                    \"lbTitle\": $translate.instant(\"COMMON.ASSIGNED_USERS.ADD\"),\n                }\n            )\n\n        $scope.selfAssign = () ->\n            save(currentUserId)\n\n        $scope.$watch $attrs.ngModel, (item, currentItem) ->\n            return if not item?\n            render(item)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        link:link,\n        templateUrl: \"components/ticket-assigned/assigned-to.html\",\n        require:\"ngModel\"\n    }\n\nangular.module('taigaComponents').directive(\"tgAssignedTo\", [\"$rootScope\", \"$tgConfirm\", \"$tgRepo\",\n\"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$translate\", \"$compile\",\n\"tgCurrentUserService\", \"tgAvatarService\", \"tgLightboxFactory\", AssignedToDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/assigned/assigned-users.directive.coffee\n###\n\nAssignedUsersDirective = ($rootscope, $confirm, $repo, $modelTransform, $template, $compile,\n$translate, $currentUserService, $lightboxFactory) ->\n    link = ($scope, $el, $attrs, $model) ->\n        currentUserId = $currentUserService.getUser()?.get('id')\n        $scope.visibleAssignedUsersCount = 4\n        $scope.displayHidden = false\n\n        $scope.toggleFold = () ->\n            $scope.displayHidden = !$scope.displayHidden\n\n        isEditable = ->\n            return $scope.project?.my_permissions?.indexOf($attrs.requiredPerm) != -1\n\n        save = (assignedUsersIds, assignedToUser) ->\n            $scope.loading = true\n            transform = $modelTransform.save (item) ->\n                item.assigned_users = assignedUsersIds\n                if assignedToUser\n                    item.assigned_to = assignedToUser\n                else if not assignedUsersIds.length\n                    item.assigned_to = null\n                else if not _.includes(assignedUsersIds, item.assigned_to)\n                    item.assigned_to = assignedUsersIds[0]\n                return item\n\n            transform.then ->\n                result = $rootscope.$broadcast(\"object:updated\")\n            transform.then null, ->\n                $confirm.notify(\"error\")\n            transform.finally ->\n                $scope.loading = false\n\n        $scope.openAssignedUsers = () ->\n            onClose = (assignedUsers) =>\n                save(assignedUsers)\n\n            item = _.clone($model.$modelValue, false)\n            $lightboxFactory.create(\n                'tg-lb-select-user',\n                {\n                    \"class\": \"lightbox lightbox-select-user\",\n                },\n                {\n                    \"currentUsers\": item.assigned_users,\n                    \"activeUsers\": $scope.activeUsers,\n                    \"onClose\": onClose,\n                    \"lbTitle\": $translate.instant(\"COMMON.ASSIGNED_USERS.ADD\"),\n                }\n            )\n\n        $el.on \"click\", \".user-list-single\", (event) ->\n            return if not isEditable()\n            event.stopPropagation()\n            $scope.openAssignedUsers()\n\n        $el.on \"click\", \".remove-user\", (event) ->\n            return if not isEditable()\n            event.stopPropagation()\n            target = angular.element(event.currentTarget)\n            assignedUserId = target.data(\"user-id\")\n\n            title = $translate.instant(\"COMMON.ASSIGNED_USERS.TITLE_LIGHTBOX_DELETE_ASSIGNED\")\n            message = $scope.usersById[assignedUserId].full_name_display\n\n            $confirm.askOnDelete(title, message).then (askResponse) ->\n                askResponse.finish()\n\n                assignedUserIds = _.clone($model.$modelValue.assigned_users, false)\n                assignedUserIds = _.pull(assignedUserIds, assignedUserId)\n\n                deleteAssignedUser(assignedUserIds)\n\n        $scope.selfAssign = () ->\n            return if not isEditable()\n            assignedUsers = _.clone($model.$modelValue.assigned_users, false)\n            assignedUsers.push(currentUserId)\n            assignedUsers = _.uniq(assignedUsers)\n            save(assignedUsers, currentUserId)\n\n        deleteAssignedUser = (assignedUserIds) ->\n            $scope.loading = true\n            transform = $modelTransform.save (item) ->\n                item.assigned_users = assignedUserIds\n\n                # Update as\n                if item.assigned_to not in assignedUserIds and assignedUserIds.length > 0\n                    item.assigned_to = assignedUserIds[0]\n                if assignedUserIds.length == 0\n                    item.assigned_to = null\n\n                return item\n\n            transform.then () ->\n                item = $modelTransform.getObj()\n                $attrs.ngModel = item\n                $rootscope.$broadcast(\"object:updated\")\n            transform.then null, ->\n                item.revert()\n                $confirm.notify(\"error\")\n            transform.finally ->\n                $scope.loading = false\n\n        render = (assignedUserIds) ->\n            assignedUsers = _.map(assignedUserIds, (assignedUserId) -> $scope.usersById[assignedUserId])\n            $scope.assignedUsers = _.compact(assignedUsers)\n            $scope.selfAssigned = _.includes(assignedUserIds, currentUserId)\n            $scope.isEditable = isEditable()\n\n        $scope.$on \"assigned-user:deleted\", (ctx, assignedUserId) ->\n            assignedUsersIds = _.clone($model.$modelValue.assigned_users, false)\n            assignedUsersIds = _.pull(assignedUsersIds, assignedUserId)\n            assignedUsersIds = _.uniq(assignedUsersIds)\n            deleteAssignedUser(assignedUsersIds)\n\n        $scope.$on \"assigned-user:added\", (ctx, assignedUserId) ->\n            assignedUsers = _.clone($model.$modelValue.assigned_users, false)\n            assignedUsers.push(assignedUserId)\n            assignedUsers = _.uniq(assignedUsers)\n\n            # Save assigned_users and assignedUserId for assign_to legacy attribute\n            save(assignedUsers, assignedUserId)\n\n        $scope.$watch $attrs.ngModel, (item, currentItem) ->\n            return if not item?\n            render(item.assigned_users)\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        scope: true,\n        templateUrl: \"components/ticket-assigned/assigned-users.html\",\n        link:link\n        require:\"ngModel\"\n    }\n\nangular.module('taigaComponents').directive(\"tgAssignedUsers\", [\"$rootScope\", \"$tgConfirm\",\n\"$tgRepo\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", \"$translate\",\n\"tgCurrentUserService\", \"tgLightboxFactory\", AssignedUsersDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/watch-button/watch-button.controller.coffee\n###\n\nclass TicketWatchersController\n    @.$inject = [\n        \"tgCurrentUserService\"\n        \"$rootScope\"\n        \"tgLightboxFactory\"\n        \"$translate\",\n        \"$tgQueueModelTransformation\",\n    ]\n\n    constructor: (@currentUserService, @rootScope, @lightboxFactory, @translate, @modelTransform) ->\n        @.user = @currentUserService.getUser()\n        @.loading = false\n\n    openWatchers: ->\n        onClose = (watchersIds) => @.save(watchersIds)\n\n        @lightboxFactory.create(\n            'tg-lb-select-user',\n            {\n                \"class\": \"lightbox lightbox-select-user\",\n            },\n            {\n                \"currentUsers\": @.item.watchers,\n                \"activeUsers\": @.activeUsers,\n                \"onClose\": onClose,\n                \"lbTitle\": @translate.instant(\"COMMON.WATCHERS.ADD\"),\n            }\n        )\n\n    getPerms: ->\n        return \"\" if !@.item\n\n        name = @.item._name\n\n        perms = {\n            userstories: 'modify_us',\n            issues: 'modify_issue',\n            tasks: 'modify_task',\n            epics: 'modify_epic'\n        }\n\n        return perms[name]\n\n    watch: ->\n        @.loading = true\n        promise = @._watch()\n        promise.finally () => @.loading = false\n        return promise\n\n    unwatch: ->\n        @.loading = true\n        promise = @._unwatch()\n        promise.finally () => @.loading = false\n        return promise\n\n    deleteWatcher: (watcherId) ->\n        watchersIds = _.filter(@.item.watchers, (x) => x != watcherId)\n        @.save(watchersIds)\n\n    save: (watchersIds) ->\n        @.loading = true\n        transform = @modelTransform.save (item) ->\n            item.watchers = watchersIds\n            return item\n        transform.then =>\n            @rootScope.$broadcast(\"object:updated\")\n        transform.finally () => @.loading = false\n\n    _watch: ->\n        @.onWatch()\n\n    _unwatch: ->\n        @.onUnwatch()\n\nangular.module(\"taigaComponents\").controller(\"TicketWatchersController\", TicketWatchersController)\n","###\n# Copyright (C) 2014-2019 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/ticket-watchers/ticket-watchers.directive.coffee\n###\n\nWatchersDirective = ($rootscope, $confirm, $repo, $modelTransform, $template,\n$compile, $translate, $currentUserService) ->\n    link = ($scope, $el, $attrs) ->\n        $scope.visibleWatchersCount = 4\n        $scope.displayHidden = false\n        $scope.isAuthenticated = !!$currentUserService.getUser()\n\n        isEditable = ->\n            return $scope.project?.my_permissions?.indexOf($attrs.requiredPerm) != -1\n\n        render = () ->\n            watchersIds = _.clone($scope.vm.item?.watchers, false)\n            watchers = _.map(watchersIds, (watcherId) -> $scope.usersById[watcherId])\n            watchers = _.filter watchers, (it) -> return !!it\n            $scope.vm.watchers = _.compact(watchers)\n            $scope.isEditable = isEditable()\n\n        $scope.toggleFold = () ->\n            $scope.displayHidden = !$scope.displayHidden\n\n        $el.on \"click\", \".user-list-single\", (event) ->\n            return if not isEditable()\n            event.stopPropagation()\n            $scope.vm.openWatchers()\n\n        $el.on \"click\", \".remove-user\", (event) ->\n            return if not isEditable()\n            event.stopPropagation()\n            target = angular.element(event.currentTarget)\n            watcherId = target.data(\"watcher-id\")\n\n            title = $translate.instant(\"COMMON.WATCHERS.TITLE_LIGHTBOX_DELETE_WARTCHER\")\n            message = $scope.usersById[watcherId].full_name_display\n\n            $confirm.askOnDelete(title, message).then (askResponse) =>\n                askResponse.finish()\n                $scope.vm.deleteWatcher(watcherId)\n\n        $scope.$on \"watcher:added\", (ctx, watcherId) ->\n            watchersIds = _.clone($scope.item.watchers, false)\n            watchersIds.push(watcherId)\n            watchersIds = _.uniq(watchers)\n            $scope.vm.save(watchersIds)\n\n        $scope.$on \"watchers:selected\", (ctx, watchersIds) ->\n            $scope.vm.save(watchersIds)\n\n        $scope.$watch \"vm.item\" , (item) ->\n            return if not item\n            render()\n\n        $scope.$on \"$destroy\", ->\n            $el.off()\n\n    return {\n        scope: true,\n        controller: \"TicketWatchersController\",\n        bindToController: {\n            item: \"=\",\n            onWatch: \"=\",\n            onUnwatch: \"=\",\n            activeUsers: \"=\"\n        }\n        controllerAs: \"vm\",\n        templateUrl: \"components/ticket-watchers/ticket-watchers.html\",\n        link: link\n    }\n\nWatchersDirective.$inject = [\n    \"$rootScope\"\n    \"$tgConfirm\"\n    \"$tgRepo\"\n    \"$tgQueueModelTransformation\"\n    \"$tgTemplate\"\n    \"$compile\"\n    \"$translate\"\n    \"tgCurrentUserService\"\n]\n\nangular.module(\"taigaComponents\").directive(\"tgWatchers\", WatchersDirective)","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/tips/tips.directive.coffee\n###\n\ntimeout = @.taiga.timeout\n\nmodule = angular.module(\"taigaComponents\")\n\ntipsDirective = (tgLoader, $translate) ->\n    tips = [\n      { contentType: \"icon\", icon: \"icon-project\", message: \"PROJECTS_ORDER\"}\n      { contentType: \"icon\", icon: \"icon-upvote\", message: \"VOTING\"}\n      { contentType: \"icon\", icon: \"icon-attach\", message: \"ISSUES_TO_SPRINT\"}\n      { contentType: \"icon\", icon: \"icon-clock\", message: \"DUE_DATE\"}\n      { contentType: \"icon\", icon: \"icon-iocaine\", message: \"IOCAIN\"}\n      { contentType: \"icon\", icon: \"icon-blocked-project\", message: \"BLOCKED\"}\n      { contentType: \"icon\", icon: \"icon-promote\", message: \"PROMOTE\"}\n      { contentType: \"icon\", icon: \"icon-bulk\", message: \"BULK\"}\n      { contentType: \"range\", message: \"ZOOM\"}\n      { contentType: \"icon\", icon: \"icon-settings\", message: \"CUSTOM_FIELDS\"}\n      { contentType: \"arrows\", message: \"SLIDE_ARROWS\"}\n    ]\n\n    randomInt = (size) ->\n        return Math.floor(Math.random() * size) + 1\n\n    link = (scope, el, attrs) ->\n        scope.tipLoaded = false\n        waitingTimeout = null\n\n        tgLoader.onStart () ->\n            waitingTimeout = timeout 1000, ->\n                loadTip()\n\n        tgLoader.onEnd () ->\n            clearTimeout(waitingTimeout)\n            scope.tipLoaded = false\n\n        loadTip = () ->\n            scope.tipLoaded = true\n            tip = tips[randomInt(tips.length - 1)]\n            scope.tip = {\n                contentType: tip.contentType\n                message: \"TIPS.TIP_#{tip.message}\"\n                icon: tip.icon\n                color: \"tip-color-#{randomInt(5)}\"\n            }\n\n    return {\n        link: link,\n        scope: true,\n        templateUrl: \"components/tips/tip.html\",\n    }\n\nmodule.directive('tgTips', ['tgLoader', '$translate', tipsDirective])","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/tribe-button/tribe-button.directive.coffee\n###\n\nTribeButtonDirective = (configService, locationService) ->\n    link = (scope, el, attrs) ->\n\n        scope.vm = {}\n        scope.vm.tribeHost = configService.config.tribeHost\n        scope.vm.url = \"#{locationService.protocol()}://#{locationService.host()}\"\n        if (locationService.protocol() == \"http\" and locationService.port() != 80)\n            scope.vm.url = \"#{scope.vm.url}:#{locationService.port()}\"\n        else if (locationService.protocol() == \"https\" and locationService.port() != 443)\n            scope.vm.url = \"#{scope.vm.url}:#{locationService.port()}\"\n\n    return {\n        scope: {usId: \"=\", projectSlug: \"=\"}\n        controllerAs: \"vm\",\n        templateUrl: \"components/tribe-button/tribe-button.html\",\n        link: link\n    }\n\nTribeButtonDirective.$inject = [\n    \"$tgConfig\", \"$tgLocation\"\n]\n\nangular.module(\"taigaComponents\").directive(\"tgTribeButton\", TribeButtonDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/tribe-button/tribe-linked.directive.coffee\n###\n\nTribeLinkedDirective = (configService) ->\n    link = (scope, el, attrs) ->\n\n        scope.vm = {}\n\n        scope.vm.tribeHost = configService.config.tribeHost\n\n        scope.vm.show = () ->\n            scope.vm.open = true\n\n        scope.vm.hide = (event) ->\n            scope.vm.open = false\n\n    directive = {\n        templateUrl: \"components/tribe-button/tribe-linked.html\",\n        scope: {\n            gigTitle: \"=\",\n            gigId: \"=\"\n        },\n        link: link\n    }\n\n    return directive\n\nTribeLinkedDirective.$inject = [\n    \"$tgConfig\"\n]\n\nangular.module(\"taigaComponents\").directive(\"tgTribeLinked\", TribeLinkedDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/vote-button/vote-button.controller.coffee\n###\n\nclass VoteButtonController\n    @.$inject = [\n        \"tgCurrentUserService\",\n    ]\n\n    constructor: (@currentUserService) ->\n        @.user = @currentUserService.getUser()\n        @.loading = false\n\n    toggleVote: ->\n        @.loading = true\n\n        if not @.item.is_voter\n            promise = @.onUpvote()\n        else\n            promise = @.onDownvote()\n\n        promise.finally () => @.loading = false\n\n        return promise\n\nangular.module(\"taigaComponents\").controller(\"VoteButton\", VoteButtonController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/vote-button/vote-button.directive.coffee\n###\n\nVoteButtonDirective = ->\n    return {\n        scope: {}\n        controller: \"VoteButton\",\n        bindToController: {\n            item: \"=\",\n            onUpvote: \"=\",\n            onDownvote: \"=\"\n        }\n        controllerAs: \"vm\",\n        templateUrl: \"components/vote-button/vote-button.html\",\n    }\n\nangular.module(\"taigaComponents\").directive(\"tgVoteButton\", VoteButtonDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/wysiwyg/comment-edit-wysiwyg.directive.coffee\n###\n\nCommentEditWysiwyg = (attachmentsFullService) ->\n    link = ($scope, $el, $attrs) ->\n        types = {\n            epics: \"epic\",\n            userstories: \"us\",\n            issues: \"issue\",\n            tasks: \"task\"\n        }\n\n        uploadFile = (file, cb) ->\n            return attachmentsFullService.addAttachment($scope.vm.projectId, $scope.vm.comment.comment.id, types[$scope.vm.comment.comment._name], file, true, true).then (result) ->\n                cb(result.getIn(['file', 'name']), result.getIn(['file', 'url']), types[$scope.vm.comment.comment._name], result.getIn(['file', 'id']))\n\n        $scope.uploadFiles = (files, cb) ->\n            for file in files\n                uploadFile(file, cb)\n\n    return {\n        scope: true,\n        link: link,\n        template: \"\"\"\n            <div>\n                <tg-wysiwyg\n                    editonly\n                    required\n                    content='vm.comment.comment'\n                    on-save=\"vm.saveComment(text, cb)\"\n                    on-cancel=\"vm.onEditMode({commentId: vm.comment.id})\"\n                    on-upload-file='uploadFiles(files, cb)'>\n                </tg-wysiwyg>\n            </div>\n        \"\"\"\n    }\n\nangular.module(\"taigaComponents\")\n    .directive(\"tgCommentEditWysiwyg\", [\"tgAttachmentsFullService\", CommentEditWysiwyg])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/wysiwyg/comment-wysiwyg.directive.coffee\n###\n\nCommentWysiwyg = ($modelTransform, $rootscope, attachmentsFullService) ->\n    link = ($scope, $el, $attrs) ->\n        $scope.editableDescription = false\n\n        $scope.saveComment = (description, cb) ->\n            $scope.content = ''\n            $scope.vm.type.comment = description\n\n            transform = $modelTransform.save (item) -> return\n            transform.then ->\n                if $scope.vm.onAddComment\n                    $scope.vm.onAddComment()\n                $rootscope.$broadcast(\"object:updated\")\n            transform.finally(cb)\n\n        types = {\n            epics: \"epic\",\n            userstories: \"us\",\n            issues: \"issue\",\n            tasks: \"task\"\n        }\n\n        uploadFile = (file, cb) ->\n            return attachmentsFullService.addAttachment($scope.vm.projectId, $scope.vm.type.id, types[$scope.vm.type._name], file, true, true).then (result) ->\n                cb(result.getIn(['file', 'name']), result.getIn(['file', 'url']), types[$scope.vm.type._name], result.getIn(['file', 'id']))\n\n        $scope.onChange = (markdown) ->\n            $scope.vm.type.comment = markdown\n\n        $scope.uploadFiles = (files, cb) ->\n            for file in files\n                uploadFile(file, cb)\n\n        $scope.content = ''\n\n        $scope.$watch \"vm.type\", (value) ->\n            return if not value\n\n            $scope.storageKey = \"comment-\" + value.project + \"-\" + value.id + \"-\" + value._name\n\n    return {\n        scope: true,\n        link: link,\n        template: \"\"\"\n            <div>\n                <tg-wysiwyg\n                    required\n                    not-persist\n                    placeholder='{{\"COMMENTS.TYPE_NEW_COMMENT\" | translate}}'\n                    storage-key='storageKey'\n                    content='content'\n                    on-save='saveComment(text, cb)'\n                    on-upload-file='uploadFiles(files, cb)'>\n                </tg-wysiwyg>\n            </div>\n        \"\"\"\n    }\n\nangular.module(\"taigaComponents\")\n    .directive(\"tgCommentWysiwyg\", [\n        \"$tgQueueModelTransformation\",\n        \"$rootScope\",\n        \"tgAttachmentsFullService\",\n        CommentWysiwyg])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/wysiwyg/custom-field-edit-wysiwyg.directive.coffee\n###\n\nCustomFieldEditWysiwyg = (attachmentsFullService) ->\n    link = ($scope, $el, $attrs) ->\n        types = {\n            userstories: \"us\",\n            issues: \"issue\",\n            tasks: \"task\"\n        }\n\n        uploadFile = (file, cb) ->\n            return attachmentsFullService.addAttachment($scope.vm.projectId, $scope.vm.comment.comment.id, types[$scope.vm.comment.comment._name], file).then (result) ->\n                cb(result.getIn(['file', 'name']), result.getIn(['file', 'url']), types[$scope.vm.comment.comment._name], result.getIn(['file', 'id']))\n\n        $scope.uploadFiles = (files, cb) ->\n            for file in files\n                uploadFile(file, cb)\n\n    return {\n        scope: true,\n        link: link,\n        template: \"\"\"\n            <div>\n                <tg-wysiwyg\n                    editonly\n                    content='customAttributeValue.value'\n                    on-save=\"saveCustomRichText(text, cb)\"\n                    on-cancel=\"cancelCustomRichText()\"\n                    on-upload-file='uploadFiles(files, cb)'>\n                </tg-wysiwyg>\n            </div>\n        \"\"\"\n    }\n\nangular.module(\"taigaComponents\")\n    .directive(\"tgCustomFieldEditWysiwyg\", [\"tgAttachmentsFullService\", CustomFieldEditWysiwyg])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/wysiwyg/item-wysiwyg.directive.coffee\n###\n\n# Used in details descriptions\nItemWysiwyg = ($modelTransform, $rootscope, $confirm, attachmentsFullService, $translate) ->\n    link = ($scope, $el, $attrs) ->\n        $scope.editableDescription = false\n        $scope.saveDescription = (description, cb) ->\n            transform = $modelTransform.save (item) ->\n                item.description = description\n\n                return item\n\n            transform.then ->\n                $confirm.notify(\"success\")\n                $rootscope.$broadcast(\"object:updated\")\n\n            transform.then null, ->\n                $confirm.notify(\"error\")\n\n            transform.finally(cb)\n\n        uploadFile = (file, cb) ->\n            return attachmentsFullService.addAttachment($scope.project.id, $scope.item.id, $attrs.type, file).then (result) ->\n                cb(result.getIn(['file', 'name']), result.getIn(['file', 'url']), $attrs.type, result.getIn(['file', 'id']))\n\n        $scope.uploadFiles = (files, cb) ->\n            for file in files\n                uploadFile(file, cb)\n\n        $scope.$watch $attrs.model, (value) ->\n            return if not value\n            $scope.item = value\n            $scope.version = value.version\n            $scope.storageKey = $scope.project.id + \"-\" + value.id + \"-\" + $attrs.type\n\n        $scope.$watch 'project', (project) ->\n            return if !project\n\n            $scope.editableDescription = project.my_permissions.indexOf($attrs.requiredPerm) != -1\n\n    return {\n        scope: true,\n        link: link,\n        template: \"\"\"\n            <div>\n                <tg-wysiwyg\n                    ng-if=\"editableDescription\"\n                    placeholder='{{\"COMMON.DESCRIPTION.EMPTY\" | translate}}'\n                    version='version'\n                    storage-key='storageKey'\n                    content='item.description'\n                    on-save='saveDescription(text, cb)'\n                    on-upload-file='uploadFiles(files, cb)'>\n                </tg-wysiwyg>\n\n                <div\n                    class=\"wysiwyg\"\n                    ng-if=\"!editableDescription && item.description.length\"\n                    ng-bind-html=\"item.description | markdownToHTML\"></div>\n\n                <div\n                    class=\"wysiwyg\"\n                    ng-if=\"!editableDescription && !item.description.length\">\n                    {{'COMMON.DESCRIPTION.NO_DESCRIPTION' | translate}}\n                </div>\n            </div>\n        \"\"\"\n    }\n\nangular.module(\"taigaComponents\")\n    .directive(\"tgItemWysiwyg\", [\n        \"$tgQueueModelTransformation\",\n        \"$rootScope\",\n        \"$tgConfirm\",\n        \"tgAttachmentsFullService\",\n        \"$translate\",\n        ItemWysiwyg])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/wysiwyg/wysiwyg-code-hightlighter.service.coffee\n###\n\nclass WysiwygCodeHightlighterService\n    constructor: () ->\n        Prism.plugins.customClass.prefix('prism-')\n        Prism.plugins.customClass.map({})        \n        \n    getLanguages: () ->\n        return new Promise (resolve, reject) =>\n            if @.languages\n                resolve(@.languages)\n            else if @.loadPromise\n                @.loadPromise.then () => resolve(@.languages)\n            else\n                @.loadPromise = $.getJSON(\"/#{window._version}/prism/prism-languages.json\").then (_languages_) =>\n                    @.loadPromise = null\n                    @.languages = _.map _languages_, (it) ->\n                        it.url = \"/#{window._version}/prism/\" + it.file\n\n                        return it\n\n                    resolve(@.languages)\n\n    getLanguageInClassList: (classes) ->\n        lan = _.find @.languages, (it) ->\n            return !!_.find classes, (className) ->\n                return 'language-' + it.name == className\n\n        return if lan then lan.name else null\n\n    loadLanguage: (lan) ->\n        return new Promise (resolve) ->\n            if !Prism.languages[lan]\n                ljs.load(\"/#{window._version}/prism/prism-#{lan}.min.js\", resolve)\n            else\n                resolve()\n\n    # firefox adds br instead of new lines inside <code>\n    replaceCodeBrToNl: (code) ->\n        $(code).find('br').replaceWith('\\n')\n\n     hightlightCode: (code) ->\n        @.replaceCodeBrToNl(code)\n\n        lan = @.getLanguageInClassList(code.classList)\n\n        if lan\n            @.loadLanguage(lan).then () -> Prism.highlightElement(code)\n\n    addHightlighter: (element) ->\n        codes = $(element).find('code')\n\n        codes.each (index, code) => @.hightlightCode(code)\n\nangular.module(\"taigaComponents\")\n    .service(\"tgWysiwygCodeHightlighterService\", WysiwygCodeHightlighterService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/wysiwyg/wysiwyg-code-lightbox/wysiwyg-code-lightbox.directive.coffee\n###\n\nWysiwygCodeLightbox = (lightboxService) ->\n    link = (scope, el, attrs, ctrl) ->\n        scope.$watch 'visible', (visible) ->\n            if visible && !el.hasClass('open')\n                scope.open = true\n                lightboxService.open(el, null, scope.onClose)\n\n                scope.$applyAsync () ->\n                    textarea = el[0].querySelector('textarea')\n                    if textarea\n                        textarea.select()\n\n            else if !visible && el.hasClass('open')\n                scope.open = false\n                lightboxService.close(el)\n\n    return {\n        scope: {\n            languages: '<',\n            codeLanguage: '<',\n            code: '<',\n            visible: '<',\n            onClose: '&',\n            onSave: '&'\n        },\n        link: link,\n        templateUrl: \"components/wysiwyg/wysiwyg-code-lightbox/wysiwyg-code-lightbox.html\"\n    }\n\nangular.module(\"taigaComponents\")\n    .directive(\"tgWysiwygCodeLightbox\", [\"lightboxService\", WysiwygCodeLightbox])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/wysiwyg/wysiwyg-mention.service.coffee\n###\n\nclass WysiwygMentionService\n    @.$inject = [\n        \"tgProjectService\",\n        \"tgWysiwygService\",\n        \"$tgNavUrls\",\n        \"$tgResources\"\n    ]\n\n    constructor: (@projectService, @wysiwygService, @navurls, @rs) ->\n        @.cancelablePromise = null\n        @.projectSlug = @projectService.project.get('slug')\n\n    search: (mention) ->\n        return new Promise (resolve) =>\n            if '#'.indexOf(mention[0]) != -1\n                @.searchItem(mention.replace('#', '')).then(resolve)\n            else if '@'.indexOf(mention[0]) != -1\n                @.searchUser(mention.replace('@', ''), resolve)\n            else if ':'.indexOf(mention[0]) != -1\n                @.searchEmoji(mention.replace(':', ''), resolve)\n\n    searchItem: (term) ->\n        return new Promise (resolve, reject) =>\n            term = taiga.slugify(term)\n\n            filter = (item) ->\n                return ['subject', 'ref'].some((attr) ->\n                    taiga.slugify(item[attr]).indexOf(term) >= 0\n                )\n\n            @rs.search.do(@projectService.project.get('id'), term).then (res) =>\n                result = []\n                if !res.count or res.count == res.wikipages.length\n                    resolve(result)\n                else\n                    typeURLs = {\n                        issues: 'project-issues-detail'\n                        userstories: 'project-userstories-detail'\n                        tasks: 'project-tasks-detail'\n                    }\n\n                    for type in ['issues', 'tasks', 'userstories']\n                        if not res[type]\n                            continue\n                        items = res[type].filter(filter).map (item) =>\n                            item.url = @navurls.resolve(typeURLs[type], {\n                                project: @.projectSlug,\n                                ref: item.ref\n                            })\n                            return item\n                        result = result.concat(items)\n                    resolve(_.sortBy(result, [\"ref\"]).slice(0, 10))\n\n    searchUser: (term, callback) ->\n        users = @projectService.project.toJS().members.filter (user) ->\n            return ['username', 'full_name', 'full_name_display'].some((attr) ->\n                taiga.slugify(user[attr]).indexOf(term) >= 0 || user[attr].indexOf(term) >= 0\n            )\n\n        users = users.slice(0, 10).map (item) =>\n            item.url = @navurls.resolve('user-profile', {\n                project: @.projectSlug,\n                username: item.username\n            })\n            return item\n\n        callback(users)\n\n    searchEmoji: (name, callback) ->\n        filteredEmojis = @wysiwygService.searchEmojiByName(name)\n        filteredEmojis = filteredEmojis.slice(0, 10)\n\n        callback(filteredEmojis)\n\nangular.module(\"taigaComponents\").service(\"tgWysiwygMentionService\", WysiwygMentionService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/wysiwyg/wysiwyg.directive.coffee\n###\n\ntaiga = @.taiga\nbindOnce = @.taiga.bindOnce\n\nMedium = ($translate, $confirm, $storage, wysiwygService, animationFrame, tgLoader, wysiwygCodeHightlighterService, wysiwygMentionService, analytics, $location) ->\n    removeSelections = () ->\n        if window.getSelection\n            if window.getSelection().empty\n                window.getSelection().empty();\n        else if window.getSelection().removeAllRanges\n            window.getSelection().removeAllRanges()\n\n        else if document.selection\n            document.selection.empty()\n\n    getRangeCodeBlock = (range) ->\n        return $(range.endContainer).parentsUntil('.editor', 'code')\n\n    isCodeBlockSelected = (range) ->\n        return !!getRangeCodeBlock(range).length\n\n    removeCodeBlockAndHightlight = (selection, mediumInstance) ->\n        if $(selection).is('code')\n            code = selection\n        else\n            code = $(selection).closest('code')[0]\n\n        pre = code.parentNode\n\n        p = document.createElement('p')\n        p.innerText = code.innerText\n\n        pre.parentNode.replaceChild(p, pre)\n        mediumInstance.checkContentChanged(mediumInstance.elements[0])\n\n    addCodeBlockAndHightlight = (range, mediumInstance) ->\n        pre = document.createElement('pre')\n        code = document.createElement('code')\n\n        if !range.startContainer.parentNode.nextSibling\n            $('<br/>').insertAfter(range.startContainer.parentNode)\n\n        start = range.endContainer.parentNode.nextSibling\n\n        extract = range.extractContents()\n\n        code.appendChild(extract)\n\n        pre.appendChild(code)\n\n        start.parentNode.insertBefore(pre, start)\n\n        refreshCodeBlocks(mediumInstance)\n        mediumInstance.checkContentChanged(mediumInstance.elements[0])\n\n    refreshCodeBlocks = (mediumInstance) ->\n        return if !mediumInstance\n\n        # clean empty <p> content editable adds it when range.extractContents has been execute it\n        for mainChildren in mediumInstance.elements[0].children\n            if mainChildren && mainChildren.tagName.toLowerCase() == 'p' && !mainChildren.innerHTML.trim().length\n                mainChildren.parentNode.removeChild(mainChildren)\n\n        preList = mediumInstance.elements[0].querySelectorAll('pre')\n\n        for pre in preList\n            # prevent edit a pre\n            pre.setAttribute('contenteditable', false)\n\n            pre.setAttribute('title', $translate.instant(\"COMMON.WYSIWYG.DB_CLICK\"))\n\n            # prevent text selection in firefox\n            pre.addEventListener 'mousedown', (e) -> e.preventDefault()\n\n            if pre.nextElementSibling && pre.nextElementSibling.nodeName.toLowerCase() == 'p' && !pre.nextElementSibling.children.length\n                pre.nextElementSibling.appendChild(document.createElement('br'))\n\n            # add p after every pre\n            else if !pre.nextElementSibling || ['p', 'ul', 'h1', 'h2', 'h3'].indexOf(pre.nextElementSibling.nodeName.toLowerCase()) == -1\n                p = document.createElement('p')\n                p.appendChild(document.createElement('br'))\n\n                pre.parentNode.insertBefore(p, pre.nextSibling)\n\n    AlignRightButton = MediumEditor.extensions.button.extend({\n        name: 'rtl',\n        init: () ->\n            option = _.find this.base.options.toolbar.buttons, (it) ->\n                it.name == 'rtl'\n\n            this.button = this.document.createElement('button')\n            this.button.classList.add('medium-editor-action')\n            this.button.innerHTML = option.contentDefault || '<b>RTL</b>'\n            this.button.title = 'RTL'\n            this.on(this.button, 'click', this.handleClick.bind(this))\n\n        getButton: () ->\n            return this.button\n        handleClick: (event) ->\n            range = MediumEditor.selection.getSelectionRange(document)\n            if range.commonAncestorContainer.parentNode.style.textAlign == 'right'\n                document.execCommand('justifyLeft', false)\n            else\n                document.execCommand('justifyRight', false)\n\n    })\n\n    getIcon = (icon) ->\n        return \"\"\"<svg class=\"icon icon-#{icon}\">\n            <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"##{icon}\"></use>\n        </svg>\"\"\"\n\n    # MediumEditor extension to add <code>\n    CodeButton = MediumEditor.extensions.button.extend({\n        name: 'code',\n        init: () ->\n            option = _.find this.base.options.toolbar.buttons, (it) ->\n                it.name == 'code'\n\n            this.button = this.document.createElement('button')\n            this.button.classList.add('medium-editor-action')\n            this.button.innerHTML = option.contentDefault || '<b>Code</b>'\n            this.button.title = 'Code'\n            this.on(this.button, 'click', this.handleClick.bind(this))\n\n        getButton: () ->\n            return this.button\n\n        tagNames: ['code']\n\n        handleClick: (event) ->\n            range = MediumEditor.selection.getSelectionRange(self.document)\n\n            if isCodeBlockSelected(range, this.base)\n                removeCodeBlockAndHightlight(range.endContainer, this.base)\n            else\n                addCodeBlockAndHightlight(range, this.base)\n                removeSelections()\n\n            toolbar = this.base.getExtensionByName('toolbar')\n\n            if toolbar\n                toolbar.hideToolbar()\n\n    })\n\n    CustomPasteHandler = MediumEditor.extensions.paste.extend({\n        doPaste: (pastedHTML, pastedPlain, editable) ->\n            html = MediumEditor.util.htmlEntities(pastedPlain);\n\n            MediumEditor.util.insertHTMLCommand(this.document, html);\n    })\n\n    # bug\n    # <pre><code></code></pre> the enter key press doesn't work\n    oldIsBlockContainer = MediumEditor.util.isBlockContainer\n\n    MediumEditor.util.isBlockContainer = (element) ->\n        if !element\n            return oldIsBlockContainer(element)\n\n        if element.tagName\n            tagName = element.tagName\n        else\n            tagName = element.parentNode.tagName\n\n        if tagName.toLowerCase() == 'code'\n            return true\n\n        return oldIsBlockContainer(element)\n\n    link = ($scope, $el, $attrs) ->\n        mediumInstance = null\n        editorMedium = $el.find('.medium')\n        editorMarkdown = $el.find('.markdown')\n        codeBlockSelected = null\n\n        isEditOnly = !!$attrs.$attr.editonly\n        notPersist = !!$attrs.$attr.notPersist\n\n        $scope.required = !!$attrs.$attr.required\n        $scope.editMode = isEditOnly || false\n        $scope.mode = $storage.get('editor-mode', 'html')\n        $scope.markdown = ''\n        $scope.codeEditorVisible = false\n        $scope.codeLans = []\n\n        wysiwygCodeHightlighterService.getLanguages().then (codeLans) ->\n            $scope.codeLans = codeLans\n\n        setEditMode = (editMode) ->\n            $scope.editMode = editMode\n\n        setHtmlMedium = (markdown) ->\n            html = wysiwygService.getHTML(markdown)\n            editorMedium.html(html)\n            wysiwygCodeHightlighterService.addHightlighter(mediumInstance.elements[0])\n\n            if $scope.editMode\n                refreshCodeBlocks(mediumInstance)\n\n        $scope.saveSnippet = (lan, code) ->\n            $scope.codeEditorVisible = false\n            codeBlockSelected.innerText = code\n            codePre = codeBlockSelected.parentNode\n\n            if lan == 'remove-formating'\n                    codeBlockSelected.className = ''\n                    codePre.className = ''\n\n                    removeCodeBlockAndHightlight(codeBlockSelected, mediumInstance)\n            else if _.trim(code).length\n                if lan\n                    codeBlockSelected.className = 'language-' + lan\n                    codePre.className = 'language-' + lan\n                else\n                    codeBlockSelected.className = ''\n                    codePre.className = ''\n\n                wysiwygCodeHightlighterService.hightlightCode(codeBlockSelected)\n                mediumInstance.checkContentChanged(mediumInstance.elements[0])\n            else\n                codeBlockSelected.parentNode.parentNode.removeChild(codeBlockSelected.parentNode)\n                mediumInstance.checkContentChanged(mediumInstance.elements[0])\n\n            throttleChange()\n\n            return null\n\n        $scope.setMode = (mode) ->\n            $storage.set('editor-mode', mode)\n\n            if mode == 'markdown'\n                updateMarkdownWithCurrentHtml()\n            else\n                setHtmlMedium($scope.markdown)\n\n            $scope.mode = mode\n            mediumInstance.trigger('editableBlur', {}, editorMedium[0])\n\n        $scope.save = (e) ->\n            e.preventDefault() if e\n\n            if $scope.mode == 'html'\n                updateMarkdownWithCurrentHtml()\n\n            setHtmlMedium($scope.markdown)\n\n            return if $scope.required && !$scope.markdown.length\n\n            $scope.saving  = true\n            $scope.outdated = false\n\n            $scope.onSave({text: $scope.markdown, cb: saveEnd})\n\n            return\n\n        $scope.cancel = (e) ->\n            e.preventDefault() if e\n\n            if !isEditOnly\n                setEditMode(false)\n\n            if notPersist\n                clean()\n            else if $scope.mode == 'html'\n                setHtmlMedium($scope.content || null)\n\n            $scope.markdown = $scope.content\n\n            discardLocalStorage()\n            mediumInstance.trigger('blur', {}, editorMedium[0])\n            $scope.outdated = false\n            refreshCodeBlocks(mediumInstance)\n\n            $scope.onCancel()\n\n            return\n\n        clean = () ->\n            $scope.markdown = ''\n            editorMedium.html('')\n\n        saveEnd = () ->\n            $scope.saving  = false\n\n            if !isEditOnly\n                setEditMode(false)\n\n            if notPersist\n                clean()\n\n            discardLocalStorage()\n            mediumInstance.trigger('blur', {}, editorMedium[0])\n\n            analytics.trackEvent('develop', 'save wysiwyg', $scope.mode, 1)\n\n        uploadEnd = (name, url, type, id=null) ->\n            if id\n                url = \"#{url}#_taiga-refresh=#{type}:#{id}\"\n\n            if taiga.isImage(name)\n                mediumInstance.pasteHTML(\"<img alt='\" + name + \"' src='\" + url + \"' title='\" + name + \"' /><br/>\")\n            else\n                name = $('<div/>').text(name).html()\n                mediumInstance.pasteHTML(\"<a target='_blank' href='\" + url + \"'>\" + name + \"</a><br/>\")\n\n        uploadEndMarkdown = (name, url, type, id=null) ->\n            if id\n                url = \"#{url}#_taiga-refresh=#{type}:#{id}\"\n\n\n            if taiga.isImage(name)\n                $scope.markdown += \"\\n![#{name}](#{url} \\\"#{name}\\\")\\n\"\n            else\n                $scope.markdown += \"\\n[#{name}](#{url})\\n\"\n\n        isOutdated = () ->\n            store = $storage.get($scope.storageKey)\n\n            if store && store.version && store.version != $scope.version\n                return true\n\n            return false\n\n        isDraft = () ->\n            store = $storage.get($scope.storageKey)\n\n            if store\n                return true\n\n            return false\n\n        getCurrentContent = () ->\n            store = $storage.get($scope.storageKey)\n\n            if store\n                return store.text\n\n            return $scope.content\n\n        discardLocalStorage = () ->\n            $storage.remove($scope.storageKey)\n\n        $scope.cancelWithConfirmation = () ->\n            if $scope.content == $scope.markdown\n                $scope.cancel()\n                if document.activeElement.blur\n                    document.activeElement.blur()\n                document.body.click()\n\n                return null\n\n            title = $translate.instant(\"COMMON.CONFIRM_CLOSE_EDIT_MODE_TITLE\")\n            message = $translate.instant(\"COMMON.CONFIRM_CLOSE_EDIT_MODE_MESSAGE\")\n\n            $confirm.ask(title, null, message).then (askResponse) ->\n                $scope.cancel()\n                askResponse.finish()\n\n        # firefox adds br instead of new lines inside <code>, taiga must replace the br by \\n before sending to the server\n        replaceCodeBrToNl = () ->\n            html = $('<div></div>').html(editorMedium.html())\n            html.find('code br').replaceWith('\\n')\n\n            return html.html()\n\n        updateMarkdownWithCurrentHtml = () ->\n            html = replaceCodeBrToNl()\n            $scope.markdown = wysiwygService.getMarkdown(html)\n\n        localSave = (markdown) ->\n            if $scope.storageKey\n                store = {}\n                store.version = $scope.version || 0\n                store.text = markdown\n                $storage.set($scope.storageKey, store)\n\n        change = () ->\n            if $scope.mode == 'html'\n                updateMarkdownWithCurrentHtml()\n\n            localSave($scope.markdown)\n\n            $scope.onChange({markdown: $scope.markdown})\n\n        throttleChange = _.throttle(change, 200)\n\n        create = (text, editMode=false) ->\n            html = \"\"\n            if text.length\n                html = wysiwygService.getHTML(text)\n\n            promise = wysiwygService.refreshAttachmentURL(html)\n            promise.then (html) =>\n                editorMedium.html(html)\n\n                mediumInstance = new MediumEditor(editorMedium[0], {\n                    imageDragging: false,\n                    placeholder: {\n                        text: $scope.placeholder\n                    },\n                    toolbar: {\n                        buttons: [\n                            {\n                                name: 'bold',\n                                contentDefault: getIcon('editor-bold')\n                            },\n                            {\n                                name: 'italic',\n                                contentDefault: getIcon('editor-italic')\n                            },\n                            {\n                                name: 'strikethrough',\n                                contentDefault: getIcon('editor-cross-out')\n                            },\n                            {\n                                name: 'anchor',\n                                contentDefault: getIcon('editor-link')\n                            },\n                            {\n                                name: 'image',\n                                contentDefault: getIcon('editor-image')\n                            },\n                            {\n                                name: 'orderedlist',\n                                contentDefault: getIcon('editor-list-n')\n                            },\n                            {\n                                name: 'unorderedlist',\n                                contentDefault: getIcon('editor-list-o')\n                            },\n                            {\n                                name: 'h1',\n                                contentDefault: getIcon('editor-h1')\n                            },\n                            {\n                                name: 'h2',\n                                contentDefault: getIcon('editor-h2')\n                            },\n                            {\n                                name: 'h3',\n                                contentDefault: getIcon('editor-h3')\n                            },\n                            {\n                                name: 'quote',\n                                contentDefault: getIcon('editor-quote')\n                            },\n                            {\n                                name: 'removeFormat',\n                                contentDefault: getIcon('editor-no-format')\n                            },\n                            {\n                                name: 'rtl',\n                                contentDefault: getIcon('editor-rtl')\n                            },\n                            {\n                                name: 'code',\n                                contentDefault: getIcon('editor-code')\n                            }\n                        ]\n                    },\n                    extensions: {\n                        paste: new CustomPasteHandler(),\n                        code: new CodeButton(),\n                        autolist: new AutoList(),\n                        alignright: new AlignRightButton(),\n                        mediumMention: new MentionExtension({\n                            getItems: (mention, mentionCb) ->\n                                wysiwygMentionService.search(mention).then(mentionCb)\n                        })\n                    }\n                })\n\n                $scope.changeMarkdown = throttleChange\n\n                mediumInstance.subscribe 'editableInput', (e) ->\n                    $scope.$applyAsync(throttleChange)\n\n                mediumInstance.subscribe \"editableClick\", (e) ->\n                    r = new RegExp('^(?:[a-z]+:)?//', 'i')\n\n                    if e.target.href\n                        if r.test(e.target.getAttribute('href')) || e.target.getAttribute('target') == '_blank'\n                            e.stopPropagation()\n                            window.open(e.target.href)\n                        else\n                            $location.url(e.target.href)\n\n                mediumInstance.subscribe 'editableDrop', (event) ->\n                    $scope.onUploadFile({files: event.dataTransfer.files, cb: uploadEnd})\n\n                mediumInstance.subscribe 'editableKeydown', (e) ->\n                    code = if e.keyCode then e.keyCode else e.which\n\n                    mention = $('.medium-mention')\n\n                    if (code == 40 || code == 38) && mention.length\n                        e.stopPropagation()\n                        e.preventDefault()\n\n                        return\n\n                    if $scope.editMode && code == 27\n                        e.stopPropagation()\n                        $scope.$applyAsync($scope.cancelWithConfirmation)\n                    else if code == 27\n                        editorMedium.blur()\n\n                setEditMode(editMode)\n\n                $scope.$applyAsync () ->\n                    wysiwygCodeHightlighterService.addHightlighter(mediumInstance.elements[0])\n                    refreshCodeBlocks(mediumInstance)\n\n        $(editorMedium[0]).on 'mousedown', (e) ->\n            if e.target.href\n                e.preventDefault()\n                e.stopPropagation()\n            else\n                $scope.$applyAsync () ->\n                    if !$scope.editMode\n                        setEditMode(true)\n                        refreshCodeBlocks(mediumInstance)\n\n        $(editorMedium[0]).on 'dblclick', 'pre', (e) ->\n            $scope.$applyAsync () ->\n                $scope.codeEditorVisible = true\n\n                codeBlockSelected = e.currentTarget.querySelector('code')\n\n                $scope.currentCodeLanguage = wysiwygCodeHightlighterService.getLanguageInClassList(codeBlockSelected.classList)\n                $scope.code = codeBlockSelected.innerText\n\n        $(editorMarkdown).on \"dragover\", (e) ->\n            e.preventDefault()\n\n        $(editorMarkdown).on \"dragenter\", (e) ->\n            e.preventDefault()\n\n        $(editorMarkdown).on \"drop\", (e) ->\n            e.preventDefault()\n            $scope.onUploadFile({files: e.originalEvent.dataTransfer.files, cb: uploadEndMarkdown})\n\n        unwatch = $scope.$watch 'content', (content) ->\n            if !_.isUndefined(content)\n                $scope.outdated = isOutdated()\n\n                if !mediumInstance && isDraft()\n                    setEditMode(true)\n\n                if ($scope.markdown.length || content.length) && $scope.markdown == content\n                    return\n\n                content = getCurrentContent()\n\n                $scope.markdown = content\n\n                if mediumInstance\n                    mediumInstance.destroy()\n\n                if tgLoader.open()\n                    unwatchLoader = tgLoader.onEnd () ->\n                        create(content, $scope.editMode)\n                        unwatchLoader()\n                else\n                    create(content, $scope.editMode)\n\n                unwatch()\n\n        $scope.$on \"$destroy\", () ->\n            if mediumInstance\n                $(editorMedium[0]).off() if editorMedium.length\n                mediumInstance.destroy()\n\n    return {\n        templateUrl: \"common/components/wysiwyg-toolbar.html\",\n        scope: {\n            placeholder: '@',\n            version: '<',\n            storageKey: '<',\n            content: '<',\n            onCancel: '&',\n            onSave: '&',\n            onUploadFile: '&',\n            onChange: '&'\n        },\n        link: link\n    }\n\nangular.module(\"taigaComponents\").directive(\"tgWysiwyg\", [\n    \"$translate\",\n    \"$tgConfirm\",\n    \"$tgStorage\",\n    \"tgWysiwygService\",\n    \"animationFrame\",\n    \"tgLoader\",\n    \"tgWysiwygCodeHightlighterService\",\n    \"tgWysiwygMentionService\",\n    \"$tgAnalytics\",\n    \"$location\",\n    Medium\n])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: components/wysiwyg/wysiwyg.service.coffee\n###\n\nclass WysiwygService\n    @.$inject = [\n        \"tgWysiwygCodeHightlighterService\",\n        \"tgProjectService\",\n        \"$tgNavUrls\",\n        \"$tgEmojis\",\n        \"tgAttachmentsService\",\n        \"$q\",\n    ]\n    constructor: (@wysiwygCodeHightlighterService, @projectService, @navurls, @emojis, @attachmentsService, @q) ->\n        @.members = @projectService.project.get('members').toJS()  # Array of User objects\n        @.memberObjectMap = {}\n        for m in @.members\n            @.memberObjectMap[m.username] = m\n\n    searchEmojiByName: (name) ->\n        return @emojis.searchByName(name)\n\n    pipeLinks: (text) ->\n        return text.replace /\\[\\[(.*?)\\]\\]/g, (match, p1, offset, str) ->\n            linkParams = p1.split('|')\n\n            link = linkParams[0]\n            title = linkParams[1] || linkParams[0]\n\n            return '[' + title + '](' + link  + ')'\n\n    replaceUrls: (html) ->\n        el = document.createElement( 'html' )\n        el.innerHTML = html\n\n        links = el.querySelectorAll('a')\n\n        for link in links\n            if link.getAttribute('href').indexOf('/profile/') != -1\n                # https://github.com/taigaio/taiga-front/issues/1859 (Show full name in user mentions autocompletion)\n                username = link.getAttribute('href').split('/profile/')[1]  # Override username <-> full_name\n                link.innerText = '@' + username\n                link.parentNode.replaceChild(document.createTextNode(link.innerText), link)\n            else if link.getAttribute('href').indexOf('/t/') != -1\n                link.parentNode.replaceChild(document.createTextNode(link.innerText), link)\n\n        return el.innerHTML\n\n    getAttachmentData: (el, tokens, attr) ->\n        deferred = @q.defer()\n        @attachmentsService.get(tokens[0], tokens[1]).then (response) ->\n            el.setAttribute(attr, \"#{response.data.url}#_taiga-refresh=#{tokens[0]}:#{tokens[1]}\")\n            deferred.resolve(el)\n\n        return deferred.promise\n\n    refreshAttachmentURL: (html) ->\n        el = document.createElement( 'html' )\n        el.innerHTML = html\n        regex = /#_taiga-refresh=([a-zA-Z]*\\:\\d+)/\n\n        links = {\n            \"elements\": el.querySelectorAll('a'),\n            \"attr\": \"href\",\n        }\n        images = {\n            \"elements\": el.querySelectorAll('img'),\n            \"attr\": \"src\",\n        }\n\n        deferred = @q.defer()\n        promises = []\n        _.map [links, images], (tag) =>\n            _.map tag.elements, (e) =>\n                if e.getAttribute(tag.attr).indexOf('#_taiga-refresh=') != -1\n                    match = e.getAttribute(tag.attr).match(regex)\n                    if match\n                        tokens = match[1].split(\":\")\n                        promises.push(@.getAttachmentData(e, tokens, tag.attr))\n\n        @q.all(promises).then ->\n            deferred.resolve(el.innerHTML)\n\n        return deferred.promise\n\n    searchWikiLinks: (html) ->\n        el = document.createElement( 'html' )\n        el.innerHTML = html\n\n        links = el.querySelectorAll('a')\n\n        for link in links\n            if link.getAttribute('href').indexOf('/') == -1\n                url = @navurls.resolve('project-wiki-page', {\n                    project: @projectService.project.get('slug'),\n                    slug: link.getAttribute('href')\n                })\n\n                link.setAttribute('href', url)\n\n        return el.innerHTML\n\n    removeTrailingListBr: (text) ->\n        return text.replace(/<li>(.*?)<br><\\/li>/g, '<li>$1</li>')\n\n    getMarkdown: (html) ->\n        # https://github.com/yabwe/medium-editor/issues/543\n        cleanIssueConverter = {\n            filter: ['html', 'body', 'span', 'div'],\n            replacement: (innerHTML) ->\n                return innerHTML\n        }\n\n        codeLanguageConverter = {\n            filter:  (node) ->\n                return node.nodeName == 'PRE' &&\n                  node.firstChild &&\n                  node.firstChild.nodeName == 'CODE'\n            replacement: (content, node) =>\n                lan = @wysiwygCodeHightlighterService.getLanguageInClassList(node.firstChild.classList)\n                lan = '' if !lan\n\n                return '\\n\\n```' + lan + '\\n' + _.trim(node.firstChild.textContent) + '\\n```\\n\\n'\n         }\n\n        html = html.replace(/&nbsp;(<\\/.*>)/g, \"$1\")\n        html = @emojis.replaceImgsByEmojiName(html)\n        html = @.replaceUrls(html)\n        html = @.removeTrailingListBr(html)\n\n        markdown = toMarkdown(html, {\n            gfm: true,\n            converters: [cleanIssueConverter, codeLanguageConverter]\n        })\n\n        return markdown\n\n    parseMentionMatches: (text) ->\n        serviceName = 'twitter'\n        tagBuilder = this.tagBuilder\n        matches = []\n\n        regex = /@[^\\s]{1,50}[^.\\s]/g\n        m = regex.exec(text)\n\n        while m != null\n            offset = m.index\n            prevChar = text.charAt( offset - 1 )\n\n            if m.index == regex.lastIndex\n                regex.lastIndex++\n\n            m.forEach (match, groupIndex) ->\n                matches.push( new Autolinker.match.Mention({\n                    tagBuilder    : tagBuilder,\n                    matchedText   : match,\n                    offset        : offset,\n                    serviceName   : serviceName,\n                    mention       : match.slice(1)\n                }))\n\n            m = regex.exec(text)\n\n        return matches\n\n    autoLinkHTML: (html) ->\n        # override Autolink parser\n\n        matchRegexStr = String(Autolinker.matcher.Mention.prototype.matcherRegexes.twitter)\n        if matchRegexStr.indexOf('.') == -1\n            matchRegexStr = '@[^\\s]{1,50}[^.\\s]'\n\n        autolinker = new Autolinker({\n            mention: 'twitter',\n            hashtag: 'twitter',\n            replaceFn: (match) =>\n                if  match.getType() == 'mention'\n                    profileUrl = @navurls.resolve('user-profile', {\n                        project: @projectService.project.get('slug'),\n                        username: match.getMention()\n                    })\n                    if @.memberObjectMap.hasOwnProperty(match.getMention())\n                        member = @.memberObjectMap[match.getMention()]\n                        if member.full_name\n                            return '<a class=\"autolink\" href=\"' + profileUrl + '\">@' + member.full_name + '</a>'\n                    else\n                        return '<a class=\"autolink\" href=\"' + profileUrl + '\">@' + match.getMention() + '</a>'\n\n                else if match.getType() == 'hashtag'\n                    url = @navurls.resolve('project-detail-ref', {\n                        project: @projectService.project.get('slug'),\n                        ref: match.getHashtag()\n                    })\n\n                    return '<a class=\"autolink\" href=\"' + url + '\">#' + match.getHashtag() + '</a>'\n        })\n\n        Autolinker.matcher.Mention.prototype.parseMatches = @.parseMentionMatches.bind(autolinker)\n\n        return autolinker.link(html)\n\n    getHTML: (text) ->\n        return \"\" if !text || !text.length\n\n        options = {\n            breaks: true\n        }\n\n        text = @emojis.replaceEmojiNameByImgs(text)\n        text = @.pipeLinks(text)\n\n        md = window.markdownit({\n            breaks: true\n        })\n\n        md.use(window.markdownitLazyHeaders)\n        result = md.render(text)\n        result = @.searchWikiLinks(result)\n        result = @.autoLinkHTML(result)\n\n        return result\n\nangular.module(\"taigaComponents\")\n    .service(\"tgWysiwygService\", WysiwygService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: discover/components/discover-home-order-by/discover-home-order-by.controller.coffee\n###\n\nclass DiscoverHomeOrderByController\n    @.$inject = [\n        '$translate'\n    ]\n\n    constructor: (@translate) ->\n        @.is_open = false\n\n        @.texts = {\n            week: @translate.instant('DISCOVER.FILTERS.WEEK'),\n            month: @translate.instant('DISCOVER.FILTERS.MONTH'),\n            year: @translate.instant('DISCOVER.FILTERS.YEAR'),\n            all: @translate.instant('DISCOVER.FILTERS.ALL_TIME')\n        }\n\n    currentText: () ->\n        return @.texts[@.currentOrderBy]\n\n    open: () ->\n        @.is_open = true\n\n    close: () ->\n        @.is_open = false\n\n    orderBy: (type) ->\n        @.currentOrderBy = type\n        @.is_open = false\n        @.onChange({orderBy: @.currentOrderBy})\n\nangular.module(\"taigaDiscover\").controller(\"DiscoverHomeOrderBy\", DiscoverHomeOrderByController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: discover/components/discover-home-order-by/discover-home-order-by.directive.coffee\n###\n\nDiscoverHomeOrderByDirective = () ->\n    link = (scope, el, attrs) ->\n\n    return {\n        controller: \"DiscoverHomeOrderBy\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        templateUrl: \"discover/components/discover-home-order-by/discover-home-order-by.html\",\n        scope: {\n            currentOrderBy: \"=orderBy\",\n            onChange: \"&\"\n        },\n        link: link\n    }\n\nDiscoverHomeOrderByDirective.$inject = []\n\nangular.module(\"taigaDiscover\").directive(\"tgDiscoverHomeOrderBy\", DiscoverHomeOrderByDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: discover/components/discover-search-bar/discover-search-bar.controller.coffee\n###\n\nclass DiscoverSearchBarController\n    @.$inject = [\n        'tgDiscoverProjectsService'\n    ]\n\n    constructor: (@discoverProjectsService) ->\n        taiga.defineImmutableProperty @, 'projects', () => return @discoverProjectsService.projectsCount\n\n        @discoverProjectsService.fetchStats()\n\n    selectFilter: (filter) ->\n        @.onChange({filter: filter, q: @.q})\n\n    submitFilter: ->\n        @.onChange({filter: @.filter, q: @.q})\n\nangular.module(\"taigaDiscover\").controller(\"DiscoverSearchBar\", DiscoverSearchBarController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: discover/components/discover-search-bar/discover-search-bar.directive.coffee\n###\n\nDiscoverSearchBarDirective = () ->\n    link = (scope, el, attrs, ctrl) ->\n\n    return {\n        controller: \"DiscoverSearchBar\",\n        controllerAs: \"vm\"\n        templateUrl: 'discover/components/discover-search-bar/discover-search-bar.html',\n        bindToController: true,\n        scope: {\n            q: \"=\",\n            filter: \"=\",\n            onChange: \"&\"\n        },\n        compile: (element, attrs) ->\n            if !attrs.q\n                attrs.q = ''\n        link: link\n    }\n\nDiscoverSearchBarDirective.$inject = []\n\nangular.module('taigaDiscover').directive('tgDiscoverSearchBar', DiscoverSearchBarDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: discover/components/discover-search-list-header/discover-search-list-header.controller.coffee\n###\n\nclass DiscoverSearchListHeaderController\n    @.$inject = []\n\n    constructor: () ->\n        @.like_is_open = @.orderBy.indexOf('-total_fans') == 0\n        @.activity_is_open = @.orderBy.indexOf('-total_activity') == 0\n\n    openLike: () ->\n        @.like_is_open = true\n        @.activity_is_open = false\n\n        @.setOrderBy('-total_fans_last_week')\n\n    openActivity: () ->\n        @.activity_is_open = true\n        @.like_is_open = false\n\n        @.setOrderBy('-total_activity_last_week')\n\n    setOrderBy: (type = '') ->\n        if !type\n            @.like_is_open = false\n            @.activity_is_open = false\n\n        @.onChange({orderBy: type})\n\nangular.module(\"taigaDiscover\").controller(\"DiscoverSearchListHeader\", DiscoverSearchListHeaderController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: discover/components/discover-search-list-header/discover-search-list-header.directive.coffee\n###\n\nDiscoverSearchListHeaderDirective = () ->\n    link = (scope, el, attrs) ->\n\n    return {\n        controller: \"DiscoverSearchListHeader\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        templateUrl: \"discover/components/discover-search-list-header/discover-search-list-header.html\",\n        scope: {\n            onChange: \"&\",\n            orderBy: \"=\"\n        },\n        link: link\n    }\n\nDiscoverSearchListHeaderDirective.$inject = []\n\nangular.module(\"taigaDiscover\").directive(\"tgDiscoverSearchListHeader\", DiscoverSearchListHeaderDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: discover/components/featured-projects/featured-projects.controller.coffee\n###\n\nclass FeaturedProjectsController\n    @.$inject = [\n        \"tgDiscoverProjectsService\"\n    ]\n\n    constructor: (@discoverProjectsService) ->\n        taiga.defineImmutableProperty @, \"featured\", () => return @discoverProjectsService.featured\n\n        @discoverProjectsService.fetchFeatured()\n\nangular.module(\"taigaDiscover\").controller(\"FeaturedProjects\", FeaturedProjectsController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: discover/components/featured-projects/featured-projects.directive.coffee\n###\n\nFeaturedProjectsDirective = () ->\n    link = (scope, el, attrs) ->\n\n    return {\n        controller: \"FeaturedProjects\"\n        controllerAs: \"vm\",\n        templateUrl: \"discover/components/featured-projects/featured-projects.html\",\n        scope: {},\n        link: link\n    }\n\nFeaturedProjectsDirective.$inject = []\n\nangular.module(\"taigaDiscover\").directive(\"tgFeaturedProjects\", FeaturedProjectsDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: discover/components/highlighted/highlighted.directive.coffee\n###\n\nHighlightedDirective = () ->\n    return {\n        templateUrl: \"discover/components/highlighted/highlighted.html\",\n        scope: {\n            loading: \"=\",\n            highlighted: \"=\",\n            orderBy: \"=\"\n        }\n    }\n\nHighlightedDirective.$inject = []\n\nangular.module(\"taigaDiscover\").directive(\"tgHighlighted\", HighlightedDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: discover/components/most-active/most-active.controller.coffee\n###\n\nclass MostActiveController\n    @.$inject = [\n        \"tgDiscoverProjectsService\"\n    ]\n\n    constructor: (@discoverProjectsService) ->\n        taiga.defineImmutableProperty @, \"highlighted\", () => return @discoverProjectsService.mostActive\n\n        @.currentOrderBy = 'week'\n        @.order_by = @.getOrderBy()\n\n    fetch: () ->\n        @.loading = true\n        @.order_by = @.getOrderBy()\n\n        return @discoverProjectsService.fetchMostActive({order_by: @.order_by}).then () =>\n            @.loading = false\n\n    orderBy: (type) ->\n        @.currentOrderBy = type\n\n        @.fetch()\n\n    getOrderBy: (type) ->\n        if @.currentOrderBy == 'all'\n            return '-total_activity'\n        else\n            return '-total_activity_last_' + @.currentOrderBy\n\nangular.module(\"taigaDiscover\").controller(\"MostActive\", MostActiveController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: discover/components/most-active/most-active.directive.coffee\n###\n\nMostActiveDirective = () ->\n    link = (scope, el, attrs, ctrl) ->\n        ctrl.fetch()\n\n    return {\n        controller: \"MostActive\"\n        controllerAs: \"vm\",\n        templateUrl: \"discover/components/most-active/most-active.html\",\n        scope: {},\n        link: link\n    }\n\nMostActiveDirective.$inject = []\n\nangular.module(\"taigaDiscover\").directive(\"tgMostActive\", MostActiveDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: discover/components/most-liked/most-liked.controller.coffee\n###\n\nclass MostLikedController\n    @.$inject = [\n        \"tgDiscoverProjectsService\"\n    ]\n\n    constructor: (@discoverProjectsService) ->\n        taiga.defineImmutableProperty @, \"highlighted\", () => return @discoverProjectsService.mostLiked\n\n        @.currentOrderBy = 'week'\n        @.order_by = @.getOrderBy()\n\n    fetch: () ->\n        @.loading = true\n        @.order_by = @.getOrderBy()\n\n        @discoverProjectsService.fetchMostLiked({order_by: @.order_by}).then () =>\n            @.loading = false\n\n    orderBy: (type) ->\n        @.currentOrderBy = type\n\n        @.fetch()\n\n    getOrderBy: () ->\n        if @.currentOrderBy == 'all'\n            return '-total_fans'\n        else\n            return '-total_fans_last_' + @.currentOrderBy\n\nangular.module(\"taigaDiscover\").controller(\"MostLiked\", MostLikedController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: discover/components/most-liked/most-liked.directive.coffee\n###\n\nMostLikedDirective = () ->\n    link = (scope, el, attrs, ctrl) ->\n        ctrl.fetch()\n\n    return {\n        controller: \"MostLiked\"\n        controllerAs: \"vm\",\n        templateUrl: \"discover/components/most-liked/most-liked.html\",\n        scope: {},\n        link: link\n    }\n\nMostLikedDirective.$inject = []\n\nangular.module(\"taigaDiscover\").directive(\"tgMostLiked\", MostLikedDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: discover/discover-home/discover-home.controller.coffee\n###\n\nclass DiscoverHomeController\n    @.$inject = [\n        '$tgLocation',\n        '$tgNavUrls',\n        'tgAppMetaService',\n        '$translate'\n    ]\n\n    constructor: (@location, @navUrls, @appMetaService, @translate) ->\n        title = @translate.instant(\"DISCOVER.PAGE_TITLE\")\n        description = @translate.instant(\"DISCOVER.PAGE_DESCRIPTION\")\n        @appMetaService.setAll(title, description)\n\n    onSubmit: (q) ->\n        url = @navUrls.resolve('discover-search')\n\n        @location.search('text', q).path(url)\n\nangular.module(\"taigaDiscover\").controller(\"DiscoverHome\", DiscoverHomeController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: discover/discover-search/discover-search.controller.coffee\n###\n\nclass DiscoverSearchController\n    @.$inject = [\n        '$routeParams',\n        'tgDiscoverProjectsService',\n        '$route',\n        '$tgLocation',\n        '$tgAnalytics',\n        'tgAppMetaService',\n        '$translate'\n    ]\n\n    constructor: (@routeParams, @discoverProjectsService, @route, @location, @analytics, @appMetaService, @translate) ->\n        @.page = 1\n\n        taiga.defineImmutableProperty @, \"searchResult\", () => return @discoverProjectsService.searchResult\n        taiga.defineImmutableProperty @, \"nextSearchPage\", () => return @discoverProjectsService.nextSearchPage\n\n        @.q = @routeParams.text\n        @.filter = @routeParams.filter || 'all'\n        @.orderBy = @routeParams['order_by'] || ''\n\n        @.loadingGlobal = false\n        @.loadingList = false\n        @.loadingPagination = false\n\n        title = @translate.instant(\"DISCOVER.SEARCH.PAGE_TITLE\")\n        description = @translate.instant(\"DISCOVER.SEARCH.PAGE_DESCRIPTION\")\n        @appMetaService.setAll(title, description)\n        @analytics.trackPage(@location.url(), \"Discover Search\")\n\n    fetch: () ->\n        @.page = 1\n\n        @discoverProjectsService.resetSearchList()\n\n        return @.search()\n\n    fetchByGlobalSearch: () ->\n        return if @.loadingGlobal\n\n        @.loadingGlobal = true\n\n        @.fetch().then () => @.loadingGlobal = false\n\n    fetchByOrderBy: () ->\n        return if @.loadingList\n\n        @.loadingList = true\n\n        @.fetch().then () => @.loadingList = false\n\n    showMore: () ->\n        return if @.loadingPagination\n\n        @.loadingPagination = true\n\n        @.page++\n\n        return @.search().then () => @.loadingPagination = false\n\n    search: () ->\n        filter = @.getFilter()\n\n        params = {\n            page: @.page,\n            q: @.q,\n            order_by: @.orderBy\n        }\n\n        _.assign(params, filter)\n\n        return @discoverProjectsService.fetchSearch(params)\n\n    getFilter: () ->\n        if @.filter == 'people'\n            return {is_looking_for_people: true}\n        else if @.filter == 'scrum'\n            return {is_backlog_activated: true}\n        else if @.filter == 'kanban'\n            return {is_kanban_activated: true}\n\n        return {}\n\n    onChangeFilter: (filter, q) ->\n        @.filter = filter\n        @.q = q\n\n        @route.updateParams({\n            filter: @.filter,\n            text: @.q\n        })\n        @analytics.trackPage(@location.url(), \"Discover Search\")\n\n        @.fetchByGlobalSearch()\n\n    onChangeOrder: (orderBy) ->\n        @.orderBy = orderBy\n\n        @route.updateParams({\n            order_by: orderBy\n        })\n        @analytics.trackPage(@location.url(), \"Discover Search\")\n\n        @.fetchByOrderBy()\n\nangular.module(\"taigaDiscover\").controller(\"DiscoverSearch\", DiscoverSearchController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: discover/discover-search/discover-search.directive.coffee\n###\n\nDiscoverSearchDirective = () ->\n    link = (scope, element, attrs, ctrl) ->\n        ctrl.fetch()\n\n    return {\n        controller: \"DiscoverSearch\",\n        controllerAs: \"vm\"\n        link: link\n    }\n\nDiscoverSearchDirective.$inject = []\n\nangular.module(\"taigaDiscover\").directive(\"tgDiscoverSearch\", DiscoverSearchDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: discover/services/discover-projects.service.coffee\n###\n\ntaiga = @.taiga\n\nclass DiscoverProjectsService extends taiga.Service\n    @.$inject = [\n        \"tgResources\",\n        \"tgProjectsService\"\n    ]\n\n    _discoverParams = {\n        discover_mode: true\n    }\n\n    constructor: (@rs, @projectsService) ->\n        @._mostLiked = Immutable.List()\n        @._mostActive = Immutable.List()\n        @._featured = Immutable.List()\n        @._searchResult = Immutable.List()\n        @._projectsCount = 0\n\n        @.decorate = @projectsService._decorate.bind(@projectsService)\n\n        taiga.defineImmutableProperty @, \"mostLiked\", () => return @._mostLiked\n        taiga.defineImmutableProperty @, \"mostActive\", () => return @._mostActive\n        taiga.defineImmutableProperty @, \"featured\", () => return @._featured\n        taiga.defineImmutableProperty @, \"searchResult\", () => return @._searchResult\n        taiga.defineImmutableProperty @, \"nextSearchPage\", () => return @._nextSearchPage\n        taiga.defineImmutableProperty @, \"projectsCount\", () => return @._projectsCount\n\n    fetchMostLiked: (params) ->\n        _params = _.extend({}, _discoverParams, params)\n        return @rs.projects.getProjects(_params, false)\n            .then (result) =>\n                data = result.data.slice(0, 5)\n\n                projects = Immutable.fromJS(data)\n                projects = projects.map(@.decorate)\n\n                @._mostLiked = projects\n\n    fetchMostActive: (params) ->\n        _params = _.extend({}, _discoverParams, params)\n        return @rs.projects.getProjects(_params, false)\n            .then (result) =>\n                data = result.data.slice(0, 5)\n\n                projects = Immutable.fromJS(data)\n                projects = projects.map(@.decorate)\n\n                @._mostActive = projects\n\n    fetchFeatured: () ->\n        _params = _.extend({}, _discoverParams)\n        _params.is_featured = true\n\n        return @rs.projects.getProjects(_params, false)\n            .then (result) =>\n                data = result.data.slice(0, 4)\n\n                projects = Immutable.fromJS(data)\n                projects = projects.map(@.decorate)\n\n                @._featured = projects\n\n    resetSearchList: () ->\n        @._searchResult = Immutable.List()\n\n    fetchStats: () ->\n        return @rs.stats.discover().then (discover) =>\n            @._projectsCount = discover.getIn(['projects', 'total'])\n\n    fetchSearch: (params) ->\n        _params = _.extend({}, _discoverParams, params)\n        return @rs.projects.getProjects(_params)\n            .then (result) =>\n                @._nextSearchPage = !!result.headers('X-Pagination-Next')\n\n                projects = Immutable.fromJS(result.data)\n                projects = projects.map(@.decorate)\n\n                @._searchResult = @._searchResult.concat(projects)\n\nangular.module(\"taigaDiscover\").service(\"tgDiscoverProjectsService\", DiscoverProjectsService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: epics/create-epic/create-epic.controller.coffee\n###\n\ntaiga = @.taiga\ntrim = taiga.trim\ngetRandomDefaultColor = taiga.getRandomDefaultColor\n\n\nclass CreateEpicController\n    @.$inject = [\n        \"$tgConfirm\"\n        \"tgProjectService\",\n        \"tgEpicsService\",\n        \"$tgAnalytics\"\n    ]\n\n    constructor: (@confirm, @projectService, @epicsService, @analytics) ->\n        # NOTE: To use Checksley setFormErrors() and validateForm()\n        #       are defined in the directive.\n\n        # NOTE: We use project as no inmutable object to make\n        #       the code compatible with the old code\n        @.project = @projectService.project.toJS()\n\n        @.newEpic = {\n            color: getRandomDefaultColor()\n            status: @.project.default_epic_status\n            tags: []\n        }\n        @.attachments = Immutable.List()\n\n        @.loading = false\n\n    createEpic: () ->\n        return if not @.validateForm()\n\n        @.loading = true\n\n        @epicsService.createEpic(@.newEpic, @.attachments)\n            .then (response) => # On success\n                @analytics.trackEvent(\"epic\", \"create\", \"create epic\", 1)\n                @.onCreateEpic()\n                @.loading = false\n            .catch (response) => # On error\n                @.loading = false\n                @.setFormErrors(response.data)\n                if response.data._error_message\n                    @confirm.notify(\"error\", response.data._error_message)\n\n    # Color selector\n    selectColor: (color) ->\n        @.newEpic.color = color\n\n    # Tags\n    addTag: (name, color) ->\n        name = trim(name.toLowerCase())\n\n        if not _.find(@.newEpic.tags, (it) -> it[0] == name)\n            @.newEpic.tags.push([name, color])\n\n    deleteTag: (tag) ->\n        _.remove @.newEpic.tags, (it) -> it[0] == tag[0]\n\n    # Attachments\n    addAttachment: (attachment) ->\n        @.attachments.push(attachment)\n\nangular.module(\"taigaEpics\").controller(\"CreateEpicCtrl\", CreateEpicController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: epics/create-epic/create-epic.directive.coffee\n###\n\nCreateEpicDirective = () ->\n    link = (scope, el, attrs, ctrl) ->\n        form = el.find(\"form\").checksley()\n\n        ctrl.validateForm = =>\n            return form.validate()\n\n        ctrl.setFormErrors = (errors) =>\n            form.setErrors(errors)\n\n    return {\n        link: link,\n        templateUrl:\"epics/create-epic/create-epic.html\",\n        controller: \"CreateEpicCtrl\",\n        controllerAs: \"vm\",\n        bindToController: {\n            onCreateEpic: '&'\n        },\n        scope: {}\n    }\n\nangular.module('taigaEpics').directive(\"tgCreateEpic\", CreateEpicDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: epics/dashboard/epic-row/epic-row.controller.coffee\n###\n\nclass EpicRowController\n    @.$inject = [\n        \"$tgConfirm\",\n        \"tgProjectService\",\n        \"tgEpicsService\"\n    ]\n\n    constructor: (@confirm, @projectService, @epicsService) ->\n        @.displayUserStories = false\n        @.displayAssignedTo = false\n        @.displayStatusList = false\n        @.loadingStatus = false\n\n        # NOTE: We use project as no inmutable object to make\n        #       the code compatible with the old code\n        @.project = @projectService.project.toJS()\n\n        @._calculateProgressBar()\n\n    _calculateProgressBar: () ->\n        if @.epic.getIn(['status_extra_info', 'is_closed']) == true\n            @.percentage = \"100%\"\n        else\n            progress = @.epic.getIn(['user_stories_counts', 'progress'])\n            total = @.epic.getIn(['user_stories_counts', 'total'])\n            if total == 0\n                @.percentage = \"0%\"\n            else\n                @.percentage = \"#{progress * 100 / total}%\"\n\n    canEditEpics: () ->\n        return @projectService.hasPermission(\"modify_epic\")\n\n    toggleUserStoryList: () ->\n        if !@.displayUserStories\n            @epicsService.listRelatedUserStories(@.epic)\n                .then (userStories) =>\n                    @.epicStories = userStories\n                    @.displayUserStories = true\n                .catch =>\n                    @confirm.notify('error')\n        else\n            @.displayUserStories = false\n\n    updateStatus: (statusId) ->\n        @.displayStatusList = false\n        @.loadingStatus = true\n        return @epicsService.updateEpicStatus(@.epic, statusId)\n            .catch () =>\n                @confirm.notify('error')\n            .finally () =>\n                @.loadingStatus = false\n\n    updateAssignedTo: (member) ->\n        @.assignLoader = true\n        return @epicsService.updateEpicAssignedTo(@.epic, member?.id or null)\n            .catch () =>\n                @confirm.notify('error')\n            .then () =>\n                @.assignLoader = false\n\nangular.module(\"taigaEpics\").controller(\"EpicRowCtrl\", EpicRowController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: epics/dashboard/epic-row/epic-row.directive.coffee\n###\n\nEpicRowDirective = () ->\n    return {\n        templateUrl:\"epics/dashboard/epic-row/epic-row.html\",\n        controller: \"EpicRowCtrl\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        scope: {\n            epic: '=',\n            options: '='\n        }\n    }\n\nangular.module('taigaEpics').directive(\"tgEpicRow\", EpicRowDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: epics/dashboard/epics-dashboard.controller.coffee\n###\n\ntaiga = @.taiga\n\n\nclass EpicsDashboardController\n    @.$inject = [\n        \"$routeParams\",\n        \"tgErrorHandlingService\",\n        \"tgLightboxFactory\",\n        \"lightboxService\",\n        \"$tgConfirm\",\n        \"tgProjectService\",\n        \"tgEpicsService\",\n        \"tgAppMetaService\",\n        \"$translate\"\n    ]\n\n    constructor: (@params, @errorHandlingService, @lightboxFactory, @lightboxService,\n                  @confirm, @projectService, @epicsService, @appMetaService, @translate) ->\n\n        @.sectionName = \"EPICS.SECTION_NAME\"\n\n        taiga.defineImmutableProperty @, 'project', () => return @projectService.project\n        taiga.defineImmutableProperty @, 'epics', () => return @epicsService.epics\n\n        @appMetaService.setfn @._setMeta.bind(this)\n\n    _setMeta: () ->\n        return null if !@.project\n\n        ctx = {\n            projectName: @.project.get(\"name\")\n            projectDescription: @.project.get(\"description\")\n        }\n\n        return {\n            title: @translate.instant(\"EPICS.PAGE_TITLE\", ctx)\n            description: @translate.instant(\"EPICS.PAGE_DESCRIPTION\", ctx)\n        }\n\n    loadInitialData: () ->\n        @epicsService.clear()\n        return @projectService.setProjectBySlug(@params.pslug)\n            .then () =>\n                if not @projectService.isEpicsDashboardEnabled()\n                    return @errorHandlingService.notFound()\n                if not @projectService.hasPermission(\"view_epics\")\n                    return @errorHandlingService.permissionDenied()\n\n                return @epicsService.fetchEpics()\n\n    canCreateEpics: () ->\n        return @projectService.hasPermission(\"add_epic\")\n\n    onCreateEpic: () ->\n        onCreateEpic =  () =>\n            @lightboxService.closeAll()\n            @confirm.notify(\"success\")\n            return # To prevent error https://docs.angularjs.org/error/$parse/isecdom?p0=onCreateEpic()\n\n        @lightboxFactory.create('tg-create-epic', {\n            \"class\": \"lightbox lightbox-create-epic open\"\n            \"on-create-epic\": \"onCreateEpic()\"\n        }, {\n            \"onCreateEpic\": onCreateEpic.bind(this)\n        })\n\nangular.module(\"taigaEpics\").controller(\"EpicsDashboardCtrl\", EpicsDashboardController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: epics/dashboard/epics-sortable/epics-sortable.directive.coffee\n###\n\nEpicsSortableDirective = ($parse, projectService) ->\n    link = (scope, el, attrs) ->\n        return if not projectService.hasPermission(\"modify_epic\")\n\n        callback = $parse(attrs.tgEpicsSortable)\n\n        drake = dragula([el[0]], {\n            copySortSource: false\n            copy: false\n            mirrorContainer: el[0]\n            moves: (item) ->\n                return $(item).is('div.epics-table-body-row')\n        })\n\n        drake.on 'dragend', (item) ->\n            itemEl = $(item)\n\n            epic = itemEl.scope().epic\n            newIndex = itemEl.index()\n\n            scope.$apply () ->\n                callback(scope, {epic: epic, newIndex: newIndex})\n\n        scroll = autoScroll(window, {\n            margin: 20,\n            pixels: 30,\n            scrollWhenOutside: true,\n            autoScroll: () ->\n                return this.down && drake.dragging\n        })\n\n        scope.$on \"$destroy\", ->\n            el.off()\n            drake.destroy()\n\n    return {\n        link: link\n    }\n\nEpicsSortableDirective.$inject = [\n    \"$parse\",\n    \"tgProjectService\"\n]\n\nangular.module(\"taigaComponents\").directive(\"tgEpicsSortable\", EpicsSortableDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: epics/dashboard/epics-table/epics-table.controller.coffee\n###\n\ntaiga = @.taiga\ngenerateHash = @.taiga.generateHash\n\nclass EpicsTableController\n    @.$inject = [\n        \"$tgConfirm\",\n        \"tgEpicsService\",\n        \"$timeout\",\n        \"$tgStorage\",\n        \"tgProjectService\"\n    ]\n\n    constructor: (@confirm, @epicsService, @timeout, @storage, @projectService) ->\n        @.hash = generateHash([@projectService.project.get('id'), 'epics'])\n        @.displayOptions = false\n        @.displayVotes = true\n        @.options = @storage.get(@.hash, {\n            votes: true,\n            name: true,\n            project: true,\n            sprint: true,\n            assigned: true,\n            status: true,\n            progress: true,\n            closed: true,\n            closed_us: true,\n        })\n\n        taiga.defineImmutableProperty @, 'epics', () => return @epicsService.epics\n        taiga.defineImmutableProperty @, 'disabledEpicsPagination', () => return @epicsService._disablePagination\n        taiga.defineImmutableProperty @, 'loadingEpics', () => return @epicsService._loadingEpics\n\n    toggleEpicTableOptions: () ->\n        @.displayOptions = !@.displayOptions\n\n    reorderEpic: (epic, newIndex) ->\n        if epic.get('epics_order') == newIndex\n            return null\n\n        @epicsService.reorderEpic(epic, newIndex)\n            .then null, () => # on error\n                @confirm.notify(\"error\")\n\n    nextPage: () ->\n        @epicsService.nextPage()\n\n    hoverEpicTableOption: () ->\n        if @.timer\n            @timeout.cancel(@.timer)\n\n    hideEpicTableOption: () ->\n        return @.timer = @timeout (=> @.displayOptions = false), 400\n\n    updateViewOptions: () ->\n        @storage.set(@.hash, @.options)\n\nangular.module(\"taigaEpics\").controller(\"EpicsTableCtrl\", EpicsTableController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: epics/dashboard/epics-table/epics-table.directive.coffee\n###\n\nEpicsTableDirective = () ->\n    return {\n        templateUrl:\"epics/dashboard/epics-table/epics-table.html\",\n        controller: \"EpicsTableCtrl\",\n        controllerAs: \"vm\",\n        scope: {}\n    }\n\n\nangular.module('taigaEpics').directive(\"tgEpicsTable\", EpicsTableDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: epics/dashboard/story-row/story-row.controller.coffee\n###\n\nmodule = angular.module(\"taigaEpics\")\n\nclass StoryRowController\n    @.$inject = []\n\n    constructor: () ->\n        @._calculateProgressBar()\n\n    _calculateProgressBar: () ->\n        if @.story.get('is_closed') == true\n            @.percentage = \"100%\"\n        else\n            totalTasks = @.story.get('tasks').size\n            totalTasksCompleted = @.story.get('tasks').filter((it) -> it.get(\"is_closed\")).size\n            if totalTasks == 0\n                @.percentage = \"0%\"\n            else\n                @.percentage = \"#{totalTasksCompleted * 100 / totalTasks}%\"\n\nmodule.controller(\"StoryRowCtrl\", StoryRowController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: epics/dashboard/story-row/story-row.directive.coffee\n###\n\nmodule = angular.module('taigaEpics')\n\nStoryRowDirective = () ->\n    return {\n        templateUrl:\"epics/dashboard/story-row/story-row.html\",\n        controller: \"StoryRowCtrl\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        scope: {\n            story: '=',\n            options: '='\n        }\n    }\n\nmodule.directive(\"tgStoryRow\", StoryRowDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: epics/epics.service.coffee\n###\n\ntaiga = @.taiga\n\nclass EpicsService\n    @.$inject = [\n        'tgProjectService',\n        'tgAttachmentsService'\n        'tgResources',\n        'tgXhrErrorService'\n    ]\n\n    constructor: (@projectService, @attachmentsService, @resources, @xhrError) ->\n        @.clear()\n\n        taiga.defineImmutableProperty @, 'epics', () => return @._epics\n\n    clear: () ->\n        @._loadingEpics = false\n        @._disablePagination = false\n        @._page = 1\n        @._epics = Immutable.List()\n\n    fetchEpics: (reset = false) ->\n        @._loadingEpics = true\n        @._disablePagination = true\n\n        return @resources.epics.list(@projectService.project.get('id'), @._page)\n            .then (result) =>\n                if reset\n                    @.clear()\n                    @._epics = result.list\n                else\n                    @._epics = @._epics.concat(result.list)\n\n                @._loadingEpics = false\n\n                @._disablePagination = !result.headers('x-pagination-next')\n            .catch (xhr) =>\n                @xhrError.response(xhr)\n\n    nextPage: () ->\n        @._page++\n\n        @.fetchEpics()\n\n    listRelatedUserStories: (epic) ->\n        return @resources.userstories.listInEpic(epic.get('id'))\n\n    createEpic: (epicData, attachments, projectId) ->\n        if projectId\n            epicData.project = projectId\n        else\n            epicData.project = @projectService.project.get('id')\n\n        return @resources.epics.post(epicData)\n            .then (epic) =>\n                if !attachments\n                    return epic\n                else\n                    promises = _.map attachments.toJS(), (attachment) =>\n                        @attachmentsService.upload(\n                            attachment.file, epic.get('id'), epic.get('project'), 'epic')\n\n                    Promise.all(promises).then(@.fetchEpics.bind(this, true))\n\n\n    reorderEpic: (epic, newIndex) ->\n        orderList = {}\n        @._epics.forEach (it) ->\n            orderList[it.get('id')] = it.get('epics_order')\n\n        withoutMoved = @.epics.filter (it) => it.get('id') != epic.get('id')\n        beforeDestination = withoutMoved.slice(0, newIndex)\n        afterDestination = withoutMoved.slice(newIndex)\n\n        previous = beforeDestination.last()\n        newOrder = if !previous then 0 else previous.get('epics_order') + 1\n\n        orderList[epic.get('id')] = newOrder\n\n        previousWithTheSameOrder = beforeDestination.filter (it) =>\n            it.get('epics_order') == previous.get('epics_order')\n\n        setOrders = _.fromPairs previousWithTheSameOrder.map((it) =>\n            [it.get('id'), it.get('epics_order')]\n        ).toJS()\n\n        afterDestination.forEach (it) -> orderList[it.get('id')] = it.get('epics_order') + 1\n\n        @._epics = @._epics.map (it) -> it.set('epics_order', orderList[it.get('id')])\n        @._epics = @._epics.sortBy (it) -> it.get('epics_order')\n\n        data = {\n            epics_order: newOrder,\n            version: epic.get('version')\n        }\n\n        return @resources.epics.reorder(epic.get('id'), data, setOrders).then (newEpic) =>\n            @._epics = @._epics.map (it) ->\n                if it.get('id') == newEpic.get('id')\n                    return newEpic\n\n                return it\n\n    reorderRelatedUserstory: (epic, epicUserstories, userstory, newIndex) ->\n        withoutMoved = epicUserstories.filter (it) => it.get('id') != userstory.get('id')\n        beforeDestination = withoutMoved.slice(0, newIndex)\n\n        previous = beforeDestination.last()\n        newOrder = if !previous then 0 else previous.get('epic_order') + 1\n\n        previousWithTheSameOrder = beforeDestination.filter (it) =>\n            it.get('epic_order') == previous.get('epic_order')\n        setOrders = _.fromPairs previousWithTheSameOrder.map((it) =>\n            [it.get('id'), it.get('epic_order')]\n        ).toJS()\n\n        data = {\n            order: newOrder\n        }\n        epicId = epic.get('id')\n        userstoryId = userstory.get('id')\n        return @resources.epics.reorderRelatedUserstory(epicId, userstoryId, data, setOrders)\n            .then () =>\n                return @.listRelatedUserStories(epic)\n\n    replaceEpic: (epic) ->\n        @._epics = @._epics.map (it) ->\n            if it.get('id') == epic.get('id')\n                return epic\n\n            return it\n\n    updateEpicStatus: (epic, statusId) ->\n        data = {\n            status: statusId,\n            version: epic.get('version')\n        }\n\n        return @resources.epics.patch(epic.get('id'), data)\n            .then(@.replaceEpic.bind(this))\n\n    updateEpicAssignedTo: (epic, userId) ->\n        data = {\n            assigned_to: userId,\n            version: epic.get('version')\n        }\n\n        return @resources.epics.patch(epic.get('id'), data)\n            .then(@.replaceEpic.bind(this))\n\nangular.module('taigaEpics').service('tgEpicsService', EpicsService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: epics/related-userstories/related-userstories-controller.coffee\n###\n\nmodule = angular.module(\"taigaEpics\")\n\nclass RelatedUserStoriesController\n    @.$inject = [\n        \"tgProjectService\",\n        \"tgEpicsService\"\n    ]\n\n    constructor: (@projectService, @epicsService) ->\n        @.sectionName = \"Epics\"\n        @.showCreateRelatedUserstoriesLightbox = false\n\n    showRelatedUserStoriesSection: () ->\n        return @projectService.hasPermission(\"view_epics\") or @.userstories?.length > 0\n\n    userCanSort: () ->\n        return @projectService.hasPermission(\"modify_epic\")\n\n    loadRelatedUserstories: () ->\n        @epicsService.listRelatedUserStories(@.epic)\n            .then (userstories) =>\n                @.userstories = userstories\n\n    reorderRelatedUserstory: (us, newIndex) ->\n        @epicsService.reorderRelatedUserstory(@.epic, @.userstories, us, newIndex)\n            .then (userstories) =>\n                @.userstories = userstories\n\nmodule.controller(\"RelatedUserStoriesCtrl\", RelatedUserStoriesController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: epics/related-userstories/related-userstories-create/related-userstories-create.controller.coffee\n###\n\nmodule = angular.module(\"taigaEpics\")\n\nclass RelatedUserstoriesCreateController\n    @.$inject = [\n        \"tgCurrentUserService\",\n        \"tgResources\",\n        \"$tgConfirm\",\n        \"$tgAnalytics\"\n    ]\n\n    constructor: (@currentUserService, @rs, @confirm, @analytics) ->\n        @.projects = null\n        @.projectUserstories = Immutable.List()\n        @.loading = false\n\n    loadProjects: () ->\n        if @.projects == null\n            @.projects = @currentUserService.projects.get(\"unblocked\")\n\n    filterUss: (selectedProjectId, filterText) ->\n        promise = @rs.userstories.listInAllProjects({project: selectedProjectId, q: filterText}, true).then (data) =>\n            excludeIds = @.epicUserstories.map((us) -> us.get('id'))\n            filteredData = data.filter((us) -> excludeIds.indexOf(us.get('id')) == -1)\n            @.projectUserstories = filteredData\n        promise\n\n    saveRelatedUserStory: (selectedUserstoryId, onSavedRelatedUserstory) ->\n        # This method assumes the following methods are binded to the controller:\n        # - validateExistingUserstoryForm\n        # - setExistingUserstoryFormErrors\n        # - loadRelatedUserstories\n        return if not @.validateExistingUserstoryForm()\n\n        @.loading = true\n\n        onError = (data) =>\n            @.loading = false\n            @confirm.notify(\"error\")\n            @.setExistingUserstoryFormErrors(data)\n\n        onSuccess = () =>\n            @analytics.trackEvent(\"epic related user story\", \"create\", \"create related user story on epic\", 1)\n            @.loading = false\n            if onSavedRelatedUserstory\n                onSavedRelatedUserstory()\n            @.loadRelatedUserstories()\n\n        epicId = @.epic.get('id')\n        @rs.epics.addRelatedUserstory(epicId, selectedUserstoryId).then(onSuccess, onError)\n\n    bulkCreateRelatedUserStories: (selectedProjectId, userstoriesText, onCreatedRelatedUserstory) ->\n        # This method assumes the following methods are binded to the controller:\n        # - validateNewUserstoryForm\n        # - setNewUserstoryFormErrors\n        # - loadRelatedUserstories\n        return if not @.validateNewUserstoryForm()\n\n        @.loading = true\n\n        onError = (data) =>\n            @.loading = false\n            @confirm.notify(\"error\")\n            @.setNewUserstoryFormErrors(data)\n\n        onSuccess = () =>\n            @analytics.trackEvent(\"epic related user story\", \"create\", \"create related user story on epic\", 1)\n            @.loading = false\n            if onCreatedRelatedUserstory\n                onCreatedRelatedUserstory()\n            @.loadRelatedUserstories()\n\n        epicId = @.epic.get('id')\n        @rs.epics.bulkCreateRelatedUserStories(epicId, selectedProjectId, userstoriesText).then(onSuccess, onError)\n\n\nmodule.controller(\"RelatedUserstoriesCreateCtrl\", RelatedUserstoriesCreateController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: epics/related-userstories/related-userstories-create/related-userstories-create.directive.coffee\n###\n\nmodule = angular.module('taigaEpics')\ndebounceLeading = @.taiga.debounceLeading\n\nRelatedUserstoriesCreateDirective = (@lightboxService) ->\n    link = (scope, el, attrs, ctrl) ->\n        newUserstoryForm = el.find(\".new-user-story-form\").checksley()\n        existingUserstoryForm = el.find(\".existing-user-story-form\").checksley()\n\n        ctrl.validateNewUserstoryForm = =>\n            return newUserstoryForm.validate()\n\n        ctrl.setNewUserstoryFormErrors = (errors) =>\n            newUserstoryForm.setErrors(errors)\n\n        ctrl.validateExistingUserstoryForm = =>\n            return existingUserstoryForm.validate()\n\n        ctrl.setExistingUserstoryFormErrors = (errors) =>\n            existingUserstoryForm.setErrors(errors)\n\n        scope.showLightbox = (selectedProjectId) ->\n            ctrl.loadProjects()\n            scope.selectProject(selectedProjectId).then () =>\n                lightboxService.open(el.find(\".lightbox-create-related-user-stories\"))\n\n        scope.closeLightbox = () ->\n            scope.selectedUserstory = null\n            scope.searchUserstory = \"\"\n            scope.relatedUserstoriesText = \"\"\n            lightboxService.close(el.find(\".lightbox-create-related-user-stories\"))\n\n        scope.$watch 'vm.project', (project) ->\n            if project?\n              scope.selectedProject = project.get('id')\n\n        scope.selectProject = (selectedProjectId) ->\n            scope.selectedUserstory = null\n            scope.searchUserstory = \"\"\n            ctrl.filterUss(selectedProjectId, scope.searchUserstory)\n\n        scope.onUpdateSearchUserstory = debounceLeading 300, () ->\n            scope.selectedUserstory = null\n            ctrl.filterUss(scope.selectedProject, scope.searchUserstory)\n\n    return {\n        link: link,\n        templateUrl:\"epics/related-userstories/related-userstories-create/related-userstories-create.html\",\n        controller: \"RelatedUserstoriesCreateCtrl\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        scope: {\n              showCreateRelatedUserstoriesLightbox: \"=\"\n              project: \"=\"\n              epic: \"=\"\n              epicUserstories: \"=\"\n              loadRelatedUserstories:\"&\"\n        }\n\n    }\n\nRelatedUserstoriesCreateDirective.$inject = [\"lightboxService\",]\n\nmodule.directive(\"tgRelatedUserstoriesCreate\", RelatedUserstoriesCreateDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: epics/related-userstories/related-userstories-sortable/related-userstories-sortable.directive.coffee\n###\n\nmodule = angular.module('taigaEpics')\n\nRelatedUserstoriesSortableDirective = ($parse, projectService) ->\n    link = (scope, el, attrs) ->\n        return if not projectService.hasPermission(\"modify_epic\")\n\n        callback = $parse(attrs.tgRelatedUserstoriesSortable)\n\n        drake = dragula([el[0]], {\n            copySortSource: false\n            copy: false\n            mirrorContainer: el[0]\n            moves: (item) ->\n                return $(item).is('tg-related-userstory-row')\n        })\n\n        drake.on 'dragend', (item) ->\n            itemEl = $(item)\n            us = itemEl.scope().us\n            newIndex = itemEl.index()\n\n            scope.$apply () ->\n                callback(scope, {us: us, newIndex: newIndex})\n\n        scroll = autoScroll(window, {\n            margin: 20,\n            pixels: 30,\n            scrollWhenOutside: true,\n            autoScroll: () ->\n                return this.down && drake.dragging\n        })\n\n        scope.$on \"$destroy\", ->\n            el.off()\n            drake.destroy()\n\n    return {\n        link: link\n    }\n\nRelatedUserstoriesSortableDirective.$inject = [\n    \"$parse\",\n    \"tgProjectService\"\n]\n\nmodule.directive(\"tgRelatedUserstoriesSortable\", RelatedUserstoriesSortableDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: epics/related-userstories/related-userstories.directive.coffee\n###\n\nmodule = angular.module('taigaEpics')\n\nRelatedUserStoriesDirective = () ->\n    return {\n        templateUrl:\"epics/related-userstories/related-userstories.html\",\n        controller: \"RelatedUserStoriesCtrl\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        scope: {\n            userstories: '=',\n            project: '='\n            epic: '='\n        }\n    }\n\nRelatedUserStoriesDirective.$inject = []\n\nmodule.directive(\"tgRelatedUserstories\", RelatedUserStoriesDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: epics/related-userstories/related-userstory-row/related-userstory-row.controller.coffee\n###\n\nmodule = angular.module(\"taigaEpics\")\n\nclass RelatedUserstoryRowController\n    @.$inject = [\n        \"tgAvatarService\",\n        \"$translate\",\n        \"$tgConfirm\",\n        \"tgResources\"\n    ]\n\n    constructor: (@avatarService, @translate, @confirm, @rs) ->\n\n    setAvatarData: () ->\n        member = @.userstory.get('assigned_to_extra_info')\n        @.avatar = @avatarService.getAvatar(member)\n\n    getAssignedToFullNameDisplay: () ->\n        if @.userstory.get('assigned_to')\n            return @.userstory.getIn(['assigned_to_extra_info', 'full_name_display'])\n\n        return @translate.instant(\"COMMON.ASSIGNED_TO.NOT_ASSIGNED\")\n\n    onDeleteRelatedUserstory: () ->\n        title = @translate.instant(\"LIGHTBOX.REMOVE_RELATIONSHIP_WITH_EPIC.TITLE\")\n        message = @translate.instant(\n            \"LIGHTBOX.REMOVE_RELATIONSHIP_WITH_EPIC.MESSAGE\",\n            { epicSubject: @.epic.get('subject') }\n        )\n\n        return @confirm.ask(title, null, message)\n            .then (askResponse) =>\n                onError = () =>\n                    message = @translate.instant('EPIC.ERROR_UNLINK_RELATED_USERSTORY', {errorMessage: message})\n                    @confirm.notify(\"error\", null, message)\n                    askResponse.finish(false)\n\n                onSuccess = () =>\n                    @.loadRelatedUserstories()\n                    askResponse.finish()\n\n                epicId = @.epic.get('id')\n                userstoryId = @.userstory.get('id')\n                @rs.epics.deleteRelatedUserstory(epicId, userstoryId).then(onSuccess, onError)\n\nmodule.controller(\"RelatedUserstoryRowCtrl\", RelatedUserstoryRowController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: epics/related-userstories/related-userstory-row/related-userstory-row.directive.coffee\n###\n\nmodule = angular.module('taigaEpics')\n\nRelatedUserstoryRowDirective = () ->\n    link = (scope, el, attrs, ctrl) ->\n        ctrl.setAvatarData()\n\n    return {\n        link: link,\n        templateUrl:\"epics/related-userstories/related-userstory-row/related-userstory-row.html\",\n        controller: \"RelatedUserstoryRowCtrl\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        scope: {\n            userstory: '='\n            epic: '='\n            project: '='\n            loadRelatedUserstories:\"&\"\n        }\n    }\n\nRelatedUserstoryRowDirective.$inject = []\n\nmodule.directive(\"tgRelatedUserstoryRow\", RelatedUserstoryRowDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: external-apps/external-app.controller.coffee\n###\n\ntaiga = @.taiga\n\nclass ExternalAppController extends taiga.Controller\n    @.$inject = [\n        \"$routeParams\",\n        \"tgExternalAppsService\",\n        \"$window\",\n        \"tgCurrentUserService\",\n        \"$location\",\n        \"$tgNavUrls\",\n        \"tgXhrErrorService\",\n        \"tgLoader\"\n    ]\n\n    constructor: (@routeParams, @externalAppsService, @window, @currentUserService, @location,\n    @navUrls, @xhrError, @loader) ->\n        @loader.start(false)\n        @._applicationId = @routeParams.application\n        @._state = @routeParams.state\n        @._getApplicationToken()\n        @._user = @currentUserService.getUser()\n        @._application = null\n        nextUrl = encodeURIComponent(@location.url())\n        loginUrl = @navUrls.resolve(\"login\")\n        @.loginWithAnotherUserUrl = \"#{loginUrl}?next=#{nextUrl}&force_login=1\"\n\n        taiga.defineImmutableProperty @, \"user\", () => @._user\n        taiga.defineImmutableProperty @, \"application\", () => @._application\n\n    _redirect: (applicationToken) =>\n        nextUrl = applicationToken.get(\"next_url\")\n        @window.open(nextUrl, \"_self\")\n\n    _getApplicationToken: =>\n        return @externalAppsService.getApplicationToken(@._applicationId, @._state)\n            .then (data) =>\n                @._application = data.get(\"application\")\n                if data.get(\"auth_code\")\n                    @._redirect(data)\n                else\n                    @loader.pageLoaded()\n\n            .catch (xhr) =>\n                @loader.pageLoaded()\n                return @xhrError.response(xhr)\n\n    cancel: () ->\n        @window.history.back()\n\n    createApplicationToken:  =>\n        return @externalAppsService.authorizeApplicationToken(@._applicationId, @._state)\n            .then (data) =>\n                @._redirect(data)\n            .catch (xhr) =>\n                return @xhrError.response(xhr)\n\n\nangular.module(\"taigaExternalApps\").controller(\"ExternalApp\", ExternalAppController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: external-apps/external-app.service.coffee\n###\n\nclass ExternalAppsService extends taiga.Service\n    @.$inject = [\n        \"tgResources\"\n    ]\n\n    constructor: (@rs) ->\n\n    getApplicationToken: (applicationId, state) ->\n        return @rs.externalapps.getApplicationToken(applicationId, state)\n\n    authorizeApplicationToken: (applicationId, state) ->\n        return @rs.externalapps.authorizeApplicationToken(applicationId, state)\n\nangular.module(\"taigaExternalApps\").service(\"tgExternalAppsService\", ExternalAppsService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: feedback/feedback.service.coffee\n###\n\nclass FeedbackService extends taiga.Service\n    @.$inject = [\"tgLightboxFactory\"]\n\n    constructor: (@lightboxFactory) ->\n\n    sendFeedback: ->\n        @lightboxFactory.create(\"tg-lb-feedback\", {\n            \"class\": \"lightbox lightbox-feedback lightbox-generic-form\"\n        })\n\nangular.module(\"taigaFeedback\").service(\"tgFeedbackService\", FeedbackService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: history/activity/activity.service.coffee\n###\n\ntaiga = @.taiga\n\nclass ActivityService\n    @.$inject = [\n        'tgResources',\n        'tgXhrErrorService'\n    ]\n\n    constructor: (@rs, @xhrError) ->\n        @._contentType = null\n        @._objectId = null\n        @.clear()\n\n    clear: () ->\n        @.page = 1\n        @.loadingEntries = false\n        @.disablePagination = false\n        @.entries = Immutable.List()\n        @.count = null\n\n    fetchEntries: (reset = false) ->\n        if reset\n            @.page = 1\n        @.loadingEntries = true\n        @.disablePagination = true\n\n        return if !@._contentType || !@._objectId\n\n        return @rs.history.getHistory('activity', @._contentType, @._objectId, @.page)\n            .then (result) =>\n                if reset\n                    @.clear()\n                    @.entries = result.list\n                else\n                    @.entries = @.entries.concat(result.list)\n\n                @.loadingEntries = false\n                @.disablePagination = !result.headers('x-pagination-next')\n                @.count = result.headers('x-pagination-count')\n                \n                return @.entries\n            .catch (xhr) =>\n                @xhrError.response(@.entries)\n\n    nextPage: (historyType = 'comment') ->\n        @.page++\n        @.fetchEntries()\n\n    init: (contentType, objectId) ->\n        @._contentType = contentType\n        @._objectId = objectId\n        @.clear()\n\n\nangular.module('taigaHistory').service('tgActivityService', ActivityService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: history/comments/comment.controller.coffee\n###\n\nmodule = angular.module(\"taigaHistory\")\n\nclass CommentController\n    @.$inject = [\n        \"tgCurrentUserService\",\n        \"tgCheckPermissionsService\",\n        \"tgLightboxFactory\"\n    ]\n\n    constructor: (@currentUserService, @permissionService, @lightboxFactory) ->\n        @.hiddenDeletedComment = true\n\n    showDeletedComment: () ->\n        @.hiddenDeletedComment = false\n\n    hideDeletedComment: () ->\n        @.hiddenDeletedComment = true\n\n    checkCancelComment: (event) ->\n        if event.keyCode == 27\n            @.onEditMode({commentId: @.comment.id})\n\n    canEditDeleteComment: () ->\n        if @currentUserService.getUser()\n            @.user = @currentUserService.getUser()\n            return @.user.get('id') == @.comment.user.pk || @permissionService.check('modify_project')\n\n    saveComment: (text, cb) ->\n        @.onEditComment({commentId: @.comment.id, commentData: text, callback: cb})\n\n    displayCommentHistory: () ->\n        @lightboxFactory.create('tg-lb-display-historic', {\n            \"class\": \"lightbox lightbox-display-historic\"\n            \"comment\": \"comment\"\n            \"name\": \"name\"\n            \"object\": \"object\"\n        }, {\n            \"comment\": @.comment\n            \"name\": @.name\n            \"object\": @.object\n        })\n\nmodule.controller(\"CommentCtrl\", CommentController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: history/comments/comment.directive.coffee\n###\n\nmodule = angular.module('taigaHistory')\n\nCommentDirective = () ->\n\n    return {\n        scope: {\n            name: \"@\",\n            object: \"@\",\n            comment: \"<\",\n            type: \"<\",\n            loading: \"<\",\n            editing: \"<\",\n            deleting: \"<\",\n            objectId: \"<\",\n            editMode: \"<\",\n            onEditMode: \"&\",\n            onDeleteComment: \"&\",\n            onRestoreDeletedComment: \"&\",\n            onEditComment: \"&\"\n        },\n        templateUrl:\"history/comments/comment.html\",\n        bindToController: true,\n        controller: 'CommentCtrl',\n        controllerAs: \"vm\",\n    }\n\nmodule.directive(\"tgComment\", CommentDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: history/comments/comments.controller.coffee\n###\n\nmodule = angular.module(\"taigaHistory\")\n\nclass CommentsController\n    @.$inject = []\n\n    constructor: () ->\n\n    initializePermissions: () ->\n        @.canAddCommentPermission = 'comment_' + @.name\n\nmodule.controller(\"CommentsCtrl\", CommentsController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: history/comments/comments.directive.coffee\n###\n\nmodule = angular.module('taigaHistory')\n\nCommentsDirective = () ->\n    link = (scope, el, attrs, ctrl) ->\n        ctrl.initializePermissions()\n\n    return {\n        scope: {\n            type: \"<\",\n            name: \"@\",\n            object: \"@\",\n            comments: \"<\",\n            onEditMode: \"&\",\n            onDeleteComment: \"&\",\n            onRestoreDeletedComment: \"&\",\n            onAddComment: \"&\",\n            onEditComment: \"&\",\n            editMode: \"<\",\n            loading: \"<\",\n            deleting: \"<\",\n            editing: \"<\",\n            projectId: \"=\",\n            reverse: \"=\"\n        },\n        templateUrl:\"history/comments/comments.html\",\n        bindToController: true,\n        controller: 'CommentsCtrl',\n        controllerAs: \"vm\"\n        link: link\n    }\n\nmodule.directive(\"tgComments\", CommentsDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: history/history-lightbox/comment-history-lightbox.controller.coffee\n###\n\nmodule = angular.module(\"taigaHistory\")\n\nclass LightboxDisplayHistoricController\n    @.$inject = [\n        \"$tgResources\",\n    ]\n\n    constructor: (@rs) ->\n\n    _loadHistoric: () ->\n        type = @.name\n        objectId = @.object\n        activityId = @.comment.id\n\n        @rs.history.getCommentHistory(type, objectId, activityId).then (data) =>\n            @.commentHistoryEntries = data\n\nmodule.controller(\"LightboxDisplayHistoricCtrl\", LightboxDisplayHistoricController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: history/history-lightbox/comment-history-lightbox.directive.coffee\n###\n\nLightboxDisplayHistoricDirective = (lightboxService) ->\n    link = (scope, el, attrs, ctrl) ->\n        ctrl._loadHistoric()\n        lightboxService.open(el)\n\n    return {\n        scope: {},\n        bindToController: {\n            name: '=',\n            object: '=',\n            comment: '='\n        },\n        templateUrl:\"history/history-lightbox/comment-history-lightbox.html\",\n        controller: \"LightboxDisplayHistoricCtrl\",\n        controllerAs: \"vm\",\n        link: link\n    }\n\nLightboxDisplayHistoricDirective.$inject = [\n    \"lightboxService\"\n]\n\nangular.module('taigaHistory').directive(\"tgLbDisplayHistoric\", LightboxDisplayHistoricDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: history/history-lightbox/history-entry.directive.coffee\n###\n\n\nHistoryEntryDirective = () ->\n    return {\n        scope: {\n            entry: \"<\"\n        },\n        templateUrl:\"history/history-lightbox/history-entry.html\",\n    }\n\nangular.module('taigaHistory').directive(\"tgHistoryEntry\", HistoryEntryDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: history/history-tabs/history-tabs.directive.coffee\n###\n\nmodule = angular.module('taigaHistory')\n\nHistoryTabsDirective = () ->\n    return {\n        templateUrl:\"history/history-tabs/history-tabs.html\",\n        scope: {\n            showCommentTab: \"&\",\n            showActivityTab: \"&\"\n            onActiveComments: \"&\",\n            onActiveActivities: \"&\",\n            onOrderComments: \"&\"\n            activeTab: \"<\",\n            commentsNum: \"<\",\n            activitiesNum: \"<\",\n            onReverse: \"<\"\n        }\n    }\n\nmodule.directive(\"tgHistoryTabs\", HistoryTabsDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: history/history.controller.coffee\n###\n\nmodule = angular.module(\"taigaHistory\")\n\nclass HistorySectionController\n    @.$inject = [\n        \"$tgResources\",\n        \"$tgRepo\",\n        \"$tgStorage\",\n        \"tgProjectService\",\n        \"tgActivityService\"\n    ]\n\n    constructor: (@rs, @repo, @storage, @projectService, @activityService) ->\n        @.editing = null\n        @.deleting = null\n        @.editMode = {}\n        @.viewComments = true\n\n        @.reverse = @storage.get(\"orderComments\")\n\n        taiga.defineImmutableProperty @, 'disabledActivityPagination', () =>\n            return @activityService.disablePagination\n        taiga.defineImmutableProperty @, 'loadingActivity', () =>\n            return @activityService.loading\n\n    _loadHistory: () ->\n        @._loadComments()\n        @._loadActivity()\n\n    _loadActivity: () ->\n        @activityService.init(@.name, @.id)\n        @activityService.fetchEntries().then (response) =>\n            @.activitiesNum = @activityService.count\n            @.activities = response.toJS()\n\n    _loadComments: () ->\n        @rs.history.get(@.name, @.id, 'comment').then (comments) =>\n            @.comments = _.filter(comments, (item) -> item.comment != \"\")\n            if @.reverse\n                @.comments - _.reverse(@.comments)\n            @.commentsNum = @.comments.length\n\n    nextActivityPage: () ->\n        @activityService.nextPage().then (response) =>\n            @.activities = response.toJS()\n\n    showHistorySection: () ->\n        return @.showCommentTab() or @.showActivityTab()\n\n    showCommentTab: () ->\n        return @.commentsNum > 0 or @projectService.hasPermission(\"comment_#{@.name}\")\n\n    showActivityTab: () ->\n        return @.activitiesNum > 0\n\n    toggleEditMode: (commentId) ->\n        @.editMode[commentId] = !@.editMode[commentId]\n\n    onActiveHistoryTab: (active) ->\n        @.viewComments = active\n\n    deleteComment: (commentId) ->\n        type = @.name\n        objectId = @.id\n        activityId = commentId\n        @.deleting = commentId\n        return @rs.history.deleteComment(type, objectId, activityId).then =>\n            @._loadComments()\n            @.deleting = null\n\n    editComment: (commentId, comment) ->\n        type = @.name\n        objectId = @.id\n        activityId = commentId\n        @.editing = commentId\n        return @rs.history.editComment(type, objectId, activityId, comment).then =>\n            @._loadComments()\n            @.toggleEditMode(commentId)\n            @.editing = null\n\n    restoreDeletedComment: (commentId) ->\n        type = @.name\n        objectId = @.id\n        activityId = commentId\n        @.editing = commentId\n        return @rs.history.undeleteComment(type, objectId, activityId).then =>\n            @._loadComments()\n            @.editing = null\n\n    addComment: () ->\n        @.editMode = {}\n        @.editing = null\n        @._loadComments()\n\n    onOrderComments: () ->\n        @.reverse = !@.reverse\n        @storage.set(\"orderComments\", @.reverse)\n        @._loadComments()\n\nmodule.controller(\"HistorySection\", HistorySectionController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: history/history.directive.coffee\n###\n\nmodule = angular.module('taigaHistory')\n\nbindOnce = @.taiga.bindOnce\n\nHistorySectionDirective = () ->\n    link = (scope, el, attr, ctrl) ->\n        scope.$on \"object:updated\", -> ctrl._loadActivity()\n\n        scope.$watch 'vm.id', (value) ->\n            ctrl._loadHistory()\n\n    return {\n        link: link,\n        templateUrl:\"history/history.html\",\n        controller: \"HistorySection\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        scope: {\n            type: \"=\",\n            name: \"@\",\n            id: \"=\",\n            projectId: \"=\"\n        }\n    }\n\nHistorySectionDirective.$inject = []\n\nmodule.directive(\"tgHistorySection\", HistorySectionDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: history/history/history-diff.controller.coffee\n###\n\nmodule = angular.module(\"taigaHistory\")\n\nclass ActivitiesDiffController\n    @.$inject = [\n    ]\n\n    constructor: () ->\n\n    diffTags: () ->\n        if @.type == 'tags'\n            @.diffRemoveTags = _.difference(@.diff[0], @.diff[1]).toString()\n            @.diffAddTags = _.difference(@.diff[1], @.diff[0]).toString()\n        else if @.type == 'promoted_to'\n            diff = _.difference(@.diff[1], @.diff[0])\n            @.promotedTo = _.filter(@.model.generated_user_stories, (x) => _.includes(diff, x.id))\n\nmodule.controller(\"ActivitiesDiffCtrl\", ActivitiesDiffController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: history/history/history-diff.directive.coffee\n###\n\nmodule = angular.module('taigaHistory')\n\nHistoryDiffDirective = () ->\n    link = (scope, el, attrs, ctrl) ->\n        ctrl.diffTags()\n    return {\n        scope: {\n            model: \"<\",\n            type: \"<\",\n            diff: \"<\"\n        },\n        templateUrl:\"history/history/history-diff.html\",\n        controller: \"ActivitiesDiffCtrl\",\n        controllerAs: 'vm',\n        bindToController: true,\n        link: link\n    }\n\nmodule.directive(\"tgHistoryDiff\", HistoryDiffDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: history/history/history.directive.coffee\n###\n\nmodule = angular.module('taigaHistory')\n\nHistoryDirective = () ->\n    link = (scope, el, attrs) ->\n\n    return {\n        scope: {\n            activities: \"<\",\n            model: \"<\",\n        },\n        templateUrl:\"history/history/history.html\",\n        link: link\n    }\n\nmodule.directive(\"tgHistory\", HistoryDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: home/duties/duty.directive.coffee\n###\n\nDutyDirective = (navurls, $translate) ->\n    link = (scope, el, attrs, ctrl) ->\n        scope.vm = {}\n        scope.vm.duty = scope.duty\n        scope.vm.type = scope.type\n        scope.vm.isHidden = scope.isHidden\n\n        scope.vm.getDutyType = () ->\n            if scope.vm.duty\n                if scope.vm.duty.get('_name') == \"epics\"\n                    return $translate.instant(\"COMMON.EPIC\")\n                if scope.vm.duty.get('_name') == \"userstories\"\n                    return $translate.instant(\"COMMON.USER_STORY\")\n                if scope.vm.duty.get('_name') == \"tasks\"\n                    return $translate.instant(\"COMMON.TASK\")\n                if scope.vm.duty.get('_name') == \"issues\"\n                    return $translate.instant(\"COMMON.ISSUE\")\n\n        el.on \"click\", \".button-hide\", (event) ->\n            event.preventDefault()\n            el.remove()\n            scope.$emit('duty:toggle-hidden', scope.vm.duty, scope.vm.type)\n\n    return {\n        templateUrl: \"home/duties/duty.html\"\n        scope: {\n            \"duty\": \"=tgDuty\",\n            \"isHidden\": \"=\",\n            \"type\": \"@\"\n        }\n        link: link\n    }\n\nDutyDirective.$inject = [\n    \"$tgNavUrls\",\n    \"$translate\"\n]\n\nangular.module(\"taigaHome\").directive(\"tgDuty\", DutyDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: home/home.controller.coffee\n###\n\nclass HomeController\n    @.$inject = [\n        \"tgCurrentUserService\",\n        \"$location\",\n        \"$tgNavUrls\"\n    ]\n\n    constructor: (@currentUserService, @location, @navUrls) ->\n        if not @currentUserService.getUser()\n            @location.path(@navUrls.resolve(\"discover\"))\n\n\nangular.module(\"taigaHome\").controller(\"Home\", HomeController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: home/home.service.coffee\n###\n\ngroupBy = @.taiga.groupBy\n\nclass HomeService extends taiga.Service\n    @.$inject = [\n        \"$tgNavUrls\",\n        \"tgResources\",\n        \"tgProjectsService\"\n    ]\n\n    constructor: (@navurls, @rs, @projectsService) ->\n\n    _attachProjectInfoToWorkInProgress: (workInProgress, projectsById) ->\n        _attachProjectInfoToDuty = (duty, objType) =>\n            project = projectsById.get(String(duty.get('project')))\n\n            ctx = {\n                project: project.get('slug')\n                ref: duty.get('ref')\n            }\n\n            url = @navurls.resolve(\"project-#{objType}-detail\", ctx)\n\n            duty = duty.set('url', url)\n            duty = duty.set('project', project)\n            duty = duty.set(\"_name\", objType)\n\n            return duty\n\n        _getValidDutiesAndAttachProjectInfo = (duties, dutyType)->\n            # Exclude duties where I'm not member of the project\n            duties = duties.filter((duty) ->\n                return projectsById.get(String(duty.get('project'))))\n\n            duties = duties.map (duty) ->\n                return _attachProjectInfoToDuty(duty, dutyType)\n\n            return duties\n\n        assignedTo = workInProgress.get(\"assignedTo\")\n\n        if assignedTo.get(\"epics\")\n            _duties = _getValidDutiesAndAttachProjectInfo(assignedTo.get(\"epics\"), \"epics\")\n            assignedTo = assignedTo.set(\"epics\", _duties)\n\n        if assignedTo.get(\"userStories\")\n            _duties = _getValidDutiesAndAttachProjectInfo(assignedTo.get(\"userStories\"), \"userstories\")\n            assignedTo = assignedTo.set(\"userStories\", _duties)\n\n        if assignedTo.get(\"tasks\")\n            _duties = _getValidDutiesAndAttachProjectInfo(assignedTo.get(\"tasks\"), \"tasks\")\n            assignedTo = assignedTo.set(\"tasks\", _duties)\n\n        if assignedTo.get(\"issues\")\n            _duties = _getValidDutiesAndAttachProjectInfo(assignedTo.get(\"issues\"), \"issues\")\n            assignedTo = assignedTo.set(\"issues\", _duties)\n\n\n        watching = workInProgress.get(\"watching\")\n\n        if watching.get(\"epics\")\n            _duties = _getValidDutiesAndAttachProjectInfo(watching.get(\"epics\"), \"epics\")\n            watching = watching.set(\"epics\", _duties)\n\n        if watching.get(\"userStories\")\n            _duties = _getValidDutiesAndAttachProjectInfo(watching.get(\"userStories\"), \"userstories\")\n            watching = watching.set(\"userStories\", _duties)\n\n        if watching.get(\"tasks\")\n            _duties = _getValidDutiesAndAttachProjectInfo(watching.get(\"tasks\"), \"tasks\")\n            watching = watching.set(\"tasks\", _duties)\n\n        if watching.get(\"issues\")\n            _duties = _getValidDutiesAndAttachProjectInfo(watching.get(\"issues\"), \"issues\")\n            watching = watching.set(\"issues\", _duties)\n\n        workInProgress = workInProgress.set(\"assignedTo\", assignedTo)\n        workInProgress = workInProgress.set(\"watching\", watching)\n\n    getWorkInProgress: (userId) ->\n        projectsById = Immutable.Map()\n\n        projectsPromise = @projectsService.getListProjectsByUserId(userId).then (projects) ->\n            projectsById = Immutable.fromJS(groupBy(projects.toJS(), (p) -> p.id))\n\n        assignedTo = Immutable.Map()\n\n        params_epics = {\n            status__is_closed: false\n            assigned_to: userId\n        }\n\n        params_uss = {\n            is_closed: false\n            assigned_users: userId\n            dashboard: true\n        }\n\n        params_tasks = {\n            status__is_closed: false\n            assigned_to: userId\n        }\n\n        params_issues = {\n            status__is_closed: false\n            assigned_to: userId\n        }\n\n        assignedEpicsPromise = @rs.epics.listInAllProjects(params_epics).then (epics) ->\n            assignedTo = assignedTo.set(\"epics\", epics)\n\n        assignedUserStoriesPromise = @rs.userstories.listInAllProjects(params_uss).then (userstories) ->\n            assignedTo = assignedTo.set(\"userStories\", userstories)\n\n        assignedTasksPromise = @rs.tasks.listInAllProjects(params_tasks).then (tasks) ->\n            assignedTo = assignedTo.set(\"tasks\", tasks)\n\n        assignedIssuesPromise = @rs.issues.listInAllProjects(params_issues).then (issues) ->\n            assignedTo = assignedTo.set(\"issues\", issues)\n\n        params_epics = {\n            status__is_closed: false\n            watchers: userId\n        }\n\n        params_uss = {\n            is_closed: false\n            watchers: userId\n            dashboard: true\n        }\n\n        params_tasks = {\n            status__is_closed: false\n            watchers: userId\n        }\n\n        params_issues = {\n            status__is_closed: false\n            watchers: userId\n        }\n\n        watching = Immutable.Map()\n\n        watchingEpicsPromise = @rs.epics.listInAllProjects(params_epics).then (epics) ->\n            watching = watching.set(\"epics\", epics)\n\n        watchingUserStoriesPromise = @rs.userstories.listInAllProjects(params_uss).then (userstories) ->\n            watching = watching.set(\"userStories\", userstories)\n\n        watchingTasksPromise = @rs.tasks.listInAllProjects(params_tasks).then (tasks) ->\n            watching = watching.set(\"tasks\", tasks)\n\n        watchingIssuesPromise = @rs.issues.listInAllProjects(params_issues).then (issues) ->\n            watching = watching.set(\"issues\", issues)\n\n        workInProgress = Immutable.Map()\n\n        Promise.all([\n            projectsPromise,\n            assignedEpicsPromise,\n            watchingEpicsPromise,\n            assignedUserStoriesPromise,\n            watchingUserStoriesPromise,\n            assignedTasksPromise,\n            watchingTasksPromise,\n            assignedIssuesPromise,\n            watchingIssuesPromise\n        ]).then =>\n            workInProgress = workInProgress.set(\"assignedTo\", assignedTo)\n            workInProgress = workInProgress.set(\"watching\", watching)\n\n            workInProgress = @._attachProjectInfoToWorkInProgress(workInProgress, projectsById)\n\n            return workInProgress\n\nangular.module(\"taigaHome\").service(\"tgHomeService\", HomeService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: home/projects/home-project-list.directive.coffee\n###\n\nHomeProjectListDirective = (currentUserService) ->\n    link = (scope, el, attrs, ctrl) ->\n        scope.vm = {}\n\n        taiga.defineImmutableProperty(scope.vm, \"projects\", () -> currentUserService.projects.get(\"recents\"))\n\n    directive = {\n        templateUrl: \"home/projects/home-project-list.html\"\n        scope: {}\n        link: link\n    }\n\n    return directive\n\nHomeProjectListDirective.$inject = [\n    \"tgCurrentUserService\"\n]\n\nangular.module(\"taigaHome\").directive(\"tgHomeProjectList\", HomeProjectListDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: home/working-on/working-on.controller.coffee\n###\n\nclass WorkingOnController\n    @.$inject = [\n        \"tgHomeService\"\n    ]\n\n    constructor: (@homeService) ->\n        @.assignedTo = Immutable.Map()\n        @.hiddenAssignedTo = []\n        @.showHiddenAssignedTo = false\n\n        @.watching = Immutable.Map()\n        @.showHiddenWatching = false\n\n    _setAssignedTo: (workInProgress) ->\n        epics = workInProgress.get(\"assignedTo\").get(\"epics\")\n        userStories = workInProgress.get(\"assignedTo\").get(\"userStories\")\n        tasks = workInProgress.get(\"assignedTo\").get(\"tasks\")\n        issues = workInProgress.get(\"assignedTo\").get(\"issues\")\n\n        @.assignedTo = userStories.concat(tasks).concat(issues).concat(epics)\n        if @.assignedTo.size > 0\n            @.assignedTo = @.assignedTo.sortBy((elem) -> elem.get(\"modified_date\")).reverse()\n\n    _setWatching: (workInProgress) ->\n        epics = workInProgress.get(\"watching\").get(\"epics\")\n        userStories = workInProgress.get(\"watching\").get(\"userStories\")\n        tasks = workInProgress.get(\"watching\").get(\"tasks\")\n        issues = workInProgress.get(\"watching\").get(\"issues\")\n\n        @.watching = userStories.concat(tasks).concat(issues).concat(epics)\n        if @.watching.size > 0\n            @.watching = @.watching.sortBy((elem) -> elem.get(\"modified_date\")).reverse()\n\n    getWorkInProgress: (userId) ->\n        return @homeService.getWorkInProgress(userId).then (workInProgress) =>\n            @._setAssignedTo(workInProgress)\n            @._setWatching(workInProgress)\n\nangular.module(\"taigaHome\").controller(\"WorkingOn\", WorkingOnController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: home/working-on/working-on.directive.coffee\n###\n\ntaiga = @.taiga\n\ngenerateHash = @.taiga.generateHash\n\nWorkingOnDirective = (homeService, currentUserService, storage) ->\n        \n    link = (scope, el, attrs, ctrl) ->\n        updateShowHiddenDuties = (slot) ->\n            hash = generateHash(['ShowHiddenDashboardDuties', slot])\n            return storage.set(hash, scope.showHiddenDuties[slot])\n\n        getShowHiddenDuties = (slot) ->\n            hash = generateHash(['ShowHiddenDashboardDuties', slot])\n            return storage.get(hash) or false\n\n        updateHiddenDuties = (slot) ->\n            hash = generateHash(['HiddenDashboardDuties', slot])\n            return storage.set(hash, scope.hiddenDuties[slot])\n\n        getHiddenDuties = (slot) ->\n            hash = generateHash(['HiddenDashboardDuties', slot])\n            return storage.get(hash) or []\n\n        toggleDutyHidden = (duty, slot) ->\n            if duty.get('id') in scope.hiddenDuties[slot]\n                scope.hiddenDuties[slot].splice(scope.hiddenDuties[slot].indexOf(duty.get('id')), 1)\n            else\n                scope.hiddenDuties[slot].push(duty.get('id'))\n            updateHiddenDuties(slot)\n            scope.$apply()\n\n        user = currentUserService.getUser()\n        # If we are not logged in the user will be null\n        if !user\n            return\n\n        userId = user.get(\"id\")\n        ctrl.getWorkInProgress(userId)\n\n        slots = ['working-on', 'watching']\n\n        scope.hiddenDuties = {}\n        scope.showHiddenDuties = {}\n\n        scope.toggleShowHiddenDuties = (slot) ->\n            if !(slot in slots)\n                return console.error(\"Invalid duties slot `#{slot}`\")\n            scope.showHiddenDuties[slot] = !scope.showHiddenDuties[slot]\n            updateShowHiddenDuties(slot)\n\n        for slot in slots\n            scope.hiddenDuties[slot] =  getHiddenDuties(slot)\n            scope.showHiddenDuties[slot] =  getShowHiddenDuties(slot)\n\n        scope.$on \"duty:toggle-hidden\", (event, duty, slot) =>\n            if !(slot in slots)\n                return console.error(\"Invalid duties slot `#{slot}`\")\n            toggleDutyHidden(duty, slot)\n\n    return {\n        controller: \"WorkingOn\",\n        controllerAs: \"vm\",\n        templateUrl: \"home/working-on/working-on.html\",\n        scope: {},\n        link: link\n    }\n\nWorkingOnDirective.$inject = [\n    \"tgHomeService\",\n    \"tgCurrentUserService\",\n    \"$tgStorage\"\n]\n\nangular.module(\"taigaHome\").directive(\"tgWorkingOn\", WorkingOnDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: invite-members/invite-members-form/invite-members-form.controller.coffee\n###\n\ntaiga = @.taiga\n\n\nclass InviteMembersFormController\n    @.$inject = [\n        \"tgProjectService\",\n        \"$tgResources\",\n        \"lightboxService\",\n        \"$tgConfirm\",\n        \"$rootScope\"\n    ]\n\n    constructor: (@projectService, @rs, @lightboxService, @confirm, @rootScope) ->\n        @.project = @projectService.project\n        @.roles = @projectService.project.get('roles')\n        @.rolesValues = {}\n        @.loading = false\n        @.defaultMaxInvites = 4\n\n    _areRolesValidated: () ->\n        Object.defineProperty @, 'areRolesValidated', {\n            get: () =>\n                roleIds = _.filter _.values(@.rolesValues), (it) -> return it\n                return roleIds.length == @.contactsToInvite.size + @.emailsToInvite.size\n        }\n\n    _checkLimitMemberships: () ->\n        if @.project.get('max_memberships') == null\n            @.membersLimit = @.defaultMaxInvites\n        else\n            pendingMembersCount = Math.max(@.project.get('max_memberships') - @.project.get('total_memberships'), 0)\n            @.membersLimit = Math.min(pendingMembersCount, @.defaultMaxInvites)\n\n        @.showWarningMessage = @.membersLimit < @.defaultMaxInvites\n\n    sendInvites: () ->\n        @.setInvitedContacts = []\n        _.forEach(@.rolesValues, (key, value) =>\n            @.setInvitedContacts.push({\n                'role_id': key\n                'username': value\n            })\n        )\n        @.loading = true\n        @rs.memberships.bulkCreateMemberships(\n            @.project.get('id'),\n            @.setInvitedContacts,\n            @.inviteContactsMessage\n        )\n            .then (response) => # On success\n                @projectService.fetchProject().then =>\n                    @.loading = false\n                    @lightboxService.closeAll()\n                    @rootScope.$broadcast(\"membersform:new:success\")\n                    @confirm.notify('success')\n            .catch (response) => # On error\n                @.loading = false\n                if response.data._error_message\n                    @confirm.notify(\"error\", response.data._error_message)\n\n\nangular.module(\"taigaAdmin\").controller(\"InviteMembersFormCtrl\", InviteMembersFormController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: invite-members/invite-members-form/invite-members-form.directive.coffee\n###\n\nInviteMembersFormDirective = () ->\n    link = (scope, el, attrs, ctrl) ->\n        ctrl._areRolesValidated()\n        ctrl._checkLimitMemberships()\n\n    return {\n        scope: {},\n        templateUrl:\"invite-members/invite-members-form/invite-members-form.html\",\n        controller: \"InviteMembersFormCtrl\",\n        controllerAs: \"vm\",\n        bindToController: {\n            contactsToInvite: '<',\n            emailsToInvite: '=',\n            onDisplayContactList: '&',\n            onRemoveInvitedContact: '&',\n            onRemoveInvitedEmail: '&',\n            onSendInvites: '&'\n        },\n        link: link\n    }\n\nangular.module(\"taigaAdmin\").directive(\"tgInviteMembersForm\", InviteMembersFormDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: invite-members/lightbox-add-members.controller.coffee\n###\n\ntaiga = @.taiga\n\nclass AddMembersController\n    @.$inject = [\n        \"tgUserService\",\n        \"tgCurrentUserService\",\n        \"tgProjectService\",\n    ]\n\n    constructor: (@userService, @currentUserService, @projectService) ->\n        @.contactsToInvite = Immutable.List()\n        @.emailsToInvite = Immutable.List()\n        @.displayContactList = false\n\n    _getContacts: () ->\n        userId = @currentUserService.getUser().get(\"id\")\n        excludeProjectId = @projectService.project.get(\"id\")\n\n        @userService.getContacts(userId, excludeProjectId).then (contacts) =>\n            @.contacts = contacts\n\n    _filterContacts: (invited) ->\n        @.contacts = @.contacts.filter( (contact) =>\n            contact.get('id') != invited.get('id')\n        )\n\n    inviteSuggested: (contact) ->\n        @.contactsToInvite = @.contactsToInvite.push(contact)\n        @._filterContacts(contact)\n        @.displayContactList = true\n\n    removeContact: (invited) ->\n        @.contactsToInvite = @.contactsToInvite.filter( (contact) =>\n            return contact.get('id') != invited.id\n        )\n        invited = Immutable.fromJS(invited)\n        @.contacts = @.contacts.push(invited)\n        @.testEmptyContacts()\n\n    inviteEmail: (email) ->\n        emailData = Immutable.Map({'email': email})\n        @.emailsToInvite = @.emailsToInvite.push(emailData)\n        @.displayContactList = true\n\n    removeEmail: (invited) ->\n        @.emailsToInvite = @.emailsToInvite.filter( (email) =>\n            return email.get('email') != invited.email\n        )\n        @.testEmptyContacts()\n\n    testEmptyContacts: () ->\n        if @.emailsToInvite.size + @.contactsToInvite.size == 0\n            @.displayContactList = false\n\nangular.module(\"taigaAdmin\").controller(\"AddMembersCtrl\", AddMembersController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: invite-members/lightbox-add-members.directive.coffee\n###\n\nLightboxAddMembersDirective = (lightboxService) ->\n    link = (scope, el, attrs, ctrl) ->\n        lightboxService.open(el)\n        ctrl._getContacts()\n\n    return {\n        scope: {},\n        templateUrl:\"invite-members/lightbox-add-members.html\",\n        controller: \"AddMembersCtrl\",\n        controllerAs: \"vm\",\n        link: link\n    }\n\nangular.module(\"taigaAdmin\").directive(\"tgLbAddMembers\", [\"lightboxService\", LightboxAddMembersDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: invite-members/suggest-add-members/suggest-add-members.controller.coffee\n###\n\ntaiga = @.taiga\n\nclass SuggestAddMembersController\n    @.$inject = []\n\n    constructor: () ->\n        @.contactQuery = \"\"\n\n    isEmail: () ->\n        return taiga.isEmail(@.contactQuery)\n\n    filterContacts: () ->\n        @.filteredContacts = @.contacts.filter( (contact) =>\n            contact.get('full_name_display').toLowerCase().includes(@.contactQuery.toLowerCase()) || contact.get('username').toLowerCase().includes(@.contactQuery.toLowerCase());\n        ).slice(0,12)\n\n    setInvited: (contact) ->\n        @.onInviteSuggested({'contact': contact})\n\nangular.module(\"taigaAdmin\").controller(\"SuggestAddMembersCtrl\", SuggestAddMembersController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: invite-members/suggest-add-members/suggest-add-members.directive.coffee\n###\n\nSuggestAddMembersDirective = (lightboxService) ->\n    link = (scope, el, attrs, ctrl) ->\n        scope.$watch \"vm.contacts\", (contacts) =>\n            if contacts\n                ctrl.filterContacts()\n\n    return {\n        scope: {},\n        templateUrl:\"invite-members/suggest-add-members/suggest-add-members.html\",\n        controller: \"SuggestAddMembersCtrl\",\n        controllerAs: \"vm\",\n        bindToController: {\n            contacts: '=',\n            onInviteSuggested: '&',\n            onInviteEmail: '&'\n        },\n        link: link\n    }\n\nangular.module(\"taigaAdmin\").directive(\"tgSuggestAddMembers\", [\"lightboxService\", SuggestAddMembersDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: navigation-bar/dropdown-notifications/dropdown-notifications.directive.coffee\n###\n\ntimeout = @.taiga.timeout\n\nDropdownNotificationsDirective = ($rootScope, notificationsService, currentUserService) ->\n    link = ($scope, $el, $attrs, $ctrl) ->\n        $scope.notificationsList = []\n        $scope.loading = false\n\n        $scope.$on \"notifications:loaded\", (event, total) ->\n            $scope.loading = false\n            if $scope.total != undefined && total > $scope.total\n                $scope.newEvent = true\n                timeout 100, ->\n                    $scope.total = total\n                    $scope.$apply()\n                timeout 2000, ->\n                    $scope.newEvent = false\n            else\n                $scope.total = total\n\n        $scope.$on \"notifications:loading\", () ->\n            $scope.loading = true\n\n        $scope.setAllAsRead = () ->\n            notificationsService.setNotificationsAsRead().then ->\n                $rootScope.$emit(\"notifications:dismiss-all\")\n\n    directive = {\n        templateUrl: \"navigation-bar/dropdown-notifications/dropdown-notifications.html\"\n        scope: {\n            active: \"=\"\n        }\n        link: link\n    }\n\n    return directive\n\nangular.module(\"taigaNavigationBar\")\n    .directive(\"tgDropdownNotifications\", [\"$rootScope\", \"tgNotificationsService\",\n    \"tgCurrentUserService\", DropdownNotificationsDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: navigation-bar/dropdown-project-list/dropdown-project-list.directive.coffee\n###\n\nDropdownProjectListDirective = (rootScope, currentUserService, projectsService) ->\n    link = (scope, el, attrs, ctrl) ->\n        scope.vm = {}\n\n        taiga.defineImmutableProperty(scope.vm, \"projects\", () -> currentUserService.projects.get(\"recents\"))\n\n        scope.vm.newProject = ->\n            projectsService.newProject()\n\n        updateLinks = ->\n            el.find(\".dropdown-project-list ul li a\").data(\"fullUrl\", \"\")\n\n        rootScope.$on(\"dropdown-project-list:updated\", updateLinks)\n\n    directive = {\n        templateUrl: \"navigation-bar/dropdown-project-list/dropdown-project-list.html\"\n        scope: {\n            active: \"=\"\n        }\n        link: link\n    }\n\n    return directive\n\nDropdownProjectListDirective.$inject = [\n    \"$rootScope\",\n    \"tgCurrentUserService\",\n    \"tgProjectsService\"\n]\n\nangular.module(\"taigaNavigationBar\").directive(\"tgDropdownProjectList\", DropdownProjectListDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: navigation-bar/dropdown-user/dropdown-user.directive.coffee\n###\n\nDropdownUserDirective = (authService, configService, locationService,\n        navUrlsService, feedbackService, $rootScope) ->\n\n    link = (scope, el, attrs, ctrl) ->\n        scope.vm = {}\n        scope.vm.isFeedbackEnabled = configService.get(\"feedbackEnabled\")\n        scope.vm.customSupportUrl = configService.get(\"supportUrl\")\n        taiga.defineImmutableProperty(scope.vm, \"user\", () -> authService.userData)\n\n        scope.vm.logout = ->\n            authService.logout()\n            locationService.url(navUrlsService.resolve(\"discover\"))\n            locationService.search({})\n\n        scope.vm.sendFeedback = ->\n            feedbackService.sendFeedback()\n\n        scope.vm.userSettingsPlugins = _.filter($rootScope.userSettingsPlugins, {userMenu: true})\n\n    directive = {\n        templateUrl: \"navigation-bar/dropdown-user/dropdown-user.html\"\n        scope: {}\n        link: link\n    }\n\n    return directive\n\nDropdownUserDirective.$inject = [\n    \"$tgAuth\",\n    \"$tgConfig\",\n    \"$tgLocation\",\n    \"$tgNavUrls\",\n    \"tgFeedbackService\",\n    \"$rootScope\"\n]\n\nangular.module(\"taigaNavigationBar\").directive(\"tgDropdownUser\", DropdownUserDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: navigation-bar/navigation-bar.directive.coffee\n###\n\nNavigationBarDirective = (currentUserService, navigationBarService, locationService, navUrlsService, config) ->\n    link = (scope, el, attrs, ctrl) ->\n        scope.vm = {}\n\n        taiga.defineImmutableProperty(scope.vm, \"projects\", () -> currentUserService.projects.get(\"recents\"))\n        taiga.defineImmutableProperty(scope.vm, \"isAuthenticated\", () -> currentUserService.isAuthenticated())\n        taiga.defineImmutableProperty(scope.vm, \"isEnabledHeader\", () -> navigationBarService.isEnabledHeader())\n\n        scope.vm.publicRegisterEnabled = config.get(\"publicRegisterEnabled\")\n        scope.vm.customSupportUrl = config.get(\"supportUrl\")\n\n        scope.vm.login = ->\n            nextUrl = encodeURIComponent(locationService.url())\n            locationService.url(navUrlsService.resolve(\"login\"))\n            locationService.search({next: nextUrl})\n\n        scope.$on \"$routeChangeSuccess\", () ->\n            scope.vm.active = null\n            switch locationService.path()\n                when \"/\"\n                    scope.vm.active = 'dashboard'\n                when \"/discover\"\n                    scope.vm.active = 'discover'\n                when \"/notifications\"\n                    scope.vm.active = 'notifications'\n                when \"/projects/\"\n                    scope.vm.active = 'projects'\n\n    directive = {\n        templateUrl: \"navigation-bar/navigation-bar.html\"\n        scope: {}\n        link: link\n    }\n\n    return directive\n\nNavigationBarDirective.$inject = [\n    \"tgCurrentUserService\",\n    \"tgNavigationBarService\",\n    \"$tgLocation\",\n    \"$tgNavUrls\",\n    \"$tgConfig\"\n]\n\nangular.module(\"taigaNavigationBar\").directive(\"tgNavigationBar\", NavigationBarDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: navigation-bar/navigation-bar.service.coffee\n###\n\nclass NavigationBarService extends taiga.Service\n\n    constructor: ->\n        @.disableHeader()\n\n    enableHeader: ->\n        @.enabledHeader = true\n\n    disableHeader:  ->\n        @.enabledHeader = false\n\n    isEnabledHeader: ->\n        return @.enabledHeader\n\nangular.module(\"taigaNavigationBar\").service(\"tgNavigationBarService\", NavigationBarService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: notifications/notifications-list/notifications-list.directive.coffee\n###\n\nNotificationsListDirective = ->\n    return {\n        templateUrl: \"notifications/notifications-list/notifications-list.html\",\n        controller: \"Notifications\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        scope: {\n            infiniteScrollContainer: \"@\",\n            infiniteScrollDistance: \"=\",\n            infiniteScrollDisabled: \"=\",\n            onlyUnread: \"=onlyUnread\"\n        }\n    }\n\nangular.module(\"taigaNotifications\").directive(\"tgNotificationsList\", NotificationsListDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: notifications/notifications.controller.coffee\n###\n\ntaiga = @.taiga\n\nmixOf = @.taiga.mixOf\ndebounceLeading = @.taiga.debounceLeading\n\nclass NotificationsController extends mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin)\n    @.$inject = [\n        \"$rootScope\",\n        \"$scope\",\n        \"tgNotificationsService\"\n        \"tgCurrentUserService\",\n        \"$tgEvents\",\n        \"$location\"\n        \"$window\"\n    ]\n\n    constructor: (@rootScope, @scope, @notificationsService, @currentUserService, @events,\n    @location, @window) ->\n        @.total = 0\n        @.user = @currentUserService.getUser()\n        @.scrollDisabled = false\n        @.initList()\n        @.loadNotifications()\n\n        @rootScope.$on \"notifications:dismiss\", (event) =>\n            if @.onlyUnread\n                @.reloadList()\n\n        @rootScope.$on \"notifications:new\", (event) =>\n            @.reloadList()\n\n        @rootScope.$on \"notifications:dismiss-all\", (event) =>\n            @.reloadList()\n\n    initList: ()->\n        @.notificationsList = Immutable.List()\n        @.list = @notificationsService.getNotificationsList(@.user.get(\"id\"), @.onlyUnread?)\n        @.loading = !@.list?\n\n    reloadList: ()->\n        @.initList()\n        @.loadNotifications()\n\n    loadNotifications: () ->\n        @.scrollDisabled = true\n        @.loading = true\n        @scope.$emit(\"notifications:loading\")\n        return @.list\n            .next()\n            .then (response) =>\n                @.notificationsList = @.notificationsList.concat(response.get(\"items\"))\n\n                if !@.infiniteScrollDisabled && response.get(\"next\")\n                    @.scrollDisabled = false\n\n                @.total = response.get(\"total\")\n\n                @scope.$emit(\"notifications:loaded\", @.total)\n\n                @.loading = false\n                return @.notificationsList\n\n    setAsRead: (notification, url) ->\n        @notificationsService.setNotificationAsRead(notification.get(\"id\")).then =>\n            if @location.$$url == url\n                @window.location.reload()\n            else\n                @location.path(url)\n\n            @rootScope.$broadcast \"notifications:dismiss\"\n\n    setAllAsRead: () ->\n        @notificationsService.setNotificationsAsRead().then =>\n            @rootScope.$broadcast \"notifications:dismiss-all\"\n\n\nangular.module(\"taigaNotifications\").controller(\"Notifications\", NotificationsController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: user-notification/user-notification/user-notification.service.coffee\n###\n\ntaiga = @.taiga\n\nclass NotificationsService extends taiga.Service\n    @.$inject = [\n        \"tgResources\"\n        \"tgUserTimelinePaginationSequenceService\"\n        \"$translate\"\n        \"$tgNavUrls\"\n        \"$tgSections\"\n    ]\n\n    _notificationTypes = [\n        { # Assigned to you\n            check: (notification) -> return notification.get('event_type') == 1\n            key: 'EVENTS.ASSIGNED_YOU',\n            translate_params: ['username', 'obj_name']\n        },\n        { # Mentioned you in a object description\n            check: (notification) -> return notification.get('event_type') == 2\n            key: 'EVENTS.MENTIONED_YOU',\n            translate_params: ['username', 'obj_name'],\n        },\n        { # Added you as watcher\n            check: (notification) -> return notification.get('event_type') == 3\n            key: 'EVENTS.ADDED_YOU_AS_WATCHER',\n            translate_params: ['username', 'obj_name'],\n        },\n        { # Added you as member\n            check: (notification) -> return notification.get('event_type') == 4\n            key: 'EVENTS.ADDED_YOU_AS_MEMBER',\n            translate_params: ['username']\n        },\n        { # Commented\n            check: (notification) -> return notification.get('event_type') == 5\n            key: 'EVENTS.COMMENTED',\n            translate_params: ['username', 'obj_name'],\n        },\n        { # Mentioned you in a comment\n            check: (notification) -> return notification.get('event_type') == 6\n            key: 'EVENTS.MENTIONED_YOU_IN_COMMENT',\n            translate_params: ['username', 'obj_name'],\n        },\n    ]\n\n    _params = {\n        username: (notification) ->\n            user = notification.getIn(['data', 'user'])\n            if user.get('is_profile_visible')\n                title_attr = @translate.instant('COMMON.SEE_USER_PROFILE', {username: user.get('username')})\n                url = @navUrls.resolve('user-profile', {\n                    username: notification.getIn(['data', 'user', 'username'])\n                })\n                return @._getLink(notification, url, user.get('name'), 'user-link', title_attr)\n            else\n                return @._getUsernameSpan(user.get('name'))\n\n        project_name: (notification) ->\n            url = @navUrls.resolve('project', {\n                project: notification.getIn(['data', 'project', 'slug'])\n            })\n            return @._getLink(notification, url, notification.getIn([\"data\", \"project\", \"name\"]), 'project-link')\n\n        obj_name: (notification) ->\n            obj = @._getNotificationObject(notification)\n            url = @._getDetailObjUrl(notification, obj.get('content_type'))\n            text = '#' + obj.get('ref') + ' ' + obj.get('subject')\n            return @._getLink(notification, url, text, 'object-link' )\n    }\n\n    constructor: (\n        @rs\n        @userTimelinePaginationSequenceService\n        @translate\n        @navUrls\n        @tgSections\n    ) ->\n\n    getNotificationsList: (userId, onlyUnread) ->\n        total = 0\n        config = {}\n        config.fetch = (page) =>\n            return @rs.users.getNotifications(userId, page, onlyUnread)\n                .then (response) ->\n                    return response\n\n        config.map = (obj) => @._addNotificationAttributes(obj)\n        return @userTimelinePaginationSequenceService.generate(config)\n\n    setNotificationAsRead: (notificationId) ->\n        return @rs.users.setNotificationAsRead(notificationId)\n\n    setNotificationsAsRead: () ->\n        return @rs.users.setNotificationsAsRead()\n\n    _getNotificationObject: (notification) ->\n        if notification.get('data').get('obj')\n            return notification.get('data').get('obj')\n\n    _getType: (notification) ->\n        return _.find _notificationTypes, (obj) ->\n            return obj.check(notification)\n\n    _addNotificationAttributes: (notification) ->\n        event_type = notification.get('event_type')\n        \n        type =  @._getType(notification)\n\n        title = @._getTitle(notification, event_type, type)\n        notification = notification.set('title_html', title)\n\n        projectSlug = notification.getIn(['data', 'project', 'slug'])\n        projectSectionPath = @tgSections.getPath(projectSlug)\n        projectUrl = @navUrls.resolve(\"project-#{projectSectionPath}\", { project: projectSlug })\n        notification = notification.set('projectUrl', projectUrl)\n\n        notification = notification.set('obj', @._getNotificationObject(notification))\n\n        return notification\n\n    _translateTitleParams: (param, notification, event) ->\n        return _params[param].call(this, notification, event)\n\n    _getDetailObjUrl: (notification, contentType) ->\n        urlMapping = {\n            \"issue\": \"project-issues-detail\",\n            \"task\": \"project-tasks-detail\",\n            \"userstory\": \"project-userstories-detail\",\n        }\n        url = @navUrls.resolve(urlMapping[contentType], {\n            project: notification.getIn(['data', 'project', 'slug']),\n            ref: notification.getIn(['data', 'obj', 'ref'])\n        })\n\n        return url\n\n    _getLink: (notification, url, text, css, title) ->\n        title = title || text\n\n        span = $('<span>')\n            .attr('ng-non-bindable', true)\n            .text(text)\n\n        return $('<a href=\"\">')\n            .attr('title', title)\n            .attr('class', css)\n            .attr('ng-click', \"vm.setAsRead(notification, \\\"#{url}\\\")\")\n            .append(span)\n            .prop('outerHTML')\n\n    _getUsernameSpan: (text) ->\n        title = title || text\n\n        return $('<span>')\n            .addClass('username')\n            .text(text)\n            .prop('outerHTML')\n\n    _getParams: (notification, event_type, notification_type) ->\n        params = {}\n\n        notification_type.translate_params.forEach (param) =>\n            params[param] = @._translateTitleParams(param, notification, event_type)\n        return params\n\n    _getTitle: (notification, event_type, notification_type) ->\n        params = @._getParams(notification, event_type, notification_type)\n\n        paramsKeys = {}\n        Object.keys(params).forEach (key) -> paramsKeys[key] = '{{' +key + '}}'\n\n        translation = @translate.instant(notification_type.key, paramsKeys)\n\n        Object.keys(params).forEach (key) ->\n            find = '{{' +key + '}}'\n            translation = translation.replace(new RegExp(find, 'g'), params[key])\n\n        return translation\n\nangular.module(\"taigaNotifications\").service(\"tgNotificationsService\", NotificationsService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: profile/profile-bar/profile-bar.controller.coffee\n###\n\nclass ProfileBarController\n    @.$inject = [\n        \"tgUserService\"\n    ]\n\n    constructor: (@userService) ->\n        @.loadStats()\n\n    loadStats: () ->\n        return @userService.getStats(@.user.get(\"id\")).then (stats) =>\n            @.stats = stats\n\nangular.module(\"taigaProfile\").controller(\"ProfileBar\", ProfileBarController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: profile/profile-bar/profile-bar.directive.coffee\n###\n\nProfileBarDirective = () ->\n    return {\n        templateUrl: \"profile/profile-bar/profile-bar.html\",\n        controller: \"ProfileBar\",\n        controllerAs: \"vm\",\n        scope: {\n            user: \"=user\",\n            isCurrentUser: \"=iscurrentuser\"\n        },\n        bindToController: true\n    }\n\n\nangular.module(\"taigaProfile\").directive(\"tgProfileBar\", ProfileBarDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: profile/profile-contacts/profile-contacts.controller.coffee\n###\n\nclass ProfileContactsController\n    @.$inject = [\n        \"tgUserService\",\n        \"tgCurrentUserService\"\n    ]\n\n    constructor: (@userService, @currentUserService) ->\n        @.currentUser = @currentUserService.getUser()\n\n        @.isCurrentUser = false\n\n        if @.currentUser && @.currentUser.get(\"id\") == @.user.get(\"id\")\n            @.isCurrentUser = true\n\n    loadContacts: () ->\n        @userService.getContacts(@.user.get(\"id\"))\n            .then (contacts) =>\n                @.contacts = contacts\n\nangular.module(\"taigaProfile\")\n    .controller(\"ProfileContacts\", ProfileContactsController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: profile/profile-contacts/profile-contacts.directive.coffee\n###\n\nProfileContactsDirective = () ->\n    link = (scope, elm, attrs, ctrl) ->\n        ctrl.loadContacts()\n\n    return {\n        templateUrl: \"profile/profile-contacts/profile-contacts.html\",\n        scope: {\n            user: \"=\"\n        },\n        controllerAs: \"vm\",\n        controller: \"ProfileContacts\",\n        link: link,\n        bindToController: true\n    }\n\nangular.module(\"taigaProfile\").directive(\"tgProfileContacts\", ProfileContactsDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: profile/profile-favs/items/items.directive.coffee\n###\n\nFavItemDirective = ->\n    link = (scope, el, attrs, ctrl) ->\n        scope.vm = {item: scope.item}\n\n    templateUrl = (el, attrs) ->\n        if attrs.itemType == \"project\"\n            return \"profile/profile-favs/items/project.html\"\n        else # if attr.itemType in [\"userstory\", \"task\", \"issue\"]\n            return \"profile/profile-favs/items/ticket.html\"\n\n    return {\n        scope: {\n            \"item\": \"=tgFavItem\"\n        }\n        link: link\n        templateUrl: templateUrl\n    }\n\n\nangular.module(\"taigaProfile\").directive(\"tgFavItem\", FavItemDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: profile/profile-favs/profile-favs.controller.coffee\n###\n\ndebounceLeading = @.taiga.debounceLeading\n\nclass FavsBaseController\n    constructor: ->\n        @._init()\n\n        #@._getItems = null # Define in inheritance classes\n        #\n    _init: ->\n        @.enableFilterByAll = true\n        @.enableFilterByProjects = true\n        @.enableFilterByEpics = true\n        @.enableFilterByUserStories = true\n        @.enableFilterByTasks = true\n        @.enableFilterByIssues = true\n        @.enableFilterByTextQuery = true\n\n        @._resetList()\n        @.q = null\n        @.type = null\n\n    _resetList: ->\n        @.items = Immutable.List()\n        @.scrollDisabled = false\n        @._page = 1\n\n    _enableLoadingSpinner: ->\n        @.isLoading = true\n\n    _disableLoadingSpinner: ->\n        @.isLoading = false\n\n    _enableScroll : ->\n        @.scrollDisabled = false\n\n    _disableScroll : ->\n        @.scrollDisabled = true\n\n    _checkIfHasMorePages: (hasNext) ->\n        if hasNext\n            @._page += 1\n            @._enableScroll()\n        else\n            @._disableScroll()\n\n    _checkIfHasNoResults: ->\n        @.hasNoResults = @.items.size == 0\n\n    loadItems:  ->\n        @._enableLoadingSpinner()\n        @._disableScroll()\n\n        @._getItems(@.user.get(\"id\"), @._page, @.type, @.q)\n            .then (response) =>\n                @.items = @.items.concat(response.get(\"data\"))\n\n                @._checkIfHasMorePages(response.get(\"next\"))\n                @._checkIfHasNoResults()\n                @._disableLoadingSpinner()\n\n                return @.items\n            .catch =>\n                @._disableLoadingSpinner()\n\n                return @.items\n\n    ################################################\n    ## Filtre actions\n    ################################################\n    filterByTextQuery: debounceLeading 500, ->\n        @._resetList()\n        @.loadItems()\n\n    showAll: ->\n        if @.type isnt null\n            @.type = null\n            @._resetList()\n            @.loadItems()\n\n    showProjectsOnly: ->\n        if @.type isnt \"project\"\n            @.type = \"project\"\n            @._resetList()\n            @.loadItems()\n\n    showEpicsOnly: ->\n        if @.type isnt \"epic\"\n            @.type = \"epic\"\n            @._resetList()\n            @.loadItems()\n\n    showUserStoriesOnly: ->\n        if @.type isnt \"userstory\"\n            @.type = \"userstory\"\n            @._resetList()\n            @.loadItems()\n\n    showTasksOnly: ->\n        if @.type isnt \"task\"\n            @.type = \"task\"\n            @._resetList()\n            @.loadItems()\n\n    showIssuesOnly: ->\n        if @.type isnt \"issue\"\n            @.type = \"issue\"\n            @._resetList()\n            @.loadItems()\n\n\n####################################################\n## Liked\n####################################################\n\nclass ProfileLikedController extends FavsBaseController\n    @.$inject = [\n        \"tgUserService\",\n    ]\n\n    constructor: (@userService) ->\n        super()\n        @.tabName = 'likes'\n        @.enableFilterByAll = false\n        @.enableFilterByProjects = false\n        @.enableFilterByEpics = false\n        @.enableFilterByUserStories = false\n        @.enableFilterByTasks = false\n        @.enableFilterByIssues = false\n        @.enableFilterByTextQuery = true\n        @._getItems = @userService.getLiked\n\n\nangular.module(\"taigaProfile\")\n    .controller(\"ProfileLiked\", ProfileLikedController)\n\n####################################################\n## Voted\n####################################################\n\nclass ProfileVotedController extends FavsBaseController\n    @.$inject = [\n        \"tgUserService\",\n    ]\n\n    constructor: (@userService) ->\n        super()\n        @.tabName = 'upvotes'\n        @.enableFilterByAll = true\n        @.enableFilterByProjects = false\n        @.enableFilterByEpics = true\n        @.enableFilterByUserStories = true\n        @.enableFilterByTasks = true\n        @.enableFilterByIssues = true\n        @.enableFilterByTextQuery = true\n        @._getItems = @userService.getVoted\n\n\nangular.module(\"taigaProfile\")\n    .controller(\"ProfileVoted\", ProfileVotedController)\n\n\n\n####################################################\n## Watched\n####################################################\n\nclass ProfileWatchedController extends FavsBaseController\n    @.$inject = [\n        \"tgUserService\",\n    ]\n\n    constructor: (@userService) ->\n        super()\n        @.tabName = 'watchers'\n        @._getItems = @userService.getWatched\n\n\nangular.module(\"taigaProfile\")\n    .controller(\"ProfileWatched\", ProfileWatchedController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: profile/profile-favs/profile-favs.directive.coffee\n###\n\nbase = {\n    scope: {},\n    bindToController: {\n        user: \"=\"\n        type: \"@\"\n        q: \"@\"\n        scrollDisabled: \"@\"\n        isLoading: \"@\"\n        hasNoResults: \"@\"\n    }\n    controller: null, # Define in directives\n    controllerAs: \"vm\",\n    templateUrl: \"profile/profile-favs/profile-favs.html\",\n}\n\n\n####################################################\n## Liked\n####################################################\n\nProfileLikedDirective = () ->\n    return _.extend({}, base, {\n        controller: \"ProfileLiked\"\n    })\n\nangular.module(\"taigaProfile\").directive(\"tgProfileLiked\", ProfileLikedDirective)\n\n\n####################################################\n## Voted\n####################################################\n\nProfileVotedDirective = () ->\n    return _.extend({}, base, {\n        controller: \"ProfileVoted\"\n    })\n\nangular.module(\"taigaProfile\").directive(\"tgProfileVoted\", ProfileVotedDirective)\n\n\n####################################################\n## Watched\n####################################################\n\nProfileWatchedDirective = () ->\n    return _.extend({}, base, {\n        controller: \"ProfileWatched\"\n    })\n\nangular.module(\"taigaProfile\").directive(\"tgProfileWatched\", ProfileWatchedDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: profile/profile-hints/profile-hints.controller.coffee\n###\n\nclass ProfileHints\n    HINTS: [\n        { #hint1\n            url: \"https://tree.taiga.io/support/admin/import-export-projects/\"\n        },\n        { #hint2\n            url: \"https://tree.taiga.io/support/admin/custom-fields/\"\n        },\n        { #hint3\n        },\n        { #hint4\n        }\n    ]\n    constructor: (@translate) ->\n        hintKey = Math.floor(Math.random() * @.HINTS.length) + 1\n\n        @.hint = @.HINTS[hintKey - 1]\n\n        @.hint.linkText = @.hint.linkText || 'HINTS.LINK'\n\n        @.hint.title = @translate.instant(\"HINTS.HINT#{hintKey}_TITLE\")\n\n        @.hint.text = @translate.instant(\"HINTS.HINT#{hintKey}_TEXT\")\n\nProfileHints.$inject = [\n    \"$translate\"\n]\n\nangular.module(\"taigaProfile\").controller(\"ProfileHints\", ProfileHints)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: profile/profile-hints/profile-hints.directive.coffee\n###\n\nProfileHints = ($translate) ->\n    return {\n        scope: {},\n        controller: \"ProfileHints\",\n        controllerAs: \"vm\",\n        templateUrl: \"profile/profile-hints/profile-hints.html\"\n    }\n\nProfileHints.$inject = [\n    \"$translate\"\n]\n\nangular.module(\"taigaProfile\").directive(\"tgProfileHints\", ProfileHints)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: profile/profile-projects/profile-projects.controller.coffee\n###\n\nclass ProfileProjectsController\n    @.$inject = [\n        \"tgProjectsService\",\n        \"tgUserService\"\n    ]\n\n    constructor: (@projectsService, @userService) ->\n\n    loadProjects: () ->\n        @projectsService.getProjectsByUserId(@.user.get(\"id\"))\n            .then (projects) =>\n                return @userService.attachUserContactsToProjects(@.user.get(\"id\"), projects)\n            .then (projects) =>\n                @.projects = projects\n\nangular.module(\"taigaProfile\")\n    .controller(\"ProfileProjects\", ProfileProjectsController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: profile/profile-projects/profile-projects.directive.coffee\n###\n\nProfileProjectsDirective = () ->\n    link = (scope, elm, attr, ctrl) ->\n        ctrl.loadProjects()\n\n    return {\n        templateUrl: \"profile/profile-projects/profile-projects.html\",\n        scope: {\n            user: \"=\"\n        },\n        link: link\n        bindToController: true,\n        controllerAs: \"vm\",\n        controller: \"ProfileProjects\"\n    }\n\nangular.module(\"taigaProfile\").directive(\"tgProfileProjects\", ProfileProjectsDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: profile/profile-tab/profile-tab.directive.coffee\n###\n\nProfileTabDirective = () ->\n    link = (scope, element, attrs, ctrl, transclude) ->\n        scope.tab = {}\n\n        attrs.$observe \"tgProfileTab\", (name) ->\n            scope.tab.name = name\n\n        attrs.$observe \"tabTitle\", (title) ->\n            scope.tab.title = title\n\n        scope.tab.icon = attrs.tabIcon\n        scope.tab.active = !!attrs.tabActive\n\n        if scope.$eval(attrs.tabDisabled) != true\n            ctrl.addTab(scope.tab)\n\n    return {\n        templateUrl: \"profile/profile-tab/profile-tab.html\",\n        scope: {},\n        require: \"^tgProfileTabs\",\n        link: link,\n        transclude: true\n    }\n\nangular.module(\"taigaProfile\")\n    .directive(\"tgProfileTab\", ProfileTabDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: profile/profile-tabs/profile-tabs.controller.coffee\n###\n\nclass ProfileTabsController\n    constructor: () ->\n        @tabs = []\n\n    addTab: (tab) ->\n        @tabs.push(tab)\n\n    toggleTab: (tab) ->\n        _.map @tabs, (tab) -> tab.active = false\n\n        tab.active = true\n\nangular.module(\"taigaProfile\")\n    .controller(\"ProfileTabs\", ProfileTabsController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: profile/profile-tabs/profile-tabs.directive.coffee\n###\n\nProfileTabsDirective = () ->\n    return {\n        scope: {}\n        controller: \"ProfileTabs\"\n        controllerAs: \"vm\"\n        templateUrl: \"profile/profile-tabs/profile-tabs.html\"\n        transclude: true\n    }\n\nangular.module(\"taigaProfile\")\n    .directive(\"tgProfileTabs\", ProfileTabsDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: profile/profile.controller.coffee\n###\n\nclass ProfileController\n    @.$inject = [\n        \"tgAppMetaService\",\n        \"tgCurrentUserService\",\n        \"$routeParams\",\n        \"tgUserService\",\n        \"tgXhrErrorService\",\n        \"$translate\"\n    ]\n\n    constructor: (@appMetaService, @currentUserService, @routeParams, @userService, @xhrError, @translate) ->\n        @.isCurrentUser = false\n\n        if @routeParams.slug\n            @userService\n                .getUserByUserName(@routeParams.slug)\n                .then (user) =>\n                    if !user.get('is_active')\n                        @xhrError.notFound()\n                    else\n                        @.user = user\n                        @.isCurrentUser = false\n                        @._setMeta(@.user)\n\n                        return user\n                .catch (xhr) =>\n                    return @xhrError.response(xhr)\n\n        else\n            @.user = @currentUserService.getUser()\n            @.isCurrentUser = true\n            @._setMeta(@.user)\n\n    _setMeta: (user) ->\n        ctx = {\n            userFullName: user.get(\"full_name_display\"),\n            userUsername: user.get(\"username\")\n        }\n\n        title = @translate.instant(\"USER.PROFILE.PAGE_TITLE\", ctx)\n\n        description = user.get(\"bio\")\n        @appMetaService.setAll(title, description)\n\nangular.module(\"taigaProfile\").controller(\"Profile\", ProfileController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/components/blocked-project-explanation.directive.coffee\n###\n\nBlockedProjectExplanationDirective = () ->\n    return {\n        templateUrl: \"projects/project/blocked-project-explanation.html\"\n    }\n\nangular.module(\"taigaProjects\").directive(\"tgBlockedProjectExplanation\", BlockedProjectExplanationDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/components/contact-project-button/contact-project-button.controller.coffee\n###\n\nclass ContactProjectButtonController\n    @.$inject = ['tgLightboxFactory']\n\n    constructor: (@lightboxFactory)->\n\n    launchContactForm: () ->\n        @lightboxFactory.create(\n            'tg-lb-contact-project',\n            {\n                \"class\": \"lightbox lightbox-contact-project e2e-lightbox-contact-project\",\n                \"project\": \"project\"\n            },\n            {\n                \"project\": @.project\n            }\n        )\n\n\nangular.module(\"taigaProjects\").controller(\"ContactProjectButtonCtrl\", ContactProjectButtonController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/components/contact-project-button/contact-project-button.directive.coffee\n###\n\nContactProjectButtonDirective = ->\n    return {\n        scope: {}\n        controller: \"ContactProjectButtonCtrl\",\n        bindToController: {\n            project: '='\n            layout: '@'\n        }\n        controllerAs: \"vm\",\n        templateUrl: \"projects/components/contact-project-button/contact-project-button.html\",\n    }\n\nangular.module(\"taigaProjects\").directive(\"tgContactProjectButton\", ContactProjectButtonDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/components/lb-contact-project/lb-contact-project.controller.coffee\n###\n\nclass ContactProjectLbController\n    @.$inject = [\n        \"lightboxService\",\n        \"tgResources\",\n        \"$tgConfirm\",\n    ]\n\n    constructor: (@lightboxService, @rs, @confirm) ->\n        @.contact = {}\n\n    contactProject: () ->\n        project = @.project.get('id')\n        message = @.contact.message\n\n        promise = @rs.projects.contactProject(project, message)\n        @.sendingFeedback = true\n        promise.then  =>\n            @lightboxService.closeAll()\n            @.sendingFeedback = false\n            @confirm.notify(\"success\")\n\nangular.module(\"taigaProjects\").controller(\"ContactProjectLbCtrl\", ContactProjectLbController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/components/lb-contact-project/lb-contact-project.directive.coffee\n###\n\nContactProjectLbDirective = (lightboxService) ->\n\n    @.inject = ['lightboxService']\n\n    link = (scope, el) ->\n        lightboxService.open(el)\n\n    return {\n        controller: \"ContactProjectLbCtrl\",\n        bindToController: {\n            project: '='\n        }\n        controllerAs: \"vm\",\n        templateUrl: \"projects/components/lb-contact-project/lb-contact-project.html\",\n        link: link\n    }\n\nangular.module(\"taigaProjects\").directive(\"tgLbContactProject\", [\"lightboxService\", ContactProjectLbDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/components/like-project-button/like-project-button.controller.coffee\n###\n\nclass LikeProjectButtonController\n    @.$inject = [\n        \"$tgConfirm\"\n        \"tgLikeProjectButtonService\"\n    ]\n\n    constructor: (@confirm, @likeButtonService)->\n        @.isMouseOver = false\n        @.loading = false\n\n    showTextWhenMouseIsOver: ->\n        @.isMouseOver = true\n\n    showTextWhenMouseIsLeave: ->\n        @.isMouseOver = false\n\n    toggleLike: ->\n        @.loading = true\n\n        if not @.project.get(\"is_fan\")\n            promise = @._like()\n        else\n            promise = @._unlike()\n\n        promise.finally () => @.loading = false\n\n        return promise\n\n    _like: ->\n        return @likeButtonService.like(@.project.get('id'))\n            .then =>\n                @.showTextWhenMouseIsLeave()\n            .catch =>\n                @confirm.notify(\"error\")\n\n    _unlike: ->\n        return @likeButtonService.unlike(@.project.get('id')).catch =>\n            @confirm.notify(\"error\")\n\nangular.module(\"taigaProjects\").controller(\"LikeProjectButton\", LikeProjectButtonController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/components/like-project-button/like-project-button.directive.coffee\n###\n\nLikeProjectButtonDirective = ->\n    return {\n        scope: {}\n        controller: \"LikeProjectButton\",\n        bindToController: {\n            project: '='\n        }\n        controllerAs: \"vm\",\n        templateUrl: \"projects/components/like-project-button/like-project-button.html\",\n    }\n\nangular.module(\"taigaProjects\").directive(\"tgLikeProjectButton\", LikeProjectButtonDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/components/like-project-button/like-project-button.service.coffee\n###\n\ntaiga = @.taiga\n\nclass LikeProjectButtonService extends taiga.Service\n    @.$inject = [\"tgResources\", \"tgCurrentUserService\", \"tgProjectService\"]\n\n    constructor: (@rs, @currentUserService, @projectService) ->\n\n    _getProjectIndex: (projectId) ->\n        return @currentUserService.projects\n                .get('all')\n                .findIndex (project) -> project.get('id') == projectId\n\n    _updateProjects: (projectId, isFan) ->\n        projectIndex = @._getProjectIndex(projectId)\n\n        return if projectIndex == -1\n\n        projects = @currentUserService.projects\n            .get('all')\n            .update projectIndex, (project) ->\n                totalFans = project.get(\"total_fans\")\n\n                if isFan then totalFans++ else totalFans--\n\n                return project.merge({\n                    is_fan: isFan,\n                    total_fans: totalFans\n                })\n\n        @currentUserService.setProjects(projects)\n\n    _updateCurrentProject: (isFan) ->\n        totalFans = @projectService.project.get(\"total_fans\")\n\n        if isFan then totalFans++ else totalFans--\n\n        project = @projectService.project.merge({\n            is_fan: isFan,\n            total_fans: totalFans\n        })\n\n        @projectService.setProject(project)\n\n    like: (projectId) ->\n        return @rs.projects.likeProject(projectId).then =>\n            @._updateProjects(projectId, true)\n            @._updateCurrentProject(true)\n\n    unlike: (projectId) ->\n        return @rs.projects.unlikeProject(projectId).then =>\n            @._updateProjects(projectId, false)\n            @._updateCurrentProject(false)\n\nangular.module(\"taigaProjects\").service(\"tgLikeProjectButtonService\", LikeProjectButtonService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/components/sort-projects.directive.coffee\n###\n\nSortProjectsDirective = (currentUserService) ->\n    link = (scope, el, attrs, ctrl) ->\n        itemEl = null\n\n        drake = dragula([el[0]], {\n            copySortSource: false,\n            copy: false,\n            mirrorContainer: el[0],\n            moves: (item) -> return $(item).hasClass('list-itemtype-project')\n        })\n\n        drake.on 'dragend', (item) ->\n            itemEl = $(item)\n            project = itemEl.scope().project\n            index = itemEl.index()\n\n            sorted_project_ids = _.map(scope.projects.toJS(), (p) -> p.id)\n            sorted_project_ids = _.without(sorted_project_ids, project.get(\"id\"))\n            sorted_project_ids.splice(index, 0, project.get('id'))\n\n            sortData = []\n\n            for value, index in sorted_project_ids\n                sortData.push({\"project_id\": value, \"order\":index})\n\n            currentUserService.bulkUpdateProjectsOrder(sortData)\n\n        scroll = autoScroll(window, {\n            margin: 20,\n            pixels: 30,\n            scrollWhenOutside: true,\n            autoScroll: () ->\n                return this.down && drake.dragging\n        })\n\n        scope.$on \"$destroy\", ->\n            el.off()\n            drake.destroy()\n\n    directive = {\n        scope: {\n            projects: \"=tgSortProjects\"\n        },\n        link: link\n    }\n\n    return directive\n\nangular.module(\"taigaProjects\").directive(\"tgSortProjects\", [\"tgCurrentUserService\", SortProjectsDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/components/watch-project-button/watch-project-button.controller.coffee\n###\n\nclass WatchProjectButtonController\n    @.$inject = [\n        \"$tgConfirm\"\n        \"tgWatchProjectButtonService\"\n    ]\n\n    constructor: (@confirm, @watchButtonService)->\n        @.showWatchOptions = false\n        @.loading = false\n\n    toggleWatcherOptions: () ->\n        @.showWatchOptions = !@.showWatchOptions\n\n    closeWatcherOptions: () ->\n        @.showWatchOptions = false\n\n    watch: (notifyLevel) ->\n        return if notifyLevel == @.project.get('notify_level')\n\n        @.loading = true\n        @.closeWatcherOptions()\n\n        return @watchButtonService.watch(@.project.get('id'), notifyLevel)\n            .catch () => @confirm.notify(\"error\")\n            .finally () => @.loading = false\n\n    unwatch: ->\n        @.loading = true\n        @.closeWatcherOptions()\n\n        return @watchButtonService.unwatch(@.project.get('id'))\n            .catch () => @confirm.notify(\"error\")\n            .finally () => @.loading = false\n\nangular.module(\"taigaProjects\").controller(\"WatchProjectButton\", WatchProjectButtonController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/components/watch-project-button/watch-project-button.directive.coffee\n###\n\nWatchProjectButtonDirective = ->\n    return {\n        scope: {}\n        controller: \"WatchProjectButton\",\n        bindToController: {\n            project: \"=\"\n        }\n        controllerAs: \"vm\",\n        templateUrl: \"projects/components/watch-project-button/watch-project-button.html\",\n    }\n\nangular.module(\"taigaProjects\").directive(\"tgWatchProjectButton\", WatchProjectButtonDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/components/watch-project-button/watch-project-button.service.coffee\n###\n\ntaiga = @.taiga\n\nclass WatchProjectButtonService extends taiga.Service\n    @.$inject = [\n        \"tgResources\",\n        \"tgCurrentUserService\",\n        \"tgProjectService\"\n    ]\n\n    constructor: (@rs, @currentUserService, @projectService) ->\n\n    _getProjectIndex: (projectId) ->\n        return @currentUserService.projects\n                .get('all')\n                .findIndex (project) -> project.get('id') == projectId\n\n\n    _updateProjects: (projectId, notifyLevel, isWatcher) ->\n        projectIndex = @._getProjectIndex(projectId)\n\n        return if projectIndex == -1\n\n        projects = @currentUserService.projects\n            .get('all')\n            .update projectIndex, (project) =>\n                totalWatchers = project.get('total_watchers')\n\n\n                if !@projectService.project.get('is_watcher')  && isWatcher\n                    totalWatchers++\n                else if @projectService.project.get('is_watcher') && !isWatcher\n                    totalWatchers--\n\n                return project.merge({\n                    is_watcher: isWatcher,\n                    total_watchers: totalWatchers\n                    notify_level: notifyLevel\n                })\n\n        @currentUserService.setProjects(projects)\n\n    _updateCurrentProject: (notifyLevel, isWatcher) ->\n        totalWatchers = @projectService.project.get(\"total_watchers\")\n\n        if !@projectService.project.get('is_watcher')  && isWatcher\n            totalWatchers++\n        else if @projectService.project.get('is_watcher') && !isWatcher\n            totalWatchers--\n\n        project = @projectService.project.merge({\n            is_watcher: isWatcher,\n            notify_level: notifyLevel,\n            total_watchers: totalWatchers\n        })\n\n        @projectService.setProject(project)\n\n    watch: (projectId, notifyLevel) ->\n        return @rs.projects.watchProject(projectId, notifyLevel).then =>\n            @._updateProjects(projectId, notifyLevel, true)\n            @._updateCurrentProject(notifyLevel, true)\n\n    unwatch: (projectId) ->\n        return @rs.projects.unwatchProject(projectId).then =>\n            @._updateProjects(projectId, null, false)\n            @._updateCurrentProject(null, false)\n\nangular.module(\"taigaProjects\").service(\"tgWatchProjectButtonService\", WatchProjectButtonService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/asana-import/asana-import-project-form/asana-import-project-form.controller.coffee\n###\n\nclass AsanaImportProjectFormController\n    @.$inject = [\n        \"tgCurrentUserService\"\n    ]\n\n    constructor: (@currentUserService) ->\n        @.canCreatePublicProjects = @currentUserService.canCreatePublicProjects()\n        @.canCreatePrivateProjects = @currentUserService.canCreatePrivateProjects()\n\n        @.projectForm = @.project.toJS()\n\n        @.platformName = \"Asana\"\n        @.projectForm.is_private = false\n        @.projectForm.keepExternalReference = false\n        @.projectForm.project_type = \"scrum\"\n\n        if !@.canCreatePublicProjects.valid && @.canCreatePrivateProjects.valid\n            @.projectForm.is_private = true\n\n    checkUsersLimit: () ->\n        @.limitMembersPrivateProject = @currentUserService.canAddMembersPrivateProject(@.members.size)\n        @.limitMembersPublicProject = @currentUserService.canAddMembersPublicProject(@.members.size)\n\n    saveForm: () ->\n        @.onSaveProjectDetails({project: Immutable.fromJS(@.projectForm)})\n\n    canCreateProject: () ->\n        if @.projectForm.is_private\n            return @.canCreatePrivateProjects.valid\n        else\n            return @.canCreatePublicProjects.valid\n\n    isDisabled: () ->\n        return !@.canCreateProject()\n\nangular.module('taigaProjects').controller('AsanaImportProjectFormCtrl', AsanaImportProjectFormController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/asana-import/asana-import-project-form/asana-import-project-form.directive.coffee\n###\n\nAsanaImportProjectFormDirective = () ->\n    return {\n        link: (scope, elm, attr, ctrl) ->\n            scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl))\n\n        templateUrl:\"projects/create/asana-import/asana-import-project-form/asana-import-project-form.html\",\n        controller: \"AsanaImportProjectFormCtrl\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        scope: {\n            members: '<',\n            project: '<',\n            onSaveProjectDetails: '&',\n            onCancelForm: '&',\n            fetchingUsers: '<'\n        }\n    }\n\nAsanaImportProjectFormDirective.$inject = []\n\nangular.module(\"taigaProjects\").directive(\"tgAsanaImportProjectForm\", AsanaImportProjectFormDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/asana-import/asana-import.controller.coffee\n###\n\nclass AsanaImportController\n    @.$inject = [\n        'tgAsanaImportService',\n        '$tgConfirm',\n        '$translate',\n        'tgImportProjectService',\n    ]\n\n    constructor: (@asanaImportService, @confirm, @translate, @importProjectService) ->\n        @.step = 'autorization-asana'\n        @.project = null\n        taiga.defineImmutableProperty @, 'projects', () => return @asanaImportService.projects\n        taiga.defineImmutableProperty @, 'members', () => return @asanaImportService.projectUsers\n\n    startProjectSelector: () ->\n        @.step = 'project-select-asana'\n        @asanaImportService.fetchProjects()\n\n    onSelectProject: (project) ->\n        @.step = 'project-form-asana'\n        @.project = project\n        @.fetchingUsers = true\n\n        @asanaImportService.fetchUsers(@.project.get('id')).then () => @.fetchingUsers = false\n\n    onSaveProjectDetails: (project) ->\n        @.project = project\n        @.step = 'project-members-asana'\n\n    onCancelMemberSelection: () ->\n        @.step = 'project-form-asana'        \n\n    startImport: (users) ->\n        loader = @confirm.loader(@translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), @translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true)\n\n        loader.start()\n\n        promise = @asanaImportService.importProject(\n            @.project.get('name'),\n            @.project.get('description'),\n            @.project.get('id'),\n            users,\n            @.project.get('keepExternalReference'),\n            @.project.get('is_private')\n            @.project.get('project_type')\n        )\n\n        @importProjectService.importPromise(promise).then () => loader.stop()\n\n    submitUserSelection: (users) ->\n        @.startImport(users)\n        return null\n\nangular.module('taigaProjects').controller('AsanaImportCtrl', AsanaImportController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/asana-import/asana-import.directive.coffee\n###\n\nAsanaImportDirective = () ->\n    return {\n        link: (scope, elm, attrs, ctrl) ->\n            ctrl.startProjectSelector()\n        templateUrl:\"projects/create/asana-import/asana-import.html\",\n        controller: \"AsanaImportCtrl\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        scope: {\n            onCancel: '&'\n        }\n    }\n\nAsanaImportDirective.$inject = []\n\nangular.module(\"taigaProjects\").directive(\"tgAsanaImport\", AsanaImportDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/asana-import/asana-import.service.coffee\n###\n\nclass AsanaImportService extends taiga.Service\n    @.$inject = [\n        'tgResources',\n        '$location'\n    ]\n\n    constructor: (@resources, @location) ->\n        @.projects = Immutable.List()\n        @.projectUsers = Immutable.List()\n        @.token = null\n\n    setToken: (token) ->\n        @.token = token\n\n    fetchProjects: () ->\n        @resources.asanaImporter.listProjects(@.token).then (projects) => @.projects = projects\n\n    fetchUsers: (projectId) ->\n        @resources.asanaImporter.listUsers(@.token, projectId).then (users) => @.projectUsers = users\n\n    importProject: (name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType) ->\n        return @resources.asanaImporter.importProject(@.token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType)\n\n    getAuthUrl: () ->\n        return new Promise (resolve) =>\n            @resources.asanaImporter.getAuthUrl().then (response) =>\n                @.authUrl = response.data.url\n                resolve(@.authUrl)\n\n    authorize: (code) ->\n        return new Promise (resolve, reject) =>\n            @resources.asanaImporter.authorize(code).then ((response) =>\n                @.token = response.data.token\n                resolve(@.token)\n            ), (error) ->\n                reject(new Error(error.status))\n\nangular.module(\"taigaProjects\").service(\"tgAsanaImportService\", AsanaImportService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/create-project-form/create-project-form.controller.coffee\n###\n\nclass CreatetProjectFormController\n    @.$inject = [\n        \"tgCurrentUserService\",\n        \"tgProjectsService\",\n        \"$projectUrl\",\n        \"$location\",\n        \"$tgNavUrls\",\n        \"$tgAnalytics\"\n   ]\n\n    constructor: (@currentUserService, @projectsService, @projectUrl, @location, @navUrls, @analytics) ->\n        @.projectForm = {\n            is_private: false\n        }\n\n        @.canCreatePublicProjects = @currentUserService.canCreatePublicProjects()\n        @.canCreatePrivateProjects = @currentUserService.canCreatePrivateProjects()\n\n        if !@.canCreatePublicProjects.valid && @.canCreatePrivateProjects.valid\n            @.projectForm.is_private = true\n\n        if @.type == 'scrum'\n            @.projectForm.creation_template = 1\n        else\n            @.projectForm.creation_template = 2\n\n    submit: () ->\n        @.formSubmitLoading = true\n\n        @projectsService.create(@.projectForm).then (project) =>\n            @analytics.trackEvent(\"project\", \"create\", \"project creation\", {slug: project.get('slug'), id: project.get('id')})\n            @location.url(@projectUrl.get(project))\n            @currentUserService.loadProjects()\n\n    onCancelForm: () ->\n        @location.path(@navUrls.resolve(\"create-project\"))\n\n    canCreateProject: () ->\n        if @.projectForm.is_private\n            return @.canCreatePrivateProjects.valid\n        else\n            return @.canCreatePublicProjects.valid\n\n    isDisabled: () ->\n        return @.formSubmitLoading || !@.canCreateProject()\n\nangular.module('taigaProjects').controller('CreateProjectFormCtrl', CreatetProjectFormController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/create-project-form/create-project-form.directive.coffee\n###\n\nCreateProjectFormDirective = () ->\n    return {\n        templateUrl:\"projects/create/create-project-form/create-project-form.html\",\n        controller: \"CreateProjectFormCtrl\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        scope: {\n            type: '@'\n        }\n    }\n\nangular.module(\"taigaProjects\").directive(\"tgCreateProjectForm\", CreateProjectFormDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/create-project-members-restrictions/create-project-members-restrictions.directive.coffee\n###\n\nmodule = angular.module(\"taigaProject\")\n\ncreateProjectMembersRestrictionsDirective = () ->\n    return {\n        scope: {\n            isPrivate: '=',\n            limitMembersPrivateProject: '=',\n            limitMembersPublicProject: '='\n        },\n        templateUrl: \"projects/create/create-project-members-restrictions/create-project-members-restrictions.html\"\n    }\n\nmodule.directive('tgCreateProjectMembersRestrictions', [createProjectMembersRestrictionsDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/create-project-restrictions/create-project-restrictions.directive.coffee\n###\n\nmodule = angular.module(\"taigaProject\")\n\ncreateProjectRestrictionsDirective = () ->\n    return {\n        scope: {\n            isPrivate: '=',\n            canCreatePrivateProjects: '=',\n            canCreatePublicProjects: '='\n        },\n        templateUrl: \"projects/create/create-project-restrictions/create-project-restrictions.html\"\n    }\n\nmodule.directive('tgCreateProjectRestrictions', [createProjectRestrictionsDirective])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/create-project.controller.coffee\n###\n\nclass CreateProjectController\n    @.$inject = [\n        \"tgAppMetaService\",\n        \"$translate\",\n        \"tgProjectService\",\n        \"$location\",\n        \"$tgAuth\"\n    ]\n\n    constructor: (@appMetaService, @translate, @projectService, @location, @authService) ->\n        taiga.defineImmutableProperty @, \"project\", () => return @projectService.project\n\n        @appMetaService.setfn @._setMeta.bind(this)\n\n        @authService.refresh()\n\n        @.displayScrumDesc = false\n        @.displayKanbanDesc = false\n\n    _setMeta: () ->\n        return null if !@.project\n\n        ctx = {projectName: @.project.get(\"name\")}\n\n        return {\n            title: @translate.instant(\"PROJECT.PAGE_TITLE\", ctx)\n            description: @.project.get(\"description\")\n        }\n\n    displayHelp: (type, $event) ->\n        $event.stopPropagation()\n        $event.preventDefault()\n\n        if type == 'scrum'\n            @.displayScrumDesc = !@.displayScrumDesc\n        if type == 'kanban'\n            @.displayKanbanDesc = !@.displayKanbanDesc\n\n\nangular.module(\"taigaProjects\").controller(\"CreateProjectCtrl\", CreateProjectController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/duplicate/duplicate-project.controller.coffee\n###\n\nclass DuplicateProjectController\n    @.$inject = [\n        \"tgCurrentUserService\",\n        \"tgProjectsService\",\n        \"$tgLocation\",\n        \"$tgNavUrls\"\n    ]\n\n    constructor: (@currentUserService, @projectsService, @location, @navUrls) ->\n        @.user = @currentUserService.getUser()\n        @.members = Immutable.List()\n\n        @.canCreatePublicProjects = @currentUserService.canCreatePublicProjects()\n        @.canCreatePrivateProjects = @currentUserService.canCreatePrivateProjects()\n\n        taiga.defineImmutableProperty @, 'projects', () => @currentUserService.projects.get(\"all\")\n\n        @.projectForm = {\n            is_private: false\n        }\n\n        if !@.canCreatePublicProjects.valid && @.canCreatePrivateProjects.valid\n            @.projectForm.is_private = true\n\n    refreshReferenceProject: (slug) ->\n        @projectsService.getProjectBySlug(slug).then (project) =>\n            @.referenceProject = project\n            @.members = project.get('members').filter (it) => return it.get('id') != @.user.get('id')\n            @.invitedMembers = @.members.map (it) -> return it.get('id')\n            @.checkUsersLimit()\n\n    toggleInvitedMember: (member) ->\n        if @.invitedMembers.includes(member)\n            @.invitedMembers = @.invitedMembers.filter (it) -> it != member\n        else\n            @.invitedMembers = @.invitedMembers.push(member)\n\n        @.checkUsersLimit()\n\n    checkUsersLimit: () ->\n        @.limitMembersPrivateProject = @currentUserService.canAddMembersPrivateProject(@.invitedMembers.size + 1)\n        @.limitMembersPublicProject = @currentUserService.canAddMembersPublicProject(@.invitedMembers.size + 1)\n\n    submit: () ->\n        projectId = @.referenceProject.get('id')\n        data = @.projectForm\n        data.users = @.invitedMembers\n\n        @.formSubmitLoading = true\n        @projectsService.duplicate(projectId, data).then (newProject) =>\n            @.formSubmitLoading = false\n            @location.path(@navUrls.resolve(\"project\", {project: newProject.data.slug}))\n            @currentUserService.loadProjects()\n\n    canCreateProject: () ->\n        if @.projectForm.is_private\n            return @.canCreatePrivateProjects.valid && @.limitMembersPrivateProject.valid\n        else\n            return @.canCreatePublicProjects.valid && @.limitMembersPublicProject.valid\n\n    isDisabled: () ->\n        return @.formSubmitLoading || !@.canCreateProject()\n\n    onCancelForm: () ->\n        @location.path(@navUrls.resolve(\"create-project\"))\n\nangular.module(\"taigaProjects\").controller(\"DuplicateProjectCtrl\", DuplicateProjectController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/duplicate/duplicate-project.directive.coffee\n###\n\nDuplicateProjectDirective = () ->\n\n    link = (scope, el, attr, ctrl) ->\n\n    return {\n        link: link,\n        templateUrl:\"projects/create/duplicate/duplicate-project.html\",\n        controller: \"DuplicateProjectCtrl\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        scope: {}\n    }\n\nDuplicateProjectDirective.$inject = []\n\nangular.module(\"taigaProjects\").directive(\"tgDuplicateProject\", DuplicateProjectDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/github-import/github-import-project-form/github-import-project-form.controller.coffee\n###\n\nclass GithubImportProjectFormController\n    @.$inject = [\n        \"tgCurrentUserService\"\n    ]\n\n    constructor: (@currentUserService) ->\n        @.canCreatePublicProjects = @currentUserService.canCreatePublicProjects()\n        @.canCreatePrivateProjects = @currentUserService.canCreatePrivateProjects()\n\n        @.projectForm = @.project.toJS()\n\n        @.platformName = \"Github\"\n        @.projectForm.is_private = false\n        @.projectForm.keepExternalReference = false\n        @.projectForm.project_type = \"kanban\"\n\n        if !@.canCreatePublicProjects.valid && @.canCreatePrivateProjects.valid\n            @.projectForm.is_private = true\n\n    checkUsersLimit: () ->\n        @.limitMembersPrivateProject = @currentUserService.canAddMembersPrivateProject(@.members.size)\n        @.limitMembersPublicProject = @currentUserService.canAddMembersPublicProject(@.members.size)\n\n    saveForm: () ->\n        @.onSaveProjectDetails({project: Immutable.fromJS(@.projectForm)})\n\n    canCreateProject: () ->\n        if @.projectForm.is_private\n            return @.canCreatePrivateProjects.valid\n        else\n            return @.canCreatePublicProjects.valid\n\n    isDisabled: () ->\n        return !@.canCreateProject()\n\n\nangular.module('taigaProjects').controller('GithubImportProjectFormCtrl', GithubImportProjectFormController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/github-import/github-import-project-form/github-import-project-form.directive.coffee\n###\n\nGithubImportProjectFormDirective = () ->\n    return {\n        link: (scope, elm, attr, ctrl) ->\n            scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl))\n\n        templateUrl:\"projects/create/github-import/github-import-project-form/github-import-project-form.html\",\n        controller: \"GithubImportProjectFormCtrl\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        scope: {\n            members: '<',\n            project: '<',\n            onSaveProjectDetails: '&',\n            onCancelForm: '&',\n            fetchingUsers: '<'\n        }\n    }\n\nGithubImportProjectFormDirective.$inject = []\n\nangular.module(\"taigaProjects\").directive(\"tgGithubImportProjectForm\", GithubImportProjectFormDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/github-import/github-import.controller.coffee\n###\n\nclass GithubImportController\n    @.$inject = [\n        'tgGithubImportService',\n        '$tgConfirm',\n        '$translate',\n        'tgImportProjectService',\n    ]\n\n    constructor: (@githubImportService, @confirm, @translate, @importProjectService) ->\n        @.step = 'autorization-github'\n        @.project = null\n\n        taiga.defineImmutableProperty @, 'projects', () => return @githubImportService.projects\n        taiga.defineImmutableProperty @, 'members', () => return @githubImportService.projectUsers\n\n    startProjectSelector: () ->\n        @.step = 'project-select-github'\n        @githubImportService.fetchProjects()\n\n    onSelectProject: (project) ->\n        @.step = 'project-form-github'\n        @.project = project\n        @.fetchingUsers = true\n\n        @githubImportService.fetchUsers(@.project.get('id')).then () => @.fetchingUsers = false\n\n    onSaveProjectDetails: (project) ->\n        @.project = project\n        @.step = 'project-members-github'\n\n    onCancelMemberSelection: () ->\n        @.step = 'project-form-github'\n\n    startImport: (users) ->\n        loader = @confirm.loader(@translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), @translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true)\n\n        loader.start()\n\n        promise = @githubImportService.importProject(\n            @.project.get('name'),\n            @.project.get('description'),\n            @.project.get('id'),\n            users,\n            @.project.get('keepExternalReference'),\n            @.project.get('is_private')\n            @.project.get('project_type')\n        )\n\n        @importProjectService.importPromise(promise).then () => loader.stop()\n\n    submitUserSelection: (users) ->\n        @.startImport(users)\n        return null\n\nangular.module('taigaProjects').controller('GithubImportCtrl', GithubImportController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/github-import/github-import.directive.coffee\n###\n\nGithubImportDirective = () ->\n    return {\n        link: (scope, elm, attrs, ctrl) ->\n            ctrl.startProjectSelector()\n        templateUrl:\"projects/create/github-import/github-import.html\",\n        controller: \"GithubImportCtrl\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        scope: {\n            onCancel: '&'\n        }\n    }\n\nGithubImportDirective.$inject = []\n\nangular.module(\"taigaProjects\").directive(\"tgGithubImport\", GithubImportDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/github-import/github-import.service.coffee\n###\n\nclass GithubImportService extends taiga.Service\n    @.$inject = [\n        'tgResources'\n    ]\n\n    constructor: (@resources, @location) ->\n        @.projects = Immutable.List()\n        @.projectUsers = Immutable.List()\n\n    setToken: (token) ->\n        @.token = token\n\n    fetchProjects: () ->\n        @resources.githubImporter.listProjects(@.token).then (projects) => @.projects = projects\n\n    fetchUsers: (projectId) ->\n        @resources.githubImporter.listUsers(@.token, projectId).then (users) => @.projectUsers = users\n\n    importProject: (name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType) ->\n        return @resources.githubImporter.importProject(@.token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType)\n\n    getAuthUrl: (callbackUri) ->\n        return new Promise (resolve) =>\n            @resources.githubImporter.getAuthUrl(callbackUri).then (response) =>\n                @.authUrl = response.data.url\n                resolve(@.authUrl)\n\n    authorize: (code) ->\n        return new Promise (resolve, reject) =>\n            @resources.githubImporter.authorize(code).then ((response) =>\n                @.token = response.data.token\n                resolve(@.token)\n            ), (error) ->\n                reject(new Error(error.status))\n\nangular.module(\"taigaProjects\").service(\"tgGithubImportService\", GithubImportService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/import-project-members/import-project-members.controller.coffee\n###\n\nclass ImportProjectMembersController\n    @.$inject = [\n        'tgCurrentUserService',\n        'tgUserService'\n    ]\n\n    constructor: (@currentUserService, @userService) ->\n        @.selectImportUserLightbox = false\n        @.warningImportUsers = false\n        @.displayEmailSelector = true\n        @.cancelledUsers = Immutable.List()\n        @.selectedUsers = Immutable.List()\n        @.selectableUsers = Immutable.List()\n        @.userContacts = Immutable.List()\n\n    fetchUser: () ->\n        @.currentUser = @currentUserService.getUser()\n\n        @userService.getContacts(@.currentUser.get('id')).then (userContacts) =>\n            @.userContacts = userContacts\n            @.refreshSelectableUsers()\n\n    searchUser: (user) ->\n        @.selectImportUserLightbox = true\n        @.searchingUser = user\n\n    beforeSubmitUsers: () ->\n        if @.selectedUsers.size != @.members.size\n            @.warningImportUsers = true\n        else\n            @.submit()\n\n    confirmUser: (externalUser, taigaUser) ->\n        @.selectImportUserLightbox = false\n\n        user = Immutable.Map()\n        user = user.set('user', externalUser)\n        user = user.set('taigaUser', taigaUser)\n\n        @.selectedUsers = @.selectedUsers.push(user)\n\n        @.discardSuggestedUser(externalUser)\n\n        @.refreshSelectableUsers()\n\n    unselectUser: (user) ->\n        index = @.selectedUsers.findIndex (it) -> it.getIn(['user', 'id']) == user.get('id')\n\n        @.selectedUsers = @.selectedUsers.delete(index)\n        @.refreshSelectableUsers()\n\n    discardSuggestedUser: (member) ->\n        @.cancelledUsers = @.cancelledUsers.push(member.get('id'))\n\n    getSelectedMember: (member) ->\n        return @.selectedUsers.find (it) ->\n            return it.getIn(['user', 'id']) == member.get('id')\n\n    isMemberSelected: (member) ->\n        return !!@.getSelectedMember(member)\n\n    getUser: (user) ->\n        userSelected = @.getSelectedMember(user)\n\n        if userSelected\n            return userSelected.get('taigaUser')\n        else\n            return null\n\n    submit: () ->\n        @.warningImportUsers = false\n\n        users = Immutable.Map()\n\n        @.selectedUsers.map (it) ->\n            id = ''\n\n            if _.isString(it.get('taigaUser'))\n                id = it.get('taigaUser')\n            else\n                id = it.getIn(['taigaUser', 'id'])\n\n            users = users.set(it.getIn(['user', 'id']), id)\n\n        @.onSubmit({users: users})\n\n    checkUsersLimit: () ->\n        @.limitMembersPrivateProject = @currentUserService.canAddMembersPrivateProject(@.members.size + 1)\n        @.limitMembersPublicProject = @currentUserService.canAddMembersPublicProject(@.members.size + 1)\n\n    showSuggestedMatch: (member) ->\n        return member.get('user') && @.cancelledUsers.indexOf(member.get('id')) == -1 && !@.isMemberSelected(member)\n\n    getDistinctSelectedTaigaUsers: () ->\n        ids = []\n\n        users = @.selectedUsers.filter (it) ->\n            id = it.getIn(['taigaUser', 'id'])\n\n            if ids.indexOf(id) == -1\n                ids.push(id)\n                return true\n\n            return false\n\n        return users.filter (it) =>\n            return it.getIn(['taigaUser', 'id']) != @.currentUser.get('id')\n\n    refreshSelectableUsers: () ->\n        @.importMoreUsersDisabled = @.isImportMoreUsersDisabled()\n\n        if @.importMoreUsersDisabled\n            users = @.getDistinctSelectedTaigaUsers()\n\n            @.selectableUsers = users.map (it) -> return it.get('taigaUser')\n            @.displayEmailSelector = false\n        else\n            @.selectableUsers = @.userContacts\n            @.displayEmailSelector = true\n\n        @.selectableUsers = @.selectableUsers.push(@.currentUser)\n\n    isImportMoreUsersDisabled: () ->\n        users = @.getDistinctSelectedTaigaUsers()\n\n        # currentUser + newUser = +2\n        total = users.size + 2\n\n\n        if @.project.get('is_private')\n            return !@currentUserService.canAddMembersPrivateProject(total).valid\n        else\n            return !@currentUserService.canAddMembersPublicProject(total).valid\n\nangular.module('taigaProjects').controller('ImportProjectMembersCtrl', ImportProjectMembersController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/import-project-members/import-project-members.directive.coffee\n###\n\nImportProjectMembersDirective = () ->\n    return {\n        link: (scope, elm, attr, ctrl) ->\n            ctrl.fetchUser()\n\n            scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl))\n\n        templateUrl:\"projects/create/import-project-members/import-project-members.html\",\n        controller: \"ImportProjectMembersCtrl\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        scope: {\n            members: '<',\n            project: '<',\n            onSubmit: '&',\n            platform: '@',\n            logo: '@',\n            onCancel: '&'\n        }\n    }\n\nImportProjectMembersDirective.$inject = []\n\nangular.module(\"taigaProjects\").directive(\"tgImportProjectMembers\", ImportProjectMembersDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/import-project-selector/import-project-selector.controller.coffee\n###\n\nclass ImportProjectSelectorController\n    selectProject: (project) ->\n        @.onSelectProject({project: Immutable.fromJS(project)})\n\nangular.module('taigaProjects').controller('ImportProjectSelectorCtrl', ImportProjectSelectorController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/import-project-selector/import-project-selector.directive.coffee\n###\n\nImportProjectSelectorDirective = () ->\n    return {\n        templateUrl:\"projects/create/import-project-selector/import-project-selector.html\",\n        controller: \"ImportProjectSelectorCtrl\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        scope: {\n            projects: '<',\n            onCancel: '&',\n            onSelectProject: '&',\n            logo: '@',\n            noProjectsMsg: '@',\n            search: '@'\n        }\n    }\n\nangular.module(\"taigaProjects\").directive(\"tgImportProjectSelector\", ImportProjectSelectorDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/import-taiga/import-taiga.controller.coffee\n###\n\nclass ImportTaigaController\n    @.$inject = [\n        '$tgConfirm',\n        '$tgResources',\n        'tgImportProjectService',\n        '$translate',\n        '$tgAnalytics',\n    ]\n\n    constructor: (@confirm, @rs, @importProjectService, @translate, @analytics) ->\n\n    importTaiga: (files) ->\n        @analytics.trackEvent(\"import\", \"taiga\", \"Start import from taiga\", 1)\n\n        file = files[0]\n\n        loader = @confirm.loader(@translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'),\n            @translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true)\n\n        loader.start()\n\n        promise = @rs.projects.import(file, loader.update)\n        @importProjectService.importPromise(promise).finally () -> loader.stop()\n\n        return\n\nangular.module(\"taigaProjects\").controller(\"ImportTaigaCtrl\", ImportTaigaController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/import-taiga/import-taiga.directive.coffee\n###\n\nImportTaigaDirective = () ->\n    return {\n        templateUrl:\"projects/create/import-taiga/import-taiga.html\",\n        controller: \"ImportTaigaCtrl\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        scope: {}\n    }\n\nangular.module(\"taigaProjects\").directive(\"tgImportTaiga\", ImportTaigaDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/import/import-project-error-lb.directive.coffee\n###\n\nLbImportErrorDirective = (lightboxService) ->\n    link = (scope, el, attrs) ->\n        lightboxService.open(el)\n\n        scope.close = () ->\n            lightboxService.close(el)\n            return\n\n    return {\n        templateUrl: \"projects/create/import/import-project-error-lb.html\",\n        link: link\n    }\n\nLbImportErrorDirective.$inject = [\"lightboxService\"]\n\nangular.module(\"taigaProjects\").directive(\"tgLbImportError\", LbImportErrorDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/import/import-project.controller.coffee\n###\n\nclass ImportProjectController\n    @.$inject = [\n        'tgTrelloImportService',\n        'tgJiraImportService',\n        'tgGithubImportService',\n        'tgAsanaImportService',\n        '$location',\n        '$window',\n        '$routeParams',\n        '$tgNavUrls',\n        '$tgConfig',\n        '$tgConfirm',\n        '$tgAnalytics',\n    ]\n\n    constructor: (@trelloService, @jiraService, @githubService, @asanaService,\n                  @location, @window, @routeParams, @tgNavUrls, @config, @confirm,\n                  @analytics) ->\n\n    start: ->\n        @.token = null\n        @.from = @routeParams.platform\n\n        locationSearch = @location.search()\n\n        if @.from\n            @analytics.trackEvent(\"import\", @.from, \"Start import from \"+@.from, 1)\n\n        if @.from == \"asana\"\n            asanaOauthToken = locationSearch.code\n            if locationSearch.code\n                asanaOauthToken = locationSearch.code\n\n                return @asanaService.authorize(asanaOauthToken).then ((token) =>\n                    @location.search({token: encodeURIComponent(JSON.stringify(token))})\n                ), @.cancelCurrentImport.bind(this)\n            else\n                @.token = JSON.parse(decodeURIComponent(locationSearch.token))\n                @asanaService.setToken(@.token)\n\n        if @.from  == 'trello'\n            if locationSearch.oauth_verifier\n                trelloOauthToken = locationSearch.oauth_verifier\n                return @trelloService.authorize(trelloOauthToken).then ((token) =>\n                    @location.search({token: token})\n                ), @.cancelCurrentImport.bind(this)\n            else if locationSearch.token\n                @.token = locationSearch.token\n                @trelloService.setToken(locationSearch.token)\n\n        if @.from == \"github\"\n            if locationSearch.code\n                githubOauthToken = locationSearch.code\n\n                return @githubService.authorize(githubOauthToken).then ((token) =>\n                    @location.search({token: token})\n                ), @.cancelCurrentImport.bind(this)\n            else if locationSearch.token\n                @.token = locationSearch.token\n                @githubService.setToken(locationSearch.token)\n\n        if @.from == \"jira\"\n            jiraOauthToken = locationSearch.oauth_token\n\n            if jiraOauthToken\n                jiraOauthVerifier = locationSearch.oauth_verifier\n                return @jiraService.authorize(jiraOauthVerifier).then ((data) =>\n                    @location.search({token: data.token, url: data.url})\n                ), @.cancelCurrentImport.bind(this)\n            else\n                @.token = locationSearch.token\n                @jiraService.setToken(locationSearch.token, locationSearch.url)\n\n    select: (from) ->\n        if from == \"trello\"\n            @trelloService.getAuthUrl().then (url) =>\n                @window.open(url, \"_self\")\n        else if from == \"jira\"\n            @jiraService.getAuthUrl(@.jiraUrl).then (url) =>\n                @window.open url, \"_self\"\n            , (err) =>\n                @confirm.notify('error', err)\n        else if from == \"github\"\n            callbackUri = @location.absUrl() + \"/github\"\n            @githubService.getAuthUrl(callbackUri).then (url) =>\n                @window.open(url, \"_self\")\n        else if from == \"asana\"\n            @asanaService.getAuthUrl().then (url) =>\n                @window.open(url, \"_self\")\n        else\n            @.from = from\n\n    unfoldOptions: (options) ->\n        @.unfoldedOptions = options\n\n    isActiveImporter: (importer) ->\n        if @config.get('importers').indexOf(importer) == -1\n            return false\n        return true\n\n    cancelCurrentImport: () ->\n        @location.url(@tgNavUrls.resolve('create-project-import'))\n\n    backToCreate: () ->\n        @location.url(@tgNavUrls.resolve('create-project'))\n\nangular.module(\"taigaProjects\").controller(\"ImportProjectCtrl\", ImportProjectController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/import/import-project.directive.coffee\n###\n\nImportProjectDirective = () ->\n\n    link = (scope, el, attr, ctrl) ->\n        ctrl.start()\n\n    return {\n        link: link,\n        templateUrl:\"projects/create/import/import-project.html\",\n        controller: \"ImportProjectCtrl\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        scope: {\n            onCancelImport: '&'\n        }\n    }\n\nImportProjectDirective.$inject = []\n\nangular.module(\"taigaProjects\").directive(\"tgImportProject\", ImportProjectDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/import/import-project.service.coffee\n###\n\nclass ImportProjectService extends taiga.Service\n    @.$inject = [\n        'tgCurrentUserService',\n        '$tgAuth',\n        'tgLightboxFactory',\n        '$translate',\n        '$tgConfirm',\n        '$location',\n        '$tgNavUrls'\n    ]\n\n    constructor: (@currentUserService, @tgAuth, @lightboxFactory, @translate, @confirm, @location, @tgNavUrls) ->\n\n    importPromise: (promise) ->\n        return promise.then(@.importSuccess.bind(this), @.importError.bind(this))\n\n    importSuccess: (result) ->\n        promise = @currentUserService.loadProjects()\n        promise.then () =>\n            if result.status == 202 # Async mode\n                title = @translate.instant('PROJECT.IMPORT.ASYNC_IN_PROGRESS_TITLE')\n                message = @translate.instant('PROJECT.IMPORT.ASYNC_IN_PROGRESS_MESSAGE')\n                @location.path(@tgNavUrls.resolve('home'))\n                @confirm.success(title, message)\n            else # result.status == 201 # Sync mode\n                ctx = {project: result.data.slug}\n                @location.path(@tgNavUrls.resolve('project-admin-project-profile-details', ctx))\n                msg = @translate.instant('PROJECT.IMPORT.SYNC_SUCCESS')\n                @confirm.notify('success', msg)\n        return promise\n\n    importError: (result) ->\n        promise = @tgAuth.refresh()\n        promise.then () =>\n            restrictionError = @.getRestrictionError(result)\n\n            if restrictionError\n                @lightboxFactory.create('tg-lb-import-error', {\n                    class: 'lightbox lightbox-import-error'\n                }, restrictionError)\n\n            else\n                errorMsg = @translate.instant(\"PROJECT.IMPORT.ERROR\")\n\n                if result.status == 429  # TOO MANY REQUESTS\n                    errorMsg = @translate.instant(\"PROJECT.IMPORT.ERROR_TOO_MANY_REQUEST\")\n                else if result.data?._error_message\n                    errorMsg = @translate.instant(\"PROJECT.IMPORT.ERROR_MESSAGE\", {error_message: result.data._error_message})\n\n                @confirm.notify(\"error\", errorMsg)\n        return promise\n\n    getRestrictionError: (result) ->\n        if result.headers\n            errorKey = ''\n\n            user = @currentUserService.getUser()\n            maxMemberships = null\n\n            if result.headers.isPrivate\n                privateError = !@currentUserService.canCreatePrivateProjects().valid\n\n                if user.get('max_memberships_private_projects') != null && result.headers.memberships >= user.get('max_memberships_private_projects')\n                    membersError = true\n                else\n                    membersError = false\n\n                if privateError && membersError\n                    errorKey = 'private-space-members'\n                    maxMemberships = user.get('max_memberships_private_projects')\n                else if privateError\n                    errorKey = 'private-space'\n                else if membersError\n                    errorKey = 'private-members'\n                    maxMemberships = user.get('max_memberships_private_projects')\n\n            else\n                publicError = !@currentUserService.canCreatePublicProjects().valid\n\n                if user.get('max_memberships_public_projects') != null && result.headers.memberships >= user.get('max_memberships_public_projects')\n                    membersError = true\n                else\n                    membersError = false\n\n                if publicError && membersError\n                    errorKey = 'public-space-members'\n                    maxMemberships = user.get('max_memberships_public_projects')\n                else if publicError\n                    errorKey = 'public-space'\n                else if membersError\n                    errorKey = 'public-members'\n                    maxMemberships = user.get('max_memberships_public_projects')\n\n            if !errorKey\n                return false\n\n            return {\n                key: errorKey,\n                values: {\n                    max_memberships: maxMemberships,\n                    members: result.headers.memberships\n                }\n            }\n        else\n            return false\n\nangular.module(\"taigaProjects\").service(\"tgImportProjectService\", ImportProjectService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/invite-members/invite-members.controller.coffee\n###\n\nclass InviteMembersController\n    @.$inject = []\n\n    isDisabled: (id) ->\n        return @.invitedMembers.indexOf(id) == -1\n\nangular.module(\"taigaProjects\").controller(\"InviteMembersCtrl\", InviteMembersController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/invite-members/invite-members.directive.coffee\n###\n\nInviteMembersDirective = () ->\n    link = (scope, el, attr, ctrl) ->\n\n    return {\n        link: link,\n        templateUrl:\"projects/create/invite-members/invite-members.html\",\n        controller: \"InviteMembersCtrl\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        scope: {\n            invitedMembers: '<',\n            members: '<',\n            onToggleInvitedMember: '&'\n        }\n    }\n\nInviteMembersDirective.$inject = []\n\nangular.module(\"taigaProjects\").directive(\"tgInviteMembers\", InviteMembersDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/invite-members/single-member/single-member.directive.coffee\n###\n\nSingleMemberDirective = () ->\n    return {\n        templateUrl:\"projects/create/invite-members/single-member/single-member.html\",\n        scope: {\n            disabled: \"<\",\n            avatar: \"=\"\n        }\n    }\n\nSingleMemberDirective.$inject = []\n\nangular.module(\"taigaProjects\").directive(\"tgSingleMember\", SingleMemberDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/jira-import/jira-import-project-form/jira-import-project-form.controller.coffee\n###\n\nclass JiraImportProjectFormController\n    @.$inject = [\n        \"tgCurrentUserService\"\n    ]\n\n    constructor: (@currentUserService) ->\n        @.canCreatePublicProjects = @currentUserService.canCreatePublicProjects()\n        @.canCreatePrivateProjects = @currentUserService.canCreatePrivateProjects()\n\n        @.projectForm = @.project.toJS()\n\n        @.projectForm.is_private = false\n        @.projectForm.keepExternalReference = false\n        if @.projectForm.importer_type == \"agile\"\n            @.projectForm.project_type = null\n        else\n            @.projectForm.project_type = \"scrum\"\n        @.projectForm.create_subissues = true\n\n        if !@.canCreatePublicProjects.valid && @.canCreatePrivateProjects.valid\n            @.projectForm.is_private = true\n\n    checkUsersLimit: () ->\n        @.limitMembersPrivateProject = @currentUserService.canAddMembersPrivateProject(@.members.size)\n        @.limitMembersPublicProject = @currentUserService.canAddMembersPublicProject(@.members.size)\n\n    saveForm: () ->\n        @.onSaveProjectDetails({project: Immutable.fromJS(@.projectForm)})\n\n    canCreateProject: () ->\n        if @.projectForm.is_private\n            return @.canCreatePrivateProjects.valid\n        else\n            return @.canCreatePublicProjects.valid\n\n    isDisabled: () ->\n        return !@.canCreateProject()\n\nangular.module('taigaProjects').controller('JiraImportProjectFormCtrl', JiraImportProjectFormController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/jira-import/jira-import-project-form/jira-import-project-form.directive.coffee\n###\n\nJiraImportProjectFormDirective = () ->\n    return {\n        link: (scope, elm, attr, ctrl) ->\n            scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl))\n\n        templateUrl:\"projects/create/jira-import/jira-import-project-form/jira-import-project-form.html\",\n        controller: \"JiraImportProjectFormCtrl\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        scope: {\n            members: '<',\n            project: '<',\n            onSaveProjectDetails: '&',\n            onCancelForm: '&',\n            fetchingUsers: '<'\n        }\n    }\n\nJiraImportProjectFormDirective.$inject = []\n\nangular.module(\"taigaProjects\").directive(\"tgJiraImportProjectForm\", JiraImportProjectFormDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/jira-import/jira-import.controller.coffee\n###\n\nclass JiraImportController\n    @.$inject = [\n        'tgJiraImportService',\n        '$tgConfirm',\n        '$translate',\n        'tgImportProjectService',\n    ]\n\n    constructor: (@jiraImportService, @confirm, @translate, @importProjectService) ->\n        @.step = 'autorization-jira'\n        @.project = null\n        taiga.defineImmutableProperty @, 'projects', () => return @jiraImportService.projects\n        taiga.defineImmutableProperty @, 'members', () => return @jiraImportService.projectUsers\n\n    startProjectSelector: () ->\n        @.step = 'project-select-jira'\n        @jiraImportService.fetchProjects()\n\n    onSelectProject: (project) ->\n        @.step = 'project-form-jira'\n        @.project = project\n        @.fetchingUsers = true\n\n        @jiraImportService.fetchUsers(@.project.get('id')).then () => @.fetchingUsers = false\n\n    onSaveProjectDetails: (project) ->\n        @.project = project\n        @.step = 'project-members-jira'\n\n    onCancelMemberSelection: () ->\n        @.step = 'project-form-jira'        \n\n    startImport: (users) ->\n        loader = @confirm.loader(@translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), @translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true)\n\n        loader.start()\n\n        projectType = @.project.get('project_type')\n        if projectType == \"issues\" and @.project.get('create_subissues')\n            projectType = \"issues-with-subissues\"\n\n        promise = @jiraImportService.importProject(\n            @.project.get('name'),\n            @.project.get('description'),\n            @.project.get('id'),\n            users,\n            @.project.get('keepExternalReference'),\n            @.project.get('is_private'),\n            projectType,\n            @.project.get('importer_type'),\n        )\n\n        @importProjectService.importPromise(promise).then () => loader.stop()\n\n    submitUserSelection: (users) ->\n        @.startImport(users)\n        return null\n\nangular.module('taigaProjects').controller('JiraImportCtrl', JiraImportController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/jira-import/jira-import.directive.coffee\n###\n\nJiraImportDirective = () ->\n    return {\n        link: (scope, elm, attrs, ctrl) ->\n            ctrl.startProjectSelector()\n        templateUrl:\"projects/create/jira-import/jira-import.html\",\n        controller: \"JiraImportCtrl\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        scope: {\n            onCancel: '&'\n        }\n    }\n\nJiraImportDirective.$inject = []\n\nangular.module(\"taigaProjects\").directive(\"tgJiraImport\", JiraImportDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/jira-import/jira-import.service.coffee\n###\n\nclass JiraImportService extends taiga.Service\n    @.$inject = [\n        'tgResources',\n        '$location'\n    ]\n\n    constructor: (@resources, @location) ->\n        @.projects = Immutable.List()\n        @.projectUsers = Immutable.List()\n\n    setToken: (token, url) ->\n        @.token = token\n        @.url = url\n\n    fetchProjects: () ->\n        @resources.jiraImporter.listProjects(@.url, @.token).then (projects) => @.projects = projects\n\n    fetchUsers: (projectId) ->\n        @resources.jiraImporter.listUsers(@.url, @.token, projectId).then (users) => @.projectUsers = users\n\n    importProject: (name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType, importerType) ->\n            @resources.jiraImporter.importProject(@.url, @.token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType, importerType)\n\n    getAuthUrl: (url) ->\n        return new Promise (resolve, reject) =>\n            @resources.jiraImporter.getAuthUrl(url).then (response) =>\n                @.authUrl = response.data.url\n                resolve(@.authUrl)\n            , (err) =>\n                reject(err.data._error_message)\n\n    authorize: (oauth_verifier) ->\n        return new Promise (resolve, reject) =>\n            @resources.jiraImporter.authorize(oauth_verifier).then ((response) =>\n                @.token = response.data.token\n                @.url = response.data.url\n                resolve(response.data)\n            ), (error) ->\n                reject(new Error(error.status))\n\nangular.module(\"taigaProjects\").service(\"tgJiraImportService\", JiraImportService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/select-import-user-lightbox/select-import-user-lightbox.controller.coffee\n###\n\nclass SelectImportUserLightboxCtrl\n    @.$inject = []\n\n    constructor: () ->\n\n    start: () ->\n        @.mode = 'search'\n        @.invalid = false\n\n    assignUser: () ->\n        @.onSelectUser({user: @.user, taigaUser: @.userEmail})\n\n    selectUser: (taigaUser) ->\n        @.onSelectUser({user: @.user, taigaUser: Immutable.fromJS(taigaUser)})\n\nangular.module('taigaProjects').controller('SelectImportUserLightboxCtrl', SelectImportUserLightboxCtrl)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/select-import-user-lightbox/select-import-user-lightbox.directive.coffee\n###\n\nSelectImportUserLightboxDirective = (lightboxService, lightboxKeyboardNavigationService) ->\n    link = (scope, el, attrs, ctrl) ->\n        scope.$watch 'vm.visible', (visible) ->\n            if visible && !el.hasClass('open')\n                ctrl.start()\n                lightboxService.open(el, null, scope.vm.onClose).then ->\n                    el.find('input').focus()\n                    lightboxKeyboardNavigationService.init(el)\n            else if !visible && el.hasClass('open')\n                lightboxService.close(el).then () ->\n                    ctrl.userEmail = ''\n                    ctrl.usersSearch = ''\n\n    return {\n        controller: \"SelectImportUserLightboxCtrl\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        scope: {\n            user: '<',\n            visible: '<',\n            onClose: '&',\n            onSelectUser: '&',\n            selectableUsers: '<',\n            isPrivate: '<',\n            limitMembersPrivateProject: '<',\n            limitMembersPublicProject: '<',\n            displayEmailSelector: '<'\n        },\n        templateUrl: 'projects/create/select-import-user-lightbox/select-import-user-lightbox.html'\n        link: link\n    }\n\nSelectImportUserLightboxDirective.$inject = ['lightboxService', 'lightboxKeyboardNavigationService']\n\nangular.module(\"taigaProjects\").directive(\"tgSelectImportUserLightbox\", SelectImportUserLightboxDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/trello-import/trello-import-project-form/trello-import-project-form.controller.coffee\n###\n\nclass TrelloImportProjectFormController\n    @.$inject = [\n        \"tgCurrentUserService\"\n    ]\n\n    constructor: (@currentUserService) ->\n        @.canCreatePublicProjects = @currentUserService.canCreatePublicProjects()\n        @.canCreatePrivateProjects = @currentUserService.canCreatePrivateProjects()\n\n        @.projectForm = @.project.toJS()\n\n        @.platformName = \"Trello\"\n        @.projectForm.is_private = false\n        @.projectForm.keepExternalReference = false\n\n        if !@.canCreatePublicProjects.valid && @.canCreatePrivateProjects.valid\n            @.projectForm.is_private = true\n\n    checkUsersLimit: () ->\n        @.limitMembersPrivateProject = @currentUserService.canAddMembersPrivateProject(@.members.size)\n        @.limitMembersPublicProject = @currentUserService.canAddMembersPublicProject(@.members.size)\n\n    saveForm: () ->\n        @.onSaveProjectDetails({project: Immutable.fromJS(@.projectForm)})\n\n    canCreateProject: () ->\n        if @.projectForm.is_private\n            return @.canCreatePrivateProjects.valid\n        else\n            return @.canCreatePublicProjects.valid\n\n    isDisabled: () ->\n        return !@.canCreateProject()\n\nangular.module('taigaProjects').controller('TrelloImportProjectFormCtrl', TrelloImportProjectFormController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/trello-import/trello-import-project-form/trello-import-project-form.directive.coffee\n###\n\nTrelloImportProjectFormDirective = () ->\n    return {\n        link: (scope, elm, attr, ctrl) ->\n            scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl))\n\n        templateUrl:\"projects/create/trello-import/trello-import-project-form/trello-import-project-form.html\",\n        controller: \"TrelloImportProjectFormCtrl\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        scope: {\n            members: '<',\n            project: '<',\n            onSaveProjectDetails: '&',\n            onCancelForm: '&',\n            fetchingUsers: '<'\n        }\n    }\n\nTrelloImportProjectFormDirective.$inject = []\n\nangular.module(\"taigaProjects\").directive(\"tgTrelloImportProjectForm\", TrelloImportProjectFormDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/trello-import/trello-import.controller.coffee\n###\n\nclass TrelloImportController\n    @.$inject = [\n        'tgTrelloImportService',\n        '$tgConfirm',\n        '$translate',\n        'tgImportProjectService',\n    ]\n\n    constructor: (@trelloImportService, @confirm, @translate, @importProjectService) ->\n        @.project = null\n        taiga.defineImmutableProperty @, 'projects', () => return @trelloImportService.projects\n        taiga.defineImmutableProperty @, 'members', () => return @trelloImportService.projectUsers\n\n    startProjectSelector: () ->\n        @trelloImportService.fetchProjects().then () => @.step = 'project-select-trello'\n\n    onSelectProject: (project) ->\n        @.step = 'project-form-trello'\n        @.project = project\n        @.fetchingUsers = true\n\n        @trelloImportService.fetchUsers(@.project.get('id')).then () => @.fetchingUsers = false\n\n    onSaveProjectDetails: (project) ->\n        @.project = project\n        @.step = 'project-members-trello'\n\n    onCancelMemberSelection: () ->\n        @.step = 'project-form-trello'\n\n    startImport: (users) ->\n        loader = @confirm.loader(@translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), @translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true)\n\n        loader.start()\n\n        promise = @trelloImportService.importProject(\n            @.project.get('name'),\n            @.project.get('description'),\n            @.project.get('id'),\n            users,\n            @.project.get('keepExternalReference'),\n            @.project.get('is_private')\n        )\n\n        @importProjectService.importPromise(promise).then () => loader.stop()\n\n    submitUserSelection: (users) ->\n        @.startImport(users)\n\n        return null\n\nangular.module('taigaProjects').controller('TrelloImportCtrl', TrelloImportController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/trello-import/trello-import.directive.coffee\n###\n\nTrelloImportDirective = () ->\n    return {\n        link: (scope, elm, attrs, ctrl) ->\n            ctrl.startProjectSelector()\n        templateUrl:\"projects/create/trello-import/trello-import.html\",\n        controller: \"TrelloImportCtrl\",\n        controllerAs: \"vm\",\n        bindToController: true,\n        scope: {\n            onCancel: '&'\n        }\n    }\n\nTrelloImportDirective.$inject = []\n\nangular.module(\"taigaProjects\").directive(\"tgTrelloImport\", TrelloImportDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/trello-import/trello-import.service.coffee\n###\n\nclass TrelloImportService extends taiga.Service\n    @.$inject = [\n        'tgResources'\n    ]\n\n    constructor: (@resources) ->\n        @.projects = Immutable.List()\n        @.projectUsers = Immutable.List()\n        @.token = null\n\n    setToken: (token) ->\n        @.token = token\n\n    fetchProjects: () ->\n        @resources.trelloImporter.listProjects(@.token).then (projects) => @.projects = projects\n\n    fetchUsers: (projectId) ->\n        @resources.trelloImporter.listUsers(@.token, projectId).then (users) => @.projectUsers = users\n\n    importProject: (name, description, projectId, userBindings, keepExternalReference, isPrivate) ->\n        return @resources.trelloImporter.importProject(@.token, name, description, projectId, userBindings, keepExternalReference, isPrivate)\n\n    getAuthUrl: () ->\n        return new Promise (resolve) =>\n            @resources.trelloImporter.getAuthUrl().then (response) =>\n                @.authUrl = response.data.url\n                resolve(@.authUrl)\n\n    authorize: (verifyCode) ->\n        return new Promise (resolve, reject) =>\n            @resources.trelloImporter.authorize(verifyCode).then ((response) =>\n                @.token = response.data.token\n                resolve(@.token)\n            ), (error) ->\n                reject(new Error(error.status))\n\nangular.module(\"taigaProjects\").service(\"tgTrelloImportService\", TrelloImportService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/create/warning-user-import-lightbox/warning-user-import-lightbox.directive.coffee\n###\n\nWarningUserImportDirective = (lightboxService, lightboxKeyboardNavigationService) ->\n    return {\n        link: (scope, el, attr) ->\n            scope.$watch 'visible', (visible) ->\n                if visible && !el.hasClass('open')\n                    lightboxService.open(el, scope.onClose).then ->\n                        el.find('input').focus()\n                        lightboxKeyboardNavigationService.init(el)\n                else if !visible && el.hasClass('open')\n                    lightboxService.close(el)\n\n        templateUrl:\"projects/create/warning-user-import-lightbox/warning-user-import-lightbox.html\",\n        scope: {\n            visible: '<',\n            onClose: '&',\n            onConfirm: '&'\n        }\n    }\n\nWarningUserImportDirective.$inject = ['lightboxService', 'lightboxKeyboardNavigationService']\n\nangular.module(\"taigaProjects\").directive(\"tgWarningUserImportLightbox\", WarningUserImportDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/listing/projects-listing.controller.coffee\n###\n\nclass ProjectsListingController\n    @.$inject = [\n        \"tgCurrentUserService\"\n    ]\n\n    constructor: (@currentUserService) ->\n        taiga.defineImmutableProperty(@, \"projects\", () => @currentUserService.projects.get(\"all\"))\n\nangular.module(\"taigaProjects\").controller(\"ProjectsListing\", ProjectsListingController)\n","###\n# Copyright (C) 2014-2017 Taiga Agile LLC <taiga@taiga.io>\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: project-router.controller.coffee\n###\n\nclass ProjectRouterController\n    @.$inject = [\n        \"$routeParams\",\n        \"$location\"\n        \"tgProjectService\"\n        \"$tgResources\"\n        \"$tgSections\"\n    ]\n\n    constructor: (@routeParams, @location, @projectService, @rs, @tgSections) ->\n        @getProjectHomepage()\n            .then (section) =>\n                if section\n                    @location.url(\"project/#{@routeParams.pslug}/#{section}\")\n                else\n                    @gotoDefaultProjectHomepage()\n            .then null, ->\n                @gotoDefaultProjectHomepage()\n\n    gotoDefaultProjectHomepage: () ->\n        @location.url(\"project/#{@routeParams.pslug}/timeline\")\n\n    getProjectHomepage: () ->\n        project = @projectService.project.toJS()\n\n        @rs.userProjectSettings.list({project: project.id}).then (userProjectSettings) =>\n            settings = _.find(userProjectSettings, {\"project\": project.id})\n            return if !settings\n\n            return @tgSections.getPath(project.slug, settings.homepage)\n\nangular.module(\"taigaProjects\").controller(\"ProjectRouter\", ProjectRouterController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/project/project.controller.coffee\n###\n\nclass ProjectController\n    @.$inject = [\n        \"$routeParams\",\n        \"tgAppMetaService\",\n        \"$tgAuth\",\n        \"$translate\",\n        \"tgProjectService\"\n    ]\n\n    constructor: (@routeParams, @appMetaService, @auth, @translate, @projectService) ->\n        @.user = @auth.userData\n\n        taiga.defineImmutableProperty @, \"project\", () => return @projectService.project\n        taiga.defineImmutableProperty @, \"members\", () => return @projectService.activeMembers\n\n        @appMetaService.setfn @._setMeta.bind(this)\n\n    _setMeta: ()->\n        return null if !@.project\n\n        ctx = {projectName: @.project.get(\"name\")}\n\n        return {\n            title: @translate.instant(\"PROJECT.PAGE_TITLE\", ctx)\n            description: @.project.get(\"description\")\n        }\n\nangular.module(\"taigaProjects\").controller(\"Project\", ProjectController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/projects.service.coffee\n###\n\ntaiga = @.taiga\ngroupBy = @.taiga.groupBy\n\n\nclass ProjectsService extends taiga.Service\n    @.$inject = [\"tgResources\", \"$projectUrl\"]\n\n    constructor: (@rs, @projectUrl) ->\n\n    create: (data) ->\n        return @rs.projects.create(data)\n\n    duplicate: (projectId, data) ->\n        return @rs.projects.duplicate(projectId, data)\n\n    getProjectBySlug: (projectSlug) ->\n        return @rs.projects.getProjectBySlug(projectSlug)\n            .then (project) =>\n                return @._decorate(project)\n\n    getProjectStats: (projectId) ->\n        return @rs.projects.getProjectStats(projectId)\n\n    getProjectsByUserId: (userId, paginate) ->\n        return @rs.projects.getProjectsByUserId(userId, paginate)\n            .then (projects) =>\n                return projects.map @._decorate.bind(@)\n\n    getListProjectsByUserId: (userId, paginate) ->\n        return @rs.projects.getListProjectsByUserId(userId, paginate)\n            .then (projects) =>\n                return projects.map @._decorate.bind(@)\n\n    _decorate: (project) ->\n        url = @projectUrl.get(project.toJS())\n\n        project = project.set(\"url\", url)\n\n        return project\n\n    bulkUpdateProjectsOrder: (sortData) ->\n        return @rs.projects.bulkUpdateOrder(sortData)\n\n    transferValidateToken: (projectId, token) ->\n        return @rs.projects.transferValidateToken(projectId, token)\n\n    transferAccept: (projectId, token, reason) ->\n        return @rs.projects.transferAccept(projectId, token, reason)\n\n    transferReject: (projectId, token, reason) ->\n        return @rs.projects.transferReject(projectId, token, reason)\n\n\nangular.module(\"taigaProjects\").service(\"tgProjectsService\", ProjectsService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/transfer/cant-own-project-explanation.directive.coffee\n###\n\nCantOwnProjectExplanationDirective = () ->\n    return {\n        templateUrl: \"projects/transfer/cant-own-project-explanation.html\"\n    }\n\nangular.module(\"taigaProjects\").directive(\"tgCantOwnProjectExplanation\", CantOwnProjectExplanationDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/transfer/transfer-project.controller.coffee\n###\n\nmodule = angular.module('taigaProjects')\n\nclass TransferProject\n    @.$inject = [\n        \"$routeParams\",\n        \"tgProjectsService\"\n        \"tgProjectService\"\n        \"$location\",\n        \"$tgAuth\",\n        \"tgCurrentUserService\",\n        \"$tgNavUrls\",\n        \"$translate\",\n        \"$tgConfirm\",\n        \"tgErrorHandlingService\"\n    ]\n\n    constructor: (@routeParams, @projectsService, @projectService, @location, @authService, @currentUserService, @navUrls, @translate, @confirmService, @errorHandlingService) ->\n\n    initialize: () ->\n        @.projectId = @.project.get(\"id\")\n        @.token = @routeParams.token\n        @.showAddComment = false\n        return @._refreshUserData()\n\n    _validateToken: () ->\n        return @projectsService.transferValidateToken(@.projectId, @.token).then null, (data, status) =>\n            @errorHandlingService.notfound()\n\n    _refreshUserData: () ->\n        return @authService.refresh().then () =>\n            @._validateToken()\n            @._setProjectData()\n            @._checkOwnerData()\n\n    _setProjectData: () ->\n        @.canBeOwnedByUser = @currentUserService.canOwnProject(@.project)\n\n    _checkOwnerData: () ->\n        currentUser = @currentUserService.getUser()\n        if(@.project.get('is_private'))\n            @.ownerMessage = 'ADMIN.PROJECT_TRANSFER.OWNER_MESSAGE.PRIVATE'\n            @.maxProjects = currentUser.get('max_private_projects')\n            if @.maxProjects == null\n                @.maxProjects = @translate.instant('ADMIN.PROJECT_TRANSFER.UNLIMITED_PROJECTS')\n            @.currentProjects = currentUser.get('total_private_projects')\n            maxMemberships = currentUser.get('max_memberships_private_projects')\n\n        else\n            @.ownerMessage = 'ADMIN.PROJECT_TRANSFER.OWNER_MESSAGE.PUBLIC'\n            @.maxProjects = currentUser.get('max_public_projects')\n            if @.maxProjects == null\n                @.maxProjects = @translate.instant('ADMIN.PROJECT_TRANSFER.UNLIMITED_PROJECTS')\n            @.currentProjects = currentUser.get('total_public_projects')\n            maxMemberships = currentUser.get('max_memberships_public_projects')\n\n        @.validNumberOfMemberships = maxMemberships == null || @.project.get('total_memberships') <= maxMemberships\n\n    transferAccept: (token, reason) ->\n        @.loadingAccept = true\n        return @projectsService.transferAccept(@.project.get(\"id\"), token, reason).then () =>\n            @projectService.fetchProject().then () =>\n                newUrl = @navUrls.resolve(\"project-admin-project-profile-details\", {\n                    project: @.project.get(\"slug\")\n                })\n                @.loadingAccept = false\n                @location.path(newUrl)\n\n                @confirmService.notify(\"success\", @translate.instant(\"ADMIN.PROJECT_TRANSFER.ACCEPTED_PROJECT_OWNERNSHIP\"), '', 5000)\n                return\n\n    transferReject: (token, reason) ->\n        @.loadingReject = true\n        return @projectsService.transferReject(@.project.get(\"id\"), token, reason).then () =>\n            newUrl = @navUrls.resolve(\"home\", {\n                project: @project.get(\"slug\")\n            })\n            @.loadingReject = false\n            @location.path(newUrl)\n            @confirmService.notify(\"success\", @translate.instant(\"ADMIN.PROJECT_TRANSFER.REJECTED_PROJECT_OWNERNSHIP\"), '', 5000)\n\n            return\n\n    addComment: () ->\n        @.showAddComment = true\n\n    hideComment: () ->\n        @.showAddComment = false\n        @.reason = ''\n\n\nmodule.controller(\"TransferProjectController\", TransferProject)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: projects/transfer/transfer-project.directive.coffee\n###\n\nmodule = angular.module('taigaProjects')\n\nTransferProjectDirective = () ->\n    link = (scope, el, attrs, ctrl) ->\n      ctrl.initialize()\n\n    return {\n        link: link,\n        scope: {},\n        bindToController: {\n            project: \"=\"\n        },\n        templateUrl: \"projects/transfer/transfer-project.html\",\n        controller: 'TransferProjectController',\n        controllerAs: 'vm'\n    }\n\nmodule.directive('tgTransferProject', TransferProjectDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: resources/attachments-resource.service.coffee\n###\n\ntaiga = @.taiga\nsizeFormat = @.taiga.sizeFormat\n\nResource = (urlsService, http, config, $rootScope, $q, storage) ->\n    service = {}\n\n    service.list = (type, objectId, projectId) ->\n        urlname = \"attachments/#{type}\"\n\n        params = {object_id: objectId, project: projectId}\n        httpOptions = {\n            headers: {\n                \"x-disable-pagination\": \"1\"\n            }\n        }\n\n        url = urlsService.resolve(urlname)\n\n        return http.get(url, params, httpOptions)\n            .then (result) -> Immutable.fromJS(result.data)\n\n    service.get = (type, id) ->\n        urlname = \"attachments/#{type}\"\n\n        url = urlsService.resolve(urlname) + \"/#{id}\"\n\n        return http.get(url)\n\n    service.delete = (type, id) ->\n        urlname = \"attachments/#{type}\"\n\n        url = urlsService.resolve(urlname) + \"/#{id}\"\n\n        return http.delete(url)\n\n    service.patch = (type, id, patch) ->\n        urlname = \"attachments/#{type}\"\n\n        url = urlsService.resolve(urlname) + \"/#{id}\"\n\n        return http.patch(url, patch)\n\n    service.create = (type, projectId, objectId, file, from_comment) ->\n        urlname = \"attachments/#{type}\"\n\n        url = urlsService.resolve(urlname)\n\n        defered = $q.defer()\n\n        if file is undefined\n            defered.reject(null)\n            return defered.promise\n\n        maxFileSize = config.get(\"maxUploadFileSize\", null)\n\n        if maxFileSize and file.size > maxFileSize\n            response = {\n                status: 413,\n                data: _error_message: \"'#{file.name}' (#{sizeFormat(file.size)}) is too heavy for our oompa\n                                       loompas, try it with a smaller than (#{sizeFormat(maxFileSize)})\"\n            }\n            defered.reject(response)\n            return defered.promise\n\n        uploadProgress = (evt) =>\n            $rootScope.$apply =>\n                file.status = \"in-progress\"\n                file.size = sizeFormat(evt.total)\n                file.progressMessage = \"upload #{sizeFormat(evt.loaded)} of #{sizeFormat(evt.total)}\"\n                file.progressPercent = \"#{Math.round((evt.loaded / evt.total) * 100)}%\"\n\n        uploadComplete = (evt) =>\n            $rootScope.$apply ->\n                file.status = \"done\"\n\n                status = evt.target.status\n                try\n                    attachment = JSON.parse(evt.target.responseText)\n                catch\n                    attachment = {}\n\n                if status >= 200 and status < 400\n                    attachment = Immutable.fromJS(attachment)\n                    defered.resolve(attachment)\n                else\n                    response = {\n                        status: status,\n                        data: {_error_message: data['attached_file']?[0]}\n                    }\n                    defered.reject(response)\n\n        uploadFailed = (evt) =>\n            $rootScope.$apply ->\n                file.status = \"error\"\n                defered.reject(\"fail\")\n\n        data = new FormData()\n        data.append(\"project\", projectId)\n        data.append(\"object_id\", objectId)\n        data.append(\"attached_file\", file)\n        data.append(\"from_comment\", from_comment)\n\n        xhr = new XMLHttpRequest()\n        xhr.upload.addEventListener(\"progress\", uploadProgress, false)\n        xhr.addEventListener(\"load\", uploadComplete, false)\n        xhr.addEventListener(\"error\", uploadFailed, false)\n\n        token = storage.get('token')\n\n        xhr.open(\"POST\", url)\n        xhr.setRequestHeader(\"Authorization\", \"Bearer #{token}\")\n        xhr.setRequestHeader('Accept', 'application/json')\n        xhr.send(data)\n\n        return defered.promise\n\n    return () ->\n        return {\"attachments\": service}\n\nResource.$inject = [\n    \"$tgUrls\",\n    \"$tgHttp\",\n    \"$tgConfig\",\n    \"$rootScope\",\n    \"$q\",\n    \"$tgStorage\"\n]\n\nmodule = angular.module(\"taigaResources2\")\nmodule.factory(\"tgAttachmentsResource\", Resource)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: resources/epics-resource.service.coffee\n###\n\nResource = (urlsService, http) ->\n    service = {}\n\n    service.listInAllProjects = (params) ->\n        url = urlsService.resolve(\"epics\")\n\n        httpOptions = {\n            headers: {\n                \"x-disable-pagination\": \"1\"\n            }\n        }\n\n        return http.get(url, params, httpOptions)\n            .then (result) ->\n                return Immutable.fromJS(result.data)\n\n    service.list = (projectId, page=0) ->\n        url = urlsService.resolve(\"epics\")\n\n        params = {project: projectId, page: page}\n\n        return http.get(url, params)\n            .then (result) ->\n                return {\n                    list: Immutable.fromJS(result.data)\n                    headers: result.headers\n                }\n\n    service.patch = (id, patch) ->\n        url = urlsService.resolve(\"epics\") + \"/#{id}\"\n\n        return http.patch(url, patch)\n            .then (result) -> Immutable.fromJS(result.data)\n\n    service.post = (params) ->\n        url = urlsService.resolve(\"epics\")\n\n        return http.post(url, params)\n            .then (result) -> Immutable.fromJS(result.data)\n\n    service.reorder = (id, data, setOrders) ->\n        url = urlsService.resolve(\"epics\") + \"/#{id}\"\n\n        options = {\"headers\": {\"set-orders\": JSON.stringify(setOrders)}}\n\n        return http.patch(url, data, null, options)\n            .then (result) -> Immutable.fromJS(result.data)\n\n    service.addRelatedUserstory = (epicId, userstoryId) ->\n        url = urlsService.resolve(\"epic-related-userstories\", epicId)\n\n        params = {\n            user_story: userstoryId\n            epic: epicId\n        }\n\n        return http.post(url, params)\n\n    service.reorderRelatedUserstory = (epicId, userstoryId, data, setOrders) ->\n        url = urlsService.resolve(\"epic-related-userstories\", epicId) + \"/#{userstoryId}\"\n\n        options = {\"headers\": {\"set-orders\": JSON.stringify(setOrders)}}\n\n        return http.patch(url, data, null, options)\n\n    service.bulkCreateRelatedUserStories = (epicId, projectId, bulk_userstories) ->\n        url = urlsService.resolve(\"epic-related-userstories-bulk-create\", epicId)\n\n        params = {\n            bulk_userstories: bulk_userstories,\n            project_id: projectId\n        }\n\n        return http.post(url, params)\n\n    service.deleteRelatedUserstory = (epicId, userstoryId) ->\n        url = urlsService.resolve(\"epic-related-userstories\", epicId) + \"/#{userstoryId}\"\n\n        return http.delete(url)\n\n    return () ->\n        return {\"epics\": service}\n\nResource.$inject = [\"$tgUrls\", \"$tgHttp\"]\n\nmodule = angular.module(\"taigaResources2\")\nmodule.factory(\"tgEpicsResource\", Resource)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: resources/external-apps-resource.service.coffee\n###\n\nResource = (urlsService, http) ->\n    service = {}\n\n    service.getApplicationToken = (applicationId, state) ->\n        url = urlsService.resolve(\"applications\")\n        url = \"#{url}/#{applicationId}/token?state=#{state}\"\n        return http.get(url).then (result) ->\n            Immutable.fromJS(result.data)\n\n    service.authorizeApplicationToken = (applicationId, state) ->\n        url = urlsService.resolve(\"application-tokens\")\n        url = \"#{url}/authorize\"\n        data = {\n            \"state\": state\n            \"application\": applicationId\n        }\n\n        return http.post(url, data).then (result) ->\n            Immutable.fromJS(result.data)\n\n    return () ->\n        return {\"externalapps\": service}\n\nResource.$inject = [\"$tgUrls\", \"$tgHttp\"]\n\nmodule = angular.module(\"taigaResources2\")\nmodule.factory(\"tgExternalAppsResource\", Resource)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: resources/history-resource.service.coffee\n###\n\nResource = (urlsService, http) ->\n    service = {}\n\n    service.getHistory = (historyType, contentType, objectId, page) ->\n        url = urlsService.resolve(\"history/#{contentType}\", )\n        return http.get(\"#{url}/#{objectId}\", {page: page, type: historyType})\n            .then (result) ->\n                return {\n                    list: Immutable.fromJS(result.data)\n                    headers: result.headers\n                }\n\n    return () ->\n        return {\"history\": service}\n\nResource.$inject = [\"$tgUrls\", \"$tgHttp\"]\n\nmodule = angular.module(\"taigaResources2\")\nmodule.factory(\"tgHistory\", Resource)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: resources/importers-resource.service.coffee\n###\n\n\ntaiga = @.taiga\n\nTrelloResource = (urlsService, http) ->\n    service = {}\n\n    service.getAuthUrl = (url) ->\n        url = urlsService.resolve(\"importers-trello-auth-url\")\n        return http.get(url)\n\n    service.authorize = (verifyCode) ->\n        url = urlsService.resolve(\"importers-trello-authorize\")\n        return http.post(url, {code: verifyCode})\n\n    service.listProjects = (token) ->\n        url = urlsService.resolve(\"importers-trello-list-projects\")\n        return http.post(url, {token: token}).then (response) -> Immutable.fromJS(response.data)\n\n    service.listUsers = (token, projectId) ->\n        url = urlsService.resolve(\"importers-trello-list-users\")\n        return http.post(url, {token: token, project: projectId}).then (response) -> Immutable.fromJS(response.data)\n\n    service.importProject = (token, name, description, projectId, userBindings, keepExternalReference, isPrivate) ->\n        url = urlsService.resolve(\"importers-trello-import-project\")\n        data = {\n            token: token,\n            name: name,\n            description: description,\n            project: projectId,\n            users_bindings: userBindings.toJS(),\n            keep_external_reference: keepExternalReference,\n            is_private: isPrivate,\n            template: \"kanban\",\n        }\n        return http.post(url, data)\n\n    return () ->\n        return {\"trelloImporter\": service}\n\nTrelloResource.$inject = [\"$tgUrls\", \"$tgHttp\"]\n\nJiraResource = (urlsService, http) ->\n    service = {}\n\n    service.getAuthUrl = (jira_url) ->\n        url = urlsService.resolve(\"importers-jira-auth-url\") + \"?url=\" + jira_url\n        return http.get(url)\n\n    service.authorize = (oauth_verifier) ->\n        url = urlsService.resolve(\"importers-jira-authorize\")\n        return http.post(url, {oauth_verifier: oauth_verifier})\n\n    service.listProjects = (jira_url, token) ->\n        url = urlsService.resolve(\"importers-jira-list-projects\")\n        return http.post(url, {url: jira_url, token: token}).then (response) -> Immutable.fromJS(response.data)\n\n    service.listUsers = (jira_url, token, projectId) ->\n        url = urlsService.resolve(\"importers-jira-list-users\")\n        return http.post(url, {url: jira_url, token: token, project: projectId}).then (response) -> Immutable.fromJS(response.data)\n\n    service.importProject = (jira_url, token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType, importerType) ->\n        url = urlsService.resolve(\"importers-jira-import-project\")\n        projectTemplate = \"kanban\"\n        if projectType != \"kanban\"\n            projectTemplate = \"scrum\"\n\n        data = {\n            url: jira_url,\n            token: token,\n            name: name,\n            description: description,\n            project: projectId,\n            users_bindings: userBindings.toJS(),\n            keep_external_reference: keepExternalReference,\n            is_private: isPrivate,\n            project_type: projectType,\n            importer_type: importerType,\n            template: projectTemplate,\n        }\n        return http.post(url, data)\n\n    return () ->\n        return {\"jiraImporter\": service}\n\nJiraResource.$inject = [\"$tgUrls\", \"$tgHttp\"]\n\nGithubResource = (urlsService, http) ->\n    service = {}\n\n    service.getAuthUrl = (callbackUri) ->\n        url = urlsService.resolve(\"importers-github-auth-url\") + \"?uri=\" + callbackUri\n        return http.get(url)\n\n    service.authorize = (code) ->\n        url = urlsService.resolve(\"importers-github-authorize\")\n        return http.post(url, {code: code})\n\n    service.listProjects = (token) ->\n        url = urlsService.resolve(\"importers-github-list-projects\")\n        return http.post(url, {token: token}).then (response) -> Immutable.fromJS(response.data)\n\n    service.listUsers = (token, projectId) ->\n        url = urlsService.resolve(\"importers-github-list-users\")\n        return http.post(url, {token: token, project: projectId}).then (response) -> Immutable.fromJS(response.data)\n\n    service.importProject = (token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType) ->\n        url = urlsService.resolve(\"importers-github-import-project\")\n\n        data = {\n            token: token,\n            name: name,\n            description: description,\n            project: projectId,\n            users_bindings: userBindings.toJS(),\n            keep_external_reference: keepExternalReference,\n            is_private: isPrivate,\n            template: projectType,\n        }\n        return http.post(url, data)\n\n    return () ->\n        return {\"githubImporter\": service}\n\nGithubResource.$inject = [\"$tgUrls\", \"$tgHttp\"]\n\nAsanaResource = (urlsService, http) ->\n    service = {}\n\n    service.getAuthUrl = () ->\n        url = urlsService.resolve(\"importers-asana-auth-url\")\n        return http.get(url)\n\n    service.authorize = (code) ->\n        url = urlsService.resolve(\"importers-asana-authorize\")\n        return http.post(url, {code: code})\n\n    service.listProjects = (token) ->\n        url = urlsService.resolve(\"importers-asana-list-projects\")\n        return http.post(url, {token: token}).then (response) -> Immutable.fromJS(response.data)\n\n    service.listUsers = (token, projectId) ->\n        url = urlsService.resolve(\"importers-asana-list-users\")\n        return http.post(url, {token: token, project: projectId}).then (response) -> Immutable.fromJS(response.data)\n\n    service.importProject = (token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType) ->\n        url = urlsService.resolve(\"importers-asana-import-project\")\n\n        data = {\n            token: token,\n            name: name,\n            description: description,\n            project: projectId,\n            users_bindings: userBindings.toJS(),\n            keep_external_reference: keepExternalReference,\n            is_private: isPrivate,\n            template: projectType,\n        }\n        return http.post(url, data)\n\n    return () ->\n        return {\"asanaImporter\": service}\n\nAsanaResource.$inject = [\"$tgUrls\", \"$tgHttp\"]\n\nmodule = angular.module(\"taigaResources2\")\nmodule.factory(\"tgTrelloImportResource\", TrelloResource)\nmodule.factory(\"tgJiraImportResource\", JiraResource)\nmodule.factory(\"tgGithubImportResource\", GithubResource)\nmodule.factory(\"tgAsanaImportResource\", AsanaResource)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: resources/issues-resource.service.coffee\n###\n\nResource = (urlsService, http) ->\n    service = {}\n\n    service.listInAllProjects = (params) ->\n        url = urlsService.resolve(\"issues\")\n        httpOptions = {\n            headers: {\n                \"x-disable-pagination\": \"1\"\n            }\n        }\n\n        return http.get(url, params, httpOptions)\n            .then (result) ->\n                return Immutable.fromJS(result.data)\n\n    return () ->\n        return {\"issues\": service}\n\nResource.$inject = [\"$tgUrls\", \"$tgHttp\"]\n\nmodule = angular.module(\"taigaResources2\")\nmodule.factory(\"tgIssuesResource\", Resource)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: resources/projects-resource.service.coffee\n###\n\npagination = () ->\n\nResource = (urlsService, http, paginateResponseService) ->\n    service = {}\n\n    service.create = (data) ->\n        url = urlsService.resolve('projects')\n\n        return http.post(url, JSON.stringify(data))\n            .then (result) => return Immutable.fromJS(result.data)\n\n    service.duplicate = (projectId, data) ->\n\n        url = urlsService.resolve(\"projects\")\n        url = \"#{url}/#{projectId}/duplicate\"\n\n        members = data.users.map (member) => {\"id\": member}\n\n        params = {\n            \"name\": data.name,\n            \"description\": data.description,\n            \"is_private\": data.is_private,\n            \"users\": members\n        }\n\n        return http.post(url, params)\n\n    service.getProjects = (params = {}, pagination = true) ->\n        url = urlsService.resolve(\"projects\")\n\n        httpOptions = {}\n\n        if !pagination\n            httpOptions = {\n                headers: {\n                    \"x-lazy-pagination\": true\n                }\n            }\n\n        return http.get(url, params, httpOptions)\n\n    service.getProjectBySlug = (projectSlug) ->\n        url = urlsService.resolve(\"projects\")\n\n        url = \"#{url}/by_slug?slug=#{projectSlug}\"\n\n        return http.get(url)\n            .then (result) ->\n                return Immutable.fromJS(result.data)\n\n    service.getProjectsByUserId = (userId, paginate=false) ->\n        url = urlsService.resolve(\"projects\")\n        httpOptions = {}\n\n        if !paginate\n            httpOptions.headers = {\n                \"x-disable-pagination\": \"1\"\n            }\n\n        params = {\"member\": userId, \"order_by\": \"user_order\"}\n\n        return http.get(url, params, httpOptions)\n            .then (result) ->\n                return Immutable.fromJS(result.data)\n\n    service.getListProjectsByUserId = (userId, paginate=false) ->\n        url = urlsService.resolve(\"projects\")\n        httpOptions = {}\n\n        if !paginate\n            httpOptions.headers = {\n                \"x-disable-pagination\": \"1\"\n            }\n\n        params = {\"member\": userId, \"order_by\": \"user_order\", \"slight\": true}\n\n        return http.get(url, params, httpOptions)\n            .then (result) ->\n                return Immutable.fromJS(result.data)\n\n    service.getProjectStats = (projectId) ->\n        url = urlsService.resolve(\"projects\")\n        url = \"#{url}/#{projectId}\"\n\n        return http.get(url)\n            .then (result) ->\n                return Immutable.fromJS(result.data)\n\n    service.bulkUpdateOrder = (bulkData) ->\n        url = urlsService.resolve(\"bulk-update-projects-order\")\n        return http.post(url, bulkData)\n\n    service.getTimeline = (projectId, page) ->\n        params = {\n            page: page,\n            only_relevant: true\n        }\n\n        url = urlsService.resolve(\"timeline-project\")\n        url = \"#{url}/#{projectId}\"\n\n        return http.get(url, params, {\n            headers: {\n                'x-lazy-pagination': true\n            }\n        }).then (result) ->\n            result = Immutable.fromJS(result)\n            return paginateResponseService(result)\n\n    service.likeProject = (projectId) ->\n        url = urlsService.resolve(\"project-like\", projectId)\n        return http.post(url)\n\n    service.unlikeProject = (projectId) ->\n        url = urlsService.resolve(\"project-unlike\", projectId)\n        return http.post(url)\n\n    service.watchProject = (projectId, notifyLevel) ->\n        data = {\n            notify_level: notifyLevel\n            live_notify_level: notifyLevel\n        }\n        url = urlsService.resolve(\"project-watch\", projectId)\n        return http.post(url, data)\n\n    service.unwatchProject = (projectId) ->\n        url = urlsService.resolve(\"project-unwatch\", projectId)\n        return http.post(url)\n\n    service.contactProject = (projectId, message) ->\n        params = {\n            project: projectId,\n            comment: message\n        }\n\n        url = urlsService.resolve(\"project-contact\")\n        return http.post(url, params)\n\n    service.transferValidateToken = (projectId, token) ->\n        data = {\n            token: token\n        }\n        url = urlsService.resolve(\"project-transfer-validate-token\", projectId)\n        return http.post(url, data)\n\n    service.transferAccept = (projectId, token, reason) ->\n        data = {\n            token: token\n            reason: reason\n        }\n        url = urlsService.resolve(\"project-transfer-accept\", projectId)\n        return http.post(url, data)\n\n    service.transferReject = (projectId, token, reason) ->\n        data = {\n            token: token\n            reason: reason\n        }\n        url = urlsService.resolve(\"project-transfer-reject\", projectId)\n        return http.post(url, data)\n\n    service.transferRequest = (projectId) ->\n        url = urlsService.resolve(\"project-transfer-request\", projectId)\n        return http.post(url)\n\n    service.transferStart = (projectId, userId, reason) ->\n        data = {\n            user: userId,\n            reason: reason\n        }\n\n        url = urlsService.resolve(\"project-transfer-start\", projectId)\n        return http.post(url, data)\n\n    return () ->\n        return {\"projects\": service}\n\nResource.$inject = [\"$tgUrls\", \"$tgHttp\", \"tgPaginateResponseService\"]\n\nmodule = angular.module(\"taigaResources2\")\nmodule.factory(\"tgProjectsResources\", Resource)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: resources/resources.coffee\n###\n\nservices = [\n    \"tgProjectsResources\",\n    \"tgUserResources\",\n    \"tgUsersResources\",\n    \"tgUserstoriesResource\",\n    \"tgTasksResource\",\n    \"tgIssuesResource\",\n    \"tgExternalAppsResource\",\n    \"tgAttachmentsResource\",\n    \"tgStatsResource\",\n    \"tgHistory\",\n    \"tgEpicsResource\",\n    \"tgTrelloImportResource\",\n    \"tgJiraImportResource\",\n    \"tgGithubImportResource\",\n    \"tgAsanaImportResource\"\n]\n\nResources = ($injector) ->\n    for serviceName in services\n        serviceFn = $injector.get(serviceName)\n\n        service = $injector.invoke(serviceFn)\n\n        for serviceProperty in Object.keys(service)\n            if @[serviceProperty]\n                console.warn(\"repeated resource \" + serviceProperty)\n\n            @[serviceProperty] = service[serviceProperty]\n\n    return @\n\n\nResources.$inject = [\"$injector\"]\n\nangular.module(\"taigaResources2\").service(\"tgResources\", Resources)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: resources/stats-resource.service.coffee\n###\n\nResource = (urlsService, http) ->\n    service = {}\n\n    service.discover = (applicationId, state) ->\n        url = urlsService.resolve(\"stats-discover\")\n        return http.get(url).then (result) ->\n            Immutable.fromJS(result.data)\n\n    return () ->\n        return {\"stats\": service}\n\nResource.$inject = [\"$tgUrls\", \"$tgHttp\"]\n\nmodule = angular.module(\"taigaResources2\")\nmodule.factory(\"tgStatsResource\", Resource)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: resources/tasks-resource.service.coffee\n###\n\nResource = (urlsService, http) ->\n    service = {}\n\n    service.listInAllProjects = (params) ->\n        url = urlsService.resolve(\"tasks\")\n        httpOptions = {\n            headers: {\n                \"x-disable-pagination\": \"1\"\n            }\n        }\n\n        return http.get(url, params, httpOptions)\n            .then (result) ->\n                return Immutable.fromJS(result.data)\n\n    return () ->\n        return {\"tasks\": service}\n\nResource.$inject = [\"$tgUrls\", \"$tgHttp\"]\n\nmodule = angular.module(\"taigaResources2\")\nmodule.factory(\"tgTasksResource\", Resource)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: resources/user-resource.service.coffee\n###\n\nResource = (urlsService, http, paginateResponseService) ->\n    service = {}\n\n    service.getUserStorage = (key) ->\n        url = urlsService.resolve(\"user-storage\")\n\n        if key\n            url += '/' + key\n\n        httpOptions = {}\n\n        return http.get(url, {}).then (response) ->\n            return response.data.value\n\n    service.setUserStorage = (key, value) ->\n        url = urlsService.resolve(\"user-storage\") + '/' + key\n\n        params = {\n            key: key,\n            value: value\n        }\n\n        return http.put(url, params)\n\n    service.createUserStorage = (key, value) ->\n        url = urlsService.resolve(\"user-storage\")\n\n        params = {\n            key: key,\n            value: value\n        }\n\n        return http.post(url, params)\n\n    return () ->\n        return {\"user\": service}\n\nResource.$inject = [\"$tgUrls\", \"$tgHttp\"]\n\nmodule = angular.module(\"taigaResources2\")\nmodule.factory(\"tgUserResources\", Resource)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: resources/users-resource.service.coffee\n###\n\nResource = (urlsService, http, paginateResponseService) ->\n    service = {}\n\n    service.getUserByUsername = (username) ->\n        url = urlsService.resolve(\"by_username\")\n\n        httpOptions = {\n            headers: {\n                \"x-disable-pagination\": \"1\"\n            }\n        }\n\n        params = {\n            username: username\n        }\n\n        return http.get(url, params, httpOptions)\n            .then (result) ->\n                return Immutable.fromJS(result.data)\n\n    service.getStats = (userId) ->\n        url = urlsService.resolve(\"user-stats\", userId)\n\n        httpOptions = {\n            headers: {\n                \"x-disable-pagination\": \"1\"\n            }\n        }\n\n        return http.get(url, {}, httpOptions)\n            .then (result) ->\n                return Immutable.fromJS(result.data)\n\n    service.getContacts = (userId, excludeProjectId) ->\n        url = urlsService.resolve(\"user-contacts\", userId)\n\n        params = {}\n        params.exclude_project = excludeProjectId if excludeProjectId?\n\n        httpOptions = {\n            headers: {\n                \"x-disable-pagination\": \"1\"\n            }\n        }\n\n        return http.get(url, params, httpOptions)\n            .then (result) ->\n                return Immutable.fromJS(result.data)\n\n    service.getLiked = (userId, page, type, q) ->\n        url = urlsService.resolve(\"user-liked\", userId)\n\n        params = {}\n        params.page = page if page?\n        params.type = type if type?\n        params.q = q if q?\n\n        params.only_relevant = true\n\n        return http.get(url, params, {\n            headers: {\n                'x-lazy-pagination': true\n            }\n        }).then (result) ->\n            result = Immutable.fromJS(result)\n            return paginateResponseService(result)\n\n    service.getVoted = (userId, page, type, q) ->\n        url = urlsService.resolve(\"user-voted\", userId)\n\n        params = {}\n        params.page = page if page?\n        params.type = type if type?\n        params.q = q if q?\n\n        return http.get(url, params, {\n            headers: {\n                'x-lazy-pagination': true\n            }\n        }).then (result) ->\n            result = Immutable.fromJS(result)\n            return paginateResponseService(result)\n\n    service.getWatched = (userId, page, type, q) ->\n        url = urlsService.resolve(\"user-watched\", userId)\n\n        params = {}\n        params.page = page if page?\n        params.type = type if type?\n        params.q = q if q?\n\n        return http.get(url, params, {\n            headers: {\n                'x-lazy-pagination': true\n            }\n        }).then (result) ->\n            result = Immutable.fromJS(result)\n            return paginateResponseService(result)\n\n    service.getProfileTimeline = (userId, page) ->\n        params = {\n            page: page\n        }\n\n        url = urlsService.resolve(\"timeline-profile\")\n        url = \"#{url}/#{userId}\"\n\n        return http.get(url, params, {\n            headers: {\n                'x-lazy-pagination': true\n            }\n        }).then (result) ->\n            result = Immutable.fromJS(result)\n            return paginateResponseService(result)\n\n    service.getUserTimeline = (userId, page) ->\n        params = {\n            page: page,\n            only_relevant: true\n        }\n\n        url = urlsService.resolve(\"timeline-user\")\n        url = \"#{url}/#{userId}\"\n\n\n        return http.get(url, params, {\n            headers: {\n                'x-lazy-pagination': true\n            }\n        }).then (result) ->\n            result = Immutable.fromJS(result)\n            return paginateResponseService(result)\n\n    service.getNotifications = (userId, page, onlyUnread) ->\n        params = {\n            page: page\n        }\n        if onlyUnread\n            params['only_unread'] = true\n\n        url = urlsService.resolve(\"notifications\")\n\n        return http.get(url, params, {\n            headers: {\n                'x-lazy-pagination': true\n            }\n        }).then (result) ->\n            result = Immutable.fromJS(result)\n            paginateResponse = Immutable.Map({\n                \"data\": result.get(\"data\").get(\"objects\"),\n                \"next\": !!result.get(\"headers\")(\"x-pagination-next\"),\n                \"prev\": !!result.get(\"headers\")(\"x-pagination-prev\"),\n                \"current\": result.get(\"headers\")(\"x-pagination-current\"),\n                \"count\": result.get(\"headers\")(\"x-pagination-count\"),\n                \"total\": result.get(\"data\").get(\"total\")\n            })\n            return paginateResponse\n\n    service.setNotificationAsRead = (notificationId) ->\n        url = \"#{urlsService.resolve(\"notifications\")}/#{notificationId}/set-as-read\"\n        return http.patch(url).then (result) ->\n            return result\n\n    service.setNotificationsAsRead = () ->\n        url = \"#{urlsService.resolve(\"notifications\")}/set-as-read\"\n        return http.post(url).then (result) ->\n            return result\n\n    return () ->\n        return {\"users\": service}\n\nResource.$inject = [\"$tgUrls\", \"$tgHttp\", \"tgPaginateResponseService\"]\n\nmodule = angular.module(\"taigaResources2\")\nmodule.factory(\"tgUsersResources\", Resource)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: resources/userstories-resource.service.coffee\n###\n\nResource = (urlsService, http) ->\n    service = {}\n\n    service.listInAllProjects = (params, pagination=false) ->\n        url = urlsService.resolve(\"userstories\")\n\n        if !pagination\n            httpOptions = {\n                headers: {\n                    \"x-disable-pagination\": \"1\"\n                }\n            }\n\n        return http.get(url, params, httpOptions)\n            .then (result) ->\n                return Immutable.fromJS(result.data)\n\n    service.listAllInProject = (projectId) ->\n        url = urlsService.resolve(\"userstories\")\n\n        httpOptions = {\n            headers: {\n                \"x-disable-pagination\": \"1\"\n            }\n        }\n\n        params = {\n            project: projectId\n        }\n\n        return http.get(url, params, httpOptions)\n            .then (result) ->\n                return Immutable.fromJS(result.data)\n\n    service.listInEpic = (epicIid) ->\n        url = urlsService.resolve(\"userstories\")\n\n        httpOptions = {\n            headers: {\n                \"x-disable-pagination\": \"1\"\n            }\n        }\n\n        params = {\n            epic: epicIid,\n            order_by: 'epic_order',\n            include_tasks: true\n        }\n\n        return http.get(url, params, httpOptions)\n            .then (result) ->\n                return Immutable.fromJS(result.data)\n\n    return () ->\n        return {\"userstories\": service}\n\nResource.$inject = [\"$tgUrls\", \"$tgHttp\"]\n\nmodule = angular.module(\"taigaResources2\")\nmodule.factory(\"tgUserstoriesResource\", Resource)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: services/app-meta.service.coffee\n###\n\ntaiga = @.taiga\n\ntruncate = taiga.truncate\n\n\nclass AppMetaService\n    @.$inject = [\n        \"$rootScope\"\n    ]\n\n    constructor: (@rootScope) ->\n\n    _set: (key, value) ->\n        return if not key\n\n        if key == \"title\"\n            meta = $(\"head title\")\n\n            if meta.length == 0\n                meta = $(\"<title></title>\")\n                $(\"head\").append(meta)\n\n            meta.text(value or \"\")\n        else if key.indexOf(\"og:\") == 0\n            meta = $(\"head meta[property='#{key}']\")\n\n            if meta.length == 0\n                meta = $(\"<meta property='#{key}'/>\")\n                $(\"head\").append(meta)\n\n            meta.attr(\"content\", value or \"\")\n        else\n            meta = $(\"head meta[name='#{key}']\")\n\n            if meta.length == 0\n                meta = $(\"<meta name='#{key}'/>\")\n                $(\"head\").append(meta)\n\n            meta.attr(\"content\", value or \"\")\n\n    setTitle: (title) ->\n        @._set('title', title)\n\n    setDescription: (description) ->\n        @._set(\"description\", truncate(description, 250))\n\n    setTwitterMetas: (title, description) ->\n        @._set(\"twitter:card\", \"summary\")\n        @._set(\"twitter:site\", \"@taigaio\")\n        @._set(\"twitter:title\", title)\n        @._set(\"twitter:description\", truncate(description, 300))\n        @._set(\"twitter:image\", \"#{window.location.origin}/#{window._version}/images/logo-color.png\")\n\n    setOpenGraphMetas: (title, description) ->\n        @._set(\"og:type\", \"object\")\n        @._set(\"og:site_name\", \"Taiga - Love your projects\")\n        @._set(\"og:title\", title)\n        @._set(\"og:description\", truncate(description, 300))\n        @._set(\"og:image\", \"#{window.location.origin}/#{window._version}/images/logo-color.png\")\n        @._set(\"og:url\", window.location.href)\n\n    setAll: (title, description) ->\n        @.setTitle(title)\n        @.setDescription(description)\n        @.setTwitterMetas(title, description)\n        @.setOpenGraphMetas(title, description)\n\n    addMobileViewport: () ->\n        $(\"head\").append(\n            \"<meta name=\\\"viewport\\\"\n                   content=\\\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\\\">\"\n        )\n\n    removeMobileViewport: () ->\n        $(\"head meta[name=\\\"viewport\\\"]\").remove()\n\n    setfn: (fn) ->\n        @._listener() if @.listener\n\n        @._listener = @rootScope.$watchCollection fn, (metas) =>\n            if metas\n                @.setAll(metas.title, metas.description)\n                @._listener()\n\nangular.module(\"taigaCommon\").service(\"tgAppMetaService\", AppMetaService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: services/attachments.service.coffee\n###\n\nsizeFormat = @.taiga.sizeFormat\n\nclass AttachmentsService\n    @.$inject = [\n        \"$tgConfirm\",\n        \"$tgConfig\",\n        \"$translate\",\n        \"tgResources\"\n    ]\n\n    constructor: (@confirm, @config, @translate, @rs) ->\n        @.maxFileSize = @.getMaxFileSize()\n\n        if @.maxFileSize\n            @.maxFileSizeFormated = sizeFormat(@.maxFileSize)\n\n    sizeError: (file) ->\n        message = @translate.instant(\"ATTACHMENT.ERROR_MAX_SIZE_EXCEEDED\", {\n            fileName: file.name,\n            fileSize: sizeFormat(file.size),\n            maxFileSize: @.maxFileSizeFormated\n        })\n\n        @confirm.notify(\"error\", message)\n\n    validate: (file) ->\n        if @.maxFileSize && file.size > @.maxFileSize\n            @.sizeError(file)\n\n            return false\n\n        return true\n\n    getMaxFileSize: () ->\n        return @config.get(\"maxUploadFileSize\", null)\n\n    list: (type, objId, projectId) ->\n        return @rs.attachments.list(type, objId, projectId).then (attachments) =>\n            return attachments.sortBy (attachment) => attachment.get('order')\n\n    get: (type, id) ->\n        return @rs.attachments.get(type, id)\n\n    delete: (type, id) ->\n        return @rs.attachments.delete(type, id)\n\n    saveError: (file, data) ->\n        message = \"\"\n\n        if file\n            message = @translate.instant(\"ATTACHMENT.ERROR_UPLOAD_ATTACHMENT\", {\n                        fileName: file.name, errorMessage: data.data._error_message\n                      })\n\n        @confirm.notify(\"error\", message)\n\n    upload: (file, objId, projectId, type, from_comment = false) ->\n        promise = @rs.attachments.create(type, projectId, objId, file, from_comment)\n\n        promise.then null, @.saveError.bind(this, file)\n\n        return promise\n\n    patch: (id, type, patch) ->\n        promise = @rs.attachments.patch(type, id, patch)\n\n        promise.then null, @.saveError.bind(this, null)\n\n        return promise\n\nangular.module(\"taigaCommon\").service(\"tgAttachmentsService\", AttachmentsService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: services/avatar.service.coffee\n###\n\nclass AvatarService\n    constructor: (@config) ->\n        IMAGES = [\n            \"/#{window._version}/images/user-avatars/user-avatar-01.png\"\n            \"/#{window._version}/images/user-avatars/user-avatar-02.png\"\n            \"/#{window._version}/images/user-avatars/user-avatar-03.png\"\n            \"/#{window._version}/images/user-avatars/user-avatar-04.png\"\n            \"/#{window._version}/images/user-avatars/user-avatar-05.png\"\n        ]\n\n        COLORS = [\n            \"rgba( 178, 176, 204, 1 )\"\n            \"rgba( 183, 203, 131, 1 )\"\n            \"rgba( 210, 198, 139, 1 )\"\n            \"rgba( 214, 161, 212, 1 )\"\n            \"rgba( 247, 154, 154, 1 )\"\n        ]\n\n        @.logos = _.cartesianProduct(IMAGES, COLORS)\n\n    getDefault: (key) ->\n        idx = murmurhash3_32_gc(key, 42) %% @.logos.length\n        logo = @.logos[idx]\n\n        return { src: logo[0], color: logo[1] }\n\n    getUnnamed: () ->\n        return {\n            url: \"/#{window._version}/images/unnamed.png\"\n            username: ''\n        }\n\n    getAvatar: (user, type) ->\n        return @.getUnnamed() if !user\n\n        avatarParamName = 'photo'\n\n        if type == 'avatarBig'\n            avatarParamName = 'big_photo'\n\n        photo = null\n\n        if user instanceof Immutable.Map\n            gravatar = user.get('gravatar_id')\n            photo = user.get(avatarParamName)\n            username = \"@#{user.get('username')}\"\n        else\n            gravatar = user.gravatar_id\n            photo = user[avatarParamName]\n            username = \"@#{user.username}\"\n\n        return @.getUnnamed() if !gravatar\n\n        if photo\n            return {\n                url: photo,\n                username: username\n            }\n        else if location.host.indexOf('localhost') != -1 || !@config.get(\"gravatar\", true)\n            root = location.protocol + '//' + location.host\n            logo = @.getDefault(gravatar)\n\n            return {\n                url: root + logo.src,\n                bg: logo.color,\n                username: username\n            }\n        else\n            root = location.protocol + '//' + location.host\n            logo = @.getDefault(gravatar)\n\n            logoUrl = encodeURIComponent(root + logo.src)\n\n            return {\n                url: 'https://www.gravatar.com/avatar/' + gravatar + \"?s=200&d=\" + logoUrl,\n                bg: logo.color,\n                username: username\n            }\n\nangular.module(\"taigaCommon\").service(\"tgAvatarService\", [\"$tgConfig\", AvatarService])\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: services/check-permissions.service.coffee\n###\n\ntaiga = @.taiga\n\nclass CheckPermissionsService\n    @.$inject = [\n        \"tgProjectService\"\n    ]\n\n    constructor: (@projectService) ->\n\n    check: (permission) ->\n        return false if !@projectService.project\n\n        return @projectService.project.get('my_permissions').indexOf(permission) != -1\n\nangular.module(\"taigaCommon\").service(\"tgCheckPermissionsService\", CheckPermissionsService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: services/current-user.service.coffee\n###\n\ntaiga = @.taiga\n\ngroupBy = @.taiga.groupBy\n\nclass CurrentUserService\n    @.$inject = [\n        \"tgProjectsService\",\n        \"$tgStorage\",\n        \"tgResources\"\n    ]\n\n    constructor: (@projectsService, @storageService, @rs) ->\n        @._user = null\n        @._projects = Immutable.Map()\n        @._projectsById = Immutable.Map()\n        @._joyride = null\n\n        taiga.defineImmutableProperty @, \"projects\", () => return @._projects\n        taiga.defineImmutableProperty @, \"projectsById\", () => return @._projectsById\n\n    isAuthenticated: ->\n        if @.getUser() != null\n            return true\n        return false\n\n    getUser: () ->\n        if !@._user\n            userData = @storageService.get(\"userInfo\")\n\n            if userData\n                userData = Immutable.fromJS(userData)\n                @.setUser(userData)\n\n        return @._user\n\n    removeUser: () ->\n        @._user = null\n        @._projects = Immutable.Map()\n        @._projectsById = Immutable.Map()\n        @._joyride = null\n\n    setUser: (user) ->\n        @._user = user\n        return @._loadUserInfo()\n\n    bulkUpdateProjectsOrder: (sortData) ->\n        @projectsService.bulkUpdateProjectsOrder(sortData).then () =>\n            @.loadProjects()\n\n    loadProjects: () ->\n        return @projectsService.getProjectsByUserId(@._user.get(\"id\"))\n            .then (projects) => @.setProjects(projects)\n\n    loadProjectsList: () ->\n        return @projectsService.getListProjectsByUserId(@._user.get(\"id\"), null,)\n            .then (projects) => @.setProjects(projects)\n\n    disableJoyRide: (section) ->\n        if !@.isAuthenticated()\n            return\n\n        if section\n            @._joyride[section] = false\n        else\n            @._joyride = {\n                backlog: false,\n                kanban: false,\n                dashboard: false\n            }\n\n        @rs.user.setUserStorage('joyride', @._joyride)\n\n    loadJoyRideConfig: () ->\n        return new Promise (resolve) =>\n            if @._joyride != null\n                resolve(@._joyride)\n                return\n\n            @rs.user.getUserStorage('joyride')\n                .then (config) =>\n                    @._joyride = config\n                    resolve(@._joyride)\n                .catch () =>\n                    #joyride not defined\n                    @._joyride = {\n                        backlog: true,\n                        kanban: true,\n                        dashboard: true\n                    }\n\n                    @rs.user.createUserStorage('joyride', @._joyride)\n\n                    resolve(@._joyride)\n\n    _loadUserInfo: () ->\n        return Promise.all([\n            @.loadProjectsList()\n        ])\n\n    setProjects: (projects) ->\n        @._projects = @._projects.set(\"all\", projects)\n        @._projects = @._projects.set(\"recents\", projects.slice(0, 10))\n        @._projects = @._projects.set(\"unblocked\",\n                                      projects.filter((project) -> project.toJS().blocked_code == null))\n\n        @._projectsById = Immutable.fromJS(groupBy(projects.toJS(), (p) -> p.id))\n\n        return @.projects\n\n    canCreatePrivateProjects: () ->\n        user = @.getUser()\n        if user.get('max_private_projects') != null &&\n            user.get('total_private_projects') >= user.get('max_private_projects')\n                return {\n                    valid: false,\n                    reason: 'max_private_projects',\n                    type: 'private_project',\n                    current: user.get('total_private_projects'),\n                    max: user.get('max_private_projects')\n                }\n\n        return {valid: true}\n\n    canCreatePublicProjects: () ->\n        user = @.getUser()\n\n        if user.get('max_public_projects') != null &&\n            user.get('total_public_projects') >= user.get('max_public_projects')\n                return {\n                    valid: false,\n                    reason: 'max_public_projects',\n                    type: 'public_project',\n                    current: user.get('total_public_projects'),\n                    max: user.get('max_public_projects')\n                }\n\n        return {valid: true}\n\n    canAddMembersPublicProject: (totalMembers) ->\n        user = @.getUser()\n\n        if user.get('max_memberships_public_projects') != null &&\n            totalMembers > user.get('max_memberships_public_projects')\n                return {\n                    valid: false,\n                    reason: 'max_members_public_projects',\n                    type: 'public_project',\n                    current: totalMembers,\n                    max: user.get('max_memberships_public_projects')\n                }\n\n        return {valid: true}\n\n    canAddMembersPrivateProject: (totalMembers) ->\n        user = @.getUser()\n\n        if user.get('max_memberships_private_projects') != null &&\n            totalMembers > user.get('max_memberships_private_projects')\n                return {\n                    valid: false,\n                    reason: 'max_members_private_projects',\n                    type: 'private_project',\n                    current: totalMembers,\n                    max: user.get('max_memberships_private_projects')\n                }\n\n        return {valid: true}\n\n    canOwnProject: (project) ->\n        user = @.getUser()\n        if project.get('is_private')\n            result = @.canCreatePrivateProjects()\n            return result if !result.valid\n\n            membersResult = @.canAddMembersPrivateProject(project.get('total_memberships'))\n            return membersResult if !membersResult.valid\n        else\n            result = @.canCreatePublicProjects()\n            return result if !result.valid\n\n            membersResult = @.canAddMembersPublicProject(project.get('total_memberships'))\n            return membersResult if !membersResult.valid\n\n        return {valid: true}\n\nangular.module(\"taigaCommon\").service(\"tgCurrentUserService\", CurrentUserService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: services/error-handling.service.coffee\n###\n\ntaiga = @.taiga\n\nclass ErrorHandlingService\n    @.$inject = [\n        \"$rootScope\"\n    ]\n\n    constructor: (@rootScope) ->\n\n    init: () ->\n        @rootScope.errorHandling = {}\n\n    notfound: ->\n        @rootScope.errorHandling.showingError = true\n        @rootScope.errorHandling.notfound = true\n\n    error: ->\n        @rootScope.errorHandling.showingError = true\n        @rootScope.errorHandling.error = true\n\n    permissionDenied: ->\n        @rootScope.errorHandling.showingError = true\n        @rootScope.errorHandling.permissionDenied = true\n\n    block: ->\n        @rootScope.errorHandling.showingError = true\n        @rootScope.errorHandling.blocked = true\n\nangular.module(\"taigaCommon\").service(\"tgErrorHandlingService\", ErrorHandlingService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: services/lightbox-factory.service.coffee\n###\n\nclass LightboxFactory\n    @.$inject = [\"$rootScope\", \"$compile\"]\n    constructor: (@rootScope, @compile) ->\n\n    create: (name, attrs, scopeAttrs) ->\n        scope = @rootScope.$new()\n\n        scope = _.merge(scope, scopeAttrs)\n\n        elm = $(\"<div>\")\n            .attr(name, true)\n            .attr(\"tg-bind-scope\", true)\n\n        if attrs\n            elm.attr(attrs)\n\n        elm.addClass(\"remove-on-close\")\n\n        html = @compile(elm)(scope)\n\n        $(document.body).append(html)\n\n        return\n\nangular.module(\"taigaCommon\").service(\"tgLightboxFactory\", LightboxFactory)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: services/paginate-response.service.coffee\n###\n\nPaginateResponse = () ->\n    return (result) ->\n        paginateResponse = Immutable.Map({\n            \"data\": result.get(\"data\"),\n            \"next\": !!result.get(\"headers\")(\"x-pagination-next\"),\n            \"prev\": !!result.get(\"headers\")(\"x-pagination-prev\"),\n            \"current\": result.get(\"headers\")(\"x-pagination-current\"),\n            \"count\": result.get(\"headers\")(\"x-pagination-count\")\n        })\n\n        return paginateResponse\n\nangular.module(\"taigaCommon\").factory(\"tgPaginateResponseService\", PaginateResponse)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: services/project-logo.service.coffee\n###\n\nclass ProjectLogoService\n    constructor: () ->\n        IMAGES = [\n            \"/#{window._version}/images/project-logos/project-logo-01.png\"\n            \"/#{window._version}/images/project-logos/project-logo-02.png\"\n            \"/#{window._version}/images/project-logos/project-logo-03.png\"\n            \"/#{window._version}/images/project-logos/project-logo-04.png\"\n            \"/#{window._version}/images/project-logos/project-logo-05.png\"\n        ]\n\n        COLORS = [\n            \"rgba( 153,  214, 220, 1 )\"\n            \"rgba( 213,  156,  156, 1 )\"\n            \"rgba( 214, 161, 212,  1 )\"\n            \"rgba( 164, 162, 219, 1 )\"\n            \"rgba( 152, 224, 168,  1 )\"\n        ]\n\n        @.logos = _.cartesianProduct(IMAGES, COLORS)\n\n    getDefaultProjectLogo: (slug, id) ->\n        key = \"#{slug}-#{id}\"\n        idx = murmurhash3_32_gc(key, 42) %% @.logos.length\n        logo = @.logos[idx]\n\n        return { src: logo[0], color: logo[1] }\n\nangular.module(\"taigaCommon\").service(\"tgProjectLogoService\", ProjectLogoService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: services/project.service.coffee\n###\n\ntaiga = @.taiga\n\nclass ProjectService\n    @.$inject = [\n        \"$rootScope\",\n        \"tgProjectsService\",\n        \"tgXhrErrorService\",\n        \"tgUserActivityService\",\n        \"$interval\"\n    ]\n\n    constructor: (@rootScope,  @projectsService, @xhrError, @userActivityService, @interval) ->\n        @._project = null\n        @._section = null\n        @._sectionsBreadcrumb = Immutable.List()\n        @._activeMembers = Immutable.List()\n\n        taiga.defineImmutableProperty @, \"project\", () => return @._project\n        taiga.defineImmutableProperty @, \"section\", () => return @._section\n        taiga.defineImmutableProperty @, \"sectionsBreadcrumb\", () => return @._sectionsBreadcrumb\n        taiga.defineImmutableProperty @, \"activeMembers\", () => return @._activeMembers\n\n        @.autoRefresh() if !window.localStorage.e2e\n        @.watchSignals()\n\n    watchSignals: () ->\n        fetchRequiredSignals = [\n            \"admin:project-modules:updated\"\n            \"admin:project-roles:updated\"\n            \"admin:project-default-values:updated\"\n            \"admin:project-values:updated\"\n            \"admin:project-values:move\"\n            \"admin:project-custom-attributes:updated\"\n            \"sprintform:create:success\"\n            \"sprintform:edit:success\"\n            \"sprintform:remove:success\"\n            \"tags:updated\"\n        ]\n        for signal in fetchRequiredSignals\n            @rootScope.$on(signal, @.manageProjectSignal)\n\n    manageProjectSignal: (ctx) =>\n        @.fetchProject()\n\n    cleanProject: () ->\n        @._project = null\n        @._activeMembers = Immutable.List()\n        @._section = null\n        @._sectionsBreadcrumb = Immutable.List()\n\n    autoRefresh: () ->\n        intervalId = @interval () =>\n            @.fetchProject()\n        , 60 * 10 * 1000\n\n        @userActivityService.onInactive () => @interval.cancel(intervalId)\n        @userActivityService.onActive () =>\n            @.fetchProject()\n            @.autoRefresh()\n\n    setSection: (section) ->\n        @._section = section\n\n        if section\n            @._sectionsBreadcrumb = @._sectionsBreadcrumb.push(@._section)\n        else\n            @._sectionsBreadcrumb = Immutable.List()\n\n    setProject: (project) ->\n        @._project = project\n        @._activeMembers = @._project.get('members').filter (member) -> member.get('is_active')\n\n    setProjectBySlug: (pslug) ->\n        return new Promise (resolve, reject) =>\n            if !@.project || @.project.get('slug') != pslug\n                @projectsService\n                    .getProjectBySlug(pslug)\n                    .then (project) =>\n                        @.setProject(project)\n                        resolve()\n                    .catch (xhr) =>\n                        @xhrError.response(xhr)\n\n            else resolve()\n\n    fetchProject: () ->\n        return if !@.project\n\n        pslug = @.project.get('slug')\n\n        return @projectsService.getProjectBySlug(pslug).then (project) => @.setProject(project)\n\n    hasPermission: (permission) ->\n        return @._project.get('my_permissions').indexOf(permission) != -1\n\n    isEpicsDashboardEnabled: ->\n        return @._project.get(\"is_epics_activated\")\n\nangular.module(\"taigaCommon\").service(\"tgProjectService\", ProjectService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: services/theme.service.coffee\n###\n\ntaiga = @.taiga\n\n\nclass ThemeService extends taiga.Service = ->\n    use: (themeName) ->\n        stylesheetEl = $(\"link[rel='stylesheet']:first\")\n\n        if stylesheetEl.length == 0\n            stylesheetEl = $(\"<link rel='stylesheet' href='' type='text/css'>\")\n            $(\"head\").append(stylesheetEl)\n\n        stylesheetEl.attr(\"href\", \"/#{window._version}/styles/theme-#{themeName}.css\")\n\n\nangular.module(\"taigaCommon\").service(\"tgThemeService\", ThemeService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: services/user-activity.service.coffee\n###\n\ntaiga = @.taiga\n\ngroupBy = @.taiga.groupBy\n\nclass UserActivityService\n    @.$inject = ['$timeout']\n\n    idleTimeout: 60 * 5 * 1000\n\n    constructor: (@timeout) ->\n        return null if window.localStorage.e2e\n\n        window.addEventListener('mousemove', @.resetTimer.bind(this), false)\n        window.addEventListener('mousedown', @.resetTimer.bind(this), false)\n        window.addEventListener('keypress', @.resetTimer.bind(this), false)\n        window.addEventListener('mousewheel', @.resetTimer.bind(this), false)\n        window.addEventListener('touchmove', @.resetTimer.bind(this), false)\n\n        @.subscriptionsActive = []\n        @.subscriptionsInactive = []\n        @.isActive = true\n\n        @.startTimer()\n\n    startTimer: () ->\n        @.timerId = @timeout(@._fireInactive.bind(this), @.idleTimeout)\n\n    resetTimer: () ->\n        if !@.isActive\n            @._fireActive()\n\n        @timeout.cancel(@.timerId)\n        @.startTimer()\n\n        @.isActive = true\n\n    onActive: (cb) ->\n        @.subscriptionsActive.push(cb)\n\n        return @._unSubscriptionsActive.bind(this, cb)\n\n    onInactive: (cb) ->\n        @.subscriptionsInactive.push(cb)\n\n        return @._unSubscriptionsInactive.bind(this, cb)\n\n    _fireActive: () ->\n        @.subscriptionsActive.forEach (it) -> it()\n\n    _fireInactive: () ->\n        @.isActive = false\n        @.subscriptionsInactive.forEach (it) -> it()\n\n    _unSubscriptionsActive: (cb) ->\n        @.subscriptionsActive = @.subscriptionsActive.filter (fn) -> fn != cb\n\n    _unSubscriptionsInactive: (cb) ->\n        @.subscriptionsInactive = @.subscriptionsInactive.filter (fn) -> fn != cb\n\nangular.module(\"taigaCommon\").service(\"tgUserActivityService\", UserActivityService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: services/user-list.service.coffee\n###\n\ntaiga = @.taiga\nnormalizeString = @.taiga.normalizeString\n\nclass UserListService\n    @.$inject = [\n        \"tgCurrentUserService\"\n        \"tgProjectService\"\n    ]\n\n    constructor: (@currentUserService, @projectService) ->\n\n    filterUsers: (text, user) ->\n        username = user.full_name_display.toUpperCase()\n        username = normalizeString(username)\n        text = text.toUpperCase()\n        text = normalizeString(text)\n        return _.includes(username, text)\n\n    searchUsers: (text, excludedUser) ->\n        @.currentUser = @currentUserService.getUser()\n        users = _.clone(@projectService.activeMembers.toJS(), true)\n        users = _.reject(users, {\"id\": excludedUser.id}) if excludedUser\n        users = _.sortBy(users, (o) => if o.id is @.currentUser?.get('id') then 0 else o.id)\n        users = _.filter(users, _.partial(@.filterUsers, text)) if text?\n        return users\n\nangular.module(\"taigaCommon\").service(\"tgUserListService\", UserListService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: services/user.service.coffee\n###\n\ntaiga = @.taiga\nbindMethods = taiga.bindMethods\n\n\nclass UserService extends taiga.Service\n    @.$inject = [\"tgResources\"]\n\n    constructor: (@rs) ->\n        bindMethods(@)\n\n    getUserByUserName: (username) ->\n        return @rs.users.getUserByUsername(username)\n\n    getContacts: (userId, excludeProjectId) ->\n        return @rs.users.getContacts(userId, excludeProjectId)\n\n    getLiked: (userId, pageNumber, objectType, textQuery) ->\n        return @rs.users.getLiked(userId, pageNumber, objectType, textQuery)\n\n    getVoted: (userId, pageNumber, objectType, textQuery) ->\n        return @rs.users.getVoted(userId, pageNumber, objectType, textQuery)\n\n    getWatched: (userId, pageNumber, objectType, textQuery) ->\n        return @rs.users.getWatched(userId, pageNumber, objectType, textQuery)\n\n    getStats: (userId) ->\n        return @rs.users.getStats(userId)\n\n    attachUserContactsToProjects: (userId, projects) ->\n        return @.getContacts(userId)\n            .then (contacts) ->\n                projects = projects.map (project) ->\n                    contactsFiltered = contacts.filter (contact) ->\n                        contactId = contact.get(\"id\")\n                        return project.get('members').indexOf(contactId) != -1\n\n                    project = project.set(\"contacts\", contactsFiltered)\n\n                    return project\n\n                return projects\n\nangular.module(\"taigaCommon\").service(\"tgUserService\", UserService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: services/xhrError.service.coffee\n###\n\nclass xhrError extends taiga.Service\n    @.$inject = [\n        \"$q\",\n        \"tgErrorHandlingService\"\n    ]\n\n    constructor: (@q, @errorHandlingService) ->\n\n    notFound: () ->\n        @errorHandlingService.notfound()\n\n    permissionDenied: () ->\n        @errorHandlingService.permissionDenied()\n\n    response: (xhr) ->\n        if xhr\n            if xhr.status == 404\n                @.notFound()\n\n            else if xhr.status == 403\n                @.permissionDenied()\n\n        return @q.reject(xhr)\n\nangular.module(\"taigaCommon\").service(\"tgXhrErrorService\", xhrError)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: user-timeline/user-timeline-attachment/user-timeline-attachment.directive.coffee\n###\n\nUserTimelineAttachmentDirective = (template, $compile) ->\n    validFileExtensions = [\".jpg\", \".jpeg\", \".bmp\", \".gif\", \".png\"]\n\n    isImage = (url) ->\n        url = url.toLowerCase()\n\n        return _.some validFileExtensions, (extension) ->\n            return url.indexOf(extension, url - extension.length) != -1\n\n    link = (scope, el) ->\n        is_image = isImage(scope.attachment.get('url'))\n\n        if is_image\n            templateHtml = template.get(\"user-timeline/user-timeline-attachment/user-timeline-attachment-image.html\")\n        else\n            templateHtml = template.get(\"user-timeline/user-timeline-attachment/user-timeline-attachment.html\")\n\n        el.html(templateHtml)\n        $compile(el.contents())(scope)\n\n        el.find(\"img\").error () -> @.remove()\n\n    return {\n        link: link\n        scope: {\n            attachment: \"=tgUserTimelineAttachment\"\n        }\n    }\n\nUserTimelineAttachmentDirective.$inject = [\n    \"$tgTemplate\",\n    \"$compile\"\n]\n\nangular.module(\"taigaUserTimeline\")\n    .directive(\"tgUserTimelineAttachment\", UserTimelineAttachmentDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: user-timeline/user-timeline-item/user-timeline-item-title.service.coffee\n###\n\nunslugify = @.taiga.unslugify\n\nclass UserTimelineItemTitle\n    @.$inject = [\n        \"$translate\",\n        \"$sce\"\n    ]\n\n    _fieldTranslationKey: {\n        'status': 'COMMON.FIELDS.STATUS',\n        'subject': 'COMMON.FIELDS.SUBJECT',\n        'description_diff': 'COMMON.FIELDS.DESCRIPTION',\n        'points': 'COMMON.FIELDS.POINTS',\n        'assigned_to': 'COMMON.FIELDS.ASSIGNED_TO',\n        'assigned_users': 'COMMON.FIELDS.ASSIGNED_USERS',\n        'severity': 'ISSUES.FIELDS.SEVERITY',\n        'priority': 'ISSUES.FIELDS.PRIORITY',\n        'type': 'ISSUES.FIELDS.TYPE',\n        'is_iocaine': 'TASK.FIELDS.IS_IOCAINE',\n        'is_blocked': 'COMMON.FIELDS.IS_BLOCKED',\n        'color': 'COMMON.FIELDS.COLOR',\n        'due_date': 'COMMON.FIELDS.DUE_DATE',\n        'due_date_reason': 'COMMON.FIELDS.DUE_DATE_REASON',\n        'milestone': 'COMMON.FIELDS.SPRINT',\n    }\n\n    _params: {\n        username: (timeline, event) ->\n            user = timeline.getIn(['data', 'user'])\n\n            if user.get('is_profile_visible')\n                title_attr = @translate.instant('COMMON.SEE_USER_PROFILE', {username: user.get('username')})\n                url = \"user-profile:username=timeline.getIn(['data', 'user', 'username'])\"\n\n                return @._getLink(url, user.get('name'), title_attr)\n            else\n                return @._getUsernameSpan(user.get('name'))\n\n        field_name: (timeline, event) ->\n            field_name = timeline.getIn(['data', 'value_diff', 'key'])\n\n            return @translate.instant(@._fieldTranslationKey[field_name])\n\n        project_name: (timeline, event) ->\n            url = \"project:project=timeline.getIn(['data', 'project', 'slug'])\"\n\n            return @._getLink(url, timeline.getIn([\"data\", \"project\", \"name\"]))\n\n        new_value: (timeline, event) ->\n            if _.isArray(timeline.getIn([\"data\", \"value_diff\", \"value\"]).toJS())\n                value = timeline.getIn([\"data\", \"value_diff\", \"value\"]).get(1)\n\n                # assigned to unasigned\n                if value == null && timeline.getIn([\"data\", \"value_diff\", \"key\"]) == 'assigned_to'\n                    value = @translate.instant('ACTIVITY.VALUES.UNASSIGNED')\n\n                # assigned_users to unasigned\n                if value == null && timeline.getIn([\"data\", \"value_diff\", \"key\"]) == 'assigned_users'\n                    value = @translate.instant('ACTIVITY.VALUES.UNASSIGNED')\n\n                # due date\n                else if timeline.getIn([\"data\", \"value_diff\", \"key\"]) == 'due_date'\n                    if value\n                        prettyDate = @translate.instant(\"COMMON.PICKERDATE.FORMAT\")\n                        value = moment(value, \"YYYY-MM-DD\").format(prettyDate)\n                    else\n                        value = @translate.instant('ACTIVITY.VALUES.NOT_SET')\n\n                new_value = value\n            else\n                new_value = timeline.getIn([\"data\", \"value_diff\", \"value\"]).first().get(1)\n\n            return $('<span>').attr('ng-non-bindable', true).text(new_value).prop('outerHTML')\n\n        sprint_name: (timeline, event) ->\n            url = \"project-taskboard:project=timeline.getIn(['data', 'project', 'slug']),sprint=timeline.getIn(['data', 'milestone', 'slug'])\"\n\n            return @._getLink(url, timeline.getIn(['data', 'milestone', 'name']))\n\n        us_name: (timeline, event) ->\n            obj = @._getTimelineObj(timeline, event).get('userstory')\n\n            event_us = {obj: 'parent_userstory'}\n            url = @._getDetailObjUrl(event_us)\n\n            text = '#' + obj.get('ref') + ' ' + obj.get('subject')\n\n            return @._getLink(url, text)\n\n        related_us_name: (timeline, event) ->\n            obj = timeline.getIn([\"data\", \"userstory\"])\n            url = \"project-userstories-detail:project=timeline.getIn(['data', 'userstory', 'project', 'slug']),ref=timeline.getIn(['data', 'userstory', 'ref'])\"\n            text = '#' + obj.get('ref') + ' ' + obj.get('subject')\n            return @._getLink(url, text)\n\n        epic_name: (timeline, event) ->\n            obj = timeline.getIn([\"data\", \"epic\"])\n            url = \"project-epics-detail:project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['data', 'epic', 'ref'])\"\n            text = '#' + obj.get('ref') + ' ' + obj.get('subject')\n            return @._getLink(url, text)\n\n        obj_name: (timeline, event) ->\n            obj = @._getTimelineObj(timeline, event)\n            url = @._getDetailObjUrl(event)\n\n            if event.obj == 'wikipage'\n                text = unslugify(obj.get('slug'))\n            else if event.obj == 'milestone'\n                text = obj.get('name')\n            else\n                text = '#' + obj.get('ref') + ' ' + obj.get('subject')\n\n            return @._getLink(url, text)\n\n        role_name: (timeline, event) ->\n            return _.escape(timeline.getIn(['data', 'value_diff', 'value']).keySeq().first())\n    }\n\n    constructor: (@translate, @sce) ->\n\n\n    _translateTitleParams: (param, timeline, event) ->\n        return @._params[param].call(this, timeline, event)\n\n    _getTimelineObj: (timeline, event) ->\n        return timeline.getIn(['data', event.obj])\n\n    _getDetailObjUrl: (event) ->\n        url = {\n            \"issue\": [\"project-issues-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'ref'])\"],\n            \"wikipage\": [\"project-wiki-page\", \":project=timeline.getIn(['data', 'project', 'slug']),slug=timeline.getIn(['obj', 'slug'])\"],\n            \"task\": [\"project-tasks-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'ref'])\"],\n            \"userstory\": [\"project-userstories-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'ref'])\"],\n            \"parent_userstory\": [\"project-userstories-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'userstory', 'ref'])\"],\n            \"milestone\": [\"project-taskboard\", \":project=timeline.getIn(['data', 'project', 'slug']),sprint=timeline.getIn(['obj', 'slug'])\"],\n            \"epic\": [\"project-epics-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'ref'])\"]\n        }\n        return url[event.obj][0] + url[event.obj][1]\n\n    _getLink: (url, text, title) ->\n        title = title || text\n\n        span = $('<span>')\n            .attr('ng-non-bindable', true)\n            .text(text)\n\n        return $('<a>')\n            .attr('tg-nav', url)\n            .append(span)\n            .prop('outerHTML')\n\n    _getUsernameSpan: (text) ->\n        title = title || text\n\n        return $('<span>')\n            .addClass('username')\n            .text(text)\n            .prop('outerHTML')\n\n    _getParams: (timeline, event, timeline_type) ->\n        params = {}\n\n        timeline_type.translate_params.forEach (param) =>\n            params[param] = @._translateTitleParams(param, timeline, event)\n        return params\n\n    getTitle: (timeline, event, type) ->\n        params = @._getParams(timeline, event, type)\n\n        paramsKeys = {}\n        Object.keys(params).forEach (key) -> paramsKeys[key] = '{{' +key + '}}'\n\n        translation = @translate.instant(type.key, paramsKeys)\n\n        Object.keys(params).forEach (key) ->\n            find = '{{' +key + '}}'\n            translation = translation.replace(new RegExp(find, 'g'), params[key])\n\n        return translation\n\nangular.module(\"taigaUserTimeline\")\n    .service(\"tgUserTimelineItemTitle\", UserTimelineItemTitle)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: user-timeline/user-timeline-item/user-timeline-item-type.service.coffee\n###\n\ntimelineType = (timeline, event) ->\n    types = [\n        { # NewMember\n            check: (timeline, event) ->\n                return event.obj == 'membership'\n            key: 'TIMELINE.NEW_MEMBER',\n            translate_params: ['project_name']\n            member: (timeline) ->\n                return Immutable.Map({\n                    user: timeline.getIn(['data', 'user']),\n                    role: timeline.getIn(['data', 'role'])\n                })\n        },\n        { # NewProject\n            check: (timeline, event) ->\n                return event.obj == 'project' && event.type == 'create'\n            key: 'TIMELINE.NEW_PROJECT',\n            translate_params: ['username', 'project_name'],\n            description: (timeline) ->\n                return timeline.getIn(['data', 'project', 'description'])\n        },\n        { # NewAttachment\n            check: (timeline, event) ->\n                return event.type == 'change' &&\n                     timeline.hasIn(['data', 'value_diff']) &&\n                     timeline.getIn(['data', 'value_diff', 'key']) == 'attachments'\n            key: 'TIMELINE.UPLOAD_ATTACHMENT',\n            translate_params: ['username', 'obj_name']\n        },\n        { # NewUs\n            check: (timeline, event) ->\n                return event.obj == 'userstory' && event.type == 'create'\n            key: 'TIMELINE.US_CREATED',\n            translate_params: ['username', 'project_name', 'obj_name']\n        },\n        { # NewIssue\n            check: (timeline, event) ->\n                return event.obj == 'issue' && event.type == 'create'\n            key: 'TIMELINE.ISSUE_CREATED',\n            translate_params: ['username', 'project_name', 'obj_name']\n        },\n        { # NewWiki\n            check: (timeline, event) ->\n                return event.obj == 'wikipage' && event.type == 'create'\n            key: 'TIMELINE.WIKI_CREATED',\n            translate_params: ['username', 'project_name', 'obj_name']\n        },\n        { # NewTask\n            check: (timeline, event) ->\n                return event.obj == 'task' && event.type == 'create' && !timeline.getIn(['data', 'task', 'userstory'])\n            key: 'TIMELINE.TASK_CREATED',\n            translate_params: ['username', 'project_name', 'obj_name']\n        },\n        { # NewTask with US\n            check: (timeline, event) ->\n                return event.obj == 'task' && event.type == 'create' && timeline.getIn(['data', 'task', 'userstory'])\n            key: 'TIMELINE.TASK_CREATED_WITH_US',\n            translate_params: ['username', 'project_name', 'obj_name', 'us_name']\n        },\n        { # NewMilestone\n            check: (timeline, event) ->\n                return event.obj == 'milestone' && event.type == 'create'\n            key: 'TIMELINE.MILESTONE_CREATED',\n            translate_params: ['username', 'project_name', 'obj_name']\n        },\n        { # NewEpic\n            check: (timeline, event) ->\n                return event.obj == 'epic' && event.type == 'create'\n            key: 'TIMELINE.EPIC_CREATED',\n            translate_params: ['username', 'project_name', 'obj_name']\n        },\n        { # NewEpicRelatedUserstory\n            check: (timeline, event) ->\n                return event.obj == 'relateduserstory' && event.type == 'create'\n            key: 'TIMELINE.EPIC_RELATED_USERSTORY_CREATED',\n            translate_params: ['username', 'project_name', 'related_us_name', 'epic_name']\n        },\n        { # NewUsComment\n            check: (timeline, event) ->\n                return timeline.getIn(['data', 'comment']) && event.obj == 'userstory'\n            key: 'TIMELINE.NEW_COMMENT_US',\n            translate_params: ['username', 'obj_name'],\n            description: (timeline) ->\n                text = timeline.getIn(['data', 'comment_html'])\n                return $($.parseHTML(text)).text()\n        },\n        { # NewIssueComment\n            check: (timeline, event) ->\n                return timeline.getIn(['data', 'comment']) && event.obj == 'issue'\n            key: 'TIMELINE.NEW_COMMENT_ISSUE',\n            translate_params: ['username', 'obj_name'],\n            description: (timeline) ->\n                text = timeline.getIn(['data', 'comment_html'])\n                return $($.parseHTML(text)).text()\n        },\n        { # NewTaskComment\n            check: (timeline, event) ->\n                return timeline.getIn(['data', 'comment']) && event.obj == 'task'\n            key: 'TIMELINE.NEW_COMMENT_TASK'\n            translate_params: ['username', 'obj_name'],\n            description: (timeline) ->\n                text = timeline.getIn(['data', 'comment_html'])\n                return $($.parseHTML(text)).text()\n        },\n        { # NewEpicComment\n            check: (timeline, event) ->\n                return timeline.getIn(['data', 'comment']) && event.obj == 'epic'\n            key: 'TIMELINE.NEW_COMMENT_EPIC'\n            translate_params: ['username', 'obj_name'],\n            description: (timeline) ->\n                text = timeline.getIn(['data', 'comment_html'])\n                return $($.parseHTML(text)).text()\n        },\n        { # UsMove\n            check: (timeline, event) ->\n                return timeline.hasIn(['data', 'value_diff']) &&\n                      timeline.getIn(['data', 'value_diff', 'key']) == 'moveInBacklog' &&\n                      timeline.hasIn(['data', 'value_diff', 'value', 'backlog_order']) &&\n                      event.type == 'change'\n            key: 'TIMELINE.US_MOVED',\n            translate_params: ['username', 'obj_name']\n        },\n        { # UsToBacklog\n            check: (timeline, event) ->\n                if timeline.hasIn(['data', 'value_diff']) &&\n                      timeline.getIn(['data', 'value_diff', 'key']) == 'moveInBacklog' &&\n                      event.type == 'change' &&\n                      event.obj == 'userstory'\n\n                    return timeline.getIn(['data', 'value_diff', 'value', 'milestone']).get(1) == null\n\n                return false\n            key: 'TIMELINE.US_REMOVED_FROM_MILESTONE',\n            translate_params: ['username', 'obj_name']\n        },\n        { # UsToMilestone\n            check: (timeline, event) ->\n                return timeline.hasIn(['data', 'value_diff']) &&\n                      timeline.getIn(['data', 'value_diff', 'key']) == 'moveInBacklog' &&\n                      event.type == 'change' &&\n                      event.obj == 'userstory'\n\n            key: 'TIMELINE.US_ADDED_MILESTONE',\n            translate_params: ['username', 'obj_name', 'sprint_name']\n        },\n        { # Blocked\n            check: (timeline, event) ->\n                if timeline.hasIn(['data', 'value_diff']) &&\n                      timeline.getIn(['data', 'value_diff', 'key']) == 'blocked' &&\n                      event.type == 'change'\n                    return timeline.getIn(['data', 'value_diff', 'value', 'is_blocked']).get(1) == true\n\n                return false\n            key: 'TIMELINE.BLOCKED',\n            translate_params: ['username', 'obj_name'],\n            description: (timeline) ->\n                if timeline.hasIn(['data', 'value_diff', 'value', 'blocked_note_html'])\n                    text = timeline.getIn(['data', 'value_diff', 'value', 'blocked_note_html']).get(1)\n                    return $($.parseHTML(text)).text()\n                else\n                    return false\n        },\n        { # UnBlocked\n            check: (timeline, event) ->\n                if timeline.hasIn(['data', 'value_diff']) &&\n                      timeline.getIn(['data', 'value_diff', 'key']) == 'blocked' &&\n                      event.type == 'change'\n                    return timeline.getIn(['data', 'value_diff', 'value', 'is_blocked']).get(1) == false\n\n                return false\n            key: 'TIMELINE.UNBLOCKED',\n            translate_params: ['username', 'obj_name']\n        },\n        { # MilestoneUpdated\n            check: (timeline, event) ->\n                return event.obj == 'milestone' && event.type == 'change'\n            key: 'TIMELINE.MILESTONE_UPDATED',\n            translate_params: ['username', 'obj_name']\n        },\n        { # WikiUpdated\n            check: (timeline, event) ->\n                return event.obj == 'wikipage' && event.type == 'change'\n            key: 'TIMELINE.WIKI_UPDATED',\n            translate_params: ['username', 'obj_name']\n        },\n        { # UsUpdated points\n            check: (timeline, event) ->\n                return event.obj == 'userstory' &&\n                    event.type == 'change' &&\n                    timeline.hasIn(['data', 'value_diff']) &&\n                    timeline.getIn(['data', 'value_diff', 'key']) == 'points'\n            key: 'TIMELINE.US_UPDATED_POINTS',\n            translate_params: ['username', 'field_name', 'obj_name', 'new_value', 'role_name']\n        },\n        { # UsUpdated description\n            check: (timeline, event) ->\n                return event.obj == 'userstory' &&\n                    event.type == 'change' &&\n                    timeline.hasIn(['data', 'value_diff']) &&\n                    timeline.getIn(['data', 'value_diff', 'key']) == 'description_diff'\n            key: 'TIMELINE.US_UPDATED',\n            translate_params: ['username', 'field_name', 'obj_name']\n        },\n        { # UsUpdated general\n            check: (timeline, event) ->\n                return event.obj == 'userstory' &&\n                    event.type == 'change'\n            key: 'TIMELINE.US_UPDATED_WITH_NEW_VALUE',\n            translate_params: ['username', 'field_name', 'obj_name', 'new_value']\n        },\n        { # IssueUpdated description\n            check: (timeline, event) ->\n                return event.obj == 'issue' &&\n                    event.type == 'change' &&\n                    timeline.hasIn(['data', 'value_diff']) &&\n                    timeline.getIn(['data', 'value_diff', 'key']) == 'description_diff'\n            key: 'TIMELINE.ISSUE_UPDATED',\n            translate_params: ['username', 'field_name', 'obj_name']\n        },\n        { # IssueUpdated general\n            check: (timeline, event) ->\n                return event.obj == 'issue' &&\n                    event.type == 'change'\n            key: 'TIMELINE.ISSUE_UPDATED_WITH_NEW_VALUE',\n            translate_params: ['username', 'field_name', 'obj_name', 'new_value']\n        },\n        { # TaskUpdated description\n            check: (timeline, event) ->\n                return event.obj == 'task' &&\n                    event.type == 'change' &&\n                    !timeline.getIn(['data', 'task', 'userstory']) &&\n                    timeline.hasIn(['data', 'value_diff']) &&\n                    timeline.getIn(['data', 'value_diff', 'key']) == 'description_diff'\n            key: 'TIMELINE.TASK_UPDATED',\n            translate_params: ['username', 'field_name', 'obj_name']\n        },\n        { # TaskUpdated with US description\n            check: (timeline, event) ->\n                return event.obj == 'task' &&\n                    event.type == 'change' &&\n                    timeline.getIn(['data', 'task', 'userstory']) &&\n                    timeline.hasIn(['data', 'value_diff']) &&\n                    timeline.getIn(['data', 'value_diff', 'key']) == 'description_diff'\n            key: 'TIMELINE.TASK_UPDATED_WITH_US',\n            translate_params: ['username', 'field_name', 'obj_name', 'us_name']\n        },\n        { # TaskUpdated general\n            check: (timeline, event) ->\n                return event.obj == 'task' &&\n                    event.type == 'change' &&\n                    !timeline.getIn(['data', 'task', 'userstory'])\n            key: 'TIMELINE.TASK_UPDATED_WITH_NEW_VALUE',\n            translate_params: ['username', 'field_name', 'obj_name', 'new_value']\n        },\n        { # TaskUpdated with US\n            check: (timeline, event) ->\n                return event.obj == 'task' &&\n                    event.type == 'change' &&\n                    timeline.getIn(['data', 'task', 'userstory'])\n            key: 'TIMELINE.TASK_UPDATED_WITH_US_NEW_VALUE',\n            translate_params: ['username', 'field_name', 'obj_name', 'us_name', 'new_value']\n        },\n        { # EpicUpdated description\n            check: (timeline, event) ->\n                return event.obj == 'epic' &&\n                    event.type == 'change' &&\n                    timeline.hasIn(['data', 'value_diff']) &&\n                    timeline.getIn(['data', 'value_diff', 'key']) == 'description_diff'\n            key: 'TIMELINE.EPIC_UPDATED',\n            translate_params: ['username', 'field_name', 'obj_name']\n        },\n        { # EpicUpdated color\n            check: (timeline, event) ->\n                return event.obj == 'epic' &&\n                    event.type == 'change' &&\n                    timeline.hasIn(['data', 'value_diff']) &&\n                    timeline.getIn(['data', 'value_diff', 'key']) == 'color'\n            key: 'TIMELINE.EPIC_UPDATED_WITH_NEW_COLOR',\n            translate_params: ['username', 'field_name', 'obj_name', 'new_value']\n        },\n        { # EpicUpdated general\n            check: (timeline, event) ->\n                return event.obj == 'epic' &&\n                    event.type == 'change'\n            key: 'TIMELINE.EPIC_UPDATED_WITH_NEW_VALUE',\n            translate_params: ['username', 'field_name', 'obj_name', 'new_value']\n        },\n        { # New User\n            check: (timeline, event) ->\n                return event.obj == 'user' && event.type == 'create'\n            key: 'TIMELINE.NEW_USER',\n            translate_params: ['username']\n        }\n    ]\n\n    return _.find types, (obj) ->\n        return obj.check(timeline, event)\n\nclass UserTimelineType\n    getType: (timeline, event) -> timelineType(timeline, event)\n\nangular.module(\"taigaUserTimeline\")\n    .service(\"tgUserTimelineItemType\", UserTimelineType)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: user-timeline/user-timeline-item/user-timeline-item.directive.coffee\n###\n\nUserTimelineItemDirective = () ->\n    return {\n        templateUrl: \"user-timeline/user-timeline-item/user-timeline-item.html\"\n        scope: {\n            timeline: \"=tgUserTimelineItem\"\n        }\n    }\n\nangular.module(\"taigaUserTimeline\")\n    .directive(\"tgUserTimelineItem\", UserTimelineItemDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: user-timeline/user-timeline-pagination-sequence/user-timeline-pagination-sequence.service.coffee\n###\n\nUserTimelinePaginationSequence = () ->\n    obj = {}\n\n    obj.generate = (config) ->\n        page = 1\n        items = Immutable.List()\n\n        config.minItems = config.minItems || 20\n\n        next = () ->\n            items = Immutable.List()\n            return getContent()\n\n        getContent = () ->\n            config.fetch(page).then (response) ->\n                page++\n\n                data = response.get(\"data\")\n\n                if config.filter\n                    data = config.filter(data)\n\n                if config.map\n                    data = data.map(config.map)\n\n                items = items.concat(data)\n\n                if items.size < config.minItems && response.get(\"next\")\n                    return getContent()\n\n                pagination = Immutable.Map({\n                    items: items,\n                    total: response.get(\"total\"),\n                    next: response.get(\"next\")\n                })\n\n                return pagination\n\n        return {\n            next: () -> next()\n        }\n\n    return obj\n\nangular.module(\"taigaUserTimeline\").factory(\"tgUserTimelinePaginationSequenceService\", UserTimelinePaginationSequence)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: user-timeline/user-timeline/user-timeline.controller.coffee\n###\n\ntaiga = @.taiga\n\nmixOf = @.taiga.mixOf\n\nclass UserTimelineController extends mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin)\n    @.$inject = [\n        \"tgUserTimelineService\"\n    ]\n\n    constructor: (@userTimelineService) ->\n        @.timelineList = Immutable.List()\n        @.scrollDisabled = false\n\n        @.timeline = null\n\n        if @.projectId\n            @.timeline = @userTimelineService.getProjectTimeline(@.projectId)\n        else if @.currentUser\n            @.timeline = @userTimelineService.getProfileTimeline(@.user.get(\"id\"))\n        else\n            @.timeline = @userTimelineService.getUserTimeline(@.user.get(\"id\"))\n\n        @.loadTimeline()\n\n    loadTimeline: () ->\n        @.scrollDisabled = true\n\n        return @.timeline\n            .next()\n            .then (response) =>\n                @.timelineList = @.timelineList.concat(response.get(\"items\"))\n\n                if response.get(\"next\")\n                    @.scrollDisabled = false\n\n                return @.timelineList\n\nangular.module(\"taigaUserTimeline\")\n    .controller(\"UserTimeline\", UserTimelineController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: user-timeline/user-timeline/user-timeline.directive.coffee\n###\n\nUserTimelineDirective = ->\n    return {\n        templateUrl: \"user-timeline/user-timeline/user-timeline.html\",\n        controller: \"UserTimeline\",\n        controllerAs: \"vm\",\n        scope: {\n            projectId: \"=projectid\",\n            user: \"=\",\n            currentUser: \"=\"\n        },\n        bindToController: true\n    }\n\nangular.module(\"taigaProfile\").directive(\"tgUserTimeline\", UserTimelineDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: user-timeline/user-timeline/user-timeline.service.coffee\n###\n\ntaiga = @.taiga\n\nclass UserTimelineService extends taiga.Service\n    @.$inject = [\n        \"tgResources\",\n        \"tgUserTimelinePaginationSequenceService\",\n        \"tgUserTimelineItemType\",\n        \"tgUserTimelineItemTitle\"\n    ]\n\n    constructor: (@rs, @userTimelinePaginationSequenceService, @userTimelineItemType, @userTimelineItemTitle) ->\n\n    _valid_fields: [\n        'status',\n        'subject',\n        'description_diff',\n        'assigned_users',\n        'assigned_to',\n        'points',\n        'severity',\n        'priority',\n        'type',\n        'attachments',\n        'is_iocaine',\n        'content_diff',\n        'name',\n        'estimated_finish',\n        'estimated_start',\n        # customs\n        'blocked',\n        'moveInBacklog',\n        'milestone',\n        'color',\n        'due_date',\n        'due_date_reason'\n    ]\n\n    _invalid: [\n        {# Items with only invalid fields\n            check: (timeline) ->\n                value_diff = timeline.get(\"data\").get(\"value_diff\")\n\n                if value_diff\n                    fieldKey = value_diff.get('key')\n\n                    if @._valid_fields.indexOf(fieldKey) == -1\n                        return true\n                    else if fieldKey == 'attachments' &&\n                         value_diff.get('value').get('new').size == 0\n                        return true\n\n                return false\n        },\n        {# Empty change\n            check: (timeline) ->\n                event = timeline.get('event_type').split(\".\")\n                value_diff = timeline.get(\"data\").get(\"value_diff\")\n                return event[2] == 'change' and value_diff == undefined\n        },\n        {# Deleted\n            check: (timeline) ->\n                event = timeline.get('event_type').split(\".\")\n                return event[2] == 'delete'\n        },\n        {# Project change\n            check: (timeline) ->\n                event = timeline.get('event_type').split(\".\")\n                return event[1] == 'project' && event[2] == 'change'\n        },\n        {# Comment deleted\n            check: (timeline) ->\n                return !!timeline.get(\"data\").get(\"comment_deleted\")\n        },\n        {# Task milestone\n            check: (timeline) ->\n                event = timeline.get('event_type').split(\".\")\n                value_diff = timeline.get(\"data\").get(\"value_diff\")\n\n                if value_diff &&\n                     event[1] == \"task\" &&\n                     event[2] == \"change\" &&\n                     value_diff.get(\"key\") == \"milestone\"\n                    return timeline.get(\"data\").get(\"value_diff\").get(\"value\")\n\n                return false\n        }\n    ]\n\n    _isInValidTimeline: (timeline) ->\n        return _.some @._invalid, (invalid) =>\n            return invalid.check.call(this, timeline)\n\n    _parseEventType: (event_type) ->\n        event_type = event_type.split(\".\")\n\n        return {\n            section: event_type[0],\n            obj: event_type[1],\n            type: event_type[2]\n        }\n\n    _getTimelineObject: (timeline, event) ->\n        if timeline.get('data').get(event.obj)\n            return timeline.get('data').get(event.obj)\n\n    _attachExtraInfoToTimelineEntry: (timeline, event, type) ->\n        title = @userTimelineItemTitle.getTitle(timeline, event, type)\n\n        timeline = timeline.set('title_html', title)\n\n        timeline =  timeline.set('obj', @._getTimelineObject(timeline, event))\n\n        if type.description\n            timeline = timeline.set('description', type.description(timeline))\n\n        if type.member\n            timeline = timeline.set('member', type.member(timeline))\n\n        if timeline.getIn(['data', 'value_diff', 'key']) == 'attachments' &&\n          timeline.hasIn(['data', 'value_diff', 'value', 'new'])\n            timeline = timeline.set('attachments', timeline.getIn(['data', 'value_diff', 'value', 'new']))\n\n        return timeline\n\n    # - create a entry per every item in the values_diff\n    _parseTimeline: (response) ->\n        newdata = Immutable.List()\n\n        response.get('data').forEach (item) =>\n            event = @._parseEventType(item.get('event_type'))\n\n            data = item.get('data')\n            values_diff = data.get('values_diff')\n\n            if values_diff && values_diff.count()\n                # blocked/unblocked change must be a single change\n                if values_diff.has('is_blocked')\n                    values_diff = Immutable.Map({'blocked': values_diff})\n\n                if values_diff.has('milestone')\n                    if event.obj == 'userstory'\n                        values_diff = Immutable.Map({'moveInBacklog': values_diff})\n                    else\n                        values_diff = values_diff.deleteIn(['values_diff', 'milestone'])\n\n                else if event.obj == 'milestone'\n                     values_diff = Immutable.Map({'milestone': values_diff})\n\n                values_diff.forEach (value, key) =>\n                    obj = Immutable.Map({\n                        key: key,\n                        value: value\n                    })\n\n                    newItem = item.setIn(['data', 'value_diff'], obj)\n                    newItem = newItem.deleteIn(['data', 'values_diff'])\n                    newdata = newdata.push(newItem)\n            else\n                newItem = item.deleteIn(['data', 'values_diff'])\n                newdata = newdata.push(newItem)\n\n        return response.set('data', newdata)\n\n    _addEntyAttributes: (item) ->\n        event = @._parseEventType(item.get('event_type'))\n        type = @userTimelineItemType.getType(item, event)\n\n        return @._attachExtraInfoToTimelineEntry(item, event, type)\n\n    getProfileTimeline: (userId) ->\n        config = {}\n\n        config.fetch = (page) =>\n            return @rs.users.getProfileTimeline(userId, page)\n                .then (response) =>\n                    return @._parseTimeline(response)\n\n        config.map = (obj) => @._addEntyAttributes(obj)\n\n        config.filter = (items) =>\n            return items.filterNot (item) => @._isInValidTimeline(item)\n\n        return @userTimelinePaginationSequenceService.generate(config)\n\n    getUserTimeline: (userId) ->\n        config = {}\n\n        config.fetch = (page) =>\n            return @rs.users.getUserTimeline(userId, page)\n                .then (response) =>\n                    return @._parseTimeline(response)\n\n        config.map = (obj) => @._addEntyAttributes(obj)\n\n        config.filter = (items) =>\n            return items.filterNot (item) => @._isInValidTimeline(item)\n\n        return @userTimelinePaginationSequenceService.generate(config)\n\n    getProjectTimeline: (projectId) ->\n        config = {}\n\n        config.fetch = (page) =>\n            return @rs.projects.getTimeline(projectId, page)\n                .then (response) => return @._parseTimeline(response)\n\n        config.map = (obj) => @._addEntyAttributes(obj)\n\n        config.filter = (items) =>\n            return items.filterNot (item) => @._isInValidTimeline(item)\n\n        return @userTimelinePaginationSequenceService.generate(config)\n\nangular.module(\"taigaUserTimeline\").service(\"tgUserTimelineService\", UserTimelineService)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: utils/isolate-click.directive.coffee\n###\n\nIsolateClickDirective = () ->\n    link = (scope, el, attrs) ->\n        el.on 'click', (e) =>\n            e.stopPropagation()\n\n    return {link: link}\n\nangular.module(\"taigaUtils\").directive(\"tgIsolateClick\", IsolateClickDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: wiki/history/wiki-history-diff.directive.coffee\n###\n\nmodule = angular.module('taigaWikiHistory')\n\nWikiHistoryDiffDirective = () ->\n    return {\n        templateUrl:\"wiki/history/wiki-history-diff.html\",\n        scope: {\n            key: \"<\",\n            diff: \"<\"\n        }\n    }\n\nmodule.directive(\"tgWikiHistoryDiff\", WikiHistoryDiffDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: wiki/history/wiki-history-entry.directive.coffee\n###\n\nmodule = angular.module('taigaWikiHistory')\n\nWikiHistoryEntryDirective = () ->\n    link = (scope, el, attr) ->\n        scope.singleHistoryEntry = scope.historyEntry.toJS()\n\n    return {\n        link: link,\n        templateUrl:\"wiki/history/wiki-history-entry.html\",\n        scope: {\n            historyEntry: \"<\"\n        }\n    }\n\nmodule.directive(\"tgWikiHistoryEntry\", WikiHistoryEntryDirective)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: wiki/history/wiki-history.controller.coffee\n###\n\ntaiga = @.taiga\n\nmodule = angular.module(\"taigaWikiHistory\")\n\nclass WikiHistoryController\n    @.$inject = [\n        \"tgActivityService\"\n    ]\n\n    constructor: (@activityService) ->\n        taiga.defineImmutableProperty @, 'historyEntries', () =>\n            return @activityService.entries\n        taiga.defineImmutableProperty @, 'disablePagination', () =>\n            return @activityService.disablePagination\n        @.toggle = false\n\n    initializeHistory: (wikiId) ->\n        if wikiId\n            @activityService.init('wiki', wikiId)\n        @.loadHistory()\n\n    loadHistory: ()->\n        @activityService.fetchEntries()\n\n    nextPage: () ->\n        @activityService.nextPage()\n\nmodule.controller(\"WikiHistoryCtrl\", WikiHistoryController)\n","###\n# Copyright (C) 2014-2018 Taiga Agile LLC\n#\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as\n# published by the Free Software Foundation, either version 3 of the\n# License, or (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program. If not, see <http://www.gnu.org/licenses/>.\n#\n# File: wiki/history/wiki-history.directive.coffee\n###\n\nbindOnce = @.taiga.bindOnce\n\nmodule = angular.module('taigaWikiHistory')\n\n\nWikiHistoryDirective = () ->\n    link = (scope, el, attrs, ctrl) ->\n        bindOnce scope, 'vm.wikiId', (value) ->\n            ctrl.initializeHistory(value)\n\n    return {\n        scope: {},\n        bindToController: {\n            wikiId: \"<\"\n        }\n        controller: \"WikiHistoryCtrl\",\n        controllerAs: \"vm\",\n        templateUrl:\"wiki/history/wiki-history.html\",\n        link: link\n    }\n\nmodule.directive(\"tgWikiHistory\", WikiHistoryDirective)\n"]}